'use strict';

var path = require('path');
var commander = require('commander');
var fsExtra = require('fs-extra');
var isObject = require('lodash/isObject');
var isArray = require('lodash/isArray');
var uniq = require('lodash/uniq');
var isString = require('lodash/isString');
var _defineProperty = require('@babel/runtime/helpers/defineProperty');
var _objectSpread$1 = require('@babel/runtime/helpers/objectSpread2');
var _toConsumableArray = require('@babel/runtime/helpers/toConsumableArray');
var _classCallCheck = require('@babel/runtime/helpers/classCallCheck');
var _createClass = require('@babel/runtime/helpers/createClass');
require('lodash/uniqWith');
require('lodash/sortBy');
var _callSuper = require('@babel/runtime/helpers/callSuper');
var _inherits = require('@babel/runtime/helpers/inherits');
var EventEmitter = require('wolfy87-eventemitter');
var changeCase = require('change-case');
var uniqBy = require('lodash/uniqBy');
var _typeof = require('@babel/runtime/helpers/typeof');
var _objectWithoutProperties = require('@babel/runtime/helpers/objectWithoutProperties');
var _slicedToArray = require('@babel/runtime/helpers/slicedToArray');
require('lodash/isEmpty');
var React = require('react');
var _extends = require('@babel/runtime/helpers/extends');
var PropTypes$1 = require('prop-types');
var reactIntl = require('react-intl');
var uuid = require('uuid');
var classNames = require('classnames');
var dayjs = require('dayjs');
var _regeneratorRuntime = require('@babel/runtime/helpers/regeneratorRuntime');
var _asyncToGenerator = require('@babel/runtime/helpers/asyncToGenerator');
var isNumber = require('lodash/isNumber');
var tinycolor = require('tinycolor2');
require('slugify');
var regexparam = require('regexparam');
var index_js = require('use-sync-external-store/shim/index.js');
var core = require('@react-spring/core');
var web = require('@react-spring/web');
var reactFontawesome = require('@fortawesome/react-fontawesome');
require('@fortawesome/free-solid-svg-icons/faAngleLeft');
var react = require('@use-gesture/react');
require('raf');
require('screenfull');
require('debug');
require('css-mediaquery');
require('lodash/clamp');
require('lodash/get');
var queryString = require('query-string');
require('react-dom');
require('@fortawesome/free-solid-svg-icons/faAngleDown');
require('@fortawesome/free-solid-svg-icons/faAngleUp');
require('lodash/throttle');
require('react-helmet');
var faAd = require('@fortawesome/free-solid-svg-icons/faAd');
var faImage = require('@fortawesome/free-solid-svg-icons/faImage');
var faMusic = require('@fortawesome/free-solid-svg-icons/faMusic');
var faMapMarkerAlt = require('@fortawesome/free-solid-svg-icons/faMapMarkerAlt');
var faMapMarkedAlt = require('@fortawesome/free-solid-svg-icons/faMapMarkedAlt');
var faVideo = require('@fortawesome/free-solid-svg-icons/faVideo');
var faPlay = require('@fortawesome/free-solid-svg-icons/faPlay');
var faRedo = require('@fortawesome/free-solid-svg-icons/faRedo');
require('pascal-case');
var faCommentDots = require('@fortawesome/free-solid-svg-icons/faCommentDots');
var faCheck = require('@fortawesome/free-solid-svg-icons/faCheck');
var faTimes = require('@fortawesome/free-solid-svg-icons/faTimes');
var faCircle = require('@fortawesome/free-solid-svg-icons/faCircle');
var faPercent = require('@fortawesome/free-solid-svg-icons/faPercent');
var isFunction = require('lodash/isFunction');
var fetch$1 = require('node-fetch');
var parseSRT = require('parse-srt');
var faSpinner = require('@fortawesome/free-solid-svg-icons/faSpinner');
var Cookies = require('js-cookie');
require('react/jsx-runtime');
var pathToRegexp = require('path-to-regexp');
require('mitt');
var isPlainObject = require('lodash/isPlainObject');
var _objectDestructuringEmpty = require('@babel/runtime/helpers/objectDestructuringEmpty');
var reactTransitionGroup = require('react-transition-group');
var reactShare = require('react-share');
var require$$0 = require('../fields');

function _interopNamespaceDefault(e) {
    var n = Object.create(null);
    if (e) {
        Object.keys(e).forEach(function (k) {
            if (k !== 'default') {
                var d = Object.getOwnPropertyDescriptor(e, k);
                Object.defineProperty(n, k, d.get ? d : {
                    enumerable: true,
                    get: function () { return e[k]; }
                });
            }
        });
    }
    n.default = e;
    return Object.freeze(n);
}

var React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);

class FontsParser {
    constructor({ fieldsManager, screensManager, fieldsPattern = {} }) {
        this.fieldsManager = fieldsManager;
        this.screensManager = screensManager;
        this.fieldsPatternCache = fieldsPattern || {};
    }

    getFieldsPatternByScreen(type) {
        if (typeof this.fieldsPatternCache[type] === 'undefined') {
            const { fields = [] } = this.screensManager.getDefinition(type) || {};
            this.fieldsPatternCache[type] = this.getFieldsPattern(fields);
        }
        return this.fieldsPatternCache[type];
    }

    // Extract fonts
    parse(story) {
        if (story === null) {
            return story;
        }

        // Extract fonts from screen
        const { theme = null, components = [] } = story || {};
        const fonts = uniq(components.reduce((currentFonts, screen) => {
            const { type } = screen;
            const fieldsPattern = this.getFieldsPatternByScreen(type);
            const newFonts = FontsParser.extractFontsWithPaths(screen, fieldsPattern);
            return newFonts.length > 0 ? [...currentFonts, ...newFonts] : currentFonts;
        }, []), 'name');

        // Extract fonts from theme
        if (theme !== null) {
            const { fonts: themeFonts = [], ...newTheme } = this.parse(theme);
            return fonts.length > 0 || themeFonts.length > 0 ? {
                ...story,
                theme: newTheme,
                fonts: uniq([
                    ...themeFonts,
                    ...fonts,
                ], 'name'),
            } : story;
        }

        return fonts.length > 0 ? {
            ...story,
            fonts,
        } : story;
    }

    getFieldsPattern(fields, namePrefix = null) {
        return fields.reduce((patterns, field) => {
            const { name = null, type = null } = field;
            const path = [namePrefix, name].filter((it) => it !== null).join('\\.');
            const fieldDefinition = {
                ...(type !== null ? this.fieldsManager.getDefinition(type) : null),
                ...field,
            };

            // also check settings fields
            const { fields: subFields = [], itemsField = null, settings = [] } = fieldDefinition;

            return [
                ...patterns,
                ...(FontsParser.fieldIsFontFamily(fieldDefinition)
                    ? [new RegExp(`^${path}$`)]
                    : []),
                ...this.getFieldsPattern(subFields, path),
                ...this.getFieldsPattern(settings, path),
                ...(itemsField !== null
                    ? this.getFieldsPattern([itemsField], `${path}\\.[0-9]+`)
                    : []),
            ];
        }, []);
    }

    static fieldIsFontFamily({ id = null }) {
        return id === 'font-family';
    }

    static valueIsFont({ type = null }) {
        return type === 'custom' || type === 'google';
    }

    static extractFontsWithPaths(data, patterns, keyPrefix = null) {
        const dataIsArray = isArray(data);
        const keys = dataIsArray ? [...data.keys()] : Object.keys(data);
        return keys.reduce((currentFonts, key) => {
            const path = [keyPrefix, key].filter((it) => it !== null).join('.');
            const patternMatch = patterns.reduce(
                (found, pattern) => found || pattern.test(path),
                false,
            );
            const value = data[key];
            let font = null;
            let subFonts = null;
            if (patternMatch && isObject(value) && FontsParser.valueIsFont(value)) {
                font = value;
            } else if (isObject(value) || isArray(value)) {
                subFonts = FontsParser.extractFontsWithPaths(value, patterns, path);
            }
            return subFonts !== null || font !== null
                ? [...currentFonts, ...(subFonts || []), ...(font !== null ? [font] : [])]
                : currentFonts;
        }, []);
    }
}

class MediasParser {
    constructor({ fieldsManager, screensManager, fieldsPattern = {} }) {
        this.fieldsManager = fieldsManager;
        this.screensManager = screensManager;
        this.fieldsPatternCache = fieldsPattern || {};
        this.parsedThemesCache = {};
    }

    getParsedStoryTheme(storyId, theme) {
        if (typeof this.parsedThemesCache[storyId] === 'undefined') {
            const { medias: themeMedias, ...newTheme } = this.toPath(theme);
            this.parsedThemesCache[storyId] = { themeMedias, newTheme };
        }
        return this.parsedThemesCache[storyId];
    }

    getFieldsPatternByScreen(type) {
        if (typeof this.fieldsPatternCache[type] === 'undefined') {
            const { fields = [] } = this.screensManager.getDefinition(type) || {};
            this.fieldsPatternCache[type] = this.getFieldsPattern(fields);
        }
        return this.fieldsPatternCache[type];
    }

    // Convert medias object to path
    toPath(story) {
        if (story === null) {
            return story;
        }
        const { id: storyId = null, theme = null, components = [] } = story || {};
        const { components: newComponents, medias } = components.reduce(
            ({ components: previousComponents, medias: currentMedias }, screen) => {
                const { type } = screen;
                const fieldsPattern = this.getFieldsPatternByScreen(type);
                const { data: newScreen, medias: newMedias } = MediasParser.replaceMediasWithPaths(
                    screen,
                    fieldsPattern,
                );
                return {
                    components: [...previousComponents, newScreen],
                    medias: {
                        ...currentMedias,
                        ...newMedias,
                    },
                };
            },
            { components: [], medias: null },
        );

        if (theme !== null) {
            const { medias: themeMedias, ...newTheme } = this.getParsedStoryTheme(storyId, theme);
            return medias !== null || themeMedias !== null
                ? {
                      ...story,
                      theme: newTheme,
                      components: newComponents,
                      medias: {
                          ...themeMedias,
                          ...medias,
                      },
                  }
                : story;
        }

        return medias !== null
            ? {
                  ...story,
                  components: newComponents,
                  medias,
              }
            : story;
    }

    // Convert path to medias object
    fromPath(story, defaultMedias = null) {
        if (story === null) {
            return story;
        }

        const { theme = null, components = [], medias = defaultMedias } = story || {};
        if (medias === null && theme === null) {
            return story;
        }

        // Replace path with medias objects
        // const newComponents =
        //     medias !== null
        //         ? components.map((screen) => {
        //               const { type } = screen;
        //               const fieldsPattern = this.getFieldsPatternByScreen(type);
        //               return MediasParser.replacePathsWithMedias(screen, medias, fieldsPattern);
        //           })
        //         : components;

        // Faster parsing with data only
        const componentsPattern = MediasParser.getMediaPatternsFromData(components);
        const newComponents =
            medias !== null && componentsPattern.length > 0
                ? MediasParser.replacePathsWithMedias(components, medias, componentsPattern)
                : components;

        // Replace path with medias object in theme
        if (theme !== null) {
            const newTheme = this.fromPath(theme, medias);
            return newTheme !== theme || newComponents !== components
                ? {
                      ...story,
                      theme: newTheme,
                      components: newComponents,
                  }
                : story;
        }

        return newComponents !== components
            ? {
                  ...story,
                  components: newComponents,
              }
            : story;
    }

    getFieldsPattern(fields, namePrefix = null) {
        return fields.reduce((patterns, field) => {
            const { name = null, type = null } = field;
            const path = [namePrefix, name].filter((it) => it !== null).join('\\.');
            const fieldDefinition = {
                ...(type !== null ? this.fieldsManager.getDefinition(type) : null),
                ...field,
            };

            // also check settings fields
            const { fields: subFields = [], itemsField = null, settings = [] } = fieldDefinition;

            return [
                ...patterns,
                ...(MediasParser.fieldIsMedia(fieldDefinition) ? [new RegExp(`^${path}$`)] : []),
                ...(MediasParser.fieldIsFontFamily(fieldDefinition)
                    ? [
                          new RegExp(`^${path}\\.media$`),
                          new RegExp(`^${path}\\.variants\\.[0-9]+\\.media$`),
                      ]
                    : []),
                ...this.getFieldsPattern(subFields, path),
                ...this.getFieldsPattern(settings, path),
                ...(itemsField !== null
                    ? this.getFieldsPattern([itemsField], `${path}\\.[0-9]+`)
                    : []),
            ];
        }, []);
    }

    static fieldIsMedia({ media = false }) {
        return media;
    }

    static fieldIsFontFamily({ id = null }) {
        return id === 'font-family';
    }

    static replacePathsWithMedias(data, medias, patterns, keyPrefix = null) {
        const dataIsArray = isArray(data);
        return MediasParser.keys(data).reduce(
            (newData, key) => {
                const path = [keyPrefix, key].filter((it) => it !== null).join('.');
                const patternMatch = patterns.reduce(
                    (found, pattern) => found || pattern.test(path),
                    false,
                );
                const value = data[key];
                let newValue;
                if (patternMatch) {
                    newValue = isObject(value) ? value : medias[value] || value;
                } else {
                    newValue =
                        isObject(value) || isArray(value)
                            ? MediasParser.replacePathsWithMedias(value, medias, patterns, path)
                            : value;
                }
                return dataIsArray
                    ? [...newData, newValue]
                    : {
                          ...newData,
                          [key]: newValue,
                      };
            },
            dataIsArray ? [] : {},
        );
    }

    static getMediaPath({ id = null }) {
        return id !== null ? `media://${id}` : null;
    }

    static replaceMediasWithPaths(data, patterns, medias = null, keyPrefix = null) {
        const dataIsArray = isArray(data);
        const dataKeys = MediasParser.keys(data);
        return dataKeys.reduce(
            ({ data: currentData, medias: currentMedias }, key) => {
                const path = [keyPrefix, key].filter((it) => it !== null).join('.');
                const patternMatch = patterns.reduce(
                    (found, pattern) => found || pattern.test(path),
                    false,
                );
                const value = data[key];
                let newValue;
                let media = null;
                let subMedias = null;
                if (patternMatch && isObject(value)) {
                    const mediaPath = MediasParser.getMediaPath(value);
                    newValue = mediaPath !== null ? mediaPath : value;
                    media = mediaPath !== null ? value : null;
                } else if (isObject(value) || isArray(value)) {
                    const subReturn = MediasParser.replaceMediasWithPaths(
                        value,
                        patterns,
                        medias,
                        path,
                    );
                    newValue = subReturn.data;
                    subMedias = subReturn.medias;
                } else {
                    newValue = value;
                }
                return {
                    data: dataIsArray
                        ? [...(currentData || []), newValue]
                        : {
                              ...currentData,
                              [key]: newValue,
                          },
                    medias:
                        media !== null
                            ? {
                                  ...currentMedias,
                                  ...subMedias,
                                  [newValue]: media,
                              }
                            : {
                                  ...currentMedias,
                                  ...subMedias,
                              },
                };
            },
            {
                data: dataKeys.length === 0 ? data : null,
                medias,
            },
        );
    }

    static getMediaPatternsFromData(obj) {
        const dotObj = MediasParser.dot(obj);
        return Object.keys(dotObj)
            .filter(
                (key) => isString(dotObj[key]) && dotObj[key].match(/^media:\/\/([^/]+)$/) !== null,
            )
            .map((it) => new RegExp(`^${it}$`));
    }

    static dot(obj) {
        return MediasParser.keys(obj).reduce((acc, key) => {
            if (typeof obj[key] !== 'object' || !obj[key]) {
                return {
                    ...acc,
                    [key]: obj[key],
                };
            }

            const flattenedChild = MediasParser.dot(obj[key]);

            return {
                ...acc,
                ...MediasParser.keys(flattenedChild).reduce(
                    (childAcc, childKey) => ({
                        ...childAcc,
                        [`${key}.${childKey}`]: flattenedChild[childKey],
                    }),
                    {},
                ),
            };
        }, {});
    }

    static keys(obj) {
        return isArray(obj) ? [...obj.keys()] : Object.keys(obj);
    }
}

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

/* eslint-disable class-methods-use-this */
var Tracking =
/*#__PURE__*/
function () {
  function Tracking() {
    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, Tracking);

    this.options = _objectSpread({
      dataLayer: typeof window !== 'undefined' ? window.dataLayer || null : null
    }, opts);
  }

  _createClass(Tracking, [{
    key: "push",
    value: function push() {
      var dataLayer = this.options.dataLayer;

      if (dataLayer === null) {
        return;
      }

      dataLayer.push.apply(dataLayer, arguments);
    }
  }, {
    key: "trackEvent",
    value: function trackEvent(category, action) {
      var label = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var value = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
      this.push({
        event: 'eventInteraction',
        eventCategory: category,
        eventAction: action,
        eventLabel: label,
        eventValue: value
      });
    }
  }, {
    key: "trackSocial",
    value: function trackSocial(network, action) {
      var target = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      this.push({
        event: 'socialInteraction',
        socialNetwork: network,
        socialAction: action,
        socialTarget: target || this.getSocialTarget()
      });
    }
  }, {
    key: "getSocialTarget",
    value: function getSocialTarget() {
      return typeof window !== 'undefined' ? "".concat(window.location.protocol, "//").concat(window.location.host) : null;
    }
  }]);

  return Tracking;
}();

var TrackingContext = React.createContext();

({
  tracking: PropTypes$1.instanceOf(Tracking),
  children: PropTypes$1.node
});

/**
 * Core
 */
var history$1 = PropTypes$1.shape({
  listen: PropTypes$1.func.isRequired,
  push: PropTypes$1.func.isRequired
});
var location$1 = PropTypes$1.shape({
  pathname: PropTypes$1.string,
  search: PropTypes$1.string
});
var intl = PropTypes$1.shape({
  locale: PropTypes$1.string.isRequired,
  formatMessage: PropTypes$1.func.isRequired
});
var defaultMessageContent$1 = PropTypes$1.shape({
  type: PropTypes$1.number,
  value: PropTypes$1.string
});
var defaultMessage$1 = PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.arrayOf(defaultMessageContent$1)]);
var message$2 = PropTypes$1.shape({
  id: PropTypes$1.string,
  defaultMessage: defaultMessage$1.isRequired,
  description: PropTypes$1.string
});
var text$2 = PropTypes$1.oneOfType([message$2, PropTypes$1.string]);
var label$1 = PropTypes$1.oneOfType([message$2, PropTypes$1.node]);
var statusCode = PropTypes$1.oneOf([401, 403, 404, 500]);
var ref = PropTypes$1.oneOfType([PropTypes$1.shape({
  current: PropTypes$1.any // eslint-disable-line react/forbid-prop-types
}), PropTypes$1.func]);
var target$1 = PropTypes$1.oneOf(['_blank', '_self', '_parent']);
var interaction$1 = PropTypes$1.oneOf(['tap', 'swipe']);
var interactions = PropTypes$1.arrayOf(interaction$1);
var trackingVariables = PropTypes$1.objectOf(PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number, PropTypes$1.array]));
var progress = PropTypes$1.shape({
  currentTime: PropTypes$1.number,
  duration: PropTypes$1.number
});

/**
 * Site
 */
var user = PropTypes$1.shape({
  id: PropTypes$1.number,
  firstname: PropTypes$1.string,
  lastname: PropTypes$1.string,
  email: PropTypes$1.string,
  gender: PropTypes$1.string,
  birthdate: PropTypes$1.string
});
var menuItem$1 = PropTypes$1.shape({
  id: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  label: label$1,
  url: PropTypes$1.string,
  external: PropTypes$1.bool,
  active: PropTypes$1.bool
});
var menuItems = PropTypes$1.arrayOf(menuItem$1);
var breadcrumb$1 = PropTypes$1.shape({
  label: label$1,
  url: PropTypes$1.string
});
var breadcrumbs = PropTypes$1.arrayOf(breadcrumb$1);
var device$1 = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired
});
var devices = PropTypes$1.arrayOf(device$1);
var modal$1 = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired
});
var modals = PropTypes$1.arrayOf(modal$1);
var panel$1 = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired
});
var panels = PropTypes$1.arrayOf(panel$1);
var button$2 = PropTypes$1.shape({
  label: label$1,
  onClick: PropTypes$1.func
});
var buttons$1 = PropTypes$1.arrayOf(button$2);
var bootstrapThemeStrings$1 = ['primary', 'secondary', 'success', 'danger', 'warning', 'info', 'light', 'dark'];
var bootstrapThemes = PropTypes$1.oneOf(bootstrapThemeStrings$1);
var buttonTheme = PropTypes$1.oneOf([].concat(bootstrapThemeStrings$1, ['outline-primary', 'outline-secondary', 'outline-success', 'outline-danger', 'outline-warning', 'outline-info', 'outline-light', 'outline-dark', 'outline-link', null]));
var buttonSize = PropTypes$1.oneOf(['lg', 'sm', null]);
var formControlSize = PropTypes$1.oneOf(['lg', 'sm', null]);
var dropdownAlign = PropTypes$1.oneOf(['start', 'end']);
var componentNames = function componentNames(Components) {
  return PropTypes$1.oneOf(Object.keys(Components).map(function (it) {
    return changeCase.snakeCase(it);
  }));
};
var component$1 = PropTypes$1.oneOfType([PropTypes$1.object, PropTypes$1.func]);
var components = PropTypes$1.objectOf(component$1);

/**
 * Forms
 */
var errors$1 = PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.arrayOf(PropTypes$1.string)]);
var formErrors = PropTypes$1.objectOf(errors$1);
var selectOption$1 = PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.shape({
  value: PropTypes$1.any,
  // eslint-disable-line
  label: label$1
})]);
var selectOptions = PropTypes$1.arrayOf(selectOption$1);
var formField$1 = PropTypes$1.shape({
  name: PropTypes$1.string,
  component: component$1
});
var formFields = PropTypes$1.arrayOf(formField$1);

/**
 * Medias
 */
var mediaMetadataShape$1 = {
  filename: PropTypes$1.string,
  size: PropTypes$1.number,
  mime: PropTypes$1.string
};
var mediaFile$1 = PropTypes$1.shape({
  id: PropTypes$1.string,
  handle: PropTypes$1.string,
  type: PropTypes$1.string,
  mime: PropTypes$1.string,
  url: PropTypes$1.string
});
var mediaShape$1 = {
  id: PropTypes$1.string,
  type: PropTypes$1.string.isRequired,
  url: PropTypes$1.string,
  // .isRequired,
  thumbnail_url: PropTypes$1.string,
  name: PropTypes$1.string,
  metadata: PropTypes$1.shape(_objectSpread$1({}, mediaMetadataShape$1)),
  files: PropTypes$1.objectOf(mediaFile$1)
};
var media$1 = PropTypes$1.shape(mediaShape$1);
var medias = PropTypes$1.arrayOf(media$1);
var mediaTypes = PropTypes$1.oneOf(['image', 'video', 'audio', 'closed-captions', 'font']);
var imageMedia$1 = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape$1), {}, {
  type: PropTypes$1.oneOf(['image', 'video']),
  metadata: PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaMetadataShape$1), {}, {
    width: PropTypes$1.number,
    height: PropTypes$1.number
  }))
}));
var imageMedias = PropTypes$1.arrayOf(imageMedia$1);
var fontMedia$1 = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape$1), {}, {
  type: PropTypes$1.oneOf(['font']),
  metadata: PropTypes$1.shape(_objectSpread$1({}, mediaMetadataShape$1))
}));
var fontMedias = PropTypes$1.arrayOf(fontMedia$1);
var videoMedia$1 = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape$1), {}, {
  type: PropTypes$1.oneOf(['video']),
  metadata: PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaMetadataShape$1), {}, {
    width: PropTypes$1.number,
    height: PropTypes$1.number,
    duration: PropTypes$1.number
  }))
}));
var videoMedias = PropTypes$1.arrayOf(videoMedia$1);
var audioMedia$1 = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape$1), {}, {
  type: PropTypes$1.oneOf(['audio']),
  metadata: PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaMetadataShape$1), {}, {
    duration: PropTypes$1.number
  }))
}));
var audioMedias = PropTypes$1.arrayOf(audioMedia$1);
var closedCaptionsMedia$1 = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape$1), {}, {
  type: PropTypes$1.oneOf(['closed-captions'])
}));

/**
 * Style
 */

var customFont = PropTypes$1.shape({
  type: PropTypes$1.oneOf(['system', 'google', 'custom']),
  name: PropTypes$1.string,
  media: fontMedia$1
});
var font$2 = PropTypes$1.oneOfType([PropTypes$1.object, PropTypes$1.string]);
var fonts$1 = PropTypes$1.arrayOf(font$2);
var textAlign$1 = PropTypes$1.oneOf(['left', 'right', 'center']);
var color$2 = PropTypes$1.shape({
  color: PropTypes$1.string,
  alpha: PropTypes$1.number
});
var textStyle$1 = PropTypes$1.shape({
  fontFamily: font$2,
  fontSize: PropTypes$1.number,
  fontStyle: PropTypes$1.shape({
    bold: PropTypes$1.bool,
    italic: PropTypes$1.bool,
    underline: PropTypes$1.bool,
    upperCase: PropTypes$1.bool
  }),
  align: textAlign$1,
  color: color$2,
  letterSpacing: PropTypes$1.number,
  lineHeight: PropTypes$1.number
});
var borderTypes$1 = PropTypes$1.oneOf(['dotted', 'dashed', 'solid', 'double', 'groove', 'ridge', 'inset', 'outset', 'hidden']);
var shadowType$1 = PropTypes$1.shape({
  shadowDistance: PropTypes$1.number,
  shadowBlur: PropTypes$1.number,
  shadowColor: color$2
});
var borderStyle$1 = PropTypes$1.shape({
  width: PropTypes$1.number,
  style: borderTypes$1,
  radius: PropTypes$1.number,
  color: color$2
});
var boxStyle$1 = PropTypes$1.shape({
  backgroundColor: color$2,
  borderRadius: PropTypes$1.number,
  borderWidth: PropTypes$1.number,
  borderColor: color$2,
  borderStyle: borderTypes$1,
  shadow: shadowType$1
});
var margin = PropTypes$1.shape({
  top: PropTypes$1.number,
  bottom: PropTypes$1.number
});
var gridLayout = PropTypes$1.arrayOf(PropTypes$1.shape({
  rows: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.arrayOf(PropTypes$1.number)]),
  columns: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.arrayOf(PropTypes$1.number)])
}));
var objectFitSize$1 = PropTypes$1.oneOf(['cover', 'contain', null]);
var objectFit = PropTypes$1.shape({
  fit: objectFitSize$1,
  horizontalPosition: PropTypes$1.oneOf(['left', 'center', 'right']),
  verticalPosition: PropTypes$1.oneOf(['top', 'center', 'bottom'])
});

/**
 * Elements
 */

var textElement$2 = PropTypes$1.shape({
  body: PropTypes$1.string,
  textStyle: textStyle$1
});
var headingElement$2 = textElement$2;
var inputElement$1 = PropTypes$1.shape({
  label: PropTypes$1.string,
  textStyle: textStyle$1
});
var imageElement$1 = PropTypes$1.shape({
  media: imageMedia$1
});
var imageElements = PropTypes$1.arrayOf(imageElement$1);
var videoElement$1 = PropTypes$1.shape({
  media: videoMedia$1,
  autoPlay: PropTypes$1.bool,
  loop: PropTypes$1.bool,
  closedCaptions: closedCaptionsMedia$1,
  withSeekBar: PropTypes$1.bool,
  withControls: PropTypes$1.bool
});
var visualElement$1 = PropTypes$1.shape({
  media: imageMedia$1
});
var visualElements = PropTypes$1.arrayOf(visualElement$1);
var audioElement$1 = PropTypes$1.shape({
  media: audioMedia$1,
  autoPlay: PropTypes$1.bool,
  loop: PropTypes$1.bool,
  closedCaptions: closedCaptionsMedia$1,
  withPlayPause: PropTypes$1.bool
});
var closedCaptionsElement = PropTypes$1.shape({
  media: closedCaptionsMedia$1
});
var backgroundElement$1 = PropTypes$1.shape({
  color: color$2,
  image: imageMedia$1,
  video: videoMedia$1
});
var imageElementWithCaption$1 = PropTypes$1.shape({
  image: imageMedia$1,
  caption: textElement$2
});
var imageElementsWithCaption = PropTypes$1.arrayOf(imageElementWithCaption$1);
var stackDirection$1 = PropTypes$1.oneOf(['horizontal', 'vertical']);
var stackAlign$1 = PropTypes$1.oneOf(['start', 'center', 'end']);
var stackSpacing$1 = PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.oneOf(['between', 'evenly', 'around'])]);
var stackElement = PropTypes$1.shape({
  direction: stackDirection$1,
  align: stackAlign$1,
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  spacing: stackSpacing$1,
  reverse: PropTypes$1.bool
});
var gridElement = PropTypes$1.shape({
  layout: PropTypes$1.arrayOf(PropTypes$1.string),
  spacing: PropTypes$1.number
});
var geoPosition$2 = PropTypes$1.shape({
  lat: PropTypes$1.number,
  lng: PropTypes$1.number
});
var markerShape$1 = {
  id: PropTypes$1.number,
  geoPosition: geoPosition$2,
  title: headingElement$2,
  subtitle: headingElement$2,
  description: textElement$2
};
var marker$2 = PropTypes$1.shape(_objectSpread$1({}, markerShape$1));
var markers$1 = PropTypes$1.arrayOf(marker$2);
var markerWithImage$2 = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, markerShape$1), {}, {
  image: imageMedia$1
}));
var markersWithImage$1 = PropTypes$1.arrayOf(markerWithImage$2);
var answerShape$1 = {
  id: PropTypes$1.string,
  label: textElement$2
};
var answer$2 = PropTypes$1.shape(_objectSpread$1({}, answerShape$1));
var quizAnswer$2 = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, answerShape$1), {}, {
  good: PropTypes$1.bool
}));
var answers$1 = PropTypes$1.arrayOf(answer$2);
var quizAnswers$1 = PropTypes$1.arrayOf(quizAnswer$2);
var callToActionTypes$1 = PropTypes$1.oneOf(['swipe-up', 'button']);
var callToAction$1 = PropTypes$1.shape({
  active: PropTypes$1.bool,
  type: callToActionTypes$1,
  url: PropTypes$1.string,
  label: textElement$2,
  buttonStyle: boxStyle$1
});
var shareIncentive = PropTypes$1.shape({
  active: PropTypes$1.bool,
  label: textElement$2,
  boxStyle: boxStyle$1
});
var activeForm = PropTypes$1.shape({
  active: PropTypes$1.bool
});
var speaker$2 = PropTypes$1.shape({
  id: PropTypes$1.string,
  name: PropTypes$1.string,
  avatar: imageMedia$1,
  side: PropTypes$1.oneOf(['left', 'right']),
  color: color$2
});
var speakers$2 = PropTypes$1.arrayOf(speaker$2);
var conversationMessage$1 = PropTypes$1.shape({
  speaker: PropTypes$1.string,
  message: PropTypes$1.string,
  image: imageMedia$1,
  audio: audioMedia$1,
  timingOverrides: PropTypes$1.shape({
    enabled: PropTypes$1.bool,
    appearDelay: PropTypes$1.number,
    writingStateDuration: PropTypes$1.number
  })
});
var conversationMessages$1 = PropTypes$1.arrayOf(conversationMessage$1);
var conversation$1 = PropTypes$1.shape({
  speakers: speakers$2,
  textStyle: textStyle$1,
  messages: conversationMessages$1
});

/**
 * Definitions
 */

var fieldShape$1 = {
  name: PropTypes$1.string,
  type: PropTypes$1.string.isRequired,
  label: text$2
};
var field$1 = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, fieldShape$1), {}, {
  isSection: PropTypes$1.bool,
  fields: PropTypes$1.arrayOf(PropTypes$1.shape(fieldShape$1))
}));
var fields$a = PropTypes$1.arrayOf(field$1);
var screenDefinition$1 = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired,
  type: PropTypes$1.oneOf(['screen']).isRequired,
  title: text$2.isRequired,
  layouts: PropTypes$1.arrayOf(PropTypes$1.string),
  fields: fields$a
});
var screenDefinitions = PropTypes$1.arrayOf(screenDefinition$1);
var fieldDefinition$1 = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired,
  type: PropTypes$1.oneOf(['field']).isRequired,
  title: text$2.isRequired,
  fields: fields$a
});
var fieldDefinitions = PropTypes$1.arrayOf(fieldDefinition$1);

/**
 * Components
 */
var storyComponentShape$1 = {
  type: PropTypes$1.string.isRequired
};
var storyComponent$1 = PropTypes$1.shape(_objectSpread$1({}, storyComponentShape$1));
var storyComponents = PropTypes$1.arrayOf(storyComponent$1);
var screenComponent$1 = PropTypes$1.shape(_objectSpread$1({}, storyComponentShape$1));
var screenComponents$1 = PropTypes$1.arrayOf(screenComponent$1);
var screen = screenComponent$1; // @NOTE should be removed

/**
 * Theme
 */
var theme$1 = PropTypes$1.shape({
  id: PropTypes$1.string,
  textStyles: PropTypes$1.objectOf(textStyle$1),
  // renamed to textstyles
  background: backgroundElement$1,
  colors: PropTypes$1.objectOf(color$2),
  components: screenComponents$1
});
var viewerTheme = PropTypes$1.shape(_objectSpread$1({
  logo: imageMedia$1
}, theme$1));

/**
 * Branding
 */

// export const branding = PropTypes.shape({
//     logo: imageMedia,
//     primaryColor: color,
//     secondaryColor: color,
//     backgroundColor: color,
//     textStyle,
// });

/**
 * Metadata
 */
var metadata$2 = PropTypes$1.shape({
  description: PropTypes$1.string,
  shareUrl: PropTypes$1.string,
  shareImage: imageMedia$1,
  favIcon: imageMedia$1
});
var tag$1 = PropTypes$1.shape({
  label: PropTypes$1.string,
  value: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string])
});
var tags = PropTypes$1.arrayOf(tag$1);

/**
 * Story
 */
var story = PropTypes$1.shape({
  id: PropTypes$1.string,
  theme: theme$1,
  components: screenComponents$1,
  metadata: metadata$2
});

/**
 * Render
 */
var deviceScreen$1 = PropTypes$1.shape({
  name: PropTypes$1.string.isRequired,
  mediaQuery: PropTypes$1.string
});
var deviceScreens = PropTypes$1.arrayOf(deviceScreen$1);
var screenSize = PropTypes$1.shape({
  screen: PropTypes$1.string,
  screens: PropTypes$1.arrayOf(PropTypes$1.string),
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  landscape: PropTypes$1.bool
});
var renderContext = PropTypes$1.oneOf(['view', 'placeholder', 'edit', 'preview', 'static', 'capture']);

/**
 * Screens
 */

var adFormats = PropTypes$1.shape({
  width: PropTypes$1.number,
  height: PropTypes$1.number
});
var adFormat = PropTypes$1.shape({
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  url: PropTypes$1.string,
  target: target$1,
  iframe: PropTypes$1.string,
  image: imageMedia$1
});
var audioComponent = PropTypes$1.shape({
  src: PropTypes$1.string,
  track: PropTypes$1.string,
  trackLng: PropTypes$1.number,
  controls: PropTypes$1.bool
});
var slide$1 = PropTypes$1.shape({
  image: imageMedia$1,
  text: PropTypes$1.string
});
var slides = PropTypes$1.arrayOf(slide$1);

// export const imageStyle = PropTypes.shape({
//     alt: PropTypes.string,
//     fit: PropTypes.object,
// });

var containerStyle = PropTypes$1.shape({});

/**
 * Transitions
 */

var transitionName$1 = PropTypes$1.oneOf(['fade', 'scale', 'slide']);
var transitionParams$1 = {
  duration: PropTypes$1.number,
  easing: PropTypes$1.oneOf(['ease', 'ease-in', 'ease-out', 'ease-in-out', 'linear'])
};
var transition$1 = PropTypes$1.oneOfType([transitionName$1.isRequired, PropTypes$1.shape(_objectSpread$1({
  name: transitionName$1.isRequired
}, transitionParams$1))]);
var transitions = PropTypes$1.shape({
  "in": transition$1,
  out: transition$1
});

/**
 * Search
 */

var searchFilter$1 = PropTypes$1.shape({
  type: PropTypes$1.string,
  value: PropTypes$1.oneOf([PropTypes$1.string, PropTypes$1.number])
});
var searchFilters = PropTypes$1.arrayOf(searchFilter$1);

/**
 * Payments
 */

var paymentItem$1 = PropTypes$1.shape({
  id: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]),
  date: PropTypes$1.string,
  type: PropTypes$1.string,
  invoice_link: PropTypes$1.string,
  amount: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number])
});
var paymentItems = PropTypes$1.arrayOf(paymentItem$1);

/**
 * Page Metadada
 */

var pageMetadata$1 = PropTypes$1.shape({
  canonical: PropTypes$1.string,
  description: PropTypes$1.string,
  keywords: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.array]),
  image: PropTypes$1.shape({
    url: PropTypes$1.string
  }),
  favicon: PropTypes$1.shape({
    url: PropTypes$1.string
  }),
  rssUrl: PropTypes$1.string,
  atomUrl: PropTypes$1.string,
  microformats: PropTypes$1.arrayOf(PropTypes$1.shape({}))
});
var authorElement$1 = PropTypes$1.shape({
  name: textElement$2,
  avatar: PropTypes$1.shape({
    url: PropTypes$1.string
  })
});
var visitor = PropTypes$1.shape({
  id: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]),
  name: PropTypes$1.string
});
var badge$2 = PropTypes$1.shape({
  label: textElement$2,
  buttonStyle: boxStyle$1
});
var header$1 = PropTypes$1.shape({
  badge: badge$2
});
var footer$1 = PropTypes$1.shape({
  callToAction: callToAction$1
});
var reload = PropTypes$1.shape();
var closedCaptions$1 = PropTypes$1.shape({
  file: closedCaptionsMedia$1,
  textStyle: textStyle$1,
  boxStyle: boxStyle$1
});

var PropTypes = /*#__PURE__*/Object.freeze({
    __proto__: null,
    activeForm: activeForm,
    adFormat: adFormat,
    adFormats: adFormats,
    answer: answer$2,
    answerShape: answerShape$1,
    answers: answers$1,
    audioComponent: audioComponent,
    audioElement: audioElement$1,
    audioMedia: audioMedia$1,
    audioMedias: audioMedias,
    authorElement: authorElement$1,
    backgroundElement: backgroundElement$1,
    badge: badge$2,
    bootstrapThemes: bootstrapThemes,
    borderStyle: borderStyle$1,
    borderTypes: borderTypes$1,
    boxStyle: boxStyle$1,
    breadcrumb: breadcrumb$1,
    breadcrumbs: breadcrumbs,
    button: button$2,
    buttonSize: buttonSize,
    buttonTheme: buttonTheme,
    buttons: buttons$1,
    callToAction: callToAction$1,
    callToActionTypes: callToActionTypes$1,
    closedCaptions: closedCaptions$1,
    closedCaptionsElement: closedCaptionsElement,
    closedCaptionsMedia: closedCaptionsMedia$1,
    color: color$2,
    component: component$1,
    componentNames: componentNames,
    components: components,
    containerStyle: containerStyle,
    conversation: conversation$1,
    conversationMessage: conversationMessage$1,
    conversationMessages: conversationMessages$1,
    customFont: customFont,
    defaultMessage: defaultMessage$1,
    defaultMessageContent: defaultMessageContent$1,
    device: device$1,
    deviceScreen: deviceScreen$1,
    deviceScreens: deviceScreens,
    devices: devices,
    dropdownAlign: dropdownAlign,
    errors: errors$1,
    field: field$1,
    fieldDefinition: fieldDefinition$1,
    fieldDefinitions: fieldDefinitions,
    fields: fields$a,
    font: font$2,
    fontMedia: fontMedia$1,
    fontMedias: fontMedias,
    fonts: fonts$1,
    footer: footer$1,
    formControlSize: formControlSize,
    formErrors: formErrors,
    formField: formField$1,
    formFields: formFields,
    geoPosition: geoPosition$2,
    gridElement: gridElement,
    gridLayout: gridLayout,
    header: header$1,
    headingElement: headingElement$2,
    history: history$1,
    imageElement: imageElement$1,
    imageElementWithCaption: imageElementWithCaption$1,
    imageElements: imageElements,
    imageElementsWithCaption: imageElementsWithCaption,
    imageMedia: imageMedia$1,
    imageMedias: imageMedias,
    inputElement: inputElement$1,
    interaction: interaction$1,
    interactions: interactions,
    intl: intl,
    label: label$1,
    location: location$1,
    margin: margin,
    marker: marker$2,
    markerWithImage: markerWithImage$2,
    markers: markers$1,
    markersWithImage: markersWithImage$1,
    media: media$1,
    mediaFile: mediaFile$1,
    mediaTypes: mediaTypes,
    medias: medias,
    menuItem: menuItem$1,
    menuItems: menuItems,
    message: message$2,
    metadata: metadata$2,
    modal: modal$1,
    modals: modals,
    objectFit: objectFit,
    objectFitSize: objectFitSize$1,
    pageMetadata: pageMetadata$1,
    panel: panel$1,
    panels: panels,
    paymentItem: paymentItem$1,
    paymentItems: paymentItems,
    progress: progress,
    quizAnswer: quizAnswer$2,
    quizAnswers: quizAnswers$1,
    ref: ref,
    reload: reload,
    renderContext: renderContext,
    screen: screen,
    screenComponent: screenComponent$1,
    screenComponents: screenComponents$1,
    screenDefinition: screenDefinition$1,
    screenDefinitions: screenDefinitions,
    screenSize: screenSize,
    searchFilter: searchFilter$1,
    searchFilters: searchFilters,
    selectOption: selectOption$1,
    selectOptions: selectOptions,
    shadowType: shadowType$1,
    shareIncentive: shareIncentive,
    slide: slide$1,
    slides: slides,
    speaker: speaker$2,
    speakers: speakers$2,
    stackAlign: stackAlign$1,
    stackDirection: stackDirection$1,
    stackElement: stackElement,
    stackSpacing: stackSpacing$1,
    statusCode: statusCode,
    story: story,
    storyComponent: storyComponent$1,
    storyComponents: storyComponents,
    tag: tag$1,
    tags: tags,
    target: target$1,
    text: text$2,
    textAlign: textAlign$1,
    textElement: textElement$2,
    textStyle: textStyle$1,
    theme: theme$1,
    trackingVariables: trackingVariables,
    transition: transition$1,
    transitionName: transitionName$1,
    transitions: transitions,
    user: user,
    videoElement: videoElement$1,
    videoMedia: videoMedia$1,
    videoMedias: videoMedias,
    viewerTheme: viewerTheme,
    visitor: visitor,
    visualElement: visualElement$1,
    visualElements: visualElements
});

var getComponentFromName$2 = function getComponentFromName() {
  var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var components = arguments.length > 1 ? arguments[1] : undefined;
  var defaultComponent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  if (components === null || name === null) {
    return defaultComponent;
  }
  var pascalName = changeCase.pascalCase(name);
  return components[pascalName] || components[name] || defaultComponent;
};

var ComponentsManager = /*#__PURE__*/function (_EventEmitter) {
  _inherits(ComponentsManager, _EventEmitter);
  function ComponentsManager() {
    var _this;
    var components = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, ComponentsManager);
    _this = _callSuper(this, ComponentsManager);
    _this.components = components;
    return _this;
  }
  _createClass(ComponentsManager, [{
    key: "addComponent",
    value: function addComponent(name, component) {
      var namespace = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      return this.addComponents(_defineProperty({}, name, component), namespace);
    }
  }, {
    key: "addComponents",
    value: function addComponents(components) {
      var namespace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var newComponents = namespace !== null ? Object.keys(components).reduce(function (componentsMaps, name) {
        return _objectSpread$1(_objectSpread$1({}, componentsMaps), {}, _defineProperty({}, "".concat(namespace, ".").concat(name), components[name]));
      }, {}) : components;
      this.components = _objectSpread$1(_objectSpread$1({}, this.components), newComponents);
      this.emit('change');
      return this;
    }
  }, {
    key: "merge",
    value: function merge(manager) {
      var namespace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      return this.addComponents(manager.getComponents(), namespace);
    }
  }, {
    key: "addNamespace",
    value: function addNamespace(namespace) {
      var _this2 = this;
      if (namespace === null) {
        return this;
      }
      this.components = Object.keys(this.components).reduce(function (componentsMap, name) {
        return _objectSpread$1(_objectSpread$1({}, componentsMap), {}, _defineProperty({}, "".concat(namespace, ".").concat(name), _this2.components[name]));
      }, {});
      return this;
    }
  }, {
    key: "getComponent",
    value: function getComponent(name) {
      var namespace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var components = this.getComponents(namespace);
      return getComponentFromName$2(name, components);
    }
  }, {
    key: "getComponents",
    value: function getComponents() {
      var _this3 = this;
      var namespace = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      return namespace !== null ? Object.keys(this.components || {}).reduce(function (componentsMap, name) {
        var pattern = new RegExp("^".concat(namespace, "\\.(.*)$"));
        var matches = pattern.exec(name);
        return matches !== null ? _objectSpread$1(_objectSpread$1({}, componentsMap), {}, _defineProperty({}, matches[1], _this3.components[name])) : componentsMap;
      }, null) : this.components;
    }
  }, {
    key: "hasComponent",
    value: function hasComponent(name) {
      var namespace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      return this.components !== null && typeof this.components[namespace !== null ? "".concat(namespace, ".").concat(name) : name] !== 'undefined';
    }
  }]);
  return ComponentsManager;
}(EventEmitter);
var ComponentsManager$1 = ComponentsManager;

var DefinitionsManager = /*#__PURE__*/function (_EventEmitter) {
  _inherits(DefinitionsManager, _EventEmitter);
  function DefinitionsManager() {
    var _this;
    var definitions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
    _classCallCheck(this, DefinitionsManager);
    _this = _callSuper(this, DefinitionsManager);
    _this.definitions = definitions || [];
    return _this;
  }
  _createClass(DefinitionsManager, [{
    key: "addDefinition",
    value: function addDefinition(definition) {
      this.addDefinitions(isArray(definition) ? definition : [definition]);
      return this;
    }
  }, {
    key: "addDefinitions",
    value: function addDefinitions(definitions) {
      this.definitions = uniqBy([].concat(_toConsumableArray(definitions), _toConsumableArray(this.definitions)), function (it) {
        return it.id;
      });
      this.emit('change');
      return this;
    }
  }, {
    key: "merge",
    value: function merge(manager) {
      return this.addDefinitions(manager.getDefinitions());
    }
  }, {
    key: "filter",
    value: function filter(_filter) {
      // this.definitions = this.definitions.filter(filter);
      // return this;
      return new DefinitionsManager(this.definitions.filter(_filter));
    }
  }, {
    key: "getDefinition",
    value: function getDefinition(id) {
      if (id === null) {
        return null;
      }
      return this.definitions.find(function (it) {
        return it.id === id;
      }) || null;
    }
  }, {
    key: "getDefinitions",
    value: function getDefinitions() {
      return this.definitions;
    }
  }, {
    key: "hasDefinition",
    value: function hasDefinition(id) {
      return this.getDefinition(id) !== null;
    }
  }, {
    key: "getComponent",
    value: function getComponent(id) {
      var _ref = this.getDefinition(id) || {},
        _ref$component = _ref.component,
        component = _ref$component === void 0 ? null : _ref$component;
      return component;
    }
  }, {
    key: "getComponents",
    value: function getComponents() {
      return this.definitions.reduce(function (allComponents, _ref2) {
        var id = _ref2.id,
          _ref2$component = _ref2.component,
          component = _ref2$component === void 0 ? null : _ref2$component;
        return component !== null ? _objectSpread$1(_objectSpread$1({}, allComponents), {}, _defineProperty({}, id, component)) : allComponents;
      }, {});
    }
  }]);
  return DefinitionsManager;
}(EventEmitter);
var DefinitionsManager$1 = DefinitionsManager;

var EventsManager = /*#__PURE__*/function (_EventEmitter) {
  _inherits(EventsManager, _EventEmitter);
  function EventsManager(element) {
    var _this;
    _classCallCheck(this, EventsManager);
    _this = _callSuper(this, EventsManager);
    _this.element = element;
    _this.events = {};
    _this.listeners = {};
    return _this;
  }
  _createClass(EventsManager, [{
    key: "subscribe",
    value: function subscribe(event, callback) {
      this.on(event, callback);
      this.events = _objectSpread$1(_objectSpread$1({}, this.events), {}, _defineProperty({}, event, [].concat(_toConsumableArray(this.events[event] || []), [callback])));
      if (this.events[event].length === 1) {
        this.addEventListener(event);
      }
    }
  }, {
    key: "unsubscribe",
    value: function unsubscribe(event, callback) {
      var _this2 = this;
      this.off(event, callback);
      this.events = Object.keys(this.events).reduce(function (newEvents, eventName) {
        if (eventName !== event) {
          return _objectSpread$1(_objectSpread$1({}, newEvents), {}, _defineProperty({}, eventName, _this2.events[eventName]));
        }
        var newListeners = _this2.events[eventName].filter(function (listener) {
          return listener !== callback;
        });
        return newListeners.length > 0 ? _objectSpread$1(_objectSpread$1({}, newEvents), {}, _defineProperty({}, eventName, newListeners)) : newEvents;
      }, {});
      if (typeof this.events[event] === 'undefined') {
        this.removeEventListener(event);
      }
    }
  }, {
    key: "addEventListener",
    value: function addEventListener(event) {
      var _this3 = this;
      if (typeof this.listeners[event] === 'undefined') {
        this.listeners[event] = function () {
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          return _this3.emit.apply(_this3, [event].concat(args));
        };
      }
      this.element.addEventListener(event, this.listeners[event]);
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(event) {
      this.element.removeEventListener(event, this.listeners[event]);
    }
  }]);
  return EventsManager;
}(EventEmitter);
var EventsManager$1 = EventsManager;

var FieldsManager = /*#__PURE__*/function (_DefinitionsManager) {
  _inherits(FieldsManager, _DefinitionsManager);
  function FieldsManager() {
    _classCallCheck(this, FieldsManager);
    return _callSuper(this, FieldsManager, arguments);
  }
  _createClass(FieldsManager, [{
    key: "filter",
    value: function filter(_filter) {
      return new FieldsManager(this.definitions.filter(_filter));
      // this.definitions = this.definitions.filter(filter);
      // return this;
    }
  }]);
  return FieldsManager;
}(DefinitionsManager$1);
var FieldsManager$1 = FieldsManager;

var ScreensManager = /*#__PURE__*/function (_DefinitionsManager) {
  _inherits(ScreensManager, _DefinitionsManager);
  function ScreensManager() {
    var _this;
    var definitions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
    _classCallCheck(this, ScreensManager);
    _this = _callSuper(this, ScreensManager, [definitions]);
    _this.fieldsPattern = null;
    return _this;
  }
  _createClass(ScreensManager, [{
    key: "getFields",
    value: function getFields(id) {
      var _ref = this.getDefinition(id) || {},
        _ref$fields = _ref.fields,
        fields = _ref$fields === void 0 ? null : _ref$fields;
      return fields;
    }
  }, {
    key: "getLayouts",
    value: function getLayouts(id) {
      var _ref2 = this.getDefinition(id) || {},
        _ref2$layouts = _ref2.layouts,
        layouts = _ref2$layouts === void 0 ? null : _ref2$layouts;
      return layouts;
    }
  }, {
    key: "getFieldsPattern",
    value: function getFieldsPattern() {
      return this.fieldsPattern;
    }
  }, {
    key: "setFieldsPattern",
    value: function setFieldsPattern(fieldsPattern) {
      this.fieldsPattern = fieldsPattern;
    }
  }, {
    key: "filter",
    value: function filter(_filter) {
      return new ScreensManager(this.definitions.filter(_filter));
      // this.definitions = this.definitions.filter(filter);
      // return this;
    }
  }, {
    key: "merge",
    value: function merge(manager) {
      var newFieldsPattern = manager.getFieldsPattern();
      if (newFieldsPattern !== null && this.fieldsPattern === null) {
        this.fieldsPattern = newFieldsPattern;
      }
      return this.addDefinitions(manager.getDefinitions());
    }
  }]);
  return ScreensManager;
}(DefinitionsManager$1);
var ScreensManager$1 = ScreensManager;

var audio = {
    id: 'audio',
    component: 'audio',
    media: true,
};

var audioElement = {
    id: 'audio-element',
    fields: [
        {
            name: 'media',
            type: 'audio',
        },
    ],
    settings: [
        {
            name: 'autoPlay',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'AutoPlay',
                description: 'Field label',
            }),
        },
        {
            name: 'loop',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'Loop',
                description: 'Field label',
            }),
        },
        {
            name: 'withWave',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'With animated wave',
                description: 'Field label',
            }),
        },
        {
            name: 'withControls',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'With controls button',
                description: 'Field label',
            }),
        },
        {
            name: 'withSeekBar',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'With seek bar',
                description: 'Field label',
            }),
        },

        {
            name: 'color',
            type: 'color',
            label: reactIntl.defineMessage({
                defaultMessage: 'Controls color',
                description: 'Field label',
            }),
        },
        {
            name: 'progressColor',
            type: 'color',
            label: reactIntl.defineMessage({
                defaultMessage: 'Progress bar color',
                description: 'Field label',
            }),
        },
        {
            name: 'captions',
            type: 'captions',
            label: reactIntl.defineMessage({
                defaultMessage: 'Closed captions',
                description: 'Field label',
            }),
        },
    ],
};

var alignHorizontal = {
    id: 'align-horizontal',
    component: 'align-horizontal',
};

var alignVertical = {
    id: 'alignVertical',
    component: 'align-vertical',
};

var answer$1 = {
    id: 'answer',
    component: 'field-with-form',
    labelPath: 'label.body',
    fields: [
        {
            name: 'label',
            type: 'text-element',
            textOnly: true,
            fieldsProps: {
                textStyle: {
                    excludedFields: ['highlight', 'link'],
                },
            },
            label: reactIntl.defineMessage({
                defaultMessage: 'Label',
                description: 'Field label',
            }),
        },
        {
            type: 'fields',
            isList: true,
            fields: [
                {
                    name: 'textStyle',
                    type: 'text-style-form',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Button text style',
                        description: 'Field label',
                    }),
                },
                {
                    type: 'box-style-form',
                    name: 'buttonStyle',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Button style',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'resultStyle',
                    type: 'graph-bar-style',
                    isList: true,
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Result style',
                        description: 'Field section label',
                    }),
                },
            ],
        },
    ],
};

var answers = {
    id: 'answers',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No answer...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add an answer',
        description: 'Button label',
    }),
    itemsField: {
        type: 'answer',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Answer',
            description: 'Breadcrumb field label',
        }),
    }
};

var authorElement = {
    id: 'author-element',
    component: 'field-with-form',
    labelPath: 'name.body',
    fields: [
        {
            name: 'name',
            type: 'text-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Name',
                description: 'Field label',
            }),
        },
        {
            name: 'image',
            type: 'image',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
        },
        {
            name: 'url',
            type: 'url',
            label: reactIntl.defineMessage({
                defaultMessage: 'URL',
                description: 'Field label',
            }),
        },
        {
            name: 'collaborator',
            type: 'text-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Collaborator',
                description: 'Field label',
            }),
        },
    ],
};

var background = {
    id: 'background',
    isList: true,
    fields: [
        {
            name: 'color',
            type: 'color',
            label: reactIntl.defineMessage({
                defaultMessage: 'Color',
                description: 'Field label',
            }),
            breadcrumbLabel: reactIntl.defineMessage({
                defaultMessage: 'Background color',
                description: 'Breadcrumb field label',
            }),
        },
        {
            name: 'image',
            type: 'image',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
            breadcrumbLabel: reactIntl.defineMessage({
                defaultMessage: 'Background image',
                description: 'Breadcrumb field label',
            }),
        },
        {
            name: 'video',
            type: 'video',
            label: reactIntl.defineMessage({
                defaultMessage: 'Video',
                description: 'Field label',
            }),
            breadcrumbLabel: reactIntl.defineMessage({
                defaultMessage: 'Background video',
                description: 'Breadcrumb field label',
            }),
        },
    ],
    settings: [
        {
            type: 'fields',
            isList: true,
            fields: [
                {
                    name: 'fit',
                    type: 'fit',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Fit',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'repeat',
                    type: 'toggle',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Repeat',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'forceMuted',
                    type: 'toggle',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Mute audio of background video',
                        description: 'Field label'
                    })
                }
            ],
        },
    ],
};

var backgroundRecommendation = {
    id: 'background-recommendation',
    isList: true,
    fields: [
        {
            name: 'color',
            type: 'color',
            label: reactIntl.defineMessage({
                defaultMessage: 'Color',
                description: 'Field label',
            }),
            breadcrumbLabel: reactIntl.defineMessage({
                defaultMessage: 'Background color',
                description: 'Breadcrumb field label',
            }),
        },
        {
            name: 'image',
            type: 'image',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
            breadcrumbLabel: reactIntl.defineMessage({
                defaultMessage: 'Background image',
                description: 'Breadcrumb field label',
            }),
        },
        {
            name: 'video',
            type: 'video',
            label: reactIntl.defineMessage({
                defaultMessage: 'Video',
                description: 'Field label',
            }),
            breadcrumbLabel: reactIntl.defineMessage({
                defaultMessage: 'Background video',
                description: 'Breadcrumb field label',
            }),
        },
        {
            name: 'forceMuted',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'Mute audio of background video',
                description: 'Field label'
            })
        },
        {
            name: 'text',
            type: 'text-element',
            textOnly: true,
            fieldsProps: {
                textStyle: {
                    excludedFields: ['highlight', 'link'],
                },
            },
            label: reactIntl.defineMessage({
                defaultMessage: 'Background text',
                description: 'Field label',
            }),
        }
    ],
};

var badge$1 = {
    id: 'badge',
    component: 'badge',
    fields: [
        {
            name: 'active',
            type: 'toggle',
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Badge',
                description: 'Field label',
            }),
        },
        {
            name: 'label',
            type: 'text-element',
            withoutLink: true,
            fieldsProps: {
                textStyle: {
                    excludedFields: ['link'],
                },
            },
            label: reactIntl.defineMessage({
                defaultMessage: 'Label',
                description: 'Field label',
            }),
        },
        {
            name: 'boxStyle',
            type: 'box-style-form',
            label: reactIntl.defineMessage({
                defaultMessage: 'Style',
                description: 'Field label',
            }),
        },
    ],
};

var borderRadius = {
    id: 'border-radius',
    component: 'border-radius',
};

var borderStyle = {
    id: 'border-style',
    component: 'border-style',
};

var borderWidth = {
    id: 'border-width',
    component: 'border-width',
};

var def$5 = {
    id: 'box-style',
    fields: [
        {
            type: 'fields',
            isList: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Box',
                description: 'Field label',
            }),
            fields: [
                {
                    name: 'backgroundColor',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Background color',
                        description: 'Field label',
                    }),
                    type: 'color',
                },
                {
                    name: 'borderRadius',
                    type: 'number',
                    isHorizontal: true,
                    dataList: [0, 2, 4, 6, 8, 10, 16, 20, 24, 30],
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Rounded corners',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'padding',
                    type: 'padding',
                    isHorizontal: true,
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Padding',
                        description: 'Field label',
                    }),
                },
            ],
        },
        {
            type: 'fields',
            label: reactIntl.defineMessage({
                defaultMessage: 'Border',
                description: 'Field label',
            }),
            isList: true,
            fields: [
                {
                    name: 'borderWidth',
                    type: 'number',
                    isHorizontal: true,
                    dataList: [0, 1, 2, 3, 4, 5],
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Size',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'borderColor',
                    type: 'color',
                    disableAlpha: true,
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Color',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'borderStyle',
                    type: 'border-style',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Style',
                        description: 'Field label',
                    }),
                },
            ],
        },
        {
            type: 'fields',
            label: reactIntl.defineMessage({
                defaultMessage: 'Shadow',
                description: 'Field label',
            }),
            isList: true,
            fields: [
                {
                    name: 'shadowDistance',
                    type: 'number',
                    isHorizontal: true,
                    dataList: [0, 1, 2, 3, 4, 5],
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Distance',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'shadowBlur',
                    type: 'number',
                    isHorizontal: true,
                    dataList: [0, 1, 2, 3, 4, 5],
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Blur',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'shadowColor',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Color',
                        description: 'Field label',
                    }),
                    type: 'color',
                },
                {
                    name: 'shadowAngle',
                    type: 'shadow-angle',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Angle',
                        description: 'Field label',
                    }),
                },
            ],
        },
    ],
};

const { fields: fields$9 } = def$5;

var boxStyleForm = {
    id: 'box-style-form',
    component: 'box-style-form',
    fields: fields$9,
};

var button$1 = {
    id: 'button',
    component: 'field-with-form',
    labelPath: 'label',
    fields: [
        {
            name: 'label',
            type: 'text',
            label: reactIntl.defineMessage({
                defaultMessage: 'Label',
                description: 'Field label',
            }),
        },
        {
            name: 'visual',
            type: 'visual',
            label: reactIntl.defineMessage({
                defaultMessage: 'Visual',
                description: 'Field label',
            }),
        },
        {
            name: 'textStyle',
            type: 'text-style-form',
            label: reactIntl.defineMessage({
                defaultMessage: 'Label style',
                description: 'Field label',
            }),
        },
        {
            name: 'boxStyle',
            type: 'box-style-form',
            label: reactIntl.defineMessage({
                defaultMessage: 'Button style',
                description: 'Field label',
            }),
        },
        {
            name: 'url',
            type: 'url',
            label: reactIntl.defineMessage({
                defaultMessage: 'Link',
                description: 'Field label',
            }),
        },
        {
            name: 'inWebView',
            type: 'toggle',
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Embedded browser',
                description: 'Field label',
            }),
        },
    ],
};

var buttonLayout = {
    id: 'button-layout',
    component: 'button-layout',
};

var buttons = {
    id: 'buttons',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No button yet',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add a button',
        description: 'Button label',
    }),
    itemsField: {
        type: 'button',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Button',
            description: 'Breadcrumb field label',
        }),
    },
};

var buttonElement = {
    id: 'button-element',
    component: 'text-element',
    inline: true,
    settings: [
        {
            name: 'textStyle',
            type: 'text-style',
        },
        {
            name: 'buttonStyle',
            type: 'box-style',
            className: 'mt-4'
        },
    ]
};

var buttonLink = {
    id: 'button-link',
    isList: true,
    component: 'fields',
    fields: [
        {
            name: 'label',
            type: 'text-element',
            textOnly: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Label',
                description: 'Field label',
            }),
        },
        {
            name: 'url',
            type: 'url',
            // isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Link',
                description: 'Field label',
            }),
        },
        {
            name: 'inWebView',
            type: 'toggle',
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Embedded browser',
                description: 'Field label',
            }),
        },
        {
            name: 'boxStyle',
            type: 'box-style-form',
            label: reactIntl.defineMessage({
                defaultMessage: 'Button',
                description: 'Field label',
            }),
        },
    ],
};

var captions = {
    id: 'captions',
    isList: true,
    fields: [
        {
            name: 'media',
            type: 'closed-captions',
            label: reactIntl.defineMessage({
                defaultMessage: 'Closed captions file',
                description: 'Field label',
            }),
        },
        {
            name: 'textStyle',
            type: 'text-style-form',
            excludedFields: ['link', 'highlight'],
            label: reactIntl.defineMessage({
                defaultMessage: 'Text style',
                description: 'Field label',
            }),
        },
        {
            name: 'boxStyle',
            type: 'box-style-form',
            label: reactIntl.defineMessage({
                defaultMessage: 'Box style',
                description: 'Field label',
            }),
        },
    ],
};

var def$4 = {
    id: 'call-to-action',
    component: 'call-to-action',
    fields: [
        {
            name: 'active',
            type: 'toggle',
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Call to Action',
                description: 'Field label',
            }),
        },
        {
            name: 'type',
            type: 'radios',
            options: [
                {
                    value: 'swipe-up',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Swipe up',
                        description: 'Field label',
                    }),
                },
                {
                    value: 'button',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Button',
                        description: 'Field label',
                    }),
                },
            ],
            firstOptionAsDefault: true,
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Type',
                description: 'Field label',
            }),
        },
        {
            name: 'inWebView',
            type: 'toggle',
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Embedded browser',
                description: 'Field label',
            }),
        },
        {
            name: 'url',
            type: 'url',
            // isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Link',
                description: 'Field label',
            }),
        },
        {
            name: 'label',
            type: 'text-element',
            withoutLink: true,
            fieldsProps: {
                textStyle: {
                    excludedFields: ['link'],
                },
            },
            label: reactIntl.defineMessage({
                defaultMessage: 'Label',
                description: 'Field label',
            }),
        },
        {
            name: 'boxStyle',
            type: 'box-style-form',
            label: reactIntl.defineMessage({
                defaultMessage: 'Button',
                description: 'Field label',
            }),
        },
    ],
};

const { fields: fields$8 } = def$4;

var callToActionForm = {
    id: 'call-to-action-form',
    component: 'call-to-action-form',
    fields: fields$8,
};

var dateElement = {
    id: 'date-element',
    component: 'date-element',
    settings: [
        {
            name: 'textStyle',
            type: 'text-style',
        },
    ],
};

var date = {
    id: 'date',
    component: 'date',
    withTime: false,
};

var datetime = {
    id: 'datetime',
    component: 'date',
    withTime: true,
};

var def$3 = {
    id: 'share-incentive',
    component: 'share-incentive',
    fields: [
        {
            name: 'active',
            type: 'toggle',
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Share Incentive',
                description: 'Field label',
            }),
        },
        {
            name: 'label',
            type: 'text-element',
            textOnly: true,
            fieldsProps: {
                textStyle: {
                    excludedFields: ['highlight', 'link'],
                },
            },
            label: reactIntl.defineMessage({
                defaultMessage: 'Label',
                description: 'Field label',
            }),
        },
        {
            name: 'boxStyle',
            type: 'box-style-form',
            label: reactIntl.defineMessage({
                defaultMessage: 'Box style',
                description: 'Field label',
            }),
        },
    ],
};

const { fields: fields$7 } = def$3;

var shareIncentiveForm = {
    id: 'share-incentive-form',
    component: 'share-incentive-form',
    fields: fields$7,
};

var cardLayout = {
    id: 'card-layout',
    component: 'card-layout',
};

var checkboxes = {
    id: 'checkboxes',
    component: 'checkboxes',
};

var closedCaptions = {
    id: 'closed-captions',
    component: 'closed-captions',
};

var color$1 = {
    id: 'color',
    component: 'color',
};

var conversation = {
    id: 'conversation',
    component: 'conversation',
    fields: [
        {
            name: 'speakers',
            type: 'speakers',
            label: reactIntl.defineMessage({
                defaultMessage: 'Speakers',
                description: 'Field label',
            }),
        },
        {
            name: 'messages',
            type: 'messages',
            label: reactIntl.defineMessage({
                defaultMessage: 'Messages',
                description: 'Field label',
            }),
        },
    ],
    settings: [
        {
            name: 'messageStyle',
            type: 'text-style',
            label: reactIntl.defineMessage({
                defaultMessage: 'Message style',
                description: 'Field label',
            }),
        },
        {
            name: 'speakerStyle',
            type: 'text-style',
            className: 'mt-4',
            label: reactIntl.defineMessage({
                defaultMessage: 'Speaker style',
                description: 'Field label',
            }),
        },
    ],
};

var email = {
    id: 'email',
    component: 'text',
    type: 'email'
};

var entries = {
    id: 'entries',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No entry...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add an entry',
        description: 'Button label',
    }),
    itemsField: {
        type: 'entry',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Entry',
            description: 'Breadcrumb field label',
        }),
    },
};

var entriesWithImage = {
    ...entries,
    id: 'entries-with-image',
    itemsField: {
        type: 'entry-with-image',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Entry',
            description: 'Breadcrumb field label',
        }),
    },
};

var entriesWithVisual = {
    ...entries,
    id: 'entries-with-visual',
    itemsField: {
        type: 'entry-with-visual',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Entry',
            description: 'Breadcrumb field label',
        }),
    },
};

var entry = {
    id: 'entry',
    component: 'field-with-form',
    labelPath: 'title.body',
    fields: [
        {
            name: 'title',
            type: 'heading-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Title',
                description: 'Field label',
            }),
        },
        {
            name: 'description',
            type: 'text-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Description',
                description: 'Field label',
            }),
        },
    ],
};

var entryWithImage = {
    ...entry,
    id: 'entry-with-image',
    fields: [
        ...entry.fields,
        {
            name: 'image',
            type: 'image',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
        },
    ]
};

var entryWithVisual = {
    ...entry,
    id: 'entry-with-visual',
    fields: [
        ...entry.fields,
        {
            name: 'image',
            type: 'visual',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
        },
    ]
};

var fieldWithForm = {
    id: 'field-with-form',
    component: 'field-with-form',
};

var fields$6 = {
    id: 'fields',
    component: 'fields'
};

var fit = {
    id: 'fit',
    component: 'fit',
};

var font$1 = {
    id: 'font',
    component: 'font',
    media: true,
};

var fonts = {
    id: 'fonts',
    component: 'fonts',
    itemsField:{
        type: 'font',
    }
};

var fontFamily = {
    id: 'font-family',
    component: 'font-family',
};

var fontSize = {
    id: 'font-size',
    component: 'font-size',
};

var fontWeight = {
    id: 'font-weight',
    // component: 'font-weight',
    component: 'number-with-icon',
    icon: {
        icon: [
            48,
            48,
            [],
            'f067',
            'M12 14h5l-7-7-7 7h5v20h-5l7 7 7-7h-5v-20zm8-4v4h24v-4h-24zm0 28h24v-4h-24v4zm0-12h24v-4h-24v4z',
        ],
        iconName: 'font',
        prefix: 'fas',
    },
    dataList: [100, 200, 300, 400, 500, 600, 700, 800, 900],
    float: true,
};

var footer = {
    id: 'footer',
    isList: true,
    fields: [
        {
            name: 'callToAction',
            type: 'call-to-action',
        },
    ],
    // settings: [],
};

var geoPosition$1 = {
    id: 'geo-position',
    component: 'geo-position',
};

var def$2 = {
    id: 'graph-bar-style',
    isList: true,
    fields: [
        {
            name: 'barColor',
            type: 'color',
            label: reactIntl.defineMessage({
                defaultMessage: 'Bar',
                description: 'Field label',
            }),
        },
        // {
        //     name: 'textColor',
        //     type: 'color',
        //     label: defineMessage({
        //         defaultMessage: 'Text',
        //         description: 'Field label',
        //     }),
        // },
        {
            name: 'percentageTextStyle',
            type: 'text-style-form',
            label: reactIntl.defineMessage({
                defaultMessage: 'Percentage Text',
                description: 'Field label',
            }),
        },
    ],
};

const { fields: fields$5 } = def$2;

var graphBarStyleForm = {
    id: 'graph-bar-style-form',
    component: 'field-with-form',
    isList: true,
    fields: fields$5,
};

var textElement$1 = {
    id: 'text-element',
    component: 'text-element',
    settings: [
        {
            name: 'textStyle',
            type: 'text-style',
        },
    ],
};

var headingElement$1 = {
    ...textElement$1,
    id: 'heading-element',
    size: 'lg',
    inline: true,
};

var header = {
    id: 'header',
    isList: true,
    theme: true,
    fields: [
        {
            name: 'badge',
            type: 'badge',
        },
        {
            name: 'shareIncentive',
            type: 'share-incentive',
        },
    ],
    // settings: [],
};

var imageWithCaption = {
    id: 'image-with-caption',
    component: 'field-with-form',
    labelPath: 'caption.body',
    thumbnailPath: 'media.thumbnail_url',
    fields: [
        {
            name: 'media',
            type: 'image',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
        },
        {
            name: 'caption',
            type: 'text-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Caption',
                description: 'Field label',
            }),
        }
    ]
};

var image = {
    id: 'image',
    component: 'image',
    media: true,
    // type: 'image',
};

var imagesWithCaption = {
    id: 'images-with-caption',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No image...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add an image',
        description: 'Button label',
    }),
    itemsField: {
        type: 'image-with-caption',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Image',
            description: 'Breadcrumb field label',
        }),
    },
};

var images = {
    id: 'images',
    component: 'images',
    itemsField:{
        type: 'image',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Image',
            description: 'Breadcrumb field label',
        }),
    }
};

var inputElement = {
    id: 'input-element',
    component: 'input-element',
    settings: [
        {
            name: 'textStyle',
            type: 'text-style',
        },
        {
            name: 'buttonStyle',
            type: 'box-style',
            className: 'mt-4'
        },
    ]
};

var items = {
    id: 'items',
    component: 'items',
};

var itemTextStyle = {
    id: 'item-text-style',
    component: 'text-style-form',
    fields: [
        {
            name: 'style',
            type: 'text-style',
        },
    ],
};

var letterSpacing = {
    id: 'letter-spacing',
    component: 'number-with-icon',
    icon: {
        icon: [
            48,
            48,
            [],
            'f067',
            'M12 14h5l-7-7-7 7h5v20h-5l7 7 7-7h-5v-20zm8-4v4h24v-4h-24zm0 28h24v-4h-24v4zm0-12h24v-4h-24v4z',
        ],
        iconName: 'letter-spacing',
        prefix: 'fas',
    },
    iconRotation: -90,
    dataList: [-2, -1.5, -1, -0.5, 0, 0.5, 1, 1.5, 2],
    float: true,
};

var lineHeight = {
    id: 'line-height',
    component: 'number-with-icon',
    icon: {
        icon: [
            48,
            48,
            [],
            'f067',
            'M12 14h5l-7-7-7 7h5v20h-5l7 7 7-7h-5v-20zm8-4v4h24v-4h-24zm0 28h24v-4h-24v4zm0-12h24v-4h-24v4z',
        ],
        iconName: 'line-height',
        prefix: 'fas',
    },
    dataList: [1, 1.1, 1.2, 1.3, 1.4, 1.5, 2],
    float: true,
};

var def$1 = {
    id: 'keypad-layout',
    fields: [
        {
            name: 'columnAlign',
            type: 'align-horizontal',
            defaultValue: 'middle',
            label: reactIntl.defineMessage({
                defaultMessage: 'Align items',
                description: 'Field label',
            }),
        },
        {
            name: 'columns',
            type: 'radios',
            options: [
                {
                    value: 1,
                    label: 1,
                },
                {
                    value: 2,
                    label: 2,
                },
                {
                    value: 3,
                    label: 3,
                },
                {
                    value: 4,
                    label: 4,
                },
            ],
            label: reactIntl.defineMessage({
                defaultMessage: 'Columns',
                description: 'Field label',
            }),
        },
        {
            name: 'spacing',
            type: 'number',
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Spacing',
                description: 'Field label',
            }),
        },
        {
            name: 'withSquareItems',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'Use square keys',
                description: 'Field label',
            }),
        },
    ],
};

const { fields: fields$4 } = def$1;

var keypadLayoutForm = {
    id: 'keypad-layout-form',
    component: 'keypad-layout-form',
    fields: fields$4,
};

var marker$1 = {
    id: 'marker',
    component: 'field-with-form',
    labelPath: 'title.body',
    fields: [
        {
            name: 'title',
            type: 'heading-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Title',
                description: 'Field label',
            }),
        },
        {
            name: 'description',
            type: 'text-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Description',
                description: 'Field label',
            }),
        },
        {
            name: 'geoPosition',
            type: 'geo-position',
            label: reactIntl.defineMessage({
                defaultMessage: 'Position',
                description: 'Field label',
            }),
        }
    ]
};

var markerWithImage$1 = {
    id: 'marker-with-image',
    component: 'field-with-form',
    labelPath: 'title.body',
    fields: [
        {
            name: 'title',
            type: 'heading-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Title',
                description: 'Field label',
            }),
        },
        {
            name: 'description',
            type: 'text-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Description',
                description: 'Field label',
            }),
        },
        {
            name: 'image',
            type: 'image',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
        },
        {
            name: 'geoPosition',
            type: 'geo-position',
            label: reactIntl.defineMessage({
                defaultMessage: 'Position',
                description: 'Field label',
            }),
        },
    ]
};

var markers = {
    id: 'markers',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No marker...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add a marker',
        description: 'Button label',
    }),
    itemsField: {
        type: 'marker',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Marker',
            description: 'Breadcrumb field label',
        }),
    }
};

var markersWithImage = {
    id: 'markers-with-image',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No marker...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add a marker',
        description: 'Button label',
    }),
    itemsField: {
        type: 'marker-with-image',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Marker',
            description: 'Breadcrumb field label',
        }),
    },
};

var mapZoom = {
    id: 'map-zoom',
    component: 'number',
    min: 0,
    max: 20,
};

var mediaThumbnail = {
    id: 'media-thumbnail',
    component: 'media-thumbnail',
    media: true,
};

var message$1 = {
    id: 'message',
    component: 'message',
    labelPath: 'message',
    thumbnailPath: 'avatar.thumbnail_url',
    fields: [
        {
            name: 'speaker',
            type: 'select',
            label: reactIntl.defineMessage({
                defaultMessage: 'Speaker',
                description: 'Field label',
            }),
        },
        {
            name: 'message',
            type: 'text',
            label: reactIntl.defineMessage({
                defaultMessage: 'Message',
                description: 'Field label',
            }),
        },
        {
            name: 'image',
            type: 'image',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
        },
        {
            name: 'audio',
            type: 'audio',
            label: reactIntl.defineMessage({
                defaultMessage: 'Audio attachment',
                description: 'Field label'
            })
        },
        {
            name: 'putAudioBeforeText',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'Put audio before text',
                description: 'Field label',
            }),
        },
        {
            name: 'timingOverrides',
            component: 'toggle-section',
            isList: true,
            fields: [
                {
                    name: 'enabled',
                    type: 'toggle',
                    isHorizontal: true,
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Override default timing',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'appearDelay',
                    type: 'number',
                    defaultValue: 2,
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Appear delay (seconds)',
                        description: 'Field label'
                    })
                },
                {
                    name: 'writingDuration',
                    type: 'number',
                    defaultValue: 5,
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Writing state duration (seconds)',
                        description: 'Field label'
                    })
                }
            ]
        }
    ],
};

var messages = {
    id: 'messages',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No message...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add a message',
        description: 'Button label',
    }),
    itemsField: {
        type: 'message',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Message',
            description: 'Breadcrumb field label',
        }),
    },
};

var metadata$1 = {
    id: 'metadata',
    component: 'field-with-form',
    labelPath: 'title',
    noValueLabel: reactIntl.defineMessage({
        defaultMessage: 'Edit metadata...',
        description: 'No value field label',
    }),
    fields: [
        {
            name: 'title',
            type: 'text',
            label: reactIntl.defineMessage({
                defaultMessage: 'Title',
                description: 'Field label',
            }),
        },
        {
            name: 'description',
            type: 'text',
            label: reactIntl.defineMessage({
                defaultMessage: 'Description',
                description: 'Field label',
            }),
        },
    ],
};

var number = {
    id: 'number',
    component: 'number',
};

var padding = {
    id: 'padding',
    component: 'padding',
};

var password = {
    id: 'password',
    component: 'text',
    type: 'password'
};

var parameters = {
    id: 'parameters',
    isList: true,
    fields: [
        {
            name: 'metadata',
            type: 'metadata',
            label: reactIntl.defineMessage({
                defaultMessage: 'Metadata',
                description: 'field label',
            }),
        },
    ],
};

var quizAnswer$1 = {
    id: 'quiz-answer',
    component: 'field-with-form',
    labelPath: 'label.body',
    fields: [
        {
            name: 'label',
            type: 'text-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Label',
                description: 'Field label',
            }),
        },
        {
            name: 'good',
            type: 'true-false',
            label: reactIntl.defineMessage({
                defaultMessage: 'Answer icon value',
                description: 'Field label',
            }),
        },
        {
            name: 'customAnswerLabel',
            type: 'text-element',
            textOnly: true,
            fieldsProps: {
                textStyle: {
                    excludedFields: ['highlight', 'link'],
                },
            },
            label: reactIntl.defineMessage({
                defaultMessage: 'Answer feedback',
                description: 'Field label',
            }),
        },
        {
            name: 'answerImage',
            type: 'visual',
            label: reactIntl.defineMessage({
                defaultMessage: 'Answer feedback image',
                description: 'Visual field label',
            }),
        },
        {
            type: 'fields',
            isList: true,
            fields: [
                {
                    name: 'textStyle',
                    type: 'text-style-form',

                    label: reactIntl.defineMessage({
                        defaultMessage: 'Button text style',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'buttonStyle',
                    type: 'box-style-form',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Button style',
                        description: 'Field label',
                    }),
                },
            ],
        },
    ],
};

var quizAnswers = {
    id: 'quiz-answers',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No answer...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add an answer',
        description: 'Button label',
    }),
    itemsField: {
        type: 'quiz-answer',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Answer',
            description: 'Breadcrumb field label',
        }),
    },
};

var quizPointsAnswer = {
    id: 'quiz-points-answer',
    component: 'field-with-form',
    labelPath: 'label.body',
    fields: [
        {
            name: 'label',
            type: 'text-element',
            textOnly: true,
            fieldsProps: {
                textStyle: {
                    excludedFields: ['highlight', 'link'],
                },
            },
            label: reactIntl.defineMessage({
                defaultMessage: 'Label',
                description: 'Field label',
            }),
        },
        {
            name: 'points',
            type: 'number',
            isHorizontal: true,
            label: reactIntl.defineMessage({
                defaultMessage: 'Points',
                description: 'Field label',
            }),
        },
        {
            type: 'fields',
            isList: true,
            fields: [
                {
                    type: 'box-style-form',
                    name: 'buttonStyle',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Button style',
                        description: 'Field label',
                    }),
                },
            ],
        },
    ],
};

var quizPointsAnswers = {
    id: 'quiz-points-answers',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No answer...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add an answer',
        description: 'Button label',
    }),
    itemsField: {
        type: 'quiz-points-answer',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Answer',
            description: 'Breadcrumb field label',
        }),
    }
};

var radios = {
    id: 'radios',
    component: 'radios',
};

var screenLayout = {
    id: 'screen-layout',
    component: 'screen-layout'
};

var select = {
    id: 'select',
    component: 'select-advanced',
};

var shadowAngle = {
    id: 'shadow-angle',
    component: 'shadow-angle',
};

var slider = {
    id: 'slider',
    component: 'slider',
};

var speaker$1 = {
    id: 'speaker',
    component: 'field-with-form',
    labelPath: 'name',
    thumbnailPath: 'avatar.thumbnail_url',
    fields: [
        {
            name: 'name',
            type: 'text',
            label: reactIntl.defineMessage({
                defaultMessage: 'Name',
                description: 'Field label',
            }),
        },
        {
            name: 'avatar',
            type: 'image',
            label: reactIntl.defineMessage({
                defaultMessage: 'Avatar',
                description: 'Field label',
            }),
        },
        {
            name: 'side',
            type: 'radios',
            options: [
                {
                    value: 'left',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Left',
                        description: 'Field left label',
                    })
                },
                {
                    value: 'right',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Right',
                        description: 'Field right label',
                    })
                }
            ],
            label: reactIntl.defineMessage({
                defaultMessage: 'Side',
                description: 'Field label',
            }),
        },
        {
            name: 'color',
            type: 'color',
            label: reactIntl.defineMessage({
                defaultMessage: 'Color',
                description: 'Field label',
            }),
        }
    ]
};

var speakers$1 = {
    id: 'speakers',
    component: 'items',
    getDefaultValue: () => ({ id: uuid.v1(), side: 'left' }),
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No speaker...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add a speaker',
        description: 'Button label',
    }),
    itemsField: {
        type: 'speaker',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Speaker',
            description: 'Breadcrumb field label',
        }),
    },
};

var textModal = {
    id: 'text-modal',
    component: 'text-modal',
    media: true,
    settings: [
        {
            name: 'textStyle',
            type: 'text-style',
        },
    ],
};

var def = {
    id: 'text-style',
    fields: [
        {
            key: 'typography',
            type: 'fields',
            label: reactIntl.defineMessage({
                defaultMessage: 'Typography',
                description: 'Fields section label',
            }),
            isList: true,
            fields: [
                {
                    name: 'fontFamily',
                    type: 'font-family',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Font family',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'color',
                    type: 'color',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Color',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'fontSize',
                    type: 'font-size',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Font size',
                        description: 'Field label',
                    }),
                },
                {
                    component: 'font-style-with-align',
                    fontStyleName: 'fontStyle',
                    alignName: 'align',
                },
            ],
        },
        {
            type: 'fields',
            name: 'highlight',
            label: reactIntl.defineMessage({
                defaultMessage: 'Highlight',
                description: 'Fields section label',
            }),
            isList: true,
            fields: [
                {
                    name: 'color',
                    type: 'color',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Color',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'textColor',
                    type: 'color',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Text color',
                        description: 'Field label',
                    }),
                },
            ],
        },
        {
            type: 'fields',
            name: 'link',
            label: reactIntl.defineMessage({
                defaultMessage: 'Links',
                description: 'Fields section label',
            }),
            isList: true,
            fields: [
                {
                    name: 'color',
                    type: 'color',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Color',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'fontStyle',
                    component: 'font-style',
                    isHorizontal: true,
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Style',
                        description: 'Field label',
                    }),
                },
            ],
        },
        {
            type: 'fields',
            label: reactIntl.defineMessage({
                defaultMessage: 'Advanced settings',
                description: 'Fields section label',
            }),
            isList: true,
            fields: [
                {
                    name: 'fontWeight',
                    type: 'font-weight',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Font weight',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'lineHeight',
                    type: 'line-height',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Line height',
                        description: 'Field label',
                    }),
                },
                {
                    name: 'letterSpacing',
                    type: 'letter-spacing',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Letter spacing',
                        description: 'Field label',
                    }),
                },
                {
                    component: 'font-style-transform',
                    name: 'fontStyle',
                    transformName: 'transform',
                    label: reactIntl.defineMessage({
                        defaultMessage: 'Case',
                        description: 'Field label',
                    }),
                },
            ],
        },
    ],
};

const { fields: fields$3 } = def;

var textStyleForm = {
    id: 'text-style-form',
    component: 'text-style-form',
    fields: fields$3,
};

var text$1 = {
    id: 'text',
    component: 'text',
};

var toggle = {
    id: 'toggle',
    component: 'toggle',
};

var tokens = {
    id: 'tokens',
    component: 'tokens',
};

var trueFalse = {
    id: 'true-false',
    component: 'trueFalse',
};

var url = {
    id: 'url',
    component: 'url',
};

var video = {
    id: 'video',
    component: 'video',
    media: true,
    // type: 'video',
};

var videoElement = {
    id: 'video-element',
    fields: [
        {
            name: 'media',
            type: 'video',
        },
    ],
    settings: [
        {
            name: 'autoPlay',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'AutoPlay',
                description: 'Field label',
            }),
        },
        {
            name: 'loop',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'Loop',
                description: 'Field label',
            }),
        },
        {
            name: 'withControls',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'With controls button',
                description: 'Field label',
            }),
        },
        {
            name: 'withSeekBar',
            type: 'toggle',
            label: reactIntl.defineMessage({
                defaultMessage: 'With seek bar',
                description: 'Field label',
            }),
        },
        {
            name: 'thumbnail',
            type: 'media-thumbnail',
            label: reactIntl.defineMessage({
                defaultMessage: 'Thumbnail',
                description: 'Field label',
            }),
        },
        {
            name: 'color',
            type: 'color',
            label: reactIntl.defineMessage({
                defaultMessage: 'Controls color',
                description: 'Field label',
            }),
        },
        {
            name: 'progressColor',
            type: 'color',
            label: reactIntl.defineMessage({
                defaultMessage: 'Progress bar color',
                description: 'Field label',
            }),
        },
        {
            name: 'captions',
            type: 'captions',
            label: reactIntl.defineMessage({
                defaultMessage: 'Closed captions',
                description: 'Field label',
            }),
        },
    ],
};

var visual = {
    id: 'visual',
    component: 'visual',
    media: true,
};

var visualWithCaption = {
    id: 'visual-with-caption',
    component: 'field-with-form',
    labelPath: 'caption.body',
    thumbnailPath: 'media.thumbnail_url',
    fields: [
        {
            name: 'media',
            type: 'visual',
            label: reactIntl.defineMessage({
                defaultMessage: 'Image',
                description: 'Field label',
            }),
        },
        {
            name: 'caption',
            type: 'text-element',
            label: reactIntl.defineMessage({
                defaultMessage: 'Caption',
                description: 'Field label',
            }),
        }
    ]
};

var visualsWithCaption = {
    id: 'visuals-with-caption',
    component: 'items',
    noItemLabel: reactIntl.defineMessage({
        defaultMessage: 'No image...',
        description: 'Label when there is no item',
    }),
    addItemLabel: reactIntl.defineMessage({
        defaultMessage: 'Add an image',
        description: 'Button label',
    }),
    itemsField: {
        type: 'visual-with-caption',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Image',
            description: 'Breadcrumb field label',
        }),
    },
};

var visuals = {
    id: 'visuals',
    component: 'visuals',
    itemsField:{
        type: 'visual',
        breadcrumbLabel: reactIntl.defineMessage({
            defaultMessage: 'Image',
            description: 'Breadcrumb field label',
        }),
    }
};

var allFields = /*#__PURE__*/Object.freeze({
    __proto__: null,
    alignHorizontal: alignHorizontal,
    alignVertical: alignVertical,
    answer: answer$1,
    answers: answers,
    audio: audio,
    audioElement: audioElement,
    authorElement: authorElement,
    background: background,
    backgroundRecommendation: backgroundRecommendation,
    badge: badge$1,
    borderRadius: borderRadius,
    borderStyle: borderStyle,
    borderWidth: borderWidth,
    boxStyle: def$5,
    boxStyleForm: boxStyleForm,
    button: button$1,
    buttonElement: buttonElement,
    buttonLayout: buttonLayout,
    buttonLink: buttonLink,
    buttons: buttons,
    callToAction: def$4,
    callToActionForm: callToActionForm,
    captions: captions,
    cardLayout: cardLayout,
    checkboxes: checkboxes,
    closedCaptions: closedCaptions,
    color: color$1,
    conversation: conversation,
    date: date,
    dateElement: dateElement,
    datetime: datetime,
    email: email,
    entries: entries,
    entriesWithImage: entriesWithImage,
    entriesWithVisual: entriesWithVisual,
    entry: entry,
    entryWithImage: entryWithImage,
    entryWithVisual: entryWithVisual,
    fieldWithForm: fieldWithForm,
    fields: fields$6,
    fit: fit,
    font: font$1,
    fontFamily: fontFamily,
    fontSize: fontSize,
    fontWeight: fontWeight,
    fonts: fonts,
    footer: footer,
    geoPosition: geoPosition$1,
    graphBarStyle: def$2,
    graphBarStyleForm: graphBarStyleForm,
    header: header,
    headingElement: headingElement$1,
    image: image,
    imageWithCaption: imageWithCaption,
    images: images,
    imagesWithCaption: imagesWithCaption,
    inputElement: inputElement,
    itemTextStyle: itemTextStyle,
    items: items,
    keypadLayout: def$1,
    keypadLayoutForm: keypadLayoutForm,
    letterSpacing: letterSpacing,
    lineHeight: lineHeight,
    mapZoom: mapZoom,
    marker: marker$1,
    markerWithImage: markerWithImage$1,
    markers: markers,
    markersWithImage: markersWithImage,
    mediaThumbnail: mediaThumbnail,
    message: message$1,
    messages: messages,
    metadata: metadata$1,
    number: number,
    padding: padding,
    parameters: parameters,
    password: password,
    quizAnswer: quizAnswer$1,
    quizAnswers: quizAnswers,
    quizPOintsAnswers: quizPointsAnswers,
    quizPointsAnswer: quizPointsAnswer,
    radios: radios,
    screenLayout: screenLayout,
    select: select,
    shadowAngle: shadowAngle,
    shareIncentive: def$3,
    shareIncentiveForm: shareIncentiveForm,
    slider: slider,
    speaker: speaker$1,
    speakers: speakers$1,
    text: text$1,
    textElement: textElement$1,
    textModal: textModal,
    textStyle: def,
    textStyleForm: textStyleForm,
    toggle: toggle,
    tokens: tokens,
    trueFalse: trueFalse,
    url: url,
    video: video,
    videoElement: videoElement,
    visual: visual,
    visualWithCaption: visualWithCaption,
    visuals: visuals,
    visualsWithCaption: visualsWithCaption
});

const manager$1 = new FieldsManager$1(Object.keys(allFields).map(key => allFields[key]));

var convertStyleToString = function convertStyleToString(style) {
  return style !== null ? Object.keys(style).map(function (key) {
    return "".concat(changeCase.paramCase(key), ":").concat(isNumber(style[key]) ? "".concat(style[key], "px") : style[key], ";");
  }).join('\n') : '';
};
var convertStyleToString$1 = convertStyleToString;

/*! clipboard-copy. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */

// @note vendoring this: https://github.com/feross/clipboard-copy/blob/master/index.js
// we might want to add that to the npm deps and just use it

function makeError() {
  return new DOMException('The request is not allowed', 'NotAllowedError');
}
function copyClipboardApi(_x) {
  return _copyClipboardApi.apply(this, arguments);
}
function _copyClipboardApi() {
  _copyClipboardApi = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(text) {
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          if (navigator.clipboard) {
            _context.next = 2;
            break;
          }
          throw makeError();
        case 2:
          return _context.abrupt("return", navigator.clipboard.writeText(text));
        case 3:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _copyClipboardApi.apply(this, arguments);
}
function copyExecCommand(_x2) {
  return _copyExecCommand.apply(this, arguments);
}
function _copyExecCommand() {
  _copyExecCommand = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(text) {
    var span, selection, range, success;
    return _regeneratorRuntime().wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          // Put the text to copy into a <span>
          span = document.createElement('span');
          span.textContent = text;

          // Preserve consecutive spaces and newlines
          span.style.whiteSpace = 'pre';
          span.style.webkitUserSelect = 'auto';
          span.style.userSelect = 'all';

          // Add the <span> to the page
          document.body.appendChild(span);

          // Make a selection object representing the range of text selected by the user
          selection = window.getSelection();
          range = window.document.createRange();
          selection.removeAllRanges();
          range.selectNode(span);
          selection.addRange(range);

          // Copy text to the clipboard
          success = false;
          try {
            success = window.document.execCommand('copy');
          } finally {
            // Cleanup
            selection.removeAllRanges();
            window.document.body.removeChild(span);
          }
          if (success) {
            _context2.next = 15;
            break;
          }
          throw makeError();
        case 15:
        case "end":
          return _context2.stop();
      }
    }, _callee2);
  }));
  return _copyExecCommand.apply(this, arguments);
}
function copyToClipboard(_x3) {
  return _copyToClipboard.apply(this, arguments);
}
function _copyToClipboard() {
  _copyToClipboard = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(text) {
    return _regeneratorRuntime().wrap(function _callee3$(_context3) {
      while (1) switch (_context3.prev = _context3.next) {
        case 0:
          _context3.prev = 0;
          _context3.next = 3;
          return copyClipboardApi(text);
        case 3:
          _context3.next = 15;
          break;
        case 5:
          _context3.prev = 5;
          _context3.t0 = _context3["catch"](0);
          _context3.prev = 7;
          _context3.next = 10;
          return copyExecCommand(text);
        case 10:
          _context3.next = 15;
          break;
        case 12:
          _context3.prev = 12;
          _context3.t1 = _context3["catch"](7);
          throw _context3.t1 || _context3.t0 || makeError();
        case 15:
        case "end":
          return _context3.stop();
      }
    }, _callee3, null, [[0, 5], [7, 12]]);
  }));
  return _copyToClipboard.apply(this, arguments);
}

var getColorAsString = function getColorAsString() {
  var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var overideAlpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  if (value === null) {
    return null;
  }
  var _ref = isString(value) ? {
      color: value
    } : value,
    _ref$color = _ref.color,
    color = _ref$color === void 0 ? null : _ref$color,
    _ref$alpha = _ref.alpha,
    alpha = _ref$alpha === void 0 ? null : _ref$alpha;
  return alpha !== null || overideAlpha !== null ? tinycolor(color).setAlpha(overideAlpha !== null ? overideAlpha : alpha).toRgbString() : color;
};
var getColorAsString$1 = getColorAsString;

var getComponentFromName = function getComponentFromName() {
  var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var components = arguments.length > 1 ? arguments[1] : undefined;
  var defaultComponent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  if (components === null || name === null) {
    return defaultComponent;
  }
  var pascalName = changeCase.pascalCase(name);
  return components[pascalName] || components[name] || defaultComponent;
};
var getComponentFromName$1 = getComponentFromName;

var getDisplayName = function getDisplayName(_ref) {
  var _ref$displayName = _ref.displayName,
    displayName = _ref$displayName === void 0 ? null : _ref$displayName,
    _ref$name = _ref.name,
    name = _ref$name === void 0 ? null : _ref$name;
  return displayName || name || 'Component';
};
var getDisplayName$1 = getDisplayName;

var getFontFamily = function getFontFamily(value) {
  if (value == null) {
    return null;
  }
  var _ref = isObject(value) ? value : {
      name: value
    },
    name = _ref.name,
    _ref$fallback = _ref.fallback,
    fallback = _ref$fallback === void 0 ? null : _ref$fallback;
  return [name, fallback].filter(function (it) {
    return it !== null;
  }).map(function (it) {
    return "\"".concat(it, "\"");
  }).join(', ');
};
var getFontFamilyFromFont = getFontFamily;

var _excluded$1$2 = ["isPreview", "isView", "current", "openWebView", "enableInteraction", "disableInteraction"];
var getFooterProps = function getFooterProps() {
  var footer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$isPreview = _ref.isPreview,
    isPreview = _ref$isPreview === void 0 ? false : _ref$isPreview,
    _ref$isView = _ref.isView,
    isView = _ref$isView === void 0 ? false : _ref$isView,
    _ref$current = _ref.current,
    current = _ref$current === void 0 ? false : _ref$current,
    _ref$openWebView = _ref.openWebView,
    openWebView = _ref$openWebView === void 0 ? false : _ref$openWebView,
    _ref$enableInteractio = _ref.enableInteraction,
    enableInteraction = _ref$enableInteractio === void 0 ? true : _ref$enableInteractio,
    _ref$disableInteracti = _ref.disableInteraction,
    disableInteraction = _ref$disableInteracti === void 0 ? false : _ref$disableInteracti,
    otherProps = _objectWithoutProperties(_ref, _excluded$1$2);
  var _ref2 = footer || {},
    _ref2$callToAction = _ref2.callToAction,
    callToAction = _ref2$callToAction === void 0 ? null : _ref2$callToAction;
  var footerProps = React.useMemo(function () {
    return {
      callToAction: _objectSpread$1(_objectSpread$1({}, callToAction), {}, {
        animationDisabled: isPreview,
        focusable: current && isView,
        openWebView: openWebView,
        enableInteraction: enableInteraction,
        disableInteraction: disableInteraction
      }, otherProps)
    };
  }, [callToAction, isPreview, isView, current, enableInteraction, disableInteraction, otherProps]);
  return footerProps;
};
var getFooterProps$1 = getFooterProps;

var getRemainder = function getRemainder(number) {
  var remainder = number - Math.floor(number);
  return remainder.toFixed(4);
};
var largestRemainderRound = function largestRemainderRound(numbers, desiredTotal) {
  if (!isArray(numbers) || numbers.length < 1) return numbers;
  var result = numbers.map(function (number, index) {
    return {
      floor: Math.floor(number) || 0,
      remainder: getRemainder(number),
      index: index
    };
  }).sort(function (a, b) {
    return b.remainder - a.remainder;
  });
  var lowerSum = result.reduce(function (sum, current) {
    return sum + current.floor;
  }, 0);
  var delta = desiredTotal - lowerSum;
  for (var i = 0; i < delta; i += 1) {
    if (result[i]) {
      result[i].floor += 1;
    }
  }
  return result.sort(function (a, b) {
    return a.index - b.index;
  }).map(function (res) {
    return res.floor;
  });
};
var largestRemainderRound$1 = largestRemainderRound;

var _excluded$a = ["image", "video", "media", "color"];
var getLayersFromBackground = function getLayersFromBackground() {
  var background = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  if (background === null) {
    return [];
  }
  return (isArray(background) ? background : [background]).reduce(function (layers, _ref) {
    var _ref$image = _ref.image,
      image = _ref$image === void 0 ? null : _ref$image,
      _ref$video = _ref.video,
      video = _ref$video === void 0 ? null : _ref$video,
      _ref$media = _ref.media,
      media = _ref$media === void 0 ? null : _ref$media,
      _ref$color = _ref.color,
      color = _ref$color === void 0 ? null : _ref$color,
      data = _objectWithoutProperties(_ref, _excluded$a);
    if (image === null && video === null && color === null) {
      return layers;
    }
    if (image !== null && video !== null) {
      return [].concat(_toConsumableArray(layers), [_objectSpread$1({
        media: image
      }, data), _objectSpread$1({
        media: video,
        color: color
      }, data)]);
    }
    return [].concat(_toConsumableArray(layers), [_objectSpread$1({
      media: media || image || video,
      color: color
    }, data)]);
  }, []);
};
var getLayersFromBackground$1 = getLayersFromBackground;

var getMediaFilesAsArray = function getMediaFilesAsArray(files) {
  return files !== null && isArray(files) ? files : Object.keys(files || {}).reduce(function (newFiles, key) {
    return [].concat(_toConsumableArray(newFiles), [_objectSpread$1({
      handle: key
    }, files[key])]);
  }, []);
};
var getMediaFilesAsArray$1 = getMediaFilesAsArray;

// eslint-disable-next-line import/prefer-default-export
var getOptimalImageUrl = function getOptimalImageUrl() {
  var media = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var containerWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  var containerHeight = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},
    _ref$resolution = _ref.resolution,
    resolution = _ref$resolution === void 0 ? 1 : _ref$resolution,
    _ref$maxDiff = _ref.maxDiff,
    maxDiff = _ref$maxDiff === void 0 ? 800 : _ref$maxDiff;
  var _ref2 = media || {},
    _ref2$sizes = _ref2.sizes,
    sizes = _ref2$sizes === void 0 ? null : _ref2$sizes,
    _ref2$url = _ref2.url,
    defaultUrl = _ref2$url === void 0 ? null : _ref2$url,
    _ref2$metadata = _ref2.metadata,
    _ref2$metadata2 = _ref2$metadata === void 0 ? {} : _ref2$metadata,
    imgWidth = _ref2$metadata2.width,
    imgHeight = _ref2$metadata2.height;
  if (sizes === null || containerWidth === null && containerHeight === null) {
    return defaultUrl;
  }
  var finalSizes = _objectSpread$1({
    original: {
      url: defaultUrl,
      width: imgWidth,
      height: imgHeight
    }
  }, sizes);
  var finalContainerWidth = containerWidth !== null && resolution !== null ? containerWidth * resolution : containerWidth;
  var finalContainerHeight = containerHeight !== null && resolution !== null ? containerHeight * resolution : containerHeight;
  var _Object$keys$reduce = Object.keys(finalSizes).reduce(function (acc, key) {
      var currentDiff = acc.diff,
        currentIsLarger = acc.isLarger,
        currentSize = acc.size;
      var _finalSizes$key = finalSizes[key],
        url = _finalSizes$key.url,
        _finalSizes$key$width = _finalSizes$key.width,
        width = _finalSizes$key$width === void 0 ? null : _finalSizes$key$width,
        _finalSizes$key$heigh = _finalSizes$key.height,
        height = _finalSizes$key$heigh === void 0 ? null : _finalSizes$key$heigh;
      var diffWidth = width !== null && finalContainerWidth !== null ? width - finalContainerWidth : null;
      var diffHeight = height !== null && finalContainerHeight !== null ? height - finalContainerHeight : null;
      var isLarger = (diffWidth === null || diffWidth >= 0) && (diffHeight === null || diffHeight >= 0);
      var diff = [diffWidth, diffHeight].reduce(function (total, value) {
        return value !== null ? (total || 0) + Math.abs(value) : total;
      }, null);
      if (diff === null) {
        diff = Infinity;
      }
      var size = (width || 0) + (height || 0);
      var sizeIsLarger = size > currentSize;
      if (
      // Difference is lower and image is larger
      diff < currentDiff && isLarger ||
      // Difference is lower and current is not larger or diff is greater than max
      diff < currentDiff && (!currentIsLarger && sizeIsLarger || currentDiff > maxDiff) ||
      // Image is larger and diff is smaller than max
      diff <= maxDiff && !currentIsLarger && isLarger ||
      // Image is larger than previous
      diff <= maxDiff && !currentIsLarger && !isLarger && sizeIsLarger) {
        return {
          key: key,
          url: url,
          diff: diff,
          isLarger: isLarger
        };
      }
      return acc;
    }, {
      key: null,
      url: defaultUrl,
      diff: Infinity,
      isLarger: false,
      size: 0
    }),
    finalUrl = _Object$keys$reduce.url;
  return finalUrl;
};
var getOptimalImageUrl$1 = getOptimalImageUrl;

var getSecondsFromTime = function getSecondsFromTime(time) {
  var t = time.split(':');
  try {
    var s = t[2].split(',');
    if (s.length === 1) {
      s = t[2].split('.');
    }
    return parseFloat(t[0], 10) * 3600 + parseFloat(t[1], 10) * 60 + parseFloat(s[0], 10) + parseFloat(s[1], 10) / 1000;
  } catch (e) {
    return 0;
  }
};
var getSecondsFromTime$1 = getSecondsFromTime;

function getShadowCoords(angle, distance) {
  var x = (Math.cos(angle) * distance).toFixed(3);
  var y = (Math.sin(angle) * distance).toFixed(3);
  return {
    x: x,
    y: y
  };
}

function getJustifyContent(horizontal) {
  if (horizontal === 'left') return 'flex-start';
  if (horizontal === 'middle') return 'center';
  if (horizontal === 'right') return 'flex-end';
  return null;
}
function getAlignItems(vertical) {
  if (vertical === 'top') return 'flex-start';
  if (vertical === 'middle') return 'center';
  if (vertical === 'bottom') return 'flex-end';
  return null;
}
var getStyleFromAlignment = function getStyleFromAlignment(value) {
  if (value === null) {
    return null;
  }
  var _value$horizontal = value.horizontal,
    horizontal = _value$horizontal === void 0 ? null : _value$horizontal,
    _value$vertical = value.vertical,
    vertical = _value$vertical === void 0 ? null : _value$vertical;
  var justifyContent = getJustifyContent(horizontal);
  var alignItems = getAlignItems(vertical);
  return {
    justifyContent: justifyContent,
    alignItems: alignItems
  };
};
var getStyleFromAlignment$1 = getStyleFromAlignment;

var getStyleFromColor = function getStyleFromColor() {
  var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var property = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'backgroundColor';
  var overideAlpha = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  var color = getColorAsString$1(value, overideAlpha);
  return color !== null ? _defineProperty({}, property, color) : null;
};
var getStyleFromColor$1 = getStyleFromColor;

var getStyleFromBorder = function getStyleFromBorder(value) {
  if (value == null) {
    return null;
  }
  var _value$width = value.width,
    width = _value$width === void 0 ? null : _value$width,
    _value$style = value.style,
    borderStyle = _value$style === void 0 ? null : _value$style,
    _value$color = value.color,
    color = _value$color === void 0 ? null : _value$color;
  return _objectSpread$1(_objectSpread$1(_objectSpread$1({}, width !== null ? {
    borderWidth: width
  } : null), borderStyle !== null ? {
    borderStyle: borderStyle
  } : null), getStyleFromColor$1(color, 'borderColor'));
};
var getStyleFromBorder$1 = getStyleFromBorder;

var getStyleFromShadow = function getStyleFromShadow(value) {
  if (value == null) {
    return null;
  }
  var _ref = value || {},
    _ref$shadowAngle = _ref.shadowAngle,
    shadowAngle = _ref$shadowAngle === void 0 ? null : _ref$shadowAngle,
    _ref$shadowDistance = _ref.shadowDistance,
    shadowDistance = _ref$shadowDistance === void 0 ? null : _ref$shadowDistance,
    _ref$shadowBlur = _ref.shadowBlur,
    shadowBlur = _ref$shadowBlur === void 0 ? null : _ref$shadowBlur,
    _ref$shadowColor = _ref.shadowColor,
    shadowColor = _ref$shadowColor === void 0 ? null : _ref$shadowColor;
  if (!shadowAngle) return null;
  var blur = shadowBlur || '0';
  var color = getColorAsString$1(shadowColor) || '#000000';
  var _getShadowCoords = getShadowCoords(shadowAngle, shadowDistance),
    x = _getShadowCoords.x,
    y = _getShadowCoords.y;
  var boxShadow = "".concat(x, "px ").concat(y, "px ").concat(blur, "px 0 ").concat(color);
  return {
    boxShadow: boxShadow
  };
};

// @todo hmm, gotta find a better way to handle this
var getStyleFromBox = function getStyleFromBox(value) {
  if (value === null) {
    return null;
  }
  var _value$backgroundColo = value.backgroundColor,
    backgroundColor = _value$backgroundColo === void 0 ? null : _value$backgroundColo,
    _value$borderRadius = value.borderRadius,
    borderRadius = _value$borderRadius === void 0 ? null : _value$borderRadius,
    _value$padding = value.padding,
    padding = _value$padding === void 0 ? null : _value$padding,
    _value$paddingTop = value.paddingTop,
    paddingTop = _value$paddingTop === void 0 ? null : _value$paddingTop,
    _value$paddingRight = value.paddingRight,
    paddingRight = _value$paddingRight === void 0 ? null : _value$paddingRight,
    _value$paddingBottom = value.paddingBottom,
    paddingBottom = _value$paddingBottom === void 0 ? null : _value$paddingBottom,
    _value$paddingLeft = value.paddingLeft,
    paddingLeft = _value$paddingLeft === void 0 ? null : _value$paddingLeft,
    _value$borderWidth = value.borderWidth,
    borderWidth = _value$borderWidth === void 0 ? null : _value$borderWidth,
    _value$borderStyle = value.borderStyle,
    borderStyle = _value$borderStyle === void 0 ? null : _value$borderStyle,
    _value$borderColor = value.borderColor,
    borderColor = _value$borderColor === void 0 ? null : _value$borderColor,
    _value$shadowAngle = value.shadowAngle,
    shadowAngle = _value$shadowAngle === void 0 ? null : _value$shadowAngle,
    _value$shadowDistance = value.shadowDistance,
    shadowDistance = _value$shadowDistance === void 0 ? null : _value$shadowDistance,
    _value$shadowBlur = value.shadowBlur,
    shadowBlur = _value$shadowBlur === void 0 ? null : _value$shadowBlur,
    _value$shadowColor = value.shadowColor,
    shadowColor = _value$shadowColor === void 0 ? null : _value$shadowColor;
  var border = {
    width: borderWidth,
    style: borderStyle,
    color: borderColor
  };
  var shadow = {
    shadowAngle: shadowAngle,
    shadowDistance: shadowDistance,
    shadowBlur: shadowBlur,
    shadowColor: shadowColor
  };
  var _ref = isObject(padding) ? padding : {
      padding: padding
    },
    _ref$top = _ref.top,
    paddingValueTop = _ref$top === void 0 ? null : _ref$top,
    _ref$right = _ref.right,
    paddingValueRight = _ref$right === void 0 ? null : _ref$right,
    _ref$bottom = _ref.bottom,
    paddingValueBottom = _ref$bottom === void 0 ? null : _ref$bottom,
    _ref$left = _ref.left,
    paddingValueLeft = _ref$left === void 0 ? null : _ref$left,
    _ref$padding = _ref.padding,
    paddingValue = _ref$padding === void 0 ? null : _ref$padding;
  return _objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({}, getStyleFromColor$1(backgroundColor, 'backgroundColor')), borderRadius !== null ? {
    borderRadius: borderRadius
  } : null), getStyleFromBorder$1(border)), getStyleFromShadow(shadow)), padding !== null || paddingValue !== null ? {
    padding: padding || paddingValue
  } : null), paddingTop !== null || paddingValueTop !== null ? {
    paddingTop: paddingTop || paddingValueTop
  } : null), paddingRight !== null || paddingValueRight != null ? {
    paddingRight: paddingRight || paddingValueRight
  } : null), paddingBottom !== null || paddingValueBottom !== null ? {
    paddingBottom: paddingBottom || paddingValueBottom
  } : null), paddingLeft !== null || paddingValueLeft !== null ? {
    paddingLeft: paddingLeft || paddingValueLeft
  } : null);
};
var getStyleFromBox$1 = getStyleFromBox;

var getStyleFromHighlight = function getStyleFromHighlight(value) {
  if (value == null) {
    return null;
  }
  var _value$textColor = value.textColor,
    textColor = _value$textColor === void 0 ? null : _value$textColor,
    _value$color = value.color,
    color = _value$color === void 0 ? null : _value$color;
  var colorString = color !== null ? getColorAsString$1(color) : null;
  var boxShadow = colorString !== null ? "0.05em 0px 0px ".concat(colorString, ", -0.05em 0px 0px ").concat(colorString) : null;
  return color !== null || textColor !== null ? _objectSpread$1(_objectSpread$1(_objectSpread$1({}, color !== null ? getStyleFromColor$1(color, 'backgroundColor') : null), textColor !== null ? getStyleFromColor$1(textColor, 'color') : null), color !== null ? {
    boxShadow: boxShadow,
    mozBoxShadow: boxShadow,
    msBoxShadow: boxShadow,
    webkitBoxShadow: boxShadow
  } : null) : null;
};
var getStyleFromHighlight$1 = getStyleFromHighlight;

var getStyleFromLink = function getStyleFromLink(value) {
  if (value == null) {
    return null;
  }
  var _value$color = value.color,
    color = _value$color === void 0 ? null : _value$color,
    fontStyle = value.fontStyle;
  var _ref = fontStyle || {},
    _ref$italic = _ref.italic,
    italic = _ref$italic === void 0 ? false : _ref$italic,
    _ref$bold = _ref.bold,
    bold = _ref$bold === void 0 ? false : _ref$bold,
    _ref$underline = _ref.underline,
    underline = _ref$underline === void 0 ? false : _ref$underline;
  return _objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({}, color !== null ? getStyleFromColor$1(color, 'color') : null), italic ? {
    fontStyle: 'italic'
  } : null), bold ? {
    fontWeight: 'bold'
  } : null), underline ? {
    textDecoration: 'underline'
  } : null);
};
var getStyleFromLink$1 = getStyleFromLink;

var getStyleFromText = function getStyleFromText(value) {
  if (value == null) {
    return null;
  }
  var _value$fontFamily = value.fontFamily,
    fontFamily = _value$fontFamily === void 0 ? null : _value$fontFamily,
    _value$fontSize = value.fontSize,
    fontSize = _value$fontSize === void 0 ? null : _value$fontSize,
    _value$fontStyle = value.fontStyle,
    fontStyle = _value$fontStyle === void 0 ? null : _value$fontStyle,
    _value$fontWeight = value.fontWeight,
    fontWeight = _value$fontWeight === void 0 ? null : _value$fontWeight,
    _value$lineHeight = value.lineHeight,
    lineHeight = _value$lineHeight === void 0 ? null : _value$lineHeight,
    _value$letterSpacing = value.letterSpacing,
    letterSpacing = _value$letterSpacing === void 0 ? null : _value$letterSpacing,
    _value$align = value.align,
    textAlign = _value$align === void 0 ? null : _value$align,
    _value$color = value.color,
    color = _value$color === void 0 ? null : _value$color;
  var _ref = fontStyle || {},
    _ref$italic = _ref.italic,
    italic = _ref$italic === void 0 ? false : _ref$italic,
    _ref$bold = _ref.bold,
    bold = _ref$bold === void 0 ? false : _ref$bold,
    _ref$underline = _ref.underline,
    underline = _ref$underline === void 0 ? false : _ref$underline,
    textTransform = _ref.transform,
    _ref$outline = _ref.outline,
    outline = _ref$outline === void 0 ? false : _ref$outline;
  return _objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({
    fontFamily: getFontFamilyFromFont(fontFamily)
  }, fontSize !== null ? {
    fontSize: fontSize
  } : null), italic ? {
    fontStyle: 'italic'
  } : null), bold ? {
    fontWeight: 'bold'
  } : null), fontWeight !== null ? {
    fontWeight: fontWeight
  } : null), underline ? {
    textDecoration: 'underline'
  } : null), textTransform !== null ? {
    textTransform: textTransform
  } : null), textAlign !== null ? {
    textAlign: textAlign
  } : null), lineHeight !== null ? {
    lineHeight: lineHeight
  } : null), letterSpacing !== null ? {
    letterSpacing: letterSpacing
  } : null), getStyleFromColor$1(color, 'color')), outline ? {
    WebkitTextStroke: "2px ".concat(getColorAsString$1(color, 'color')),
    color: 'transparent'
  } : null);
};
var getStyleFromText$1 = getStyleFromText;

var getStyleFromMargin = function getStyleFromMargin(value) {
  if (value == null) {
    return null;
  }
  var _value$top = value.top,
    marginTop = _value$top === void 0 ? null : _value$top,
    _value$bottom = value.bottom,
    marginBottom = _value$bottom === void 0 ? null : _value$bottom;
  return _objectSpread$1(_objectSpread$1({}, marginTop !== null ? {
    marginTop: marginTop
  } : null), marginBottom !== null ? {
    marginBottom: marginBottom
  } : null);
};
var getStyleFromMargin$1 = getStyleFromMargin;

var possibleMimes = ['video/webm', 'video/mp4', 'video/ogg'];
var supportedMimes = null;
function getVideoSupportedMimes() {
  var mimes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : possibleMimes;
  if (supportedMimes === null) {
    var video = document.createElement('video');
    supportedMimes = mimes.filter(function (mime) {
      return video.canPlayType(mime) !== '';
    });
  }
  return supportedMimes;
}

var isHeaderFilled = function isHeaderFilled() {
  var header = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var _ref = header || {},
    _ref$badge = _ref.badge,
    badge = _ref$badge === void 0 ? null : _ref$badge;
  var _ref2 = badge || {},
    _ref2$active = _ref2.active,
    badgeActive = _ref2$active === void 0 ? false : _ref2$active,
    _ref2$label = _ref2.label,
    label = _ref2$label === void 0 ? null : _ref2$label;
  var _ref3 = label || {},
    _ref3$body = _ref3.body,
    body = _ref3$body === void 0 ? null : _ref3$body;
  return badgeActive && body !== null;
};
var isHeaderFilled$1 = isHeaderFilled;

var isFooterFilled = function isFooterFilled() {
  var footer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var _ref = footer || {},
    _ref$callToAction = _ref.callToAction,
    callToAction = _ref$callToAction === void 0 ? null : _ref$callToAction;
  var _ref2 = callToAction || {},
    _ref2$active = _ref2.active,
    callToActionActive = _ref2$active === void 0 ? false : _ref2$active,
    _ref2$label = _ref2.label,
    label = _ref2$label === void 0 ? null : _ref2$label;
  var _ref3 = label || {},
    _ref3$body = _ref3.body,
    body = _ref3$body === void 0 ? null : _ref3$body;
  return callToActionActive && body !== null;
};
var isFooterFilled$1 = isFooterFilled;

var isMessage = function isMessage(message) {
  return isObject(message) && typeof message.defaultMessage !== 'undefined';
};
var isMessage$1 = isMessage;

var isIos = function isIos() {
  return ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform) ||
  // iPad on iOS 13 detection
  navigator.userAgent.includes('Mac') && 'ontouchend' in document;
};
var isIos$1 = isIos;

var isImageFilled = function isImageFilled(image) {
  var _ref = image || {},
    _ref$media = _ref.media,
    media = _ref$media === void 0 ? null : _ref$media,
    _ref$url = _ref.url,
    url = _ref$url === void 0 ? null : _ref$url;
  return media !== null || url !== null;
};
var isImageFilled$1 = isImageFilled;

var isTextFilled$2 = function isTextFilled(text) {
  var _ref = text || {},
    _ref$label = _ref.label,
    label = _ref$label === void 0 ? null : _ref$label;
  var _ref2 = label || {},
    _ref2$length = _ref2.length,
    length = _ref2$length === void 0 ? 0 : _ref2$length;
  return typeof length === 'number' && length > 0;
};
var isTextFilled$3 = isTextFilled$2;

var isTextFilled = function isTextFilled(text) {
  var _ref = text || {},
    _ref$body = _ref.body,
    body = _ref$body === void 0 ? null : _ref$body;
  var _ref2 = body || {},
    _ref2$length = _ref2.length,
    length = _ref2$length === void 0 ? 0 : _ref2$length;
  return typeof length === 'number' && length > 0;
};
var isTextFilled$1 = isTextFilled;

var isValidUrl = function isValidUrl(string) {
  var url;
  try {
    url = new URL(string);
  } catch (_) {
    return false;
  }
  return url.protocol === 'http:' || url.protocol === 'https:';
};
var isValidUrl$1 = isValidUrl;

class ResponseError extends Error {
  constructor(message, responseData, status) {
    super(message);
    this.name = 'ResponseError';
    this.responseData = responseData;
    this.status = status;
  }
  getResponseData() {
    return this.responseData;
  }
}

class ValidationError extends ResponseError {
  constructor(message, responseData, status) {
    super(message, responseData, status);
    this.name = 'ValidationError';
  }
  getErrors() {
    return this.responseData;
  }
}

const getResponseAndDataObject = response => response.json().then(data => ({
  data,
  response
}));
var getResponseAndDataObject$1 = getResponseAndDataObject;

const throwResponseError = responseObject => {
  const {
    response,
    data
  } = responseObject;
  if (response.status >= 200 && response.status < 300) {
    return data;
  }
  throw new ResponseError(response.statusText, data, response.status);
};
const throwValidationError = error => {
  if (error.name === 'ResponseError' && error.status === 422) {
    throw new ValidationError(error.message, error.responseData, error.status);
  }
  throw error;
};

const getJSON = (url, opts) => {
  const {
    headers,
    ...options
  } = opts || {};
  return fetch(url, {
    method: 'GET',
    headers: {
      Accept: 'application/json',
      ...(headers || null)
    },
    ...(options || null)
  }).then(getResponseAndDataObject$1).then(throwResponseError);
};
var getJSON$1 = getJSON;

const postJSON = (url, data, opts) => {
  const {
    headers,
    ...options
  } = opts || {};
  return fetch(url, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      Accept: 'application/json',
      ...(headers || null)
    },
    body: JSON.stringify(data),
    ...(options || null)
  }).then(getResponseAndDataObject$1).then(throwResponseError).catch(throwValidationError);
};
var postJSON$1 = postJSON;

const getXSRFToken = () => {
  const cookies = Cookies.get();
  return cookies['XSRF-TOKEN'] || null;
};
const getCsrfToken = name => {
  const metaName = name || 'csrf-token';
  if (typeof document === 'undefined') {
    return null;
  }
  const metas = [].slice.call(document.getElementsByTagName('meta'));
  return metas.reduce((val, meta) => meta.getAttribute('name') === metaName ? meta.getAttribute('content') : val, null);
};
const getCSRFHeaders = name => {
  const XSRF = getXSRFToken();
  if (XSRF !== null) {
    return {
      'X-XSRF-TOKEN': XSRF
    };
  }
  const CSRF = getCsrfToken(name);
  if (CSRF !== null) {
    return {
      'X-CSRF-TOKEN': CSRF
    };
  }
  return null;
};

// React.useInsertionEffect is not available in React <18
const {
  useEffect,
  useLayoutEffect,
  useRef,
  useInsertionEffect: useBuiltinInsertionEffect,
} = React__namespace;

// Copied from:
// https://github.com/facebook/react/blob/main/packages/shared/ExecutionEnvironment.js
const canUseDOM = !!(
  typeof window !== "undefined" &&
  typeof window.document !== "undefined" &&
  typeof window.document.createElement !== "undefined"
);

// Copied from:
// https://github.com/reduxjs/react-redux/blob/master/src/utils/useIsomorphicLayoutEffect.ts
// "React currently throws a warning when using useLayoutEffect on the server.
// To get around it, we can conditionally useEffect on the server (no-op) and
// useLayoutEffect in the browser."
const useIsomorphicLayoutEffect = canUseDOM
  ? useLayoutEffect
  : useEffect;

// useInsertionEffect is already a noop on the server.
// See: https://github.com/facebook/react/blob/main/packages/react-server/src/ReactFizzHooks.js
const useInsertionEffect =
  useBuiltinInsertionEffect || useIsomorphicLayoutEffect;

// Userland polyfill while we wait for the forthcoming
// https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md
// Note: "A high-fidelity polyfill for useEvent is not possible because
// there is no lifecycle or Hook in React that we can use to switch
// .current at the right timing."
// So we will have to make do with this "close enough" approach for now.
const useEvent = (fn) => {
  const ref = useRef([fn, (...args) => ref[0](...args)]).current;
  // Per Dan Abramov: useInsertionEffect executes marginally closer to the
  // correct timing for ref synchronization than useLayoutEffect on React 18.
  // See: https://github.com/facebook/react/pull/25881#issuecomment-1356244360
  useInsertionEffect(() => {
    ref[0] = fn;
  });
  return ref[1];
};

/**
 * History API docs @see https://developer.mozilla.org/en-US/docs/Web/API/History
 */
const eventPopstate = "popstate";
const eventPushState = "pushState";
const eventReplaceState = "replaceState";
const eventHashchange = "hashchange";
const events = [
  eventPopstate,
  eventPushState,
  eventReplaceState,
  eventHashchange,
];

const subscribeToLocationUpdates = (callback) => {
  for (const event of events) {
    addEventListener(event, callback);
  }
  return () => {
    for (const event of events) {
      removeEventListener(event, callback);
    }
  };
};

const useLocationProperty = (fn, ssrFn) =>
  index_js.useSyncExternalStore(subscribeToLocationUpdates, fn, ssrFn);

const currentSearch = () => location.search;

const useSearch = ({ ssrSearch = "" } = {}) =>
  useLocationProperty(currentSearch, () => ssrSearch);

const currentPathname = () => location.pathname;

const usePathname = ({ ssrPath } = {}) =>
  useLocationProperty(
    currentPathname,
    ssrPath ? () => ssrPath : currentPathname
  );

const navigate = (to, { replace = false, state = null } = {}) =>
  history[replace ? eventReplaceState : eventPushState](state, "", to);

// the 2nd argument of the `useBrowserLocation` return value is a function
// that allows to perform a navigation.
const useBrowserLocation = (opts = {}) => [usePathname(opts), navigate];

const patchKey = Symbol.for("wouter_v3");

// While History API does have `popstate` event, the only
// proper way to listen to changes via `push/replaceState`
// is to monkey-patch these methods.
//
// See https://stackoverflow.com/a/4585031
if (typeof history !== "undefined" && typeof window[patchKey] === "undefined") {
  for (const type of [eventPushState, eventReplaceState]) {
    const original = history[type];
    // TODO: we should be using unstable_batchedUpdates to avoid multiple re-renders,
    // however that will require an additional peer dependency on react-dom.
    // See: https://github.com/reactwg/react-18/discussions/86#discussioncomment-1567149
    history[type] = function () {
      const result = original.apply(this, arguments);
      const event = new Event(type);
      event.arguments = arguments;

      dispatchEvent(event);
      return result;
    };
  }

  // patch history object only once
  // See: https://github.com/molefrog/wouter/issues/167
  Object.defineProperty(window, patchKey, { value: true });
}

/*
 * Transforms `path` into its relative `base` version
 * If base isn't part of the path provided returns absolute path e.g. `~/app`
 */
const relativePath = (base = "", path) =>
  !path.toLowerCase().indexOf(base.toLowerCase())
    ? path.slice(base.length) || "/"
    : "~" + path;

const absolutePath = (to, base = "") =>
  to[0] === "~" ? to.slice(1) : base + to;

/*
 * decodes escape sequences such as %20
 */
const unescape = (str) => {
  try {
    return decodeURI(str);
  } catch (_e) {
    // fail-safe mode: if string can't be decoded do nothing
    return str;
  }
};

/*
 * Router and router context. Router is a lightweight object that represents the current
 * routing options: how location is managed, base path etc.
 *
 * There is a default router present for most of the use cases, however it can be overridden
 * via the <Router /> component.
 */

const defaultRouter = {
  hook: useBrowserLocation,
  searchHook: useSearch,
  parser: regexparam.parse,
  base: "",
  // this option is used to override the current location during SSR
  ssrPath: undefined,
  ssrSearch: undefined,
};

const RouterCtx = React.createContext(defaultRouter);

// gets the closest parent router from the context
const useRouter = () => React.useContext(RouterCtx);

/**
 * Parameters context. Used by `useParams()` to get the
 * matched params from the innermost `Route` component.
 */

React.createContext({});

/*
 * Part 1, Hooks API: useRoute and useLocation
 */

// Internal version of useLocation to avoid redundant useRouter calls

const useLocationFromRouter = (router) => {
  const [location, navigate] = router.hook(router);

  // the function reference should stay the same between re-renders, so that
  // it can be passed down as an element prop without any performance concerns.
  // (This is achieved via `useEvent`.)
  return [
    unescape(relativePath(router.base, location)),
    useEvent((to, navOpts) => navigate(absolutePath(to, router.base), navOpts)),
  ];
};

const Link$2 = React.forwardRef((props, ref) => {
  const router = useRouter();
  const [, navigate] = useLocationFromRouter(router);

  const {
    to,
    href: _href = to,
    onClick: _onClick,
    asChild,
    children,
    /* eslint-disable no-unused-vars */
    replace /* ignore nav props */,
    state /* ignore nav props */,
    /* eslint-enable no-unused-vars */
    ...restProps
  } = props;

  const onClick = useEvent((event) => {
    // ignores the navigation when clicked using right mouse button or
    // by holding a special modifier key: ctrl, command, win, alt, shift
    if (
      event.ctrlKey ||
      event.metaKey ||
      event.altKey ||
      event.shiftKey ||
      event.button !== 0
    )
      return;

    _onClick && _onClick(event); // TODO: is it safe to use _onClick?.(event)
    if (!event.defaultPrevented) {
      event.preventDefault();
      navigate(_href, props);
    }
  });

  // handle nested routers and absolute paths
  const href = _href[0] === "~" ? _href.slice(1) : router.base + _href;

  return asChild && React.isValidElement(children)
    ? React.cloneElement(children, { href, onClick })
    : React.createElement("a", { ...restProps, href, onClick, children, ref });
});

({
  children: PropTypes$1.node.isRequired,
  routes: PropTypes$1.objectOf(PropTypes$1.string).isRequired,
  basePath: PropTypes$1.string
});

const compilers = {};
function generatePath(fullPath, data) {
  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  const fullUrlMatches = fullPath.match(/^(https?:\/\/[^/]+)\//);
  if (typeof compilers[fullPath] === 'undefined') {
    compilers[fullPath] = pathToRegexp.compile(fullPath.replace(/^(https?:\/\/[^/]+)\//, '/'), opts);
  }
  const compiler = compilers[fullPath];
  return fullUrlMatches !== null ? `${fullUrlMatches[1].substr(0, -1)}${compiler(data)}` : compiler(data);
}

var SCREENS_NAMESPACE = 'screens';
var ComponentsContext = /*#__PURE__*/React.createContext(null);

/**
 * Hooks
 */
var useComponentsManager = function useComponentsManager() {
  var namespace = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var manager = React.useContext(ComponentsContext);
  var finalManager = React.useMemo(function () {
    return namespace !== null ? new ComponentsManager$1(manager.getComponents(namespace)) : manager;
  }, [manager, namespace]);
  return finalManager;
};
var useComponent = function useComponent(name) {
  var defaultComponent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  var namespace = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  var manager = useComponentsManager(namespace);
  return React.useMemo(function () {
    if (!isString(name)) {
      return name || defaultComponent;
    }
    return manager.getComponent(name) || defaultComponent;
  }, [manager, name, defaultComponent]);
};
var useScreenComponent = function useScreenComponent(name) {
  var defaultComponent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  return useComponent(name, defaultComponent, SCREENS_NAMESPACE);
};

/**
 * Provider
 */
({
  children: PropTypes$1.node.isRequired,
  namespace: PropTypes$1.string,
  manager: PropTypes$1.instanceOf(ComponentsManager$1),
  components: PropTypes$1.objectOf(PropTypes$1.oneOfType([PropTypes$1.object, PropTypes$1.func]))
});
({
  fields: PropTypes.fieldDefinitions,
  manager: PropTypes$1.instanceOf(FieldsManager$1),
  children: PropTypes$1.node.isRequired
});

var ScreensContext = /*#__PURE__*/React.createContext(new ScreensManager$1());
var useScreensManager = function useScreensManager() {
  return React.useContext(ScreensContext);
};
({
  screens: PropTypes.screenDefinitions,
  namespaces: PropTypes$1.arrayOf(PropTypes$1.string),
  filterNamespaces: PropTypes$1.bool,
  manager: PropTypes$1.instanceOf(ScreensManager$1),
  children: PropTypes$1.node.isRequired
});

var StoryContext = /*#__PURE__*/React.createContext(null);
var useStoryContext = function useStoryContext() {
  return React.useContext(StoryContext);
};
var useStory = function useStory() {
  var story = useStoryContext();
  return story;
};
({
  story: PropTypes$1.oneOfType([PropTypes.story, PropTypes.theme]),
  children: PropTypes$1.node.isRequired
});
({
  children: PropTypes$1.node.isRequired
});
({
  value: PropTypes$1.any,
  // eslint-disable-line react/forbid-prop-types
  children: PropTypes$1.node.isRequired
});
({
  context: PropTypes$1.any,
  // eslint-disable-line react/forbid-prop-types
  children: PropTypes$1.node.isRequired
});

/* eslint-disable react/jsx-props-no-spreading */
var GoogleKeysContext = /*#__PURE__*/React.createContext({
  apiKey: null
});
var useGoogleKeys = function useGoogleKeys() {
  return React.useContext(GoogleKeysContext);
};
({
  children: PropTypes$1.node.isRequired,
  apiKey: PropTypes$1.string // .isRequired,
});
({
  children: PropTypes$1.node.isRequired,
  systemFonts: PropTypes.fonts,
  customFonts: PropTypes.fonts
});
({
  children: PropTypes$1.node.isRequired
});

var GoogleMapsClientContext = /*#__PURE__*/React.createContext(null);
var useGoogleMapsClient = function useGoogleMapsClient() {
  return React.useContext(GoogleMapsClientContext);
};
({
  children: PropTypes$1.node.isRequired,
  locale: PropTypes$1.string,
  libraries: PropTypes$1.arrayOf(PropTypes$1.string)
});

var ModalsContext = /*#__PURE__*/React.createContext({
  container: null
});
var withModals = function withModals(WrappedComponent) {
  var WithModalsComponent = function WithModalsComponent(props) {
    return /*#__PURE__*/React.createElement(ModalsContext.Consumer, null, function (_ref) {
      var modals = _ref.modals,
        container = _ref.container,
        setContainer = _ref.setContainer,
        register = _ref.register,
        unregister = _ref.unregister;
      return /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({
        modalsContainer: container,
        setModalsContainer: setContainer,
        modals: modals,
        registerModal: register,
        unregisterModal: unregister
      }, props));
    });
  };
  WithModalsComponent.displayName = "WithModals(".concat(getDisplayName$1(WrappedComponent), ")");
  return WithModalsComponent;
};
({
  children: PropTypes$1.node.isRequired,
  container: PropTypes$1.object // eslint-disable-line
});

var PanelsContext = /*#__PURE__*/React.createContext({
  container: null
});
var withPanels = function withPanels(WrappedComponent) {
  var WithPanelsComponent = function WithPanelsComponent(props) {
    return /*#__PURE__*/React.createElement(PanelsContext.Consumer, null, function (_ref) {
      var panels = _ref.panels,
        setContainer = _ref.setContainer,
        container = _ref.container,
        register = _ref.register,
        unregister = _ref.unregister;
      return /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({
        panelsContainer: container,
        setPanelsContainer: setContainer,
        panels: panels,
        registerPanel: register,
        unregisterPanel: unregister
      }, props));
    });
  };
  WithPanelsComponent.displayName = "WithPanels(".concat(getDisplayName$1(WrappedComponent), ")");
  return WithPanelsComponent;
};
({
  children: PropTypes$1.node.isRequired,
  container: PropTypes$1.object // eslint-disable-line
});

var defaultControlsThemeValue = {
  seekBarOnly: false,
  color: null,
  progressColor: null
};
var defaultValue$1 = {
  playing: false,
  paused: false,
  muted: true,
  controls: false,
  controlsSuggestPlay: false,
  controlsVisible: false,
  media: null,
  controlsTheme: defaultControlsThemeValue
};
var PlaybackContext = /*#__PURE__*/React.createContext(_objectSpread$1(_objectSpread$1({}, defaultValue$1), {}, {
  setMuted: function setMuted() {},
  setPlaying: function setPlaying() {},
  setControls: function setControls() {},
  setControlsVisible: function setControlsVisible() {},
  setControlsTheme: function setControlsTheme() {},
  showControls: function showControls() {},
  hideControls: function hideControls() {},
  setMedia: function setMedia() {}
}));
var usePlaybackContext = function usePlaybackContext() {
  return React.useContext(PlaybackContext);
};
var usePlaybackMediaRef = function usePlaybackMediaRef(active) {
  var _usePlaybackContext = usePlaybackContext(),
    setMedia = _usePlaybackContext.setMedia;
  var mediaRef = React.useRef(null);
  React.useEffect(function () {
    if (!active) {
      return function () {};
    }
    if (mediaRef.current !== null) {
      setMedia(mediaRef.current);
    }
    return function () {
      setMedia(null);
    };
  }, [setMedia, active]);
  return mediaRef;
};
({
  children: PropTypes$1.node.isRequired,
  controls: PropTypes$1.bool,
  controlsSuggestPlay: PropTypes$1.bool,
  controlsVisible: PropTypes$1.bool,
  controlsTheme: PropTypes$1.shape({
    seekBarOnly: PropTypes$1.bool,
    color: PropTypes$1.any,
    progressColor: PropTypes$1.any
  }),
  muted: PropTypes$1.bool,
  playing: PropTypes$1.bool,
  paused: PropTypes$1.bool
});
_objectSpread$1({}, defaultValue$1);

var ScreenContext = /*#__PURE__*/React.createContext({
  data: null,
  definition: null,
  renderContext: null
});
var useScreen = function useScreen() {
  return React.useContext(ScreenContext);
};
var useScreenRenderContext = function useScreenRenderContext() {
  var _ref4 = useScreen() || {},
    _ref4$renderContext = _ref4.renderContext,
    renderContext = _ref4$renderContext === void 0 ? 'view' : _ref4$renderContext;
  var isPlaceholder = renderContext === 'placeholder';
  var isPreview = renderContext === 'preview';
  var isEdit = renderContext === 'edit';
  var isView = renderContext === 'view';
  var isStatic = renderContext === 'static';
  var isCapture = renderContext === 'capture';
  return {
    renderContext: renderContext,
    isPlaceholder: isPlaceholder,
    isPreview: isPreview,
    isEdit: isEdit,
    isView: isView || isStatic || isCapture,
    isStatic: isStatic,
    isCapture: isCapture
  };
};
var useScreenState = function useScreenState() {
  var _ref5 = useScreen() || {},
    screenState = _ref5.screenState;
  return screenState;
};
var propTypes$5$2 = {
  children: PropTypes$1.node.isRequired,
  data: PropTypes.screen,
  definition: PropTypes.screenDefinition,
  renderContext: PropTypes.renderContext,
  screenState: PropTypes$1.string
};
var defaultProps$5$2 = {
  data: null,
  definition: null,
  renderContext: null,
  screenState: null
};
var ScreenProvider = function ScreenProvider(_ref6) {
  var data = _ref6.data,
    definition = _ref6.definition,
    renderContext = _ref6.renderContext,
    screenState = _ref6.screenState,
    children = _ref6.children;
  var _ref7 = useScreen() || {},
    _ref7$data = _ref7.data,
    previousData = _ref7$data === void 0 ? null : _ref7$data,
    _ref7$definition = _ref7.definition,
    previousDefinition = _ref7$definition === void 0 ? null : _ref7$definition,
    _ref7$renderContext = _ref7.renderContext,
    previousContext = _ref7$renderContext === void 0 ? null : _ref7$renderContext,
    _ref7$screenState = _ref7.screenState,
    previousScreenState = _ref7$screenState === void 0 ? null : _ref7$screenState;
  var finalData = data || previousData || null;
  var _ref8 = finalData || {},
    _ref8$type = _ref8.type,
    type = _ref8$type === void 0 ? null : _ref8$type;
  var screensManager = useScreensManager();
  var contextDefinition = screensManager !== null ? screensManager.getDefinition(type) : null;
  var finalDefinition = definition || contextDefinition || previousDefinition;
  var finalRenderContext = renderContext || previousContext || 'view';
  var finalScreenState = screenState || previousScreenState || null;
  var value = React.useMemo(function () {
    return {
      data: finalData,
      definition: finalDefinition,
      renderContext: finalRenderContext,
      screenState: finalScreenState
    };
  }, [finalData, finalDefinition, finalRenderContext, finalScreenState]);
  return /*#__PURE__*/React.createElement(ScreenContext.Provider, {
    value: value
  }, children);
};
ScreenProvider.propTypes = propTypes$5$2;
ScreenProvider.defaultProps = defaultProps$5$2;

/* eslint-disable react/jsx-props-no-spreading */
var ScreenSizeContext = /*#__PURE__*/React.createContext({
  screen: null,
  screens: [],
  width: 0,
  height: 0,
  resolution: 1,
  landscape: false
});
var useScreenSize = function useScreenSize() {
  return React.useContext(ScreenSizeContext);
};
var propTypes$4$5 = {
  children: PropTypes$1.node.isRequired,
  size: PropTypes.screenSize
};
var defaultProps$4$5 = {
  size: {}
};

// Note: this is done to avoid excessive renders on the screens that use the context

var ScreenSizeProvider = function ScreenSizeProvider(_ref) {
  var size = _ref.size,
    children = _ref.children;
  var nextScreen = size.screen,
    nextWidth = size.width,
    nextHeight = size.height,
    nextResolution = size.resolution;
  var currentSize = React.useMemo(function () {
    return size;
  }, [nextScreen, nextWidth, nextHeight, nextResolution]);
  return /*#__PURE__*/React.createElement(ScreenSizeContext.Provider, {
    value: currentSize
  }, children);
};
ScreenSizeProvider.propTypes = propTypes$4$5;
ScreenSizeProvider.defaultProps = defaultProps$4$5;

var useTracking = function useTracking() {
  return React.useContext(TrackingContext);
};
({
  children: PropTypes$1.node.isRequired,
  variables: PropTypes.trackingVariables
});
({
  children: PropTypes$1.node.isRequired,
  transport: PropTypes$1.oneOf(['xhr', 'transloadit', 'tus']),
  locale: PropTypes$1.string,
  sources: PropTypes$1.arrayOf(PropTypes$1.oneOf(['webcam', 'facebook', 'instagram', 'dropbox', 'google-drive'])),
  transloadit: PropTypes$1.shape({
    key: PropTypes$1.string.isRequired,
    templateId: PropTypes$1.string,
    waitForEncoding: PropTypes$1.bool
  }),
  companion: PropTypes$1.shape({
    url: PropTypes$1.string.isRequired,
    allowedHosts: PropTypes$1.string.isRequired
  }),
  tus: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.shape({
    endpoint: PropTypes$1.string.isRequired
  })]),
  xhr: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.shape({
    endpoint: PropTypes$1.string.isRequired
  })])
});

var defaultValue = {
  events: new EventEmitter(),
  menuVisible: false,
  menuOverScreen: false,
  topHeight: 0,
  bottomHeight: 0,
  bottomSidesWidth: 0,
  gotoNextScreen: function gotoNextScreen() {},
  gotoPreviousScreen: function gotoPreviousScreen() {},
  disableInteraction: function disableInteraction() {},
  enableInteraction: function enableInteraction() {}
};
var ViewerContext = /*#__PURE__*/React.createContext(_objectSpread$1(_objectSpread$1({}, defaultValue), {}, {
  webView: null,
  setWebView: function setWebView() {}
}));
var useViewerContext = function useViewerContext() {
  return React.useContext(ViewerContext);
};
var useViewerNavigation = function useViewerNavigation() {
  var _useViewerContext2 = useViewerContext(),
    gotoNextScreen = _useViewerContext2.gotoNextScreen,
    gotoPreviousScreen = _useViewerContext2.gotoPreviousScreen;
  return {
    gotoNextScreen: gotoNextScreen,
    gotoPreviousScreen: gotoPreviousScreen
  };
};
var useViewerContainer = function useViewerContainer() {
  var _useViewerContext4 = useViewerContext(),
    _useViewerContext4$co = _useViewerContext4.containerRef,
    containerRef = _useViewerContext4$co === void 0 ? null : _useViewerContext4$co;
  return containerRef !== null ? containerRef.current : null;
};
var useViewerInteraction = function useViewerInteraction() {
  var _useViewerContext5 = useViewerContext(),
    disableInteraction = _useViewerContext5.disableInteraction,
    enableInteraction = _useViewerContext5.enableInteraction;
  return {
    disableInteraction: disableInteraction,
    enableInteraction: enableInteraction
  };
};
var useViewerWebView = function useViewerWebView() {
  var _useViewerContext6 = useViewerContext(),
    webView = _useViewerContext6.webView,
    setWebView = _useViewerContext6.setWebView;
  var value = React.useMemo(function () {
    return _objectSpread$1(_objectSpread$1({}, webView), {}, {
      opened: webView !== null,
      open: function open(newWebView) {
        return setWebView(isString(newWebView) ? {
          url: newWebView
        } : newWebView);
      },
      close: function close() {
        return setWebView(null);
      },
      update: function update(newWebView) {
        return setWebView(_objectSpread$1(_objectSpread$1({}, webView), newWebView));
      }
    });
  }, [webView, setWebView]);
  return value;
};
({
  children: PropTypes$1.node.isRequired,
  events: PropTypes$1.instanceOf(EventEmitter),
  containerRef: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    // eslint-disable-next-line react/forbid-prop-types
    current: PropTypes$1.any
  })]),
  menuVisible: PropTypes$1.bool,
  menuOverScreen: PropTypes$1.bool,
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  topHeight: PropTypes$1.number,
  bottomHeight: PropTypes$1.number,
  bottomSidesWidth: PropTypes$1.number,
  gotoNextScreen: PropTypes$1.func,
  gotoPreviousScreen: PropTypes$1.func,
  disableInteraction: PropTypes$1.func,
  enableInteraction: PropTypes$1.func
});
_objectSpread$1({}, defaultValue);

var VisitorContext = /*#__PURE__*/React.createContext({
  visitor: null,
  setVisitor: function setVisitor() {}
});
var useVisitor = function useVisitor() {
  var _useContext2 = React.useContext(VisitorContext),
    visitor = _useContext2.visitor;
  return visitor;
};
({
  children: PropTypes$1.node.isRequired,
  visitor: PropTypes.visitor
});

function useActivityDetector() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    _ref$element = _ref.element,
    providedElement = _ref$element === void 0 ? null : _ref$element,
    _ref$disabled = _ref.disabled,
    disabled = _ref$disabled === void 0 ? false : _ref$disabled,
    _ref$timeout = _ref.timeout,
    timeoutDelay = _ref$timeout === void 0 ? 2000 : _ref$timeout;
  var ref = React.useRef(providedElement);
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    detected = _useState2[0],
    setDetected = _useState2[1];
  var detectedRef = React.useRef(detected);
  if (providedElement !== null && providedElement !== ref.current) {
    ref.current = providedElement;
  }
  React.useEffect(function () {
    var _ref$current = ref.current,
      element = _ref$current === void 0 ? null : _ref$current;
    if (element === null || disabled) {
      return function () {};
    }
    var timeout = null;
    function onActivity() {
      if (timeout !== null) {
        clearTimeout(timeout);
        timeout = null;
      }
      if (!detectedRef.current) {
        detectedRef.current = true;
        setDetected(true);
      }
      timeout = setTimeout(function () {
        detectedRef.current = false;
        setDetected(false);
      }, timeoutDelay);
    }
    element.addEventListener('keydown', onActivity);
    element.addEventListener('mousedown', onActivity);
    element.addEventListener('mousemove', onActivity);
    element.addEventListener('mouseup', onActivity);
    element.addEventListener('pointerdown', onActivity);
    element.addEventListener('pointermove', onActivity);
    element.addEventListener('pointerup', onActivity);
    element.addEventListener('touchmove', onActivity);
    element.addEventListener('touchstart', onActivity);
    return function () {
      if (timeout !== null) {
        clearTimeout(timeout);
        timeout = null;
      }
      element.removeEventListener('keydown', onActivity);
      element.removeEventListener('mousedown', onActivity);
      element.removeEventListener('mousemove', onActivity);
      element.removeEventListener('mouseup', onActivity);
      element.removeEventListener('pointerdown', onActivity);
      element.removeEventListener('pointermove', onActivity);
      element.removeEventListener('pointerup', onActivity);
      element.removeEventListener('touchmove', onActivity);
      element.removeEventListener('touchstart', onActivity);
    };
  }, [providedElement, disabled, timeoutDelay]);
  return {
    ref: ref,
    detected: detected
  };
}

var useAnimationFrame = function useAnimationFrame(onFrame) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$disabled = _ref.disabled,
    disabled = _ref$disabled === void 0 ? false : _ref$disabled;
  var requestRef = React.useRef(null);
  var startTimeRef = React.useRef(null);
  var callback = function callback(time) {
    if (!startTimeRef.current) {
      startTimeRef.current = time;
    }
    var progress = time - startTimeRef.current;
    onFrame(progress);
    requestRef.current = requestAnimationFrame(callback);
  };
  React.useEffect(function () {
    if (!disabled) {
      requestRef.current = requestAnimationFrame(callback);
    }
    return function () {
      if (requestRef.current !== null) {
        cancelAnimationFrame(requestRef.current);
      }
    };
  }, [disabled]);
};
var useAnimationFrame$1 = useAnimationFrame;

var useDebounced = function useDebounced(handler, watchedValue) {
  var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 300;
  React.useEffect(function () {
    var timeoutHandler = setTimeout(function () {
      if (handler !== null) {
        handler(watchedValue);
      }
    }, delay);
    return function () {
      clearTimeout(timeoutHandler);
    };
  }, [watchedValue, delay]);
};
var useDebounced$1 = useDebounced;

typeof document !== 'undefined' ? new EventsManager$1(document) : null;

function useDragProgress() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    wantedProgress = _ref.progress,
    _ref$onTap = _ref.onTap,
    onTap = _ref$onTap === void 0 ? null : _ref$onTap,
    _ref$disabled = _ref.disabled,
    disabled = _ref$disabled === void 0 ? false : _ref$disabled,
    _ref$dragDisabled = _ref.dragDisabled,
    dragDisabled = _ref$dragDisabled === void 0 ? false : _ref$dragDisabled,
    _ref$computeProgress = _ref.computeProgress,
    computeProgress = _ref$computeProgress === void 0 ? null : _ref$computeProgress,
    _ref$onProgress = _ref.onProgress,
    onProgress = _ref$onProgress === void 0 ? null : _ref$onProgress,
    _ref$springParams = _ref.springParams,
    springParams = _ref$springParams === void 0 ? undefined : _ref$springParams,
    _ref$dragOptions = _ref.dragOptions,
    dragOptions = _ref$dragOptions === void 0 ? {
      filterTaps: true
    } : _ref$dragOptions;
  var refDragging = React.useRef(false);
  var refProgress = React.useRef(wantedProgress);
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    dragging = _useState2[0],
    setDragging = _useState2[1];
  var spring = React.useCallback(function () {
    return _objectSpread$1({
      progress: wantedProgress,
      immediate: dragging || disabled
    }, springParams);
  }, [wantedProgress, disabled]);
  var _useSpring = core.useSpring(spring),
    _useSpring2 = _slicedToArray(_useSpring, 2),
    progress = _useSpring2[0].progress,
    api = _useSpring2[1];
  var onDrag = React.useCallback(function (gestureState) {
    var active = gestureState.active,
      tap = gestureState.tap;
    if (disabled) {
      return;
    }
    if (tap) {
      if (onTap !== null) onTap(gestureState);
      return;
    }
    if (dragDisabled) {
      return;
    }
    var newProgress = computeProgress(gestureState);
    refDragging.current = active;
    refProgress.current = newProgress;
    if (active !== dragging) {
      setDragging(active);
    }
    api.start({
      progress: newProgress,
      immediate: active
    });
    if (onProgress !== null) {
      onProgress(newProgress, gestureState);
    }
  }, [setDragging, disabled, onTap, computeProgress, dragging, onProgress]);
  var bind = react.useDrag(onDrag, dragOptions);
  React.useEffect(function () {
    if (!refDragging.current && wantedProgress !== refProgress.current) {
      refProgress.current = wantedProgress;
      api.start({
        progress: wantedProgress,
        immediate: false
      });
    }
  }, [wantedProgress]);
  return {
    bind: bind,
    dragging: dragging,
    progress: progress
  };
}

var _excluded$2$2 = ["entry"];
var observersCache = new Map();
var getOptionsKey = function getOptionsKey(_ref) {
  var _ref$root = _ref.root,
    root = _ref$root === void 0 ? null : _ref$root,
    rootMargin = _ref.rootMargin,
    _ref$threshold = _ref.threshold,
    threshold = _ref$threshold === void 0 ? null : _ref$threshold;
  return "root_".concat(root, "_rootMargin_").concat(rootMargin || null, "_threshold_").concat(threshold);
};
var createObserver = function createObserver(Observer) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var subscribers = [];
  var addSubscriber = function addSubscriber(element, callback) {
    var currentSubscriber = subscribers.find(function (it) {
      return it.element === element;
    }) || null;
    if (currentSubscriber !== null) {
      return subscribers.map(function (it) {
        return it.element === element && it.callbacks.indexOf(callback) === -1 ? _objectSpread$1(_objectSpread$1({}, it), {}, {
          callbacks: [].concat(_toConsumableArray(it.callbacks), [callback])
        }) : it;
      }).filter(function (it) {
        return it.callbacks.length > 0;
      });
    }
    return [].concat(_toConsumableArray(subscribers), [{
      element: element,
      callbacks: [callback]
    }]);
  };
  var removeSubscriber = function removeSubscriber(element, callback) {
    return subscribers.map(function (it) {
      return it.element === element ? _objectSpread$1(_objectSpread$1({}, it), {}, {
        callbacks: it.callbacks.filter(function (subCallback) {
          return subCallback !== callback;
        })
      }) : it;
    }).filter(function (it) {
      return it.callbacks.length > 0;
    });
  };
  var onUpdate = function onUpdate(entries) {
    entries.forEach(function (entry) {
      subscribers.forEach(function (_ref2) {
        var element = _ref2.element,
          callbacks = _ref2.callbacks;
        if (element === entry.target) {
          callbacks.forEach(function (callback) {
            callback(entry);
          });
        }
      });
    });
  };
  var observer = new Observer(onUpdate, options);
  var unsubscribe = function unsubscribe(element) {
    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    subscribers = removeSubscriber(element, callback);
    if (typeof observer.unobserve === 'undefined') {
      observer.disconnect();
      subscribers.forEach(function (subscriber) {
        observer.observe(subscriber.element);
      });
      return;
    }
    var currentSubscriber = subscribers.find(function (it) {
      return it.element === element;
    }) || null;
    if (currentSubscriber === null) {
      observer.unobserve(element);
    }
  };
  var subscribe = function subscribe(element, callback) {
    var currentSubscriber = subscribers.find(function (it) {
      return it.element === element;
    }) || null;
    subscribers = addSubscriber(element, callback);
    if (currentSubscriber === null) {
      observer.observe(element);
    }
  };
  return {
    subscribe: subscribe,
    unsubscribe: unsubscribe,
    observer: observer
  };
};
var getObserver = function getObserver(Observer) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var observerKey = getOptionsKey(options);
  if (!observersCache.has(Observer)) {
    observersCache.set(Observer, {});
  }
  var observers = observersCache.get(Observer);
  if (typeof observers[observerKey] === 'undefined') {
    observers[observerKey] = createObserver(Observer, options);
    observersCache.set(Observer, observers);
  }
  return observers[observerKey];
};
var useObserver = function useObserver(Observer) {
  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var initialEntry = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var _opts$root = opts.root,
    root = _opts$root === void 0 ? null : _opts$root,
    _opts$rootMargin = opts.rootMargin,
    rootMargin = _opts$rootMargin === void 0 ? null : _opts$rootMargin,
    _opts$threshold = opts.threshold,
    threshold = _opts$threshold === void 0 ? null : _opts$threshold,
    _opts$disabled = opts.disabled,
    disabled = _opts$disabled === void 0 ? false : _opts$disabled;
  var _useState = React.useState(initialEntry),
    _useState2 = _slicedToArray(_useState, 2),
    entry = _useState2[0],
    setEntry = _useState2[1];
  var nodeRef = React.useRef(null);
  var currentElement = React.useRef(null);
  var elementChanged = nodeRef.current !== currentElement.current;
  React.useEffect(function () {
    var nodeElement = nodeRef.current;
    var callback = function callback(newEntry) {
      return setEntry(newEntry);
    };
    var unsubscribe = null;
    if (nodeElement !== null) {
      var newOpts = {};
      if (root !== null) {
        newOpts.root = root;
      }
      if (rootMargin !== null) {
        newOpts.rootMargin = rootMargin;
      }
      if (threshold !== null) {
        newOpts.threshold = threshold;
      }
      var _getObserver = getObserver(Observer, newOpts),
        subscribe = _getObserver.subscribe,
        localUnsubscribe = _getObserver.unsubscribe;
      unsubscribe = localUnsubscribe;
      subscribe(nodeElement, callback);
    }
    currentElement.current = nodeElement;
    return function () {
      if (unsubscribe !== null) {
        unsubscribe(nodeElement, callback);
      }
    };
  }, [Observer, elementChanged, disabled, root, rootMargin, threshold]);
  return {
    ref: nodeRef,
    entry: entry
  };
};

/**
 * Resize Observer
 */
var resizeObserverInitialEntry = {
  target: null,
  contentRect: null,
  contentBoxSize: null,
  borderBoxSize: null
};
var useResizeObserver = function useResizeObserver() {
  var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    _ref4$disabled = _ref4.disabled,
    disabled = _ref4$disabled === void 0 ? false : _ref4$disabled;
  return useObserver(typeof window !== 'undefined' ? ResizeObserver : null, {
    disabled: disabled
  }, resizeObserverInitialEntry);
};
var useDimensionObserver = function useDimensionObserver() {
  var _useResizeObserver = useResizeObserver.apply(void 0, arguments),
    entry = _useResizeObserver.entry,
    rest = _objectWithoutProperties(_useResizeObserver, _excluded$2$2);
  var _ref5 = entry || {},
    _ref5$contentRect = _ref5.contentRect,
    contentRect = _ref5$contentRect === void 0 ? null : _ref5$contentRect,
    _ref5$borderBoxSize = _ref5.borderBoxSize,
    borderBoxSize = _ref5$borderBoxSize === void 0 ? null : _ref5$borderBoxSize;
  var _ref6 = contentRect || {},
    _ref6$width = _ref6.width,
    width = _ref6$width === void 0 ? 0 : _ref6$width,
    _ref6$height = _ref6.height,
    height = _ref6$height === void 0 ? 0 : _ref6$height;
  var _ref7 = isArray(borderBoxSize) ? borderBoxSize[0] || {} : borderBoxSize || {},
    _ref7$blockSize = _ref7.blockSize,
    blockSize = _ref7$blockSize === void 0 ? null : _ref7$blockSize,
    _ref7$inlineSize = _ref7.inlineSize,
    inlineSize = _ref7$inlineSize === void 0 ? null : _ref7$inlineSize;
  return _objectSpread$1(_objectSpread$1({}, rest), {}, {
    entry: entry,
    width: inlineSize || width,
    height: blockSize || height
  });
};

function useMediaCurrentTime(element) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$id = _ref.id,
    id = _ref$id === void 0 ? null : _ref$id,
    _ref$disabled = _ref.disabled,
    disabled = _ref$disabled === void 0 ? false : _ref$disabled,
    _ref$updateInterval = _ref.updateInterval,
    updateInterval = _ref$updateInterval === void 0 ? 1000 : _ref$updateInterval,
    _ref$onUpdate = _ref.onUpdate,
    customOnUpdate = _ref$onUpdate === void 0 ? null : _ref$onUpdate;
  var _useState = React.useState(0),
    _useState2 = _slicedToArray(_useState, 2),
    currentTime = _useState2[0],
    setCurrentTime = _useState2[1];
  var realCurrentTime = React.useRef(currentTime);
  var finalId = id || element;
  var lastIdRef = React.useRef(finalId);
  var idChanged = lastIdRef.current !== finalId;
  var disabledRef = React.useRef(disabled);
  var disabledChanged = disabledRef.current !== disabled;
  if (idChanged || disabledChanged) {
    realCurrentTime.current = element !== null ? element.currentTime || 0 : 0;
    lastIdRef.current = finalId;
    disabledRef.current = disabled;
  }

  // Check time update
  React.useEffect(function () {
    if (element === null) {
      return function () {};
    }
    function updateTime() {
      var time = element.currentTime || 0;
      if (time !== realCurrentTime.current) {
        realCurrentTime.current = time;
        setCurrentTime(time);
        if (customOnUpdate !== null) {
          customOnUpdate(time);
        }
      }
      return time;
    }
    if (disabled) {
      updateTime();
      return function () {};
    }
    var timeout = null;
    function loop() {
      var _element$duration = element.duration,
        duration = _element$duration === void 0 ? 0 : _element$duration;
      var time = updateTime();
      var remainingTime = Math.floor(((duration || 0) - time) * 1000);
      timeout = setTimeout(loop, Math.max(Math.min(updateInterval, remainingTime), updateInterval));
    }
    loop();
    return function () {
      if (element !== null) {
        realCurrentTime.current = element.currentTime;
      }
      if (timeout !== null) {
        clearInterval(timeout);
      }
    };
  }, [id, element, setCurrentTime, disabled, updateInterval]);
  return realCurrentTime.current;
}

function useMediaDuration(element) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$id = _ref.id,
    id = _ref$id === void 0 ? null : _ref$id;
  var _useState = React.useState(element !== null ? element.duration || 0 : 0),
    _useState2 = _slicedToArray(_useState, 2),
    duration = _useState2[0],
    setDuration = _useState2[1];
  var realDuration = React.useRef(duration);
  var finalId = id || element;
  var lastIdRef = React.useRef(finalId);
  var idChanged = lastIdRef.current !== finalId;
  if (idChanged) {
    realDuration.current = element !== null ? element.duration || 0 : 0;
    lastIdRef.current = finalId;
  }
  React.useEffect(function () {
    if (element === null) {
      realDuration.current = 0;
      setDuration(0);
      return function () {};
    }
    function updateDuration() {
      var newDuration = element.duration || 0;
      if (newDuration !== realDuration.current) {
        realDuration.current = newDuration;
        setDuration(newDuration);
      }
    }
    updateDuration();
    element.addEventListener('canplay', updateDuration);
    element.addEventListener('loadedmetadata', updateDuration);
    element.addEventListener('durationchange', updateDuration);
    return function () {
      element.removeEventListener('canplay', updateDuration);
      element.removeEventListener('loadedmetadata', updateDuration);
      element.removeEventListener('durationchange', updateDuration);
    };
  }, [element, id, setDuration]);
  return realDuration.current;
}

function useMediaLoad(element) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$preload = _ref.preload,
    preload = _ref$preload === void 0 ? 'auto' : _ref$preload,
    _ref$shouldLoad = _ref.shouldLoad,
    shouldLoad = _ref$shouldLoad === void 0 ? false : _ref$shouldLoad;
  var firstPreloadRef = React.useRef(preload);
  var firstShouldLoadRef = React.useRef(shouldLoad);
  var hasLoadedRef = React.useRef(preload !== 'none' && preload !== 'metadata' && shouldLoad);
  React.useEffect(function () {
    var canLoad = preload !== 'none' && preload !== 'metadata' && shouldLoad;
    var preloadHasChanged = firstPreloadRef.current !== preload;
    var shouldLoadHasChanged = firstShouldLoadRef.current !== shouldLoad;
    if (canLoad && (preloadHasChanged || shouldLoadHasChanged) && !hasLoadedRef.current && element !== null && typeof element.load !== 'undefined') {
      hasLoadedRef.current = true;
      element.load();
    }
  }, [element, shouldLoad, preload]);
}

function useMediaReady(element) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$id = _ref.id,
    id = _ref$id === void 0 ? null : _ref$id;
  var _useState = React.useState(element !== null && element.readyState > 0),
    _useState2 = _slicedToArray(_useState, 2),
    ready = _useState2[0],
    setReady = _useState2[1];
  var realReady = React.useRef(ready);
  var lastIdRef = React.useRef(id);
  var idChanged = lastIdRef.current !== id;
  if (idChanged) {
    realReady.current = false;
    lastIdRef.current = id;
  }
  React.useEffect(function () {
    if (element === null) {
      return function () {};
    }
    function updateReady() {
      var currentReady = ready;
      if (element.readyState > 0 && !ready) {
        setReady(true);
        currentReady = true;
      } else if (ready && element.readyState === 0) {
        setReady(false);
        currentReady = false;
      }
      realReady.current = currentReady;
      return currentReady;
    }
    var currentReady = updateReady();
    if (!currentReady) {
      element.addEventListener('loadedmetadata', updateReady);
      element.addEventListener('canplay', updateReady);
      element.addEventListener('canplaythrough', updateReady);
    }
    return function () {
      if (!currentReady) {
        element.removeEventListener('loadedmetadata', updateReady);
        element.removeEventListener('canplay', updateReady);
        element.removeEventListener('canplaythrough', updateReady);
      }
    };
  }, [element, id]);
  return realReady.current;
}

function useMediaThumbnail(media) {
  var file = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  var thumbnail = React.useMemo(function () {
    if (isObject(file)) {
      return file;
    }
    var _ref = media || {},
      _ref$thumbnail_url = _ref.thumbnail_url,
      defaultThumbnailUrl = _ref$thumbnail_url === void 0 ? null : _ref$thumbnail_url,
      _ref$files = _ref.files,
      files = _ref$files === void 0 ? null : _ref$files,
      _ref$metadata = _ref.metadata,
      metadata = _ref$metadata === void 0 ? null : _ref$metadata;
    var _ref2 = metadata || {},
      mediaWidth = _ref2.width,
      mediaHeight = _ref2.height;
    var filesArray = getMediaFilesAsArray$1(files) || [];
    var _ref3 = (file !== null ? filesArray.find(function (_ref4) {
        var handle = _ref4.handle;
        return handle === file;
      }) || null : null) || {},
      _ref3$url = _ref3.url,
      url = _ref3$url === void 0 ? null : _ref3$url;
    return url !== null || defaultThumbnailUrl !== null ? {
      url: url || defaultThumbnailUrl,
      metadata: {
        width: mediaWidth,
        height: mediaHeight
      }
    } : null;
  }, [media, file]);
  return thumbnail;
}

function useProgressSteps() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    _ref$disabled = _ref.disabled,
    disabled = _ref$disabled === void 0 ? false : _ref$disabled,
    currentTime = _ref.currentTime,
    duration = _ref.duration,
    _ref$onStep = _ref.onStep,
    onStep = _ref$onStep === void 0 ? null : _ref$onStep,
    _ref$steps = _ref.steps,
    steps = _ref$steps === void 0 ? [0.1, 0.25, 0.5, 0.75, 0.9] : _ref$steps;
  var progressStepsReached = React.useRef({});
  React.useEffect(function () {
    if (duration === 0 || disabled) {
      return;
    }
    var progress = currentTime / duration;
    var currentSteps = progressStepsReached.current;
    var stepsToTrack = steps.filter(function (step) {
      return progress > step && typeof currentSteps[step] === 'undefined';
    });
    stepsToTrack.forEach(function (step) {
      if (onStep !== null) {
        onStep(step);
      }
      currentSteps[step] = true;
    });
  }, [duration, currentTime, disabled]);
}

var getScreenOptions = function getScreenOptions(screenContext, opts) {
  var _ref = screenContext || {},
    _ref$data = _ref.data,
    ctxData = _ref$data === void 0 ? null : _ref$data;
  var _ref2 = ctxData || {},
    _ref2$id = _ref2.id,
    ctxScreenId = _ref2$id === void 0 ? null : _ref2$id,
    ctxScreenType = _ref2.type;
  var _ref3 = opts || {},
    _ref3$screenId = _ref3.screenId,
    optsScreenId = _ref3$screenId === void 0 ? null : _ref3$screenId,
    _ref3$screenType = _ref3.screenType,
    optsScreenType = _ref3$screenType === void 0 ? null : _ref3$screenType;
  var screenId = ctxScreenId !== null ? ctxScreenId : optsScreenId;
  var screenType = ctxScreenType !== null ? ctxScreenType : optsScreenType;
  return {
    screenId: screenId,
    screenType: screenType
  };
};
var hasTracking = function hasTracking(tracking) {
  return typeof tracking !== 'undefined';
};
var useTrackScreenEvent = function useTrackScreenEvent() {
  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var tracking = useTracking();
  if (!hasTracking(tracking)) {
    return function () {};
  }
  var screenContext = useScreen();
  if (screenContext.renderContext !== 'view') {
    return function () {};
  }
  return React.useCallback(function () {
    var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var label = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    var opts = arguments.length > 2 ? arguments[2] : undefined;
    if (type !== null && action !== null) {
      tracking.trackEvent("screen_".concat(type), action, label, _objectSpread$1(_objectSpread$1({}, opts), getScreenOptions(screenContext, opts)));
    }
  }, [screenContext]);
};
var useTrackScreenMedia = function useTrackScreenMedia() {
  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var tracking = useTracking();
  if (!hasTracking(tracking)) {
    return function () {};
  }
  var screenContext = useScreen();
  if (screenContext.renderContext !== 'view') {
    return function () {};
  }
  return React.useCallback(function () {
    var media = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    var opts = arguments.length > 2 ? arguments[2] : undefined;
    if (type !== null && media !== null && action !== null) {
      tracking.trackMedia("screen_".concat(type), media, action, _objectSpread$1(_objectSpread$1({}, opts), getScreenOptions(screenContext, opts)));
    }
  }, [screenContext]);
};
var useTrackEvent = function useTrackEvent() {
  var tracking = useTracking();
  if (!hasTracking(tracking)) {
    return function () {};
  }
  return React.useCallback(function () {
    var category = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    var label = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    var opts = arguments.length > 3 ? arguments[3] : undefined;
    if (category !== null && action !== null) {
      tracking.trackEvent(category, action, label, opts);
    }
  }, []);
};

typeof window !== 'undefined' ? new EventsManager$1(window) : null;

const getSizeWithinBounds = (width, height, maxWidth, maxHeight, opts) => {
  const options = {
    cover: false,
    ...opts
  };

  if (!width || width <= 0 || !height || height <= 0) {
    return {
      width: 0,
      height: 0,
      ratio: 1
    };
  }

  const scaleWidth = Math.round(maxWidth || width) / width;
  const scaleHeight = Math.round(maxHeight || height) / height;
  const scale = options.cover ? Math.max(scaleWidth, scaleHeight) : Math.min(scaleWidth, scaleHeight);
  const computedWidth = Math.round(width * scale);
  const computedHeight = Math.round(height * scale);
  return {
    width: computedWidth,
    height: computedHeight,
    scale
  };
};
/* Detect CSS Animations support to detect element display/re-attach */


let animation = false;
const domPrefixes = 'Webkit Moz O ms'.split(' ');
const startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(' ');
let pfx = '';
const elm = typeof document !== 'undefined' ? document.createElement('fakeelement') : null;

if (elm !== null && typeof elm.style.animationName !== 'undefined') {
  animation = true;
}

if (animation === false) {
  for (let i = 0; i < domPrefixes.length; i += 1) {
    if (elm !== null && typeof elm.style["".concat(domPrefixes[i], "AnimationName")] !== 'undefined') {
      pfx = domPrefixes[i];
      "-".concat(pfx.toLowerCase(), "-");
      startEvents[i];
      animation = true;
      break;
    }
  }
}

/* eslint-disable react/jsx-props-no-spreading */
var propTypes$T = {
  children: PropTypes.label.isRequired,
  isHtml: PropTypes$1.bool,
  values: PropTypes$1.object // eslint-disable-line react/forbid-prop-types
};
var defaultProps$T = {
  isHtml: false,
  values: {}
};
var Label = function Label(_ref) {
  var children = _ref.children,
    isHtml = _ref.isHtml,
    values = _ref.values;
  var Message = isHtml ? reactIntl.FormattedMessage : reactIntl.FormattedMessage;
  return isMessage$1(children) ? /*#__PURE__*/React.createElement(Message, Object.assign({
    values: values
  }, children)) : children;
};
Label.propTypes = propTypes$T;
Label.defaultProps = defaultProps$T;
var Label$1 = Label;

var styles$x$1 = {"container":"micromag-core-buttons-button-container","asLink":"micromag-core-buttons-button-asLink","withoutStyle":"micromag-core-buttons-button-withoutStyle","icon":"micromag-core-buttons-button-icon","label":"micromag-core-buttons-button-label","withIcon":"micromag-core-buttons-button-withIcon","right":"micromag-core-buttons-button-right","withAnimations":"micromag-core-buttons-button-withAnimations","icon-right":"micromag-core-buttons-button-icon-right","withIconColumns":"micromag-core-buttons-button-withIconColumns","linkDisabled":"micromag-core-buttons-button-linkDisabled","focus-visible":"micromag-core-buttons-button-focus-visible"};

var _excluded$b = ["type", "theme", "size", "href", "external", "direct", "target", "label", "children", "focusable", "active", "icon", "iconPosition", "disabled", "loading", "disableOnLoading", "small", "big", "withShadow", "withoutStyle", "withoutBootstrapStyles", "withoutTheme", "asLink", "outline", "onClick", "className", "iconClassName", "labelClassName", "refButton"];
var propTypes$S = {
  type: PropTypes$1.string,
  theme: PropTypes.buttonTheme,
  size: PropTypes.buttonSize,
  href: PropTypes$1.string,
  external: PropTypes$1.bool,
  direct: PropTypes$1.bool,
  target: PropTypes$1.string,
  label: PropTypes.label,
  children: PropTypes.label,
  focusable: PropTypes$1.bool,
  active: PropTypes$1.bool,
  icon: PropTypes$1.node,
  iconPosition: PropTypes$1.oneOf(['left', 'right', 'inline']),
  disabled: PropTypes$1.bool,
  loading: PropTypes$1.bool,
  disableOnLoading: PropTypes$1.bool,
  small: PropTypes$1.bool,
  big: PropTypes$1.bool,
  withShadow: PropTypes$1.bool,
  withoutStyle: PropTypes$1.bool,
  withoutBootstrapStyles: PropTypes$1.bool,
  withoutTheme: PropTypes$1.bool,
  outline: PropTypes$1.bool,
  asLink: PropTypes$1.bool,
  className: PropTypes$1.string,
  iconClassName: PropTypes$1.string,
  labelClassName: PropTypes$1.string,
  onClick: PropTypes$1.func,
  refButton: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    current: PropTypes$1.any // eslint-disable-line
  })])
};
var defaultProps$S = {
  type: 'button',
  theme: null,
  size: null,
  href: null,
  external: false,
  direct: false,
  target: '_blank',
  label: null,
  children: null,
  focusable: true,
  active: false,
  icon: null,
  iconPosition: 'inline',
  disabled: false,
  loading: false,
  disableOnLoading: true,
  small: false,
  big: false,
  withShadow: false,
  withoutStyle: false,
  withoutBootstrapStyles: false,
  withoutTheme: false,
  outline: false,
  asLink: false,
  className: null,
  iconClassName: null,
  labelClassName: null,
  onClick: null,
  refButton: null
};
var Button$2 = function Button(_ref) {
  var _ref8;
  var type = _ref.type,
    theme = _ref.theme,
    size = _ref.size,
    href = _ref.href,
    external = _ref.external,
    direct = _ref.direct,
    target = _ref.target,
    label = _ref.label,
    children = _ref.children,
    focusable = _ref.focusable,
    active = _ref.active,
    icon = _ref.icon,
    iconPosition = _ref.iconPosition,
    disabled = _ref.disabled,
    loading = _ref.loading,
    disableOnLoading = _ref.disableOnLoading,
    small = _ref.small,
    big = _ref.big,
    withShadow = _ref.withShadow,
    withoutStyle = _ref.withoutStyle,
    withoutBootstrapStyles = _ref.withoutBootstrapStyles,
    withoutTheme = _ref.withoutTheme,
    asLink = _ref.asLink,
    outline = _ref.outline,
    onClick = _ref.onClick,
    className = _ref.className,
    iconClassName = _ref.iconClassName,
    labelClassName = _ref.labelClassName,
    refButton = _ref.refButton,
    props = _objectWithoutProperties(_ref, _excluded$b);
  var finalLabel = label || children;
  var text = finalLabel !== null ? /*#__PURE__*/React.createElement(Label$1, null, finalLabel) : null;
  var hasChildren = label !== null && children !== null;
  var hasIcon = icon !== null;
  var hasInlineIcon = hasIcon && (iconPosition === 'inline' || text === null);
  var hasIconColumns = hasIcon && !hasInlineIcon;
  var content = /*#__PURE__*/React.createElement(React.Fragment, null, hasInlineIcon ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$x$1.icon, _defineProperty({}, iconClassName, iconClassName !== null)])
  }, icon), text !== null ? /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$x$1.label, _defineProperty({}, labelClassName, labelClassName !== null)])
  }, text) : null) : null, hasIconColumns ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$x$1.left, _defineProperty({}, iconClassName, iconClassName !== null && iconPosition === 'left')])
  }, iconPosition === 'left' ? icon : null), /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$x$1.center, _defineProperty({}, labelClassName, labelClassName !== null)])
  }, text), /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$x$1.right, _defineProperty({}, iconClassName, iconClassName !== null && iconPosition === 'right')])
  }, iconPosition === 'right' ? icon : null), hasChildren ? children : null) : null, !hasIcon ? text : null, hasChildren ? children : null);
  var withStyle = !withoutTheme && !withoutStyle && !asLink;
  var buttonClassNames = classNames([!withoutBootstrapStyles ? _defineProperty(_defineProperty(_defineProperty({
    btn: withStyle
  }, "btn-".concat(outline ? 'outline-' : '').concat(theme), withStyle && theme !== null), "btn-".concat(size), withStyle && size !== null), "active", !withoutStyle && active) : null, styles$x$1.container, (_ref8 = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_ref8, styles$x$1.withoutStyle, withoutStyle), styles$x$1.withIcon, hasIcon), styles$x$1.withIconColumns, hasIconColumns), styles$x$1.withText, text !== null), styles$x$1.withShadow, withShadow), styles$x$1.isSmall, small), styles$x$1.isBig, big), styles$x$1.isLink, href !== null), styles$x$1.asLink, asLink), styles$x$1.isDisabled, disabled), _defineProperty(_defineProperty(_ref8, styles$x$1.isLoading, loading), className, className !== null))]);
  if (href !== null) {
    var linkClassNames = classNames([buttonClassNames, _defineProperty({
      disabled: disabled
    }, styles$x$1.linkDisabled, disabled)]);
    return external || direct ? /*#__PURE__*/React.createElement("a", Object.assign({}, props, {
      href: disabled ? null : href,
      className: linkClassNames,
      onClick: onClick,
      target: external ? target : null,
      ref: refButton,
      tabIndex: focusable ? '' : '-1'
    }), content) : /*#__PURE__*/React.createElement(Link$2, {
      href: href,
      className: linkClassNames,
      onClick: onClick,
      ref: refButton,
      tabIndex: focusable ? '' : '-1'
    }, content);
  }
  return /*#__PURE__*/React.createElement("button", Object.assign({}, props, {
    type: type,
    className: buttonClassNames,
    onClick: onClick,
    disabled: disabled || disableOnLoading && loading,
    ref: refButton,
    tabIndex: focusable ? '0' : '-1'
  }), content);
};
Button$2.propTypes = propTypes$S;
Button$2.defaultProps = defaultProps$S;
var Button$3 = Button$2;
({
  buttons: PropTypes.buttons,
  size: PropTypes.buttonSize,
  theme: PropTypes.buttonTheme,
  renderButton: PropTypes$1.func,
  onClickButton: PropTypes$1.func,
  className: PropTypes$1.string,
  buttonClassName: PropTypes$1.string
});
({
  className: PropTypes$1.string
});
({
  name: PropTypes$1.string,
  // .isRequired,
  value: PropTypes.component,
  form: PropTypes$1.string,
  formComponents: PropTypes.components,
  fields: PropTypes.fields,
  className: PropTypes$1.string,
  onChange: PropTypes$1.func,
  gotoFieldForm: PropTypes$1.func.isRequired,
  closeFieldForm: PropTypes$1.func.isRequired,
  fieldContext: PropTypes$1.any // eslint-disable-line react/forbid-prop-types
});

({
  action: PropTypes$1.string.isRequired,
  method: PropTypes$1.string,
  fields: PropTypes.formFields,
  initialValue: PropTypes$1.object,
  // eslint-disable-line react/forbid-prop-types
  postForm: PropTypes$1.func,
  submitButtonLabel: PropTypes.label,
  submitButtonLoadingLabel: PropTypes.label,
  submitButtonTheme: PropTypes$1.string,
  cancelButtonTheme: PropTypes$1.string,
  buttons: PropTypes.buttons,
  children: PropTypes$1.node,
  actionsAlign: PropTypes$1.oneOf(['left', 'right']),
  withoutActions: PropTypes$1.bool,
  withoutComplete: PropTypes$1.bool,
  withoutBackButton: PropTypes$1.bool,
  onComplete: PropTypes$1.func,
  onResponse: PropTypes$1.func,
  onMessage: PropTypes$1.func,
  onCancel: PropTypes$1.func,
  onCancelHref: PropTypes$1.string,
  onOpenFieldForm: PropTypes$1.func,
  onCloseFieldForm: PropTypes$1.func,
  className: PropTypes$1.string,
  fieldsClassName: PropTypes$1.string,
  actionsClassName: PropTypes$1.string,
  cancelClassName: PropTypes$1.string
});
({
  href: PropTypes$1.string,
  external: PropTypes$1.bool,
  target: PropTypes$1.string,
  children: PropTypes.label,
  rel: PropTypes$1.string,
  withoutStyle: PropTypes$1.bool,
  className: PropTypes$1.string
});
({
  href: PropTypes$1.string,
  header: PropTypes$1.node,
  image: PropTypes$1.node,
  imageAlt: PropTypes$1.string,
  imageOverlay: PropTypes$1.bool,
  beforeBody: PropTypes$1.node,
  title: PropTypes.label,
  subtitle: PropTypes.label,
  children: PropTypes$1.node,
  afterBody: PropTypes$1.node,
  links: PropTypes$1.arrayOf(PropTypes$1.shape({
    label: PropTypes.label,
    href: PropTypes$1.string
  })),
  linksInSameBody: PropTypes$1.bool,
  footer: PropTypes$1.node,
  theme: PropTypes$1.oneOf([null, 'dark', 'primary', 'light']),
  className: PropTypes$1.string,
  imageClassName: PropTypes$1.string,
  headerClassName: PropTypes$1.string,
  titleClassName: PropTypes$1.string,
  subtitleClassName: PropTypes$1.string,
  bodyClassName: PropTypes$1.string,
  footerClassName: PropTypes$1.string,
  onClick: PropTypes$1.func,
  onClickBody: PropTypes$1.func,
  onClickFooter: PropTypes$1.func
});

var styles$t$1 = {"container":"micromag-core-partials-spinner-container","path":"micromag-core-partials-spinner-path","animated":"micromag-core-partials-spinner-animated","rotate":"micromag-core-partials-spinner-rotate","dash":"micromag-core-partials-spinner-dash"};

var propTypes$L$1 = {
  animated: PropTypes$1.bool,
  color: PropTypes$1.string,
  strokeWidth: PropTypes$1.number,
  className: PropTypes$1.string
};
var defaultProps$L$1 = {
  animated: true,
  color: 'currentColor',
  strokeWidth: 3,
  className: null
};
var Spinner = function Spinner(_ref) {
  var animated = _ref.animated,
    color = _ref.color,
    strokeWidth = _ref.strokeWidth,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    className: classNames([styles$t$1.container, _defineProperty(_defineProperty({}, styles$t$1.animated, animated), className, className !== null)]),
    width: "40",
    height: "40",
    viewBox: "0 0 40 40",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React.createElement("circle", {
    className: styles$t$1.path,
    cx: "20",
    cy: "20",
    r: "12",
    fill: "none",
    stroke: color,
    strokeWidth: strokeWidth
  }));
};
Spinner.propTypes = propTypes$L$1;
Spinner.defaultProps = defaultProps$L$1;
var Spinner$1 = Spinner;
({
  description: PropTypes$1.node,
  loading: PropTypes$1.bool,
  children: PropTypes$1.node,
  className: PropTypes$1.string
});

({
  className: PropTypes$1.string,
  color: PropTypes$1.string
});

({
  className: PropTypes$1.string,
  color: PropTypes$1.string
});

var propTypes$H$1 = {
  className: PropTypes$1.string,
  color: PropTypes$1.string
};
var defaultProps$H$1 = {
  className: null,
  color: '#fff'
};
var FullscreenIcon = function FullscreenIcon(_ref) {
  var color = _ref.color,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    width: "16",
    height: "14",
    viewBox: "0 0 16 14",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: className
  }, /*#__PURE__*/React.createElement("path", {
    d: "M11.2 0H16V4.66667H14.4V1.55556H11.2V0ZM0 0H4.8V1.55556H1.6V4.66667H0V0ZM14.4 12.4444V9.33333H16V14H11.2V12.4444H14.4ZM1.6 12.4444H4.8V14H0V9.33333H1.6V12.4444Z",
    fill: color
  }));
};
FullscreenIcon.propTypes = propTypes$H$1;
FullscreenIcon.defaultProps = defaultProps$H$1;
var FullscreenIcon$1 = FullscreenIcon;

({
  className: PropTypes$1.string,
  color: PropTypes$1.string
});

var propTypes$F$1 = {
  className: PropTypes$1.string,
  color: PropTypes$1.string
};
var defaultProps$F$1 = {
  className: null,
  color: '#fff'
};
var MuteIcon = function MuteIcon(_ref) {
  var color = _ref.color,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    width: "26",
    height: "26",
    viewBox: "0 0 26 26",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: className
  }, /*#__PURE__*/React.createElement("path", {
    d: "M7.09929 8.77987H1C0.447715 8.77987 0 9.22758 0 9.77987V15.7799C0 16.3322 0.447715 16.7799 1 16.7799H7.1076C7.35984 16.7799 7.60276 16.8752 7.78768 17.0467L14.3199 23.1062C14.9599 23.6999 16 23.246 16 22.3731V3.00199C16 2.12221 14.9458 1.67117 14.3095 2.2787L7.78983 8.50316C7.6038 8.68077 7.35649 8.77987 7.09929 8.77987Z",
    fill: color
  }), /*#__PURE__*/React.createElement("path", {
    d: "M18 18.6875C21.3137 18.6875 24 16.0012 24 12.6875C24 9.37379 21.3137 6.6875 18 6.6875",
    stroke: color
  }), /*#__PURE__*/React.createElement("path", {
    d: "M18 15.6875C19.6569 15.6875 21 14.3444 21 12.6875C21 11.0306 19.6569 9.6875 18 9.6875",
    stroke: color
  }));
};
MuteIcon.propTypes = propTypes$F$1;
MuteIcon.defaultProps = defaultProps$F$1;
var MuteIcon$1 = MuteIcon;

var propTypes$E$1 = {
  className: PropTypes$1.string,
  color: PropTypes$1.string
};
var defaultProps$E$1 = {
  className: null,
  color: '#fff'
};
var PauseIcon = function PauseIcon(_ref) {
  var color = _ref.color,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    className: className,
    width: "14",
    height: "18",
    viewBox: "0 0 14 18",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React.createElement("rect", {
    width: "6",
    height: "18",
    rx: "2",
    fill: color
  }), /*#__PURE__*/React.createElement("rect", {
    x: "8",
    width: "6",
    height: "18",
    rx: "2",
    fill: color
  }));
};
PauseIcon.propTypes = propTypes$E$1;
PauseIcon.defaultProps = defaultProps$E$1;
var PauseIcon$1 = PauseIcon;

var propTypes$D$1 = {
  className: PropTypes$1.string,
  color: PropTypes$1.string
};
var defaultProps$D$1 = {
  className: null,
  color: '#fff'
};
var PlayIcon = function PlayIcon(_ref) {
  var color = _ref.color,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    width: "40",
    height: "45.1",
    viewBox: "0 0 40 45.1",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: className
  }, /*#__PURE__*/React.createElement("path", {
    d: "M38.2,25.7L5.5,44.6C3,46,0,44.2,0,41.4L0,3.6c0-2.8,3-4.5,5.5-3.1l32.7,18.9C40.6,20.8,40.6,24.3,38.2,25.7z",
    fill: color,
    stroke: color
  }));
};
PlayIcon.propTypes = propTypes$D$1;
PlayIcon.defaultProps = defaultProps$D$1;
var PlayIcon$1 = PlayIcon;

({
  className: PropTypes$1.string,
  color: PropTypes$1.string
});

({
  items: PropTypes.menuItems,
  theme: PropTypes.bootstrapThemes,
  separator: PropTypes$1.oneOf([null, 'arrow']),
  withoutBar: PropTypes$1.bool,
  noWrap: PropTypes$1.bool,
  className: PropTypes$1.string
});
({
  items: PropTypes.menuItems,
  children: PropTypes$1.node,
  visible: PropTypes$1.bool,
  align: PropTypes.dropdownAlign,
  className: PropTypes$1.string,
  itemClassName: PropTypes$1.string,
  onClickItem: PropTypes$1.func,
  onClickOutside: PropTypes$1.func
});
({
  items: PropTypes.menuItems,
  tagName: PropTypes$1.string,
  itemTagName: PropTypes$1.string,
  children: PropTypes$1.node,
  linkAsItem: PropTypes$1.bool,
  className: PropTypes$1.string,
  itemClassName: PropTypes$1.string,
  linkClassName: PropTypes$1.string,
  hasSubMenuClassName: PropTypes$1.string,
  subMenuClassName: PropTypes$1.string,
  subMenuItemClassName: PropTypes$1.string,
  subMenuLinkClassName: PropTypes$1.string,
  hasDropdownClassName: PropTypes$1.string,
  dropdownClassName: PropTypes$1.string,
  dropdownItemClassName: PropTypes$1.string,
  dropdownLinkClassName: PropTypes$1.string,
  dropdownAlign: PropTypes.dropdownAlign
});

({
  brand: PropTypes$1.node,
  brandLink: PropTypes$1.string,
  breadcrumbs: PropTypes$1.node,
  theme: PropTypes$1.oneOf(['light', 'dark', 'primary', null]),
  size: PropTypes$1.oneOf(['sm', 'md', 'lg']),
  compact: PropTypes$1.bool,
  noWrap: PropTypes$1.bool,
  withoutCollapse: PropTypes$1.bool,
  withoutCollapseToggle: PropTypes$1.bool,
  children: PropTypes$1.node,
  className: PropTypes$1.string,
  brandClassName: PropTypes$1.string,
  breadCrumbsClassName: PropTypes$1.string,
  collapseClassName: PropTypes$1.string
});

reactIntl.defineMessages({
  previous: {
    id: "menus.pagination.previous",
    defaultMessage: [{
      "type": 0,
      "value": "Previous"
    }]
  },
  next: {
    id: "menus.pagination.next",
    defaultMessage: [{
      "type": 0,
      "value": "next"
    }]
  }
});
({
  page: PropTypes$1.number,
  lastPage: PropTypes$1.number,
  maxPages: PropTypes$1.number,
  total: PropTypes$1.number,
  url: PropTypes$1.string,
  query: PropTypes$1.object,
  // eslint-disable-line react/forbid-prop-types
  withPreviousNext: PropTypes$1.bool,
  className: PropTypes$1.string,
  paginationClassName: PropTypes$1.string,
  itemClassName: PropTypes$1.string,
  linkClassName: PropTypes$1.string,
  onClickPage: PropTypes$1.func
});

({
  items: PropTypes.menuItems,
  size: PropTypes.buttonSize,
  theme: PropTypes.buttonTheme,
  renderItemButton: PropTypes$1.func,
  buttonClassName: PropTypes$1.string,
  className: PropTypes$1.string,
  onClickItem: PropTypes$1.func
});

var styles$n$1 = {"container":"micromag-core-modals-container","modals":"micromag-core-modals-modals","hasModals":"micromag-core-modals-hasModals"};

var propTypes$v$1 = {
  modals: PropTypes.modals.isRequired,
  setModalsContainer: PropTypes$1.func.isRequired,
  className: PropTypes$1.string
};
var defaultProps$v$1 = {
  className: null
};
var ModalsContainer = function ModalsContainer(_ref) {
  var modals = _ref.modals,
    setModalsContainer = _ref.setModalsContainer,
    className = _ref.className;
  var containerRef = React.useRef(null);
  React.useEffect(function () {
    setModalsContainer(containerRef.current);
  }, []);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$n$1.container, _defineProperty({}, className, className)])
  }, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$n$1.modals, _defineProperty({}, styles$n$1.hasModals, modals.length > 0)]),
    ref: containerRef
  }));
};
ModalsContainer.propTypes = propTypes$v$1;
ModalsContainer.defaultProps = defaultProps$v$1;
withModals(ModalsContainer);

/* eslint-disable react/no-array-index-key, react/jsx-props-no-spreading */
({
  id: PropTypes$1.string,
  data: PropTypes$1.object,
  // eslint-disable-line react/forbid-prop-types
  container: PropTypes$1.object,
  // eslint-disable-line react/forbid-prop-types
  register: PropTypes$1.func,
  unregister: PropTypes$1.func,
  children: PropTypes$1.node
});

/* eslint-disable react/no-array-index-key, react/jsx-props-no-spreading */
({
  id: PropTypes$1.string,
  data: PropTypes$1.object,
  // eslint-disable-line react/forbid-prop-types
  children: PropTypes$1.node
});

({
  id: PropTypes$1.string,
  title: PropTypes$1.string,
  position: PropTypes$1.oneOf(['center', 'top']),
  children: PropTypes$1.node
});

({
  title: PropTypes.label,
  header: PropTypes$1.node,
  children: PropTypes$1.node,
  footer: PropTypes$1.node,
  buttons: PropTypes.buttons,
  // theme: PropTypes.oneOf([null, 'dark', 'light']),
  onClickClose: PropTypes$1.func,
  className: PropTypes$1.string,
  bodyClassName: PropTypes$1.string
});
({
  type: PropTypes$1.oneOfType([PropTypes.mediaTypes, PropTypes$1.array]),
  opened: PropTypes$1.bool,
  sources: PropTypes$1.arrayOf(PropTypes$1.string),
  onUploaded: PropTypes$1.func,
  onRequestClose: PropTypes$1.func
});

var styles$k$1 = {"container":"micromag-core-panels-container"};

var propTypes$p$1 = {
  panels: PropTypes.panels,
  setPanelsContainer: PropTypes$1.func,
  className: PropTypes$1.string
};
var defaultProps$p$1 = {
  panels: [],
  setPanelsContainer: null,
  className: null
};
var PanelsContainer = function PanelsContainer(_ref) {
  var panels = _ref.panels,
    setPanelsContainer = _ref.setPanelsContainer,
    className = _ref.className;
  var containerRef = React.useRef(null);
  React.useEffect(function () {
    setPanelsContainer(containerRef.current);
  }, []);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$k$1.container, _defineProperty({}, className, className)])
  }, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$k$1.panels, _defineProperty({}, styles$k$1.hasPanels, panels.length > 0)]),
    ref: containerRef
  }));
};
PanelsContainer.propTypes = propTypes$p$1;
PanelsContainer.defaultProps = defaultProps$p$1;
withPanels(PanelsContainer);

/* eslint-disable react/no-array-index-key, react/jsx-props-no-spreading */
({
  id: PropTypes$1.string,
  data: PropTypes$1.object,
  // eslint-disable-line react/forbid-prop-types
  children: PropTypes$1.node
});

/* eslint-disable react/no-array-index-key, react/jsx-props-no-spreading */
({
  id: PropTypes$1.string,
  title: PropTypes$1.string,
  children: PropTypes$1.node
});

({
  title: PropTypes$1.node,
  children: PropTypes$1.node,
  className: PropTypes$1.string,
  topClassName: PropTypes$1.string,
  contentClassName: PropTypes$1.string,
  openedClassName: PropTypes$1.string,
  buttonClassName: PropTypes$1.string
});

var propTypes$l$1 = {
  stroke: PropTypes$1.string,
  border: PropTypes$1.string,
  fill: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$l$1 = {
  stroke: 'currentColor',
  border: 'rgba(0,0,0,0.67)',
  fill: '#fff',
  className: null
};
var Close = function Close(_ref) {
  var stroke = _ref.stroke,
    border = _ref.border,
    fill = _ref.fill,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "42.9",
    height: "42.9",
    viewBox: "0 0 42.9 42.9",
    className: className
  }, /*#__PURE__*/React.createElement("g", {
    transform: "translate(-352.531 -47.531)"
  }, border ? /*#__PURE__*/React.createElement("path", {
    fill: border,
    d: "M374,47.5c11.9,0,21.5,9.6,21.5,21.5s-9.6,21.5-21.5,21.5s-21.5-9.6-21.5-21.5c0,0,0,0,0,0 C352.5,57.1,362.1,47.5,374,47.5z"
  }) : null, /*#__PURE__*/React.createElement("path", {
    fill: fill,
    d: "M374,50c10.5,0,19,8.5,19,19s-8.5,19-19,19s-19-8.5-19-19S363.5,50,374,50z"
  }), /*#__PURE__*/React.createElement("g", {
    transform: "translate(366.893 61.893)"
  }, /*#__PURE__*/React.createElement("g", {
    transform: "translate(0 0)"
  }, /*#__PURE__*/React.createElement("path", {
    fill: fill,
    stroke: stroke,
    strokeWidth: "2",
    strokeLinecap: "round",
    d: "M14.2,0.3L0,13.9"
  }), /*#__PURE__*/React.createElement("path", {
    fill: fill,
    stroke: stroke,
    strokeWidth: "2",
    strokeLinecap: "round",
    d: "M0.3,0l13.7,14.2"
  })))));
};
Close.propTypes = propTypes$l$1;
Close.defaultProps = defaultProps$l$1;
var Close$1 = Close;

/* eslint-disable react/jsx-props-no-spreading */
({
  date: PropTypes$1.string,
  withTime: PropTypes$1.bool,
  timeSeparator: PropTypes$1.node
});

/* eslint-disable react/no-danger */
({
  throttleDelay: PropTypes$1.number,
  threshold: PropTypes$1.arrayOf(PropTypes$1.number),
  onEnter: PropTypes$1.func,
  onLeave: PropTypes$1.func,
  onChange: PropTypes$1.func,
  disabled: PropTypes$1.bool,
  children: PropTypes$1.node,
  className: PropTypes$1.string
});

var styles$h$1 = {"container":"micromag-core-partials-placeholder-block-container","outline":"micromag-core-partials-placeholder-block-outline","withInvertedColors":"micromag-core-partials-placeholder-block-withInvertedColors","box":"micromag-core-partials-placeholder-block-box"};

var propTypes$i$1 = {
  width: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  height: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  outline: PropTypes$1.bool,
  className: PropTypes$1.string,
  boxClassName: PropTypes$1.string,
  children: PropTypes$1.node,
  withInvertedColors: PropTypes$1.bool
};
var defaultProps$i$1 = {
  width: '100%',
  height: '3em',
  outline: false,
  className: null,
  boxClassName: null,
  children: null,
  withInvertedColors: true
};
var PlaceholderBlock = function PlaceholderBlock(_ref) {
  var width = _ref.width,
    height = _ref.height,
    outline = _ref.outline,
    className = _ref.className,
    boxClassName = _ref.boxClassName,
    withInvertedColors = _ref.withInvertedColors,
    children = _ref.children;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$h$1.container, _defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$h$1.outline, outline), styles$h$1.withInvertedColors, withInvertedColors)])
  }, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$h$1.box, _defineProperty({}, boxClassName, boxClassName !== null)]),
    style: {
      width: width,
      height: height
    }
  }, children));
};
PlaceholderBlock.propTypes = propTypes$i$1;
PlaceholderBlock.defaultProps = defaultProps$i$1;
var PlaceholderBlock$1 = PlaceholderBlock;

/* eslint-disable react/jsx-props-no-spreading */

// import { PropTypes as MicromagPropTypes } from '@micromag/core';

({
  name: PropTypes$1.string.isRequired,
  components: PropTypes$1.object.isRequired,
  // eslint-disable-line
  props: PropTypes$1.object,
  // eslint-disable-line
  isPlaceholder: PropTypes$1.bool,
  className: PropTypes$1.string,
  placeholderProps: PropTypes$1.object // eslint-disable-line
});

var styles$g$1 = {"container":"micromag-core-partials-empty-container","middle":"micromag-core-partials-empty-middle","withoutBorder":"micromag-core-partials-empty-withoutBorder","invertColor":"micromag-core-partials-empty-invertColor"};

var propTypes$g$1 = {
  children: PropTypes$1.node,
  withoutBorder: PropTypes$1.bool,
  light: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$g$1 = {
  children: null,
  withoutBorder: false,
  light: false,
  className: null
};
var Empty = function Empty(_ref) {
  var children = _ref.children,
    withoutBorder = _ref.withoutBorder,
    light = _ref.light,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$g$1.container, _defineProperty(_defineProperty(_defineProperty({}, styles$g$1.withoutBorder, withoutBorder), styles$g$1.light, light), className, className)])
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$g$1.middle
  }, /*#__PURE__*/React.createElement(Label$1, null, children)));
};
Empty.propTypes = propTypes$g$1;
Empty.defaultProps = defaultProps$g$1;
var Empty$1 = Empty;
({
  fonts: PropTypes.fonts,
  formats: PropTypes$1.arrayOf(PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.shape({
    name: PropTypes$1.string,
    format: PropTypes$1.string
  })]))
});

({
  thumbnail: PropTypes$1.node,
  thumbnailAlign: PropTypes$1.oneOf(['top', 'center', 'bottom']),
  children: PropTypes$1.node,
  title: PropTypes.label,
  className: PropTypes$1.string,
  thumbnailClassName: PropTypes$1.string,
  bodyClassName: PropTypes$1.string,
  titleClassName: PropTypes$1.string
});

/**
 * Core
 */
PropTypes$1.shape({
  listen: PropTypes$1.func.isRequired,
  push: PropTypes$1.func.isRequired
});
PropTypes$1.shape({
  pathname: PropTypes$1.string,
  search: PropTypes$1.string
});
PropTypes$1.shape({
  locale: PropTypes$1.string.isRequired,
  formatMessage: PropTypes$1.func.isRequired
});
var defaultMessageContent = PropTypes$1.shape({
  type: PropTypes$1.number,
  value: PropTypes$1.string
});
var defaultMessage = PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.arrayOf(defaultMessageContent)]);
var message = PropTypes$1.shape({
  id: PropTypes$1.string,
  defaultMessage: defaultMessage.isRequired,
  description: PropTypes$1.string
});
var text = PropTypes$1.oneOfType([message, PropTypes$1.string]);
var label = PropTypes$1.oneOfType([message, PropTypes$1.node]);
PropTypes$1.oneOf([401, 403, 404, 500]);
PropTypes$1.oneOfType([PropTypes$1.shape({
  current: PropTypes$1.any // eslint-disable-line react/forbid-prop-types
}), PropTypes$1.func]);
var target = PropTypes$1.oneOf(['_blank', '_self', '_parent']);
var interaction = PropTypes$1.oneOf(['tap', 'swipe']);
PropTypes$1.arrayOf(interaction);
PropTypes$1.objectOf(PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number, PropTypes$1.array]));
PropTypes$1.shape({
  currentTime: PropTypes$1.number,
  duration: PropTypes$1.number
});

/**
 * Site
 */
PropTypes$1.shape({
  id: PropTypes$1.number,
  firstname: PropTypes$1.string,
  lastname: PropTypes$1.string,
  email: PropTypes$1.string,
  gender: PropTypes$1.string,
  birthdate: PropTypes$1.string
});
var menuItem = PropTypes$1.shape({
  id: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  label: label,
  url: PropTypes$1.string,
  external: PropTypes$1.bool,
  active: PropTypes$1.bool
});
PropTypes$1.arrayOf(menuItem);
var breadcrumb = PropTypes$1.shape({
  label: label,
  url: PropTypes$1.string
});
PropTypes$1.arrayOf(breadcrumb);
var device = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired
});
PropTypes$1.arrayOf(device);
var modal = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired
});
PropTypes$1.arrayOf(modal);
var panel = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired
});
PropTypes$1.arrayOf(panel);
var button = PropTypes$1.shape({
  label: label,
  onClick: PropTypes$1.func
});
PropTypes$1.arrayOf(button);
var bootstrapThemeStrings = ['primary', 'secondary', 'success', 'danger', 'warning', 'info', 'light', 'dark'];
PropTypes$1.oneOf(bootstrapThemeStrings);
PropTypes$1.oneOf([].concat(bootstrapThemeStrings, ['outline-primary', 'outline-secondary', 'outline-success', 'outline-danger', 'outline-warning', 'outline-info', 'outline-light', 'outline-dark', 'outline-link', null]));
PropTypes$1.oneOf(['lg', 'sm', null]);
PropTypes$1.oneOf(['lg', 'sm', null]);
PropTypes$1.oneOf(['start', 'end']);
var component = PropTypes$1.oneOfType([PropTypes$1.object, PropTypes$1.func]);
PropTypes$1.objectOf(component);

/**
 * Forms
 */
var errors = PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.arrayOf(PropTypes$1.string)]);
PropTypes$1.objectOf(errors);
var selectOption = PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.shape({
  value: PropTypes$1.any,
  // eslint-disable-line
  label: label
})]);
PropTypes$1.arrayOf(selectOption);
var formField = PropTypes$1.shape({
  name: PropTypes$1.string,
  component: component
});
PropTypes$1.arrayOf(formField);

/**
 * Medias
 */
var mediaMetadataShape = {
  filename: PropTypes$1.string,
  size: PropTypes$1.number,
  mime: PropTypes$1.string
};
var mediaFile = PropTypes$1.shape({
  id: PropTypes$1.string,
  handle: PropTypes$1.string,
  type: PropTypes$1.string,
  mime: PropTypes$1.string,
  url: PropTypes$1.string
});
var mediaShape = {
  id: PropTypes$1.string,
  type: PropTypes$1.string.isRequired,
  url: PropTypes$1.string,
  // .isRequired,
  thumbnail_url: PropTypes$1.string,
  name: PropTypes$1.string,
  metadata: PropTypes$1.shape(_objectSpread$1({}, mediaMetadataShape)),
  files: PropTypes$1.objectOf(mediaFile)
};
var media = PropTypes$1.shape(mediaShape);
PropTypes$1.arrayOf(media);
PropTypes$1.oneOf(['image', 'video', 'audio', 'closed-captions', 'font']);
var imageMedia = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape), {}, {
  type: PropTypes$1.oneOf(['image', 'video']),
  metadata: PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaMetadataShape), {}, {
    width: PropTypes$1.number,
    height: PropTypes$1.number
  }))
}));
PropTypes$1.arrayOf(imageMedia);
var fontMedia = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape), {}, {
  type: PropTypes$1.oneOf(['font']),
  metadata: PropTypes$1.shape(_objectSpread$1({}, mediaMetadataShape))
}));
PropTypes$1.arrayOf(fontMedia);
var videoMedia = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape), {}, {
  type: PropTypes$1.oneOf(['video']),
  metadata: PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaMetadataShape), {}, {
    width: PropTypes$1.number,
    height: PropTypes$1.number,
    duration: PropTypes$1.number
  }))
}));
PropTypes$1.arrayOf(videoMedia);
var audioMedia = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape), {}, {
  type: PropTypes$1.oneOf(['audio']),
  metadata: PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaMetadataShape), {}, {
    duration: PropTypes$1.number
  }))
}));
PropTypes$1.arrayOf(audioMedia);
var closedCaptionsMedia = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, mediaShape), {}, {
  type: PropTypes$1.oneOf(['closed-captions'])
}));

/**
 * Style
 */

PropTypes$1.shape({
  type: PropTypes$1.oneOf(['system', 'google', 'custom']),
  name: PropTypes$1.string,
  media: fontMedia
});
var font = PropTypes$1.oneOfType([PropTypes$1.object, PropTypes$1.string]);
PropTypes$1.arrayOf(font);
var textAlign = PropTypes$1.oneOf(['left', 'right', 'center']);
var color = PropTypes$1.shape({
  color: PropTypes$1.string,
  alpha: PropTypes$1.number
});
var textStyle = PropTypes$1.shape({
  fontFamily: font,
  fontSize: PropTypes$1.number,
  fontStyle: PropTypes$1.shape({
    bold: PropTypes$1.bool,
    italic: PropTypes$1.bool,
    underline: PropTypes$1.bool,
    upperCase: PropTypes$1.bool
  }),
  align: textAlign,
  color: color,
  letterSpacing: PropTypes$1.number,
  lineHeight: PropTypes$1.number
});
var borderTypes = PropTypes$1.oneOf(['dotted', 'dashed', 'solid', 'double', 'groove', 'ridge', 'inset', 'outset', 'hidden']);
var shadowType = PropTypes$1.shape({
  shadowDistance: PropTypes$1.number,
  shadowBlur: PropTypes$1.number,
  shadowColor: color
});
PropTypes$1.shape({
  width: PropTypes$1.number,
  style: borderTypes,
  radius: PropTypes$1.number,
  color: color
});
var boxStyle = PropTypes$1.shape({
  backgroundColor: color,
  borderRadius: PropTypes$1.number,
  borderWidth: PropTypes$1.number,
  borderColor: color,
  borderStyle: borderTypes,
  shadow: shadowType
});
PropTypes$1.shape({
  top: PropTypes$1.number,
  bottom: PropTypes$1.number
});
PropTypes$1.arrayOf(PropTypes$1.shape({
  rows: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.arrayOf(PropTypes$1.number)]),
  columns: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.arrayOf(PropTypes$1.number)])
}));
var objectFitSize = PropTypes$1.oneOf(['cover', 'contain', null]);
PropTypes$1.shape({
  fit: objectFitSize,
  horizontalPosition: PropTypes$1.oneOf(['left', 'center', 'right']),
  verticalPosition: PropTypes$1.oneOf(['top', 'center', 'bottom'])
});

/**
 * Elements
 */

var textElement = PropTypes$1.shape({
  body: PropTypes$1.string,
  textStyle: textStyle
});
var headingElement = textElement;
PropTypes$1.shape({
  label: PropTypes$1.string,
  textStyle: textStyle
});
var imageElement = PropTypes$1.shape({
  media: imageMedia
});
PropTypes$1.arrayOf(imageElement);
PropTypes$1.shape({
  media: videoMedia,
  autoPlay: PropTypes$1.bool,
  loop: PropTypes$1.bool,
  closedCaptions: closedCaptionsMedia,
  withSeekBar: PropTypes$1.bool,
  withControls: PropTypes$1.bool
});
var visualElement = PropTypes$1.shape({
  media: imageMedia
});
PropTypes$1.arrayOf(visualElement);
PropTypes$1.shape({
  media: audioMedia,
  autoPlay: PropTypes$1.bool,
  loop: PropTypes$1.bool,
  closedCaptions: closedCaptionsMedia,
  withPlayPause: PropTypes$1.bool
});
PropTypes$1.shape({
  media: closedCaptionsMedia
});
var backgroundElement = PropTypes$1.shape({
  color: color,
  image: imageMedia,
  video: videoMedia
});
var imageElementWithCaption = PropTypes$1.shape({
  image: imageMedia,
  caption: textElement
});
PropTypes$1.arrayOf(imageElementWithCaption);
var stackDirection = PropTypes$1.oneOf(['horizontal', 'vertical']);
var stackAlign = PropTypes$1.oneOf(['start', 'center', 'end']);
var stackSpacing = PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.oneOf(['between', 'evenly', 'around'])]);
PropTypes$1.shape({
  direction: stackDirection,
  align: stackAlign,
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  spacing: stackSpacing,
  reverse: PropTypes$1.bool
});
PropTypes$1.shape({
  layout: PropTypes$1.arrayOf(PropTypes$1.string),
  spacing: PropTypes$1.number
});
var geoPosition = PropTypes$1.shape({
  lat: PropTypes$1.number,
  lng: PropTypes$1.number
});
var markerShape = {
  id: PropTypes$1.number,
  geoPosition: geoPosition,
  title: headingElement,
  subtitle: headingElement,
  description: textElement
};
var marker = PropTypes$1.shape(_objectSpread$1({}, markerShape));
PropTypes$1.arrayOf(marker);
var markerWithImage = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, markerShape), {}, {
  image: imageMedia
}));
PropTypes$1.arrayOf(markerWithImage);
var answerShape = {
  id: PropTypes$1.string,
  label: textElement
};
var answer = PropTypes$1.shape(_objectSpread$1({}, answerShape));
var quizAnswer = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, answerShape), {}, {
  good: PropTypes$1.bool
}));
PropTypes$1.arrayOf(answer);
PropTypes$1.arrayOf(quizAnswer);
var callToActionTypes = PropTypes$1.oneOf(['swipe-up', 'button']);
var callToAction = PropTypes$1.shape({
  active: PropTypes$1.bool,
  type: callToActionTypes,
  url: PropTypes$1.string,
  label: textElement,
  buttonStyle: boxStyle
});
PropTypes$1.shape({
  active: PropTypes$1.bool,
  label: textElement,
  boxStyle: boxStyle
});
PropTypes$1.shape({
  active: PropTypes$1.bool
});
var speaker = PropTypes$1.shape({
  id: PropTypes$1.string,
  name: PropTypes$1.string,
  avatar: imageMedia,
  side: PropTypes$1.oneOf(['left', 'right']),
  color: color
});
var speakers = PropTypes$1.arrayOf(speaker);
var conversationMessage = PropTypes$1.shape({
  speaker: PropTypes$1.string,
  message: PropTypes$1.string,
  image: imageMedia,
  audio: audioMedia,
  timingOverrides: PropTypes$1.shape({
    enabled: PropTypes$1.bool,
    appearDelay: PropTypes$1.number,
    writingStateDuration: PropTypes$1.number
  })
});
var conversationMessages = PropTypes$1.arrayOf(conversationMessage);
PropTypes$1.shape({
  speakers: speakers,
  textStyle: textStyle,
  messages: conversationMessages
});

/**
 * Definitions
 */

var fieldShape = {
  name: PropTypes$1.string,
  type: PropTypes$1.string.isRequired,
  label: text
};
var field = PropTypes$1.shape(_objectSpread$1(_objectSpread$1({}, fieldShape), {}, {
  isSection: PropTypes$1.bool,
  fields: PropTypes$1.arrayOf(PropTypes$1.shape(fieldShape))
}));
var fields$2 = PropTypes$1.arrayOf(field);
var screenDefinition = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired,
  type: PropTypes$1.oneOf(['screen']).isRequired,
  title: text.isRequired,
  layouts: PropTypes$1.arrayOf(PropTypes$1.string),
  fields: fields$2
});
PropTypes$1.arrayOf(screenDefinition);
var fieldDefinition = PropTypes$1.shape({
  id: PropTypes$1.string.isRequired,
  type: PropTypes$1.oneOf(['field']).isRequired,
  title: text.isRequired,
  fields: fields$2
});
PropTypes$1.arrayOf(fieldDefinition);

/**
 * Components
 */
var storyComponentShape = {
  type: PropTypes$1.string.isRequired
};
var storyComponent = PropTypes$1.shape(_objectSpread$1({}, storyComponentShape));
PropTypes$1.arrayOf(storyComponent);
var screenComponent = PropTypes$1.shape(_objectSpread$1({}, storyComponentShape));
var screenComponents = PropTypes$1.arrayOf(screenComponent);

/**
 * Theme
 */
var theme = PropTypes$1.shape({
  id: PropTypes$1.string,
  textStyles: PropTypes$1.objectOf(textStyle),
  // renamed to textstyles
  background: backgroundElement,
  colors: PropTypes$1.objectOf(color),
  components: screenComponents
});
PropTypes$1.shape(_objectSpread$1({
  logo: imageMedia
}, theme));

/**
 * Branding
 */

// export const branding = PropTypes.shape({
//     logo: imageMedia,
//     primaryColor: color,
//     secondaryColor: color,
//     backgroundColor: color,
//     textStyle,
// });

/**
 * Metadata
 */
var metadata = PropTypes$1.shape({
  description: PropTypes$1.string,
  shareUrl: PropTypes$1.string,
  shareImage: imageMedia,
  favIcon: imageMedia
});
var tag = PropTypes$1.shape({
  label: PropTypes$1.string,
  value: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string])
});
PropTypes$1.arrayOf(tag);

/**
 * Story
 */
PropTypes$1.shape({
  id: PropTypes$1.string,
  theme: theme,
  components: screenComponents,
  metadata: metadata
});

/**
 * Render
 */
var deviceScreen = PropTypes$1.shape({
  name: PropTypes$1.string.isRequired,
  mediaQuery: PropTypes$1.string
});
PropTypes$1.arrayOf(deviceScreen);
PropTypes$1.shape({
  screen: PropTypes$1.string,
  screens: PropTypes$1.arrayOf(PropTypes$1.string),
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  landscape: PropTypes$1.bool
});
PropTypes$1.oneOf(['view', 'placeholder', 'edit', 'preview', 'static', 'capture']);

/**
 * Screens
 */

PropTypes$1.shape({
  width: PropTypes$1.number,
  height: PropTypes$1.number
});
PropTypes$1.shape({
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  url: PropTypes$1.string,
  target: target,
  iframe: PropTypes$1.string,
  image: imageMedia
});
PropTypes$1.shape({
  src: PropTypes$1.string,
  track: PropTypes$1.string,
  trackLng: PropTypes$1.number,
  controls: PropTypes$1.bool
});
var slide = PropTypes$1.shape({
  image: imageMedia,
  text: PropTypes$1.string
});
PropTypes$1.arrayOf(slide);

// export const imageStyle = PropTypes.shape({
//     alt: PropTypes.string,
//     fit: PropTypes.object,
// });

PropTypes$1.shape({});

/**
 * Transitions
 */

var transitionName = PropTypes$1.oneOf(['fade', 'scale', 'slide']);
var transitionParams = {
  duration: PropTypes$1.number,
  easing: PropTypes$1.oneOf(['ease', 'ease-in', 'ease-out', 'ease-in-out', 'linear'])
};
var transition = PropTypes$1.oneOfType([transitionName.isRequired, PropTypes$1.shape(_objectSpread$1({
  name: transitionName.isRequired
}, transitionParams))]);
PropTypes$1.shape({
  "in": transition,
  out: transition
});

/**
 * Search
 */

var searchFilter = PropTypes$1.shape({
  type: PropTypes$1.string,
  value: PropTypes$1.oneOf([PropTypes$1.string, PropTypes$1.number])
});
PropTypes$1.arrayOf(searchFilter);

/**
 * Payments
 */

var paymentItem = PropTypes$1.shape({
  id: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]),
  date: PropTypes$1.string,
  type: PropTypes$1.string,
  invoice_link: PropTypes$1.string,
  amount: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number])
});
PropTypes$1.arrayOf(paymentItem);

/**
 * Page Metadada
 */

var pageMetadata = PropTypes$1.shape({
  canonical: PropTypes$1.string,
  description: PropTypes$1.string,
  keywords: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.array]),
  image: PropTypes$1.shape({
    url: PropTypes$1.string
  }),
  favicon: PropTypes$1.shape({
    url: PropTypes$1.string
  }),
  rssUrl: PropTypes$1.string,
  atomUrl: PropTypes$1.string,
  microformats: PropTypes$1.arrayOf(PropTypes$1.shape({}))
});
PropTypes$1.shape({
  name: textElement,
  avatar: PropTypes$1.shape({
    url: PropTypes$1.string
  })
});
PropTypes$1.shape({
  id: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]),
  name: PropTypes$1.string
});
var badge = PropTypes$1.shape({
  label: textElement,
  buttonStyle: boxStyle
});
PropTypes$1.shape({
  badge: badge
});
PropTypes$1.shape({
  callToAction: callToAction
});
PropTypes$1.shape();
PropTypes$1.shape({
  file: closedCaptionsMedia,
  textStyle: textStyle,
  boxStyle: boxStyle
});

/* eslint-disable react/no-array-index-key */
({
  title: PropTypes$1.string,
  url: PropTypes$1.string,
  metadata: pageMetadata,
  fullTitle: PropTypes$1.string,
  suffix: PropTypes$1.string,
  children: PropTypes$1.node
});

({
  items: PropTypes$1.arrayOf(PropTypes$1.node),
  auto: PropTypes$1.bool,
  delay: PropTypes$1.number,
  width: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]),
  height: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]),
  className: PropTypes$1.string,
  children: PropTypes$1.node
});

var styles$d$1 = {"icon":"micromag-core-placeholders-icon"};

/* eslint-disable react/prop-types */
var AdFrame = function AdFrame(_ref) {
  var width = _ref.width,
    height = _ref.height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    width: width,
    height: height,
    className: className
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faAd.faAd,
    className: styles$d$1.icon
  }));
};
var AdFrame$1 = AdFrame;

/* eslint-disable react/prop-types */
var AdImage = function AdImage(_ref) {
  var width = _ref.width,
    height = _ref.height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    width: width,
    height: height,
    className: className
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faImage.faImage,
    className: styles$d$1.icon
  }));
};
var AdImage$1 = AdImage;

/* eslint-disable react/destructuring-assignment, react/prop-types */
var Audio$2 = function Audio(_ref) {
  var _ref$width = _ref.width,
    width = _ref$width === void 0 ? '100%' : _ref$width,
    _ref$height = _ref.height,
    height = _ref$height === void 0 ? '2em' : _ref$height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    width: width,
    height: height,
    className: className
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faMusic.faMusic,
    className: styles$d$1.icon
  }));
};
var Audio$1$1 = Audio$2;

var styles$c$1 = {"container":"micromag-core-partials-placeholder-text-container","withInvertedColors":"micromag-core-partials-placeholder-text-withInvertedColors","line":"micromag-core-partials-placeholder-text-line"};

var propTypes$b$1 = {
  lines: PropTypes$1.number,
  lineMargin: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  width: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  height: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  fontSize: PropTypes$1.number,
  className: PropTypes$1.string,
  withInvertedColors: PropTypes$1.bool
};
var defaultProps$b$1 = {
  lines: 1,
  lineMargin: 1,
  width: '100%',
  height: null,
  fontSize: 16,
  className: null,
  withInvertedColors: true
};
var PlaceholderText = function PlaceholderText(_ref) {
  var lines = _ref.lines,
    lineMargin = _ref.lineMargin,
    width = _ref.width,
    height = _ref.height,
    fontSize = _ref.fontSize,
    className = _ref.className,
    withInvertedColors = _ref.withInvertedColors;
  var lineHeight = height !== null && isNumber(height) ? "".concat(Math.round(height * fontSize), "px") : height;
  var oddWidth = isNumber(width) ? width * 0.9 : '80%';
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$c$1.container, _defineProperty(_defineProperty({}, className, className), styles$c$1.withInvertedColors, withInvertedColors)])
  }, _toConsumableArray(Array(lines)).map(function (e, index) {
    return /*#__PURE__*/React.createElement("div", {
      key: "line-".concat(index),
      className: styles$c$1.line,
      style: {
        width: index % 2 === 0 ? width : oddWidth,
        height: lineHeight,
        marginTop: lineMargin,
        marginBottom: lineMargin
      }
    });
  }));
};
PlaceholderText.propTypes = propTypes$b$1;
PlaceholderText.defaultProps = defaultProps$b$1;
var PlaceholderText$1 = PlaceholderText;

/* eslint-disable react/destructuring-assignment, react/prop-types */
var Button$4 = function Button(_ref) {
  var _ref$width = _ref.width,
    width = _ref$width === void 0 ? '75%' : _ref$width,
    _ref$height = _ref.height,
    height = _ref$height === void 0 ? '0.4em' : _ref$height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    outline: true,
    width: width,
    height: height,
    className: className
  }, /*#__PURE__*/React.createElement(PlaceholderText$1, {
    line: 1,
    height: "0.1em"
  }));
};
var Button$1$1 = Button$4;

var _excluded$2$1 = ["width", "height", "className"];
var Image$2 = function Image(_ref) {
  var width = _ref.width,
    height = _ref.height,
    className = _ref.className,
    props = _objectWithoutProperties(_ref, _excluded$2$1);
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, Object.assign({}, props, {
    width: width,
    height: height,
    className: className
  }), /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faImage.faImage,
    className: styles$d$1.icon
  }));
};
var Image$1$2 = Image$2;

/* eslint-disable react/jsx-props-no-spreading, react/destructuring-assignment, react/prop-types */
var Line = function Line(props) {
  return /*#__PURE__*/React.createElement(PlaceholderText$1, Object.assign({}, props, {
    className: classNames([props.className, styles$d$1.shortText]),
    height: 0.2,
    lines: 1
  }));
};
var Line$1 = Line;

var styles$b$1 = {"container":"micromag-core-placeholders-map-container","icon":"micromag-core-placeholders-map-icon"};

var Map$3 = function Map(props) {
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, Object.assign({}, props, {
    width: "100%",
    height: "100%",
    className: classNames([styles$b$1.container, _defineProperty({}, props.className, props.className !== null)])
  }), /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: props.withImages ? faImage.faImage : faMapMarkerAlt.faMapMarkerAlt,
    className: styles$b$1.icon
  }), /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: props.withImages ? faImage.faImage : faMapMarkerAlt.faMapMarkerAlt,
    className: styles$b$1.icon
  }), /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: props.withImages ? faImage.faImage : faMapMarkerAlt.faMapMarkerAlt,
    className: styles$b$1.icon
  }), /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: props.withImages ? faImage.faImage : faMapMarkerAlt.faMapMarkerAlt,
    className: styles$b$1.icon
  }));
};
var Map$1$2 = Map$3;

/* eslint-disable react/jsx-props-no-spreading, react/destructuring-assignment, react/prop-types */
var MapPath = function MapPath(props) {
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, Object.assign({}, props, {
    width: "100%",
    height: "70%",
    className: classNames([props.className, styles$d$1.mapPath])
  }), /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faMapMarkedAlt.faMapMarkedAlt,
    size: "lg",
    className: styles$d$1.icon
  }));
};
var MapPath$1 = MapPath;

/* eslint-disable react/jsx-props-no-spreading, react/destructuring-assignment, react/prop-types */
var Quote$2 = function Quote(props) {
  return /*#__PURE__*/React.createElement(PlaceholderText$1, Object.assign({}, props, {
    className: classNames([props.className, styles$d$1.subtitle]),
    height: 0.5,
    lines: 6
  }));
};
var Quote$1$1 = Quote$2;

/* eslint-disable react/jsx-props-no-spreading, react/destructuring-assignment, react/prop-types */
var ShortText = function ShortText(props) {
  return /*#__PURE__*/React.createElement(PlaceholderText$1, Object.assign({}, props, {
    className: classNames([props.className, styles$d$1.shortText]),
    height: 0.2,
    lines: 2
  }));
};
var ShortText$1 = ShortText;

/* eslint-disable react/jsx-props-no-spreading, react/destructuring-assignment, react/prop-types */
var Subtitle = function Subtitle(props) {
  return /*#__PURE__*/React.createElement(PlaceholderText$1, Object.assign({}, props, {
    className: classNames([props.className, styles$d$1.subtitle]),
    height: 0.3,
    lines: 1
  }));
};
var Subtitle$1 = Subtitle;

/* eslint-disable react/jsx-props-no-spreading, react/destructuring-assignment, react/prop-types */
var TextPlaceholder = function TextPlaceholder(props) {
  var _props$className = props.className,
    className = _props$className === void 0 ? null : _props$className,
    _props$height = props.height,
    height = _props$height === void 0 ? 0.2 : _props$height,
    _props$lines = props.lines,
    lines = _props$lines === void 0 ? 4 : _props$lines,
    _props$lineMargin = props.lineMargin,
    lineMargin = _props$lineMargin === void 0 ? 2 : _props$lineMargin;
  return /*#__PURE__*/React.createElement(PlaceholderText$1, Object.assign({}, props, {
    height: height,
    lines: lines,
    lineMargin: lineMargin,
    className: classNames([className, styles$d$1.text])
  }));
};
var TextPlaceholder$1 = TextPlaceholder;

/* eslint-disable react/jsx-props-no-spreading, react/destructuring-assignment, react/prop-types */
var Timeline$1 = function Timeline(props) {
  return /*#__PURE__*/React.createElement(PlaceholderText$1, Object.assign({}, props, {
    className: classNames([props.className, styles$d$1.timeline])
  }));
};
var Timeline$1$1 = Timeline$1;

/* eslint-disable react/jsx-props-no-spreading, react/destructuring-assignment, react/prop-types */
var Title$2 = function Title(props) {
  var _props$height = props.height,
    height = _props$height === void 0 ? 0.5 : _props$height,
    _props$lines = props.lines,
    lines = _props$lines === void 0 ? 2 : _props$lines,
    _props$lineMargin = props.lineMargin,
    lineMargin = _props$lineMargin === void 0 ? 2 : _props$lineMargin;
  return /*#__PURE__*/React.createElement(PlaceholderText$1, Object.assign({}, props, {
    className: classNames([props.className, styles$d$1.title]),
    height: height,
    lines: lines,
    lineMargin: lineMargin
  }));
};
var Title$3 = Title$2;

/* eslint-disable react/prop-types */
var Video$2 = function Video(_ref) {
  var width = _ref.width,
    height = _ref.height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    width: width,
    height: height,
    className: className
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faVideo.faVideo,
    className: styles$d$1.icon
  }));
};
var Video$1$1 = Video$2;

var styles$a$1 = {"container":"micromag-core-placeholders-video-360-container","box":"micromag-core-placeholders-video-360-box","icon":"micromag-core-placeholders-video-360-icon","label":"micromag-core-placeholders-video-360-label"};

var Video360 = function Video360(_ref) {
  var width = _ref.width,
    height = _ref.height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    width: width,
    height: height,
    className: classNames([styles$a$1.container, _defineProperty({}, className, className !== null)]),
    boxClassName: styles$a$1.box
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faVideo.faVideo,
    className: styles$a$1.icon
  }), /*#__PURE__*/React.createElement("div", {
    className: styles$a$1.label
  }, "360"));
};
var Video360$1 = Video360;

/* eslint-disable react/prop-types */
var VideoLoop = function VideoLoop(_ref) {
  var width = _ref.width,
    height = _ref.height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    width: width,
    height: height,
    className: className
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faPlay.faPlay,
    className: styles$d$1.icon
  }), /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faRedo.faRedo,
    className: styles$d$1.icon
  }));
};
var VideoLoop$1 = VideoLoop;

var styles$9$1 = {"container":"micromag-core-screens-screen-sizer-container","frame":"micromag-core-screens-screen-sizer-frame","screen":"micromag-core-screens-screen-sizer-screen"};

var devicePixelRatio = typeof window !== 'undefined' ? window.devicePixelRatio || 1 : 1;
var propTypes$a$1 = {
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  fit: PropTypes$1.oneOf([null, 'cover', 'contain']),
  screenWidth: PropTypes$1.number,
  screenHeight: PropTypes$1.number,
  className: PropTypes$1.string,
  children: PropTypes$1.node.isRequired
};
var defaultProps$a$1 = {
  width: null,
  height: null,
  fit: null,
  screenWidth: 320,
  screenHeight: 480,
  className: null
};
var ScreenSizer = function ScreenSizer(_ref) {
  var width = _ref.width,
    height = _ref.height,
    fit = _ref.fit,
    screenWidth = _ref.screenWidth,
    screenHeight = _ref.screenHeight,
    className = _ref.className,
    children = _ref.children;
  var hasSize = width !== null || height !== null;
  var _useDimensionObserver = useDimensionObserver(),
    refContainer = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.width,
    calculatedWidth = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2,
    _useDimensionObserver3 = _useDimensionObserver.height,
    calculatedHeight = _useDimensionObserver3 === void 0 ? 0 : _useDimensionObserver3;
  var _useMemo = React.useMemo(function () {
      var containerWidth = width || calculatedWidth || null;
      var containerHeight = height || calculatedHeight || null;
      if (containerWidth === null && containerHeight === null) {
        return {};
      }
      var screenRatio = screenWidth / screenHeight;
      var finalContainerWidth = hasSize ? width || containerHeight * screenRatio : containerWidth;
      var finalContainerHeight = hasSize ? height || containerWidth / screenRatio : containerWidth / screenRatio;
      if (fit === null) {
        var _screenScale = finalContainerWidth / screenWidth;
        return {
          width: finalContainerWidth,
          height: finalContainerHeight,
          scale: _screenScale,
          transform: "scale(".concat(_screenScale, ")")
        };
      }
      var _getSizeWithinBounds = getSizeWithinBounds(screenWidth, screenHeight, finalContainerWidth, finalContainerHeight, {
          cover: fit === 'cover'
        }),
        screenScaledWidth = _getSizeWithinBounds.width,
        screenScaledHeight = _getSizeWithinBounds.height,
        screenScale = _getSizeWithinBounds.scale;
      var x = (finalContainerWidth - screenScaledWidth) / 2;
      var y = (finalContainerHeight - screenScaledHeight) / 2;
      return {
        width: finalContainerWidth,
        height: finalContainerHeight,
        scale: screenScale,
        transform: "scale(".concat(screenScale, ") translate(").concat(x, "px, ").concat(y, "px)")
      };
    }, [screenWidth, screenHeight, width, height, fit, calculatedWidth, calculatedHeight, hasSize]),
    _useMemo$width = _useMemo.width,
    frameWidth = _useMemo$width === void 0 ? null : _useMemo$width,
    _useMemo$height = _useMemo.height,
    frameHeight = _useMemo$height === void 0 ? null : _useMemo$height,
    _useMemo$scale = _useMemo.scale,
    frameScale = _useMemo$scale === void 0 ? null : _useMemo$scale,
    _useMemo$transform = _useMemo.transform,
    screenTransform = _useMemo$transform === void 0 ? null : _useMemo$transform;
  var screenSize = React.useMemo(function () {
    return {
      screen: 'mobile',
      screens: ['mobile'],
      width: screenWidth,
      height: screenHeight,
      resolution: frameScale !== null ? frameScale * devicePixelRatio : devicePixelRatio
    };
  }, [screenWidth, screenHeight, frameScale]);
  var hasFrameSize = frameWidth !== null && frameHeight !== null;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$9$1.container, _defineProperty({}, className, className !== null)]),
    ref: !hasSize ? refContainer : null
  }, hasFrameSize ? /*#__PURE__*/React.createElement("div", {
    className: styles$9$1.frame,
    style: {
      width: frameWidth,
      height: frameHeight
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$9$1.screen,
    style: {
      width: screenWidth,
      height: screenHeight,
      transform: screenTransform
    }
  }, /*#__PURE__*/React.createElement(ScreenSizeProvider, {
    size: screenSize
  }, /*#__PURE__*/React.cloneElement(children, {
    width: screenWidth,
    height: screenHeight
  })))) : null);
};
ScreenSizer.propTypes = propTypes$a$1;
ScreenSizer.defaultProps = defaultProps$a$1;
var ScreenSizer$1 = ScreenSizer;

var styles$8$1 = {"container":"micromag-core-screens-screen-container"};

var propTypes$9$1 = {
  screen: PropTypes.storyComponent.isRequired,
  renderContext: PropTypes.renderContext,
  screenState: PropTypes$1.string,
  index: PropTypes$1.number,
  active: PropTypes$1.bool,
  current: PropTypes$1.bool,
  component: PropTypes$1.node,
  components: PropTypes.components,
  className: PropTypes$1.string,
  mediaRef: PropTypes$1.func
};
var defaultProps$9$1 = {
  active: true,
  renderContext: null,
  screenState: null,
  index: null,
  current: false,
  component: null,
  components: null,
  className: null,
  mediaRef: null
};
var Screen = function Screen(_ref) {
  var screen = _ref.screen,
    renderContext = _ref.renderContext,
    screenState = _ref.screenState,
    index = _ref.index,
    active = _ref.active,
    current = _ref.current,
    components = _ref.components,
    component = _ref.component,
    className = _ref.className,
    mediaRef = _ref.mediaRef;
  var _ref2 = screen || {},
    _ref2$type = _ref2.type,
    type = _ref2$type === void 0 ? null : _ref2$type;
  var CustomScreenComponent = components !== null ? getComponentFromName$1(type, components) || null : null;
  var ContextScreenComponent = useScreenComponent(type);
  var ScreenComponent = CustomScreenComponent || ContextScreenComponent;
  return /*#__PURE__*/React.createElement(ScreenProvider, {
    data: screen,
    renderContext: renderContext,
    screenState: screenState
  }, ScreenComponent !== null ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$8$1.container, _defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement(ScreenComponent, Object.assign({}, screen, {
    index: index,
    active: active,
    current: current,
    mediaRef: mediaRef
  }))) : /*#__PURE__*/React.createElement("div", {
    className: className
  }, component));
};
Screen.propTypes = propTypes$9$1;
Screen.defaultProps = defaultProps$9$1;
var Screen$1 = /*#__PURE__*/React.memo(Screen);

var styles$7$1 = {"screen":"micromag-core-screens-screen-placeholder-screen"};

var _excluded$1$1 = ["screen", "layout", "screenWidth", "screenHeight", "screenState", "withSize", "className"];
var propTypes$8$1 = {
  screen: PropTypes.component.isRequired,
  layout: PropTypes$1.string,
  screenWidth: PropTypes$1.number,
  screenHeight: PropTypes$1.number,
  screenState: PropTypes$1.string,
  withSize: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$8$1 = {
  layout: undefined,
  screenState: null,
  screenWidth: 100,
  screenHeight: 150,
  withSize: false,
  className: null
};
var ScreenPlaceholder = function ScreenPlaceholder(_ref) {
  var screen = _ref.screen,
    layout = _ref.layout,
    screenWidth = _ref.screenWidth,
    screenHeight = _ref.screenHeight,
    screenState = _ref.screenState,
    withSize = _ref.withSize,
    className = _ref.className,
    props = _objectWithoutProperties(_ref, _excluded$1$1);
  var screenElement = /*#__PURE__*/React.createElement(Screen$1, Object.assign({
    screen: screen,
    renderContext: "placeholder",
    screenState: screenState,
    layout: layout,
    className: classNames([styles$7$1.screen, _defineProperty({}, className, !withSize)])
  }, props));
  return withSize ? /*#__PURE__*/React.createElement(ScreenSizer$1, {
    className: className,
    screenWidth: screenWidth,
    screenHeight: screenHeight
  }, screenElement) : screenElement;
};
ScreenPlaceholder.propTypes = propTypes$8$1;
ScreenPlaceholder.defaultProps = defaultProps$8$1;

var styles$6$1 = {"stack":"micromag-core-screens-preview-stack","stackScreen":"micromag-core-screens-preview-stackScreen","stackItem":"micromag-core-screens-preview-stackItem","screen":"micromag-core-screens-preview-screen"};

var _excluded$9 = ["screen", "screenState", "width", "height", "screenWidth", "screenHeight", "className", "withSize", "hidden"];
var propTypes$7$1 = {
  screen: PropTypes.component.isRequired,
  screenState: PropTypes$1.string,
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  screenWidth: PropTypes$1.number,
  screenHeight: PropTypes$1.number,
  className: PropTypes$1.string,
  withSize: PropTypes$1.bool,
  hidden: PropTypes$1.bool
};
var defaultProps$7$1 = {
  screenState: null,
  width: undefined,
  height: undefined,
  screenWidth: undefined,
  screenHeight: undefined,
  className: null,
  withSize: false,
  hidden: false
};
var ScreenPreview = function ScreenPreview(_ref) {
  var screen = _ref.screen,
    screenState = _ref.screenState,
    width = _ref.width,
    height = _ref.height,
    screenWidth = _ref.screenWidth,
    screenHeight = _ref.screenHeight,
    className = _ref.className,
    withSize = _ref.withSize,
    hidden = _ref.hidden,
    props = _objectWithoutProperties(_ref, _excluded$9);
  var screenElement = /*#__PURE__*/React.createElement(Screen$1, Object.assign({
    screen: screen,
    renderContext: "preview",
    screenState: screenState,
    width: !withSize ? width : undefined,
    height: !withSize ? height : undefined,
    className: classNames([styles$6$1.screen, _defineProperty({}, className, !withSize)])
  }, props));
  var element = !hidden ? screenElement : /*#__PURE__*/React.createElement("div", null);
  var screenWithSize = withSize ? /*#__PURE__*/React.createElement(ScreenSizer$1, {
    className: className,
    screenWidth: screenWidth,
    screenHeight: screenHeight,
    width: width,
    height: height
  }, element) : element;
  return screenWithSize;
};
ScreenPreview.propTypes = propTypes$7$1;
ScreenPreview.defaultProps = defaultProps$7$1;

var styles$5$1 = {"container":"micromag-core-placeholders-conversation-container","icon":"micromag-core-placeholders-conversation-icon","message":"micromag-core-placeholders-conversation-message","placeholderMessage0":"micromag-core-placeholders-conversation-placeholderMessage0","placeholderMessage1":"micromag-core-placeholders-conversation-placeholderMessage1","placeholderMessage2":"micromag-core-placeholders-conversation-placeholderMessage2","placeholderMessage3":"micromag-core-placeholders-conversation-placeholderMessage3"};

var Conversation = function Conversation() {
  return /*#__PURE__*/React.createElement("div", {
    className: styles$5$1.container
  }, _toConsumableArray(Array(4)).map(function (e, idx) {
    return /*#__PURE__*/React.createElement("div", {
      key: "message-".concat(idx + 1),
      className: classNames([styles$5$1.message, styles$5$1["placeholderMessage".concat(idx)]])
    });
  }), /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faCommentDots.faCommentDots,
    className: styles$5$1.icon
  }));
};
var Conversation$1 = Conversation;

/* eslint-disable react/prop-types */
var InputText = function InputText(_ref) {
  var _ref$width = _ref.width,
    width = _ref$width === void 0 ? '75%' : _ref$width,
    _ref$height = _ref.height,
    height = _ref$height === void 0 ? '0.5em' : _ref$height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    outline: true,
    width: width,
    height: height,
    className: className
  });
};
var InputText$1 = InputText;

var styles$4$2 = {"container":"micromag-core-placeholders-quiz-answer-container","block":"micromag-core-placeholders-quiz-answer-block","answer":"micromag-core-placeholders-quiz-answer-answer","answerIcon":"micromag-core-placeholders-quiz-answer-answerIcon","good":"micromag-core-placeholders-quiz-answer-good"};

var Answer$2 = function Answer(_ref) {
  var _ref$width = _ref.width,
    width = _ref$width === void 0 ? '75%' : _ref$width,
    _ref$height = _ref.height,
    height = _ref$height === void 0 ? '0.3em' : _ref$height,
    className = _ref.className,
    _ref$good = _ref.good,
    good = _ref$good === void 0 ? true : _ref$good;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$4$2.container, _defineProperty(_defineProperty({}, className, className !== null), styles$4$2.good, good)])
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$4$2.answer
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    className: styles$4$2.answerIcon,
    icon: good ? faCheck.faCheck : faTimes.faTimes
  })), /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    outline: true,
    width: width,
    height: height,
    className: styles$4$2.block
  }, /*#__PURE__*/React.createElement(PlaceholderText$1, {
    line: 1,
    height: "0.2em"
  })));
};
var Answer$3 = Answer$2;

var styles$3$2 = {"container":"micromag-core-placeholders-share-options-container","box":"micromag-core-placeholders-share-options-box","icon":"micromag-core-placeholders-share-options-icon","item":"micromag-core-placeholders-share-options-item","button":"micromag-core-placeholders-share-options-button"};

var Title$4 = function Title(props) {
  return /*#__PURE__*/React.createElement(PlaceholderBlock$1, Object.assign({}, props, {
    width: "100%",
    height: "100%",
    className: classNames([styles$3$2.container, _defineProperty({}, props.className, props.className !== null)]),
    boxClassName: styles$3$2.box
  }), /*#__PURE__*/React.createElement("div", {
    className: styles$3$2.item
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faCircle.faCircle,
    className: styles$3$2.icon
  })), /*#__PURE__*/React.createElement("div", {
    className: styles$3$2.item
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faCircle.faCircle,
    className: styles$3$2.icon
  })), /*#__PURE__*/React.createElement("div", {
    className: styles$3$2.item
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    icon: faCircle.faCircle,
    className: styles$3$2.icon
  })));
};
var Title$1$1 = Title$4;

var styles$2$5 = {"container":"micromag-core-placeholders-survey-answer-container","block":"micromag-core-placeholders-survey-answer-block","percent":"micromag-core-placeholders-survey-answer-percent","percentIcon":"micromag-core-placeholders-survey-answer-percentIcon"};

var Answer = function Answer(_ref) {
  var _ref$width = _ref.width,
    width = _ref$width === void 0 ? '75%' : _ref$width,
    _ref$height = _ref.height,
    height = _ref$height === void 0 ? '0.3em' : _ref$height,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$2$5.container, _defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement(PlaceholderBlock$1, {
    outline: true,
    width: width,
    height: height,
    className: styles$2$5.block
  }, /*#__PURE__*/React.createElement(PlaceholderText$1, {
    line: 1,
    height: "0.2em"
  })), /*#__PURE__*/React.createElement("div", {
    className: styles$2$5.percent
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    className: styles$2$5.percentIcon,
    icon: faPercent.faPercent
  })));
};
var Answer$1 = Answer;

var Placeholders = /*#__PURE__*/Object.freeze({
    __proto__: null,
    AdFrame: AdFrame$1,
    AdImage: AdImage$1,
    Audio: Audio$1$1,
    Button: Button$1$1,
    Conversation: Conversation$1,
    Image: Image$1$2,
    InputText: InputText$1,
    Line: Line$1,
    Map: Map$1$2,
    MapPath: MapPath$1,
    QuizAnswer: Answer$3,
    Quote: Quote$1$1,
    ShareOptions: Title$1$1,
    ShortText: ShortText$1,
    Subtitle: Subtitle$1,
    SurveyAnswer: Answer$1,
    Text: TextPlaceholder$1,
    Timeline: Timeline$1$1,
    Title: Title$3,
    Video: Video$1$1,
    Video360: Video360$1,
    VideoLoop: VideoLoop$1
});

/* eslint-disable react/jsx-props-no-spreading */
var propTypes$6$1 = {
  children: PropTypes$1.node,
  placeholder: PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.node]),
  preview: PropTypes$1.node,
  empty: PropTypes$1.node,
  emptyLabel: PropTypes.label,
  isEmpty: PropTypes$1.bool,
  placeholderProps: PropTypes$1.object,
  // eslint-disable-line
  emptyClassName: PropTypes$1.string
};
var defaultProps$6$1 = {
  children: null,
  placeholder: null,
  preview: null,
  empty: null,
  emptyLabel: null,
  isEmpty: false,
  placeholderProps: null,
  emptyClassName: null
};
var ScreenElement = function ScreenElement(_ref) {
  var children = _ref.children,
    placeholder = _ref.placeholder,
    empty = _ref.empty,
    emptyLabel = _ref.emptyLabel,
    preview = _ref.preview,
    isEmpty = _ref.isEmpty,
    placeholderProps = _ref.placeholderProps,
    emptyClassName = _ref.emptyClassName;
  var _useScreenRenderConte = useScreenRenderContext(),
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isPreview = _useScreenRenderConte.isPreview;
  if (isPlaceholder) {
    var PlaceholderComponent = isString(placeholder) ? getComponentFromName$1(placeholder, Placeholders) : null;
    return PlaceholderComponent !== null ? /*#__PURE__*/React.createElement(PlaceholderComponent, placeholderProps) : placeholder;
  }
  if (isEdit && isEmpty) {
    return empty !== null ? empty : /*#__PURE__*/React.createElement(Empty$1, {
      className: emptyClassName
    }, emptyLabel);
  }
  if (isPreview && preview !== null) {
    return preview;
  }
  return children;
};
ScreenElement.propTypes = propTypes$6$1;
ScreenElement.defaultProps = defaultProps$6$1;
var ScreenElement$1 = ScreenElement;

({
  screens: PropTypes.storyComponents.isRequired,
  screen: PropTypes$1.string,
  className: PropTypes$1.string
});

var styles$M = {"container":"micromag-core-transitions-transition-container","fullscreen":"micromag-core-transitions-transition-fullscreen"};

var propTypes$4$4 = {
  fullscreen: PropTypes$1.bool,
  from: PropTypes$1.objectOf(PropTypes$1.any),
  // eslint-disable-line react/forbid-prop-types
  to: PropTypes$1.objectOf(PropTypes$1.any),
  // eslint-disable-line react/forbid-prop-types
  playing: PropTypes$1.bool,
  direction: PropTypes$1.oneOf(['in', 'out']),
  delay: PropTypes$1.number,
  reversible: PropTypes$1.bool,
  duration: PropTypes$1.number,
  easing: PropTypes$1.func,
  config: PropTypes$1.shape({
    mass: PropTypes$1.number,
    friction: PropTypes$1.number,
    tension: PropTypes$1.number
  }),
  children: PropTypes$1.node,
  className: PropTypes$1.string,
  onStart: PropTypes$1.func,
  onComplete: PropTypes$1.func
};
var defaultProps$4$4 = {
  fullscreen: false,
  from: null,
  to: null,
  playing: false,
  direction: null,
  delay: 0,
  reversible: true,
  duration: undefined,
  easing: undefined,
  config: null,
  children: null,
  className: null,
  onStart: null,
  onComplete: null
};
function Transition(_ref) {
  var fullscreen = _ref.fullscreen,
    from = _ref.from,
    to = _ref.to,
    playing = _ref.playing,
    direction = _ref.direction,
    delay = _ref.delay,
    reversible = _ref.reversible,
    duration = _ref.duration,
    easing = _ref.easing,
    config$1 = _ref.config,
    children = _ref.children,
    className = _ref.className,
    onStart = _ref.onStart,
    onComplete = _ref.onComplete;
  var _useSpring = core.useSpring(function () {
      return {};
    }),
    _useSpring2 = _slicedToArray(_useSpring, 2),
    springProps = _useSpring2[0],
    setSpringProps = _useSpring2[1];
  React.useEffect(function () {
    var immediate = !playing && direction === 'in' || playing && direction === 'out';
    var finalPlaying = immediate || playing;
    var reset = reversible && playing && !immediate;
    var finalDuration = duration !== null ? duration : undefined;
    var withDelay = delay > 0 && playing && direction !== 'out';
    var finalConfig = easing !== null && web.config[easing] ? web.config[easing] || null : config$1;
    var props = {
      from: finalPlaying ? from : to,
      to: finalPlaying ? to : from,
      immediate: immediate,
      delay: withDelay ? delay : null,
      reset: reset,
      onStart: onStart,
      onRest: onComplete,
      config: finalConfig !== null ? finalConfig : {
        duration: immediate ? 0 : finalDuration
      }
    };
    // Reversible always toggles between from-to (playing) to-from (!playing)
    if (finalPlaying || reversible) {
      setSpringProps.start(props);
    }
    // console.log('fx', { reset, finalPlaying, immediate, reversible });
  }, [playing, direction, delay, duration, reversible, easing, config$1, from, to, setSpringProps, onStart, onComplete]);
  return /*#__PURE__*/React.createElement(web.animated.div, {
    style: _objectSpread$1({}, springProps),
    className: classNames([styles$M.container, _defineProperty(_defineProperty({}, className, className !== null), styles$M.fullscreen, fullscreen)])
  }, children);
}
Transition.propTypes = propTypes$4$4;
Transition.defaultProps = defaultProps$4$4;

/* eslint-disable react/jsx-props-no-spreading */
function Fade(props) {
  var from = React.useMemo(function () {
    return {
      opacity: 0
    };
  }, []);
  var to = React.useMemo(function () {
    return {
      opacity: 1
    };
  }, []);
  return /*#__PURE__*/React.createElement(Transition, Object.assign({}, props, {
    from: from,
    to: to
  }));
}

/* eslint-disable react/jsx-props-no-spreading */
function Scale(props) {
  var from = React.useMemo(function () {
    return {
      transform: 'scale(0)'
    };
  }, []);
  var to = React.useMemo(function () {
    return {
      transform: 'scale(1)'
    };
  }, []);
  return /*#__PURE__*/React.createElement(Transition, Object.assign({}, props, {
    from: from,
    to: to
  }));
}

var TransitionComponents = {
  Fade: Fade,
  Scale: Scale
};

var propTypes$3$5 = {
  fullscreen: PropTypes$1.bool,
  playing: PropTypes$1.bool,
  delay: PropTypes$1.number,
  transitions: PropTypes.transitions,
  onComplete: PropTypes$1.func,
  disabled: PropTypes$1.bool,
  children: PropTypes$1.node
};
var defaultProps$3$5 = {
  fullscreen: false,
  playing: false,
  delay: 0,
  transitions: null,
  onComplete: null,
  disabled: false,
  children: null
};
function Transitions(_ref) {
  var fullscreen = _ref.fullscreen,
    playing = _ref.playing,
    delay = _ref.delay,
    transitions = _ref.transitions,
    onComplete = _ref.onComplete,
    disabled = _ref.disabled,
    children = _ref.children;
  var _useScreenSize = useScreenSize(),
    _useScreenSize$landsc = _useScreenSize.landscape,
    landscape = _useScreenSize$landsc === void 0 ? true : _useScreenSize$landsc;
  var finalPlaying = playing || landscape;
  var finalTransitions = {
    "in": null,
    out: null
  };
  var defaultTransitions = {
    "in": 'fade',
    out: 'fade'
  };
  var transitionsObject = transitions !== null ? transitions : defaultTransitions;
  Object.keys(transitionsObject).forEach(function (transitionKey) {
    var currentTransition = transitionsObject[transitionKey];
    finalTransitions[transitionKey] = typeof currentTransition === 'string' ? {
      name: currentTransition
    } : currentTransition;
  });
  var _finalTransitions$in = finalTransitions["in"],
    transitionIn = _finalTransitions$in === void 0 ? null : _finalTransitions$in,
    _finalTransitions$out = finalTransitions.out,
    transitionOut = _finalTransitions$out === void 0 ? null : _finalTransitions$out;
  var finalTransitionIn = transitionIn !== null ? transitionIn : transitionOut;
  var finalTransitionOut = transitionOut !== null ? transitionOut : transitionIn;
  var _ref2 = finalTransitionIn || {},
    _ref2$name = _ref2.name,
    transitionInName = _ref2$name === void 0 ? null : _ref2$name;
  var _ref3 = finalTransitionOut || {},
    _ref3$name = _ref3.name,
    transitionOutName = _ref3$name === void 0 ? null : _ref3$name;
  var sameTransitionInOut = transitionInName === transitionOutName;
  var TransitionIn = finalTransitionIn !== null ? getComponentFromName$1(transitionInName, TransitionComponents, null) : null;
  var TransitionOut = finalTransitionOut !== null && !sameTransitionInOut ? getComponentFromName$1(transitionOutName, TransitionComponents, null) : null;
  var transitionInProps = finalTransitionIn !== null ? _objectSpread$1(_objectSpread$1({}, finalTransitionIn), {}, {
    name: undefined,
    delay: delay,
    onComplete: onComplete
  }) : null;
  var transitionOutProps = finalTransitionOut !== null ? _objectSpread$1(_objectSpread$1({}, finalTransitionOut), {}, {
    name: undefined,
    delay: delay,
    onComplete: onComplete
  }) : null;
  var renderTransitionOut = TransitionOut !== null && !disabled ? /*#__PURE__*/React.createElement(TransitionOut, Object.assign({
    fullscreen: fullscreen,
    playing: finalPlaying,
    direction: "out"
  }, transitionOutProps), children) : children;
  return TransitionIn !== null && !disabled ? /*#__PURE__*/React.createElement(TransitionIn, Object.assign({
    fullscreen: fullscreen,
    playing: finalPlaying,
    direction: !sameTransitionInOut ? 'in' : null
  }, transitionInProps), renderTransitionOut) : renderTransitionOut;
}
Transitions.propTypes = propTypes$3$5;
Transitions.defaultProps = defaultProps$3$5;

({
  transitions: PropTypes.transitions,
  stagger: PropTypes$1.number,
  playing: PropTypes$1.bool,
  disabled: PropTypes$1.bool,
  delay: PropTypes$1.number,
  fullscreen: PropTypes$1.bool,
  children: PropTypes$1.node
});

var propTypes$1$d = {
  selector: PropTypes$1.string,
  highlightSelector: PropTypes$1.string,
  style: PropTypes$1.objectOf(PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]))
};
var defaultProps$1$d = {
  selector: null,
  highlightSelector: 'mark',
  style: null
};
var HighlightStyle = function HighlightStyle(_ref) {
  var selector = _ref.selector,
    highlightSelector = _ref.highlightSelector,
    style = _ref.style;
  return style !== null ? /*#__PURE__*/React.createElement("style", {
    type: "text/css"
  }, "".concat([selector, highlightSelector].filter(function (it) {
    return it !== null;
  }).join(' '), "{").concat(convertStyleToString$1(style), "}")) : null;
};
HighlightStyle.propTypes = propTypes$1$d;
HighlightStyle.defaultProps = defaultProps$1$d;
var HighlightStyle$1 = HighlightStyle;

var propTypes$M = {
  selector: PropTypes$1.string,
  linkSelector: PropTypes$1.string,
  style: PropTypes$1.objectOf(PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]))
};
var defaultProps$M = {
  selector: null,
  linkSelector: 'a',
  style: null
};
var LinkStyle = function LinkStyle(_ref) {
  var selector = _ref.selector,
    linkSelector = _ref.linkSelector,
    style = _ref.style;
  return style !== null ? /*#__PURE__*/React.createElement("style", {
    type: "text/css"
  }, "".concat([selector, linkSelector].filter(function (it) {
    return it !== null;
  }).join(' '), "{").concat(convertStyleToString$1(style), "}")) : null;
};
LinkStyle.propTypes = propTypes$M;
LinkStyle.defaultProps = defaultProps$M;
var LinkStyle$1 = LinkStyle;

var styles$L = {"container":"micromag-element-link-container"};

var propTypes$L = {
  url: PropTypes$1.string,
  target: PropTypes$1.string,
  rel: PropTypes$1.string,
  external: PropTypes$1.bool,
  margin: PropTypes.margin,
  className: PropTypes$1.string,
  children: PropTypes$1.node,
  focusable: PropTypes$1.bool
};
var defaultProps$L = {
  url: null,
  target: null,
  rel: null,
  external: true,
  margin: null,
  className: null,
  children: null,
  focusable: true
};
var Link = function Link(_ref) {
  var url = _ref.url,
    linkTarget = _ref.target,
    linkRel = _ref.rel,
    external = _ref.external,
    margin = _ref.margin,
    className = _ref.className,
    children = _ref.children,
    focusable = _ref.focusable;
  var finalStyle = null;
  if (margin !== null) {
    finalStyle = _objectSpread$1(_objectSpread$1({}, finalStyle), getStyleFromMargin$1(margin));
  }
  var id = React.useMemo(function () {
    return finalStyle !== null ? "link-component-".concat(uuid.v1()) : null;
  }, [finalStyle !== null]);
  var _ref2 = external ? {
      target: '_blank',
      rel: 'noopener noreferer'
    } : {
      target: linkTarget,
      rel: linkRel
    },
    target = _ref2.target,
    rel = _ref2.rel;
  return url ? /*#__PURE__*/React.createElement("a", {
    id: id,
    className: classNames([styles$L.container, _defineProperty({}, className, className !== null)]),
    style: finalStyle,
    href: url,
    target: target,
    rel: rel,
    tabIndex: focusable ? '0' : '-1'
  }, children) : /*#__PURE__*/React.createElement("div", {
    id: id,
    className: classNames([styles$L.container, _defineProperty({}, className, className !== null)]),
    style: finalStyle
  }, children);
};
Link.propTypes = propTypes$L;
Link.defaultProps = defaultProps$L;
var Link$1 = Link;

var styles$K = {"container":"micromag-element-text-container","showEmpty":"micromag-element-text-showEmpty","withLineClamp":"micromag-element-text-withLineClamp"};

var propTypes$K = {
  body: PropTypes$1.string,
  textStyle: PropTypes.textStyle,
  linksStyle: PropTypes.textStyle,
  margin: PropTypes.margin,
  lineClamp: PropTypes$1.number,
  showEmpty: PropTypes$1.bool,
  className: PropTypes$1.string,
  emptyClassName: PropTypes$1.string,
  inline: PropTypes$1.bool,
  refText: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    current: PropTypes$1.any // eslint-disable-line
  })])
};
var defaultProps$K = {
  body: null,
  textStyle: null,
  linksStyle: null,
  margin: null,
  lineClamp: null,
  showEmpty: false,
  className: null,
  emptyClassName: null,
  inline: false,
  refText: null
};
var Text = function Text(_ref) {
  var body = _ref.body,
    textStyle = _ref.textStyle,
    linksStyle = _ref.linksStyle,
    margin = _ref.margin,
    lineClamp = _ref.lineClamp,
    showEmpty = _ref.showEmpty,
    className = _ref.className,
    emptyClassName = _ref.emptyClassName,
    inline = _ref.inline,
    refText = _ref.refText;
  var _ref2 = textStyle || {},
    _ref2$link = _ref2.link,
    linkStyle = _ref2$link === void 0 ? null : _ref2$link,
    _ref2$highlight = _ref2.highlight,
    highlightStyle = _ref2$highlight === void 0 ? null : _ref2$highlight;
  var finalStyle = {};
  var finalLinkStyle = linkStyle !== null ? getStyleFromLink$1(linkStyle) : null;
  var finalHighlightStyle = highlightStyle !== null ? getStyleFromHighlight$1(highlightStyle) : null;
  if (textStyle !== null) {
    finalStyle = _objectSpread$1(_objectSpread$1({}, finalStyle), getStyleFromText$1(textStyle));
  }
  if (lineClamp !== null) {
    finalStyle.WebkitLineClamp = lineClamp;
  }
  if (margin !== null) {
    finalStyle = _objectSpread$1(_objectSpread$1({}, finalStyle), getStyleFromMargin$1(margin));
  }
  if (linksStyle !== null) {
    finalLinkStyle = _objectSpread$1(_objectSpread$1({}, finalLinkStyle), getStyleFromText$1(linksStyle));
  }
  var needsId = finalLinkStyle !== null || highlightStyle !== null;
  var id = React.useMemo(function () {
    return needsId ? "text-component-".concat(uuid.v1()) : null;
  }, [needsId]);
  var tagProps = {
    id: id,
    className: classNames([styles$K.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, styles$K.withLineClamp, lineClamp !== null), styles$K.showEmpty, showEmpty), emptyClassName, showEmpty && emptyClassName !== null), className, className !== null)]),
    style: finalStyle,
    dangerouslySetInnerHTML: {
      __html: body
    },
    ref: refText
  };
  var Tag = "".concat(inline ? 'span' : 'div');
  return /*#__PURE__*/React.createElement(React.Fragment, null, finalLinkStyle !== null ? /*#__PURE__*/React.createElement(LinkStyle$1, {
    selector: "#".concat(id),
    style: finalLinkStyle
  }) : null, finalHighlightStyle !== null ? /*#__PURE__*/React.createElement(HighlightStyle$1, {
    selector: "#".concat(id),
    style: finalHighlightStyle
  }) : null, /*#__PURE__*/React.createElement(Tag, tagProps));
};
Text.propTypes = propTypes$K;
Text.defaultProps = defaultProps$K;
var Text$1 = Text;

var styles$1$8 = {"container":"micromag-element-author-avatar-container","shapeCircle":"micromag-element-author-avatar-shapeCircle","shape":"micromag-element-author-avatar-shape"};

var propTypes$1$c = {
  image: PropTypes.imageElement,
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  resolution: PropTypes$1.number,
  isTag: PropTypes$1.bool,
  shape: PropTypes$1.oneOf([null, 'tag', 'circle']),
  className: PropTypes$1.string,
  shouldLoad: PropTypes$1.bool
};
var defaultProps$1$c = {
  image: null,
  width: 100,
  height: 100,
  resolution: 1,
  isTag: false,
  shape: 'circle',
  className: null,
  shouldLoad: true
};
var Avatar$2 = function Avatar(_ref) {
  var image = _ref.image,
    width = _ref.width,
    height = _ref.height,
    resolution = _ref.resolution,
    shape = _ref.shape,
    isTag = _ref.isTag,
    className = _ref.className,
    shouldLoad = _ref.shouldLoad;
  var imageAtSize = getOptimalImageUrl$1(image, width, height, {
    resolution: resolution
  });
  var finalShape = shape !== null ? changeCase.pascalCase(shape) : null;
  return /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$1$8.container, _defineProperty(_defineProperty(_defineProperty({}, styles$1$8["shape".concat(finalShape)], finalShape !== null), styles$1$8.isTag, isTag), className, className !== null)])
  }, /*#__PURE__*/React.createElement("span", {
    className: styles$1$8.shape,
    style: {
      backgroundImage: shouldLoad ? "url(\"".concat(imageAtSize, "\")") : null
    }
  }));
};
Avatar$2.propTypes = propTypes$1$c;
Avatar$2.defaultProps = defaultProps$1$c;
var Avatar$1$1 = Avatar$2;

var styles$J = {"container":"micromag-element-author-container","image":"micromag-element-author-image","link":"micromag-element-author-link","right":"micromag-element-author-right","name":"micromag-element-author-name","collaborator":"micromag-element-author-collaborator","collaboratorText":"micromag-element-author-collaboratorText"};

var _excluded$8 = ["author", "withImage", "withoutLink", "linkUnderlineColor", "className", "backgroundClassName", "collaboratorClassName", "shouldLoad"];
var propTypes$J = {
  author: PropTypes$1.shape({
    slug: PropTypes$1.string,
    name: PropTypes.textElement,
    image: PropTypes.imageElement,
    url: PropTypes$1.string,
    collaborator: PropTypes.textElement
  }),
  withImage: PropTypes$1.bool,
  withoutLink: PropTypes$1.bool,
  linkUnderlineColor: PropTypes$1.string,
  className: PropTypes$1.string,
  backgroundClassName: PropTypes$1.string,
  collaboratorClassName: PropTypes$1.string,
  shouldLoad: PropTypes$1.bool
};
var defaultProps$J = {
  author: null,
  withImage: true,
  withoutLink: false,
  linkUnderlineColor: null,
  className: null,
  backgroundClassName: null,
  collaboratorClassName: null,
  shouldLoad: true
};
var Author = function Author(_ref) {
  var author = _ref.author,
    withImage = _ref.withImage,
    withoutLink = _ref.withoutLink,
    linkUnderlineColor = _ref.linkUnderlineColor,
    className = _ref.className,
    backgroundClassName = _ref.backgroundClassName,
    collaboratorClassName = _ref.collaboratorClassName,
    shouldLoad = _ref.shouldLoad,
    otherProps = _objectWithoutProperties(_ref, _excluded$8);
  var _ref2 = author || {},
    _ref2$name = _ref2.name,
    name = _ref2$name === void 0 ? null : _ref2$name,
    _ref2$image = _ref2.image,
    image = _ref2$image === void 0 ? null : _ref2$image,
    _ref2$url = _ref2.url,
    url = _ref2$url === void 0 ? null : _ref2$url,
    _ref2$collaborator = _ref2.collaborator,
    collaborator = _ref2$collaborator === void 0 ? null : _ref2$collaborator;
  var withAvatar = withImage && image !== null;
  var authorText = isTextFilled$1(name) ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: classNames([styles$J.name, _defineProperty({}, backgroundClassName, backgroundClassName)])
  }, name)) : null;
  var collaboratorText = isTextFilled$1(collaborator) ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$J.collaboratorText
  }, collaborator, {
    inline: true
  })) : null;
  return /*#__PURE__*/React.createElement("div", Object.assign({
    className: classNames([styles$J.container, _defineProperty({}, className, className !== null)])
  }, otherProps), withAvatar ? /*#__PURE__*/React.createElement(Avatar$1$1, {
    className: styles$J.image,
    image: image,
    shouldLoad: shouldLoad
  }) : null, /*#__PURE__*/React.createElement("div", {
    className: styles$J.right
  }, url !== null && !withoutLink ? /*#__PURE__*/React.createElement(Link$1, {
    className: styles$J.link,
    url: url,
    external: true,
    style: {
      backgroundImage: linkUnderlineColor !== null ? "linear-gradient(0deg, ".concat(linkUnderlineColor, " 0, ").concat(linkUnderlineColor, ")") : null
    }
  }, authorText) : /*#__PURE__*/React.createElement("div", null, authorText), collaboratorText !== null ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$J.collaborator, _defineProperty({}, collaboratorClassName, collaboratorClassName)])
  }, collaboratorText !== null ? collaboratorText : null) : null));
};
Author.propTypes = propTypes$J;
Author.defaultProps = defaultProps$J;
var Author$1 = Author;

var styles$I = {"container":"micromag-element-video-container","withSize":"micromag-element-video-withSize","media":"micromag-element-video-media","spinner":"micromag-element-video-spinner"};

var propTypes$I = {
  media: PropTypes.videoMedia,
  thumbnail: PropTypes$1.oneOf([PropTypes$1.string, PropTypes.imageMedia]),
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  mediaRef: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    current: PropTypes$1.any
  })]),
  muted: PropTypes$1.bool,
  autoPlay: PropTypes$1.bool,
  paused: PropTypes$1.bool,
  loop: PropTypes$1.bool,
  playsInline: PropTypes$1.bool,
  preload: PropTypes$1.oneOf(['auto', 'metadata', 'none', null]),
  disablePictureInPicture: PropTypes$1.bool,
  shouldLoad: PropTypes$1.bool,
  withoutCors: PropTypes$1.bool,
  className: PropTypes$1.string,
  innerClassName: PropTypes$1.string,
  onReady: PropTypes$1.func,
  onPlay: PropTypes$1.func,
  onPause: PropTypes$1.func,
  onEnded: PropTypes$1.func,
  onSeeked: PropTypes$1.func,
  onTimeUpdate: PropTypes$1.func,
  onProgressStep: PropTypes$1.func,
  onDurationChange: PropTypes$1.func,
  onVolumeChange: PropTypes$1.func,
  onSuspend: PropTypes$1.func,
  onSuspended: PropTypes$1.func,
  onPlayError: PropTypes$1.func,
  focusable: PropTypes$1.bool,
  withPoster: PropTypes$1.bool,
  withLoading: PropTypes$1.bool
};
var defaultProps$I = {
  media: null,
  thumbnail: null,
  width: null,
  height: null,
  mediaRef: null,
  muted: false,
  autoPlay: false,
  paused: false,
  loop: false,
  playsInline: true,
  preload: 'auto',
  disablePictureInPicture: true,
  shouldLoad: true,
  withoutCors: false,
  className: null,
  innerClassName: null,
  onReady: null,
  onPlay: null,
  onPause: null,
  onEnded: null,
  onSeeked: null,
  onTimeUpdate: null,
  onProgressStep: null,
  onDurationChange: null,
  onVolumeChange: null,
  onSuspend: null,
  onSuspended: null,
  onPlayError: null,
  focusable: true,
  withPoster: false,
  withLoading: false
};
var Video = function Video(_ref) {
  var media = _ref.media,
    thumbnail = _ref.thumbnail,
    width = _ref.width,
    height = _ref.height,
    mediaRef = _ref.mediaRef,
    muted = _ref.muted,
    autoPlay = _ref.autoPlay,
    paused = _ref.paused,
    loop = _ref.loop,
    playsInline = _ref.playsInline,
    preload = _ref.preload,
    shouldLoad = _ref.shouldLoad,
    withoutCors = _ref.withoutCors,
    className = _ref.className,
    innerClassName = _ref.innerClassName,
    onReady = _ref.onReady,
    customOnPlay = _ref.onPlay,
    onPause = _ref.onPause,
    onEnded = _ref.onEnded,
    onSeeked = _ref.onSeeked,
    onTimeUpdate = _ref.onTimeUpdate,
    onProgressStep = _ref.onProgressStep,
    customOnDurationChange = _ref.onDurationChange,
    customOnVolumeChange = _ref.onVolumeChange,
    customOnSuspend = _ref.onSuspend,
    onSuspended = _ref.onSuspended,
    onPlayError = _ref.onPlayError,
    focusable = _ref.focusable,
    withPoster = _ref.withPoster,
    withLoading = _ref.withLoading,
    disablePictureInPicture = _ref.disablePictureInPicture;
  var _ref2 = media || {},
    _ref2$url = _ref2.url,
    mediaUrl = _ref2$url === void 0 ? null : _ref2$url,
    _ref2$files = _ref2.files,
    files = _ref2$files === void 0 ? null : _ref2$files,
    _ref2$metadata = _ref2.metadata,
    metadata = _ref2$metadata === void 0 ? null : _ref2$metadata;
  var _ref3 = metadata || {},
    _ref3$description = _ref3.description,
    description = _ref3$description === void 0 ? null : _ref3$description,
    _ref3$mime = _ref3.mime,
    mediaMime = _ref3$mime === void 0 ? null : _ref3$mime,
    _ref3$has_audio = _ref3.has_audio,
    hasAudio = _ref3$has_audio === void 0 ? null : _ref3$has_audio;
  var filesArray = React.useMemo(function () {
    return getMediaFilesAsArray$1(files);
  }, [files]);
  var finalThumbnail = useMediaThumbnail(media, thumbnail);
  var _ref11 = React.useRef(null);
  var currentTime = useMediaCurrentTime(_ref11.current, {
    id: mediaUrl,
    disabled: paused || onProgressStep === null
  });
  var duration = useMediaDuration(_ref11.current, {
    id: mediaUrl
  });
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    showLoading = _useState2[0],
    setShowLoading = _useState2[1];
  var ready = useMediaReady(_ref11.current, {
    id: mediaUrl
  });
  React.useEffect(function () {
    var id = null;
    setShowLoading(false);
    if (mediaUrl && withLoading) {
      id = setTimeout(function () {
        setShowLoading(true);
      }, 2000);
    }
    return function () {
      clearTimeout(id);
    };
  }, [mediaUrl, withLoading]);
  var sourceFiles = React.useMemo(function () {
    if (filesArray.length === 0) {
      return null;
    }
    var supportedMimes = getVideoSupportedMimes();
    if (supportedMimes.length === 0) {
      return null;
    }
    var sourceFilesMap = filesArray.filter(function (file) {
      var _file$mime = file.mime,
        mime = _file$mime === void 0 ? "video/".concat(file.id === 'h264' ? 'mp4' : file.id) : _file$mime;
      return supportedMimes.indexOf(mime) !== -1;
    }).reduce(function (filesMap, file) {
      var _file$mime2 = file.mime,
        mime = _file$mime2 === void 0 ? "video/".concat(file.id === 'h264' ? 'mp4' : file.id) : _file$mime2;
      var currentMimeFile = filesMap[mime] || null;
      var _ref4 = currentMimeFile || {},
        _ref4$id = _ref4.id,
        currentMimeId = _ref4$id === void 0 ? null : _ref4$id;
      return currentMimeFile === null || currentMimeId !== 'original' ? _objectSpread$1(_objectSpread$1({}, filesMap), {}, _defineProperty({}, mime, file)) : filesMap;
    }, {});
    return Object.keys(sourceFilesMap).map(function (mime) {
      return sourceFilesMap[mime];
    });
  }, [filesArray]);

  // @NOTE: Media is an animated image and doesn't have source files in video formats
  var _ref5 = filesArray.find(function (_ref6) {
      var handle = _ref6.handle;
      return handle === 'original';
    }) || {},
    _ref5$type = _ref5.type,
    originalType = _ref5$type === void 0 ? null : _ref5$type,
    _ref5$mime = _ref5.mime,
    originalMime = _ref5$mime === void 0 ? mediaMime : _ref5$mime;
  var originalFileIsImage = originalType === 'image' || originalMime !== null && originalMime.indexOf('image/') === 0;
  var isImageWithoutSourceFile = originalFileIsImage && (sourceFiles === null || sourceFiles.length === 0);
  var withSize = width !== null && height !== null;
  React.useEffect(function () {
    if (duration > 0 && customOnDurationChange !== null) {
      customOnDurationChange(duration);
    }
  }, [duration, customOnDurationChange]);
  var onVolumeChange = React.useCallback(function () {
    var _ref$current = _ref11.current,
      element = _ref$current === void 0 ? null : _ref$current;
    if (element === null) {
      return;
    }
    if (customOnVolumeChange !== null) {
      customOnVolumeChange(element.volume);
    }
  }, [customOnVolumeChange]);

  // Manage suspend
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    isSuspended = _useState4[0],
    setIsSuspended = _useState4[1];
  var onPlay = React.useCallback(function (e) {
    if (isSuspended) {
      setIsSuspended(false);
    }
    if (customOnPlay !== null) {
      customOnPlay(e);
    }
  }, [isSuspended, setIsSuspended, customOnPlay]);
  var onPlaying = React.useCallback(function () {
    if (isSuspended) {
      setIsSuspended(false);
    }
  }, [isSuspended, setIsSuspended]);
  var onSuspend = React.useCallback(function (e) {
    if (e.currentTarget.paused && !paused && !isSuspended) {
      setIsSuspended(true);
      if (onSuspended !== null) {
        onSuspended();
      }
    }
    if (customOnSuspend !== null) {
      customOnSuspend(e);
    }
  }, [isSuspended, paused, setIsSuspended, customOnSuspend, onSuspended]);
  React.useEffect(function () {
    if (ready && onReady !== null) {
      onReady();
    }
  }, [ready, onReady]);
  React.useEffect(function () {
    var _ref$current2 = _ref11.current,
      element = _ref$current2 === void 0 ? null : _ref$current2;
    if (element === null) {
      return;
    }
    var isPaused = element.paused;
    if (paused && !isPaused) {
      element.pause();
    } else if (!paused && isPaused) {
      element.play()["catch"](function (e) {
        if (onPlayError !== null) {
          onPlayError(e);
        }
      });
    }
  }, [paused, media, onPlayError]); // test media here for fun

  useProgressSteps({
    currentTime: currentTime,
    duration: duration,
    disabled: paused,
    onStep: onProgressStep
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$I.container, _defineProperty(_defineProperty({}, className, className !== null), styles$I.withSize, withSize)]),
    style: withSize ? {
      width: width,
      height: height
    } : null
  }, isImageWithoutSourceFile && shouldLoad ? /*#__PURE__*/React.createElement("img", {
    src: mediaUrl,
    alt: description,
    tabIndex: "-1",
    className: classNames([styles$I.media, _defineProperty({}, innerClassName, innerClassName !== null)])
  }) : null, !isImageWithoutSourceFile ? /*#__PURE__*/React.createElement("video", {
    key: mediaUrl,
    ref: function ref(newRef) {
      _ref11.current = newRef;
      if (mediaRef !== null && isFunction(mediaRef)) {
        mediaRef(newRef);
      } else if (mediaRef !== null) {
        mediaRef.current = newRef;
      }
    },
    src: sourceFiles === null || sourceFiles.length === 0 ? "".concat(mediaUrl, "#t=0.1") : null,
    autoPlay: autoPlay && !paused,
    loop: loop,
    muted: muted,
    poster: shouldLoad && withPoster && finalThumbnail !== null ? finalThumbnail.url || null : null,
    preload: shouldLoad ? preload : 'none',
    playsInline: playsInline,
    crossOrigin: withoutCors ? 'anonymous' : null,
    disablePictureInPicture: disablePictureInPicture,
    tabIndex: focusable ? '0' : '-1',
    className: classNames([styles$I.media, _defineProperty({}, innerClassName, innerClassName !== null)]),
    onPlay: onPlay,
    onPlaying: onPlaying,
    onPause: onPause,
    onEnded: onEnded,
    onSeeked: onSeeked,
    onVolumeChange: onVolumeChange,
    onTimeUpdate: onTimeUpdate,
    onSuspend: onSuspend,
    "data-has-audio": hasAudio,
    "data-is-suspended": isSuspended,
    "aria-hidden": true
  }, (sourceFiles || []).map(function (_ref10) {
    var sourceUrl = _ref10.url,
      sourceMime = _ref10.mime;
    return /*#__PURE__*/React.createElement("source", {
      key: "".concat(sourceUrl, "-").concat(sourceMime),
      src: sourceUrl !== null ? "".concat(sourceUrl, "#t=0.1") : null,
      type: sourceMime
    });
  })) : null, !isImageWithoutSourceFile && !ready && showLoading ? /*#__PURE__*/React.createElement(Spinner$1, {
    className: styles$I.spinner
  }) : null);
};
Video.propTypes = propTypes$I;
Video.defaultProps = defaultProps$I;
var Video$1 = /*#__PURE__*/React.forwardRef(function (props, ref) {
  return /*#__PURE__*/React.createElement(Video, Object.assign({
    mediaRef: ref
  }, props));
});

var styles$H = {"layers":"micromag-element-background-layers","layer":"micromag-element-background-layer","videoContainer":"micromag-element-background-videoContainer","video":"micromag-element-background-video","container":"micromag-element-background-container","right":"micromag-element-background-right","background":"micromag-element-background-background","bottom":"micromag-element-background-bottom"};

var propTypes$1$b = {
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  resolution: PropTypes$1.number,
  fit: PropTypes$1.oneOf(['contain', 'cover']),
  horizontalAlign: PropTypes$1.string,
  verticalAlign: PropTypes$1.string,
  repeat: PropTypes$1.bool,
  color: PropTypes.color,
  media: PropTypes$1.oneOfType([PropTypes.imageMedia, PropTypes.videoMedia]),
  mediaRef: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    // eslint-disable-next-line react/forbid-prop-types
    current: PropTypes$1.any
  })]),
  className: PropTypes$1.string,
  playing: PropTypes$1.bool,
  muted: PropTypes$1.bool,
  children: PropTypes$1.node,
  loadingMode: PropTypes$1.string,
  shouldLoad: PropTypes$1.bool,
  onPlayError: PropTypes$1.func,
  withoutVideo: PropTypes$1.bool,
  forceMuted: PropTypes$1.bool
};
var defaultProps$1$b = {
  width: null,
  height: null,
  resolution: 1,
  fit: null,
  horizontalAlign: 'center',
  verticalAlign: 'center',
  repeat: false,
  color: null,
  media: null,
  mediaRef: null,
  className: null,
  playing: false,
  muted: false,
  children: null,
  loadingMode: 'lazy',
  shouldLoad: true,
  onPlayError: null,
  withoutVideo: false,
  forceMuted: false
};
var Background = function Background(_ref) {
  var width = _ref.width,
    height = _ref.height,
    resolution = _ref.resolution,
    fit = _ref.fit,
    horizontalAlign = _ref.horizontalAlign,
    verticalAlign = _ref.verticalAlign,
    repeat = _ref.repeat,
    color = _ref.color,
    media = _ref.media,
    mediaRef = _ref.mediaRef,
    className = _ref.className,
    playing = _ref.playing,
    muted = _ref.muted,
    children = _ref.children,
    loadingMode = _ref.loadingMode,
    shouldLoad = _ref.shouldLoad,
    onPlayError = _ref.onPlayError,
    withoutVideo = _ref.withoutVideo,
    forceMuted = _ref.forceMuted;
  var _ref2 = media || {},
    _ref2$type = _ref2.type,
    mediaType = _ref2$type === void 0 ? null : _ref2$type,
    _ref2$metadata = _ref2.metadata,
    mediaMetadata = _ref2$metadata === void 0 ? null : _ref2$metadata,
    mediaThumbnailUrl = _ref2.thumbnail_url;
  var _ref3 = mediaMetadata || {},
    _ref3$width = _ref3.width,
    mediaWidth = _ref3$width === void 0 ? 0 : _ref3$width,
    _ref3$height = _ref3.height,
    mediaHeight = _ref3$height === void 0 ? 0 : _ref3$height;
  var isVideo = mediaType === 'video';
  var isImage = mediaType === 'image';

  // Lazy load
  var newShouldLoad = shouldLoad || loadingMode !== 'lazy';
  var wasLoadedRef = React.useRef(newShouldLoad);
  if (newShouldLoad && !wasLoadedRef.current) {
    wasLoadedRef.current = newShouldLoad;
  }
  var finalShouldLoad = wasLoadedRef.current;

  // color
  var containerStyle = _objectSpread$1({
    width: width,
    height: height
  }, getStyleFromColor$1(color));

  // image
  if (media !== null && (isImage || isVideo && (!shouldLoad || withoutVideo))) {
    var finalUrl = getOptimalImageUrl$1(isVideo ? {
      url: mediaThumbnailUrl
    } : media, width, height, {
      resolution: resolution
    });
    containerStyle.backgroundImage = finalUrl !== null && finalShouldLoad ? "url(\"".concat(finalUrl, "\")") : null;
    containerStyle.backgroundRepeat = repeat && !isVideo ? 'repeat' : 'no-repeat';
    containerStyle.backgroundPosition = [horizontalAlign, verticalAlign].join(' ');
    if (fit !== null) {
      containerStyle.backgroundSize = fit;
    } else if (!repeat || isVideo) {
      containerStyle.backgroundSize = 'cover';
    }
  }

  // video
  var videoContainerStyle = {};
  if (isVideo && shouldLoad) {
    if (width > 0 && height > 0) {
      var _getSizeWithinBounds = getSizeWithinBounds(mediaWidth, mediaHeight, width, height, {
          cover: fit === 'cover' || fit === null
        }),
        _getSizeWithinBounds$ = _getSizeWithinBounds.width,
        videoWidth = _getSizeWithinBounds$ === void 0 ? 0 : _getSizeWithinBounds$,
        _getSizeWithinBounds$2 = _getSizeWithinBounds.height,
        videoHeight = _getSizeWithinBounds$2 === void 0 ? 0 : _getSizeWithinBounds$2;
      videoContainerStyle.width = videoWidth;
      videoContainerStyle.height = videoHeight;
      videoContainerStyle.left = -(videoWidth - width) / 2;
      videoContainerStyle.top = -(videoHeight - height) / 2;
    } else {
      videoContainerStyle.objectFit = 'cover';
    }
  }
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$H.container, _defineProperty({}, className, className !== null)]),
    style: containerStyle
  }, isVideo && shouldLoad && !withoutVideo ? /*#__PURE__*/React.createElement("div", {
    className: styles$H.videoContainer,
    style: videoContainerStyle
  }, /*#__PURE__*/React.createElement(Video$1, {
    className: styles$H.video,
    media: media,
    mediaRef: !forceMuted ? mediaRef : null,
    paused: !playing,
    muted: muted || forceMuted,
    shouldLoad: shouldLoad,
    onPlayError: onPlayError,
    disablePictureInPicture: true,
    autoPlay: true,
    loop: true,
    withPoster: true,
    focusable: false
  })) : null, /*#__PURE__*/React.createElement("div", {
    className: styles$H.content
  }, children));
};
Background.propTypes = propTypes$1$b;
Background.defaultProps = defaultProps$1$b;
var Background$1 = Background;

var _excluded$7 = ["horizontalAlign", "verticalAlign"];
var propTypes$H = {
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  resolution: PropTypes$1.number,
  background: PropTypes$1.oneOfType([PropTypes.backgroundElement, PropTypes$1.arrayOf(PropTypes.backgroundElement)]),
  playing: PropTypes$1.bool,
  muted: PropTypes$1.bool,
  children: PropTypes$1.node,
  className: PropTypes$1.string,
  layerClassName: PropTypes$1.string,
  backgroundClassName: PropTypes$1.string,
  loadingMode: PropTypes$1.string,
  mediaRef: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    // eslint-disable-next-line react/forbid-prop-types
    current: PropTypes$1.any
  })]),
  shouldLoad: PropTypes$1.bool,
  withoutVideo: PropTypes$1.bool,
  onPlayError: PropTypes$1.bool
};
var defaultProps$H = {
  width: null,
  height: null,
  resolution: 1,
  background: [],
  playing: false,
  muted: false,
  children: null,
  className: null,
  layerClassName: null,
  backgroundClassName: null,
  loadingMode: 'lazy',
  mediaRef: null,
  shouldLoad: true,
  withoutVideo: false,
  onPlayError: null
};
var BackgroundLayers = function BackgroundLayers(_ref) {
  var width = _ref.width,
    height = _ref.height,
    resolution = _ref.resolution,
    background = _ref.background,
    playing = _ref.playing,
    muted = _ref.muted,
    children = _ref.children,
    className = _ref.className,
    layerClassName = _ref.layerClassName,
    backgroundClassName = _ref.backgroundClassName,
    loadingMode = _ref.loadingMode,
    mediaRef = _ref.mediaRef,
    shouldLoad = _ref.shouldLoad,
    withoutVideo = _ref.withoutVideo,
    onPlayError = _ref.onPlayError;
  var hasSize = width > 0 && height > 0;
  var layers = React.useMemo(function () {
    return getLayersFromBackground$1(background);
  }, [background]);
  var maxZIndex = layers.length;
  if (layers.length === 0) {
    return null;
  }

  // color
  var containerStyle = _objectSpread$1({}, hasSize ? {
    width: width,
    height: height
  } : null);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$H.container, _defineProperty({}, className, className !== null)]),
    style: containerStyle
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$H.layers
  }, layers.map(function (_ref3, index) {
    var _ref3$horizontalAlign = _ref3.horizontalAlign,
      horizontalAlign = _ref3$horizontalAlign === void 0 ? undefined : _ref3$horizontalAlign,
      _ref3$verticalAlign = _ref3.verticalAlign,
      verticalAlign = _ref3$verticalAlign === void 0 ? undefined : _ref3$verticalAlign,
      layer = _objectWithoutProperties(_ref3, _excluded$7);
    return /*#__PURE__*/React.createElement("div", {
      key: "background-".concat(index),
      className: classNames([styles$H.layer, _defineProperty(_defineProperty(_defineProperty({}, styles$H.bottom, verticalAlign === 'bottom'), styles$H.right, horizontalAlign === 'right'), layerClassName, layerClassName !== null)]),
      style: {
        zIndex: maxZIndex - index
      }
    }, /*#__PURE__*/React.createElement(Background$1, Object.assign({
      width: width,
      height: height,
      resolution: resolution,
      className: classNames([styles$H.background, _defineProperty({}, backgroundClassName, backgroundClassName !== null)]),
      playing: playing,
      muted: muted,
      horizontalAlign: horizontalAlign,
      verticalAlign: verticalAlign,
      loadingMode: loadingMode,
      shouldLoad: shouldLoad,
      mediaRef: mediaRef,
      withoutVideo: withoutVideo,
      onPlayError: onPlayError
    }, layer)));
  })), /*#__PURE__*/React.createElement("div", {
    className: styles$H.content
  }, children));
};
BackgroundLayers.propTypes = propTypes$H;
BackgroundLayers.defaultProps = defaultProps$H;
var BackgroundLayers$1 = BackgroundLayers;

var styles$G = {"container":"micromag-element-container-container"};

var propTypes$G = {
  containerRef: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    current: PropTypes$1.any
  })]),
  width: PropTypes$1.number.isRequired,
  height: PropTypes$1.number.isRequired,
  className: PropTypes$1.string,
  children: PropTypes$1.node
};
var defaultProps$G = {
  containerRef: null,
  className: null,
  children: null
};
function Container(_ref) {
  var containerRef = _ref.containerRef,
    width = _ref.width,
    height = _ref.height,
    className = _ref.className,
    children = _ref.children;
  var hasSize = width > 0 && height > 0;
  var containerStyle = hasSize ? {
    width: width,
    height: height
  } : null;
  return /*#__PURE__*/React.createElement("div", {
    ref: containerRef,
    className: classNames([styles$G.container, _defineProperty({}, className, className !== null)]),
    style: containerStyle
  }, children);
}
Container.propTypes = propTypes$G;
Container.defaultProps = defaultProps$G;
var Container$1 = /*#__PURE__*/React.forwardRef(function (props, ref) {
  return /*#__PURE__*/React.createElement(Container, Object.assign({
    containerRef: ref
  }, props));
});

var styles$F = {"container":"micromag-element-button-container","focus-visible":"micromag-element-button-focus-visible","disabled":"micromag-element-button-disabled","border":"micromag-element-button-border"};

var _excluded$6 = ["textStyle", "buttonStyle", "type", "disabled", "focusable", "inline", "onClick", "children", "className", "withoutExternalBorder", "refButton"],
  _excluded2 = ["body"];
var propTypes$F = {
  textStyle: PropTypes.textStyle,
  buttonStyle: PropTypes.boxStyle,
  type: PropTypes$1.oneOf(['button', 'submit']),
  disabled: PropTypes$1.bool,
  focusable: PropTypes$1.bool,
  inline: PropTypes$1.bool,
  onClick: PropTypes$1.func,
  children: PropTypes$1.node,
  className: PropTypes$1.string,
  withoutExternalBorder: PropTypes$1.bool,
  refButton: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    current: PropTypes$1.any // eslint-disable-line
  })])
};
var defaultProps$F = {
  textStyle: null,
  buttonStyle: null,
  type: 'button',
  disabled: false,
  focusable: true,
  inline: false,
  onClick: null,
  children: null,
  className: null,
  withoutExternalBorder: true,
  refButton: null
};
var Button = function Button(_ref) {
  var textStyle = _ref.textStyle,
    buttonStyle = _ref.buttonStyle,
    type = _ref.type,
    disabled = _ref.disabled,
    focusable = _ref.focusable,
    inline = _ref.inline,
    onClick = _ref.onClick,
    children = _ref.children,
    className = _ref.className,
    withoutExternalBorder = _ref.withoutExternalBorder,
    refButton = _ref.refButton,
    buttonProps = _objectWithoutProperties(_ref, _excluded$6);
  var finalStyles = null;
  // eslint-disable-next-line no-unused-vars
  var _ref2 = buttonProps || {};
    _ref2.body;
    var otherProps = _objectWithoutProperties(_ref2, _excluded2);
  if (textStyle !== null) {
    finalStyles = _objectSpread$1(_objectSpread$1({}, finalStyles), getStyleFromText$1(textStyle));
  }
  if (buttonStyle !== null) {
    finalStyles = _objectSpread$1(_objectSpread$1(_objectSpread$1({}, finalStyles), getStyleFromBox$1(buttonStyle)), {}, {
      display: withoutExternalBorder && inline ? 'inline-block' : null
    });
  }
  if (!withoutExternalBorder) {
    var _ref3 = finalStyles || {},
      _ref3$borderWidth = _ref3.borderWidth,
      borderWidth = _ref3$borderWidth === void 0 ? null : _ref3$borderWidth;
    var margin = borderWidth !== null && borderWidth > 0 ? '-1px' : null;
    finalStyles = _objectSpread$1(_objectSpread$1({}, finalStyles), {}, {
      display: inline ? 'inline-block' : null
    }, margin !== null ? {
      margin: margin
    } : null);
  }
  return /*#__PURE__*/React.createElement(Button$3, Object.assign({
    className: classNames([styles$F.container, _defineProperty({}, className, className !== null)]),
    disabled: disabled,
    style: finalStyles,
    onClick: onClick,
    refButton: refButton,
    type: type,
    focusable: focusable,
    withoutBootstrapStyles: true
  }, otherProps), children);
};
Button.propTypes = propTypes$F;
Button.defaultProps = defaultProps$F;
var Button$1 = Button;

var propTypes$1$a = {
  color: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$1$a = {
  color: 'currentColor',
  className: null
};
var Arrow$2 = function Arrow(_ref) {
  var color = _ref.color,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    version: "1.1",
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    x: "0",
    y: "0px",
    width: "48.53px",
    height: "12.38px",
    viewBox: "0 0 48.53 12.38",
    className: className,
    xmlSpace: "preserve"
  }, /*#__PURE__*/React.createElement("g", {
    transform: "matrix(1, 0, 0, 1, 0, 0)"
  }, /*#__PURE__*/React.createElement("path", {
    id: "b",
    fill: "none",
    stroke: color,
    strokeWidth: "3px",
    strokeLinejoin: "round",
    strokeLinecap: "round",
    d: "M1.5,10.88L24.26,1.5l22.77,9.38"
  })));
};
Arrow$2.propTypes = propTypes$1$a;
Arrow$2.defaultProps = defaultProps$1$a;
var ArrowIcon = Arrow$2;

var styles$E = {"container":"micromag-element-call-to-action-container","arrow":"micromag-element-call-to-action-arrow","upAndDown":"micromag-element-call-to-action-upAndDown","icon":"micromag-element-call-to-action-icon","label":"micromag-element-call-to-action-label","button":"micromag-element-call-to-action-button","selfTargetLink":"micromag-element-call-to-action-selfTargetLink","leavingFrame":"micromag-element-call-to-action-leavingFrame","appear":"micromag-element-call-to-action-appear","animationDisabled":"micromag-element-call-to-action-animationDisabled","invalidUrl":"micromag-element-call-to-action-invalidUrl","withMargin":"micromag-element-call-to-action-withMargin"};

var propTypes$E = {
  type: PropTypes$1.oneOf(['click', 'swipe-up', null]),
  url: PropTypes$1.string,
  label: PropTypes.textElement,
  boxStyle: PropTypes.boxStyle,
  inWebView: PropTypes$1.bool,
  elRef: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    current: PropTypes$1.any // eslint-disable-line
  })]),
  disabled: PropTypes$1.bool,
  animationDisabled: PropTypes$1.bool,
  icon: PropTypes$1.node,
  arrow: PropTypes$1.node,
  dragAmount: PropTypes$1.number,
  className: PropTypes$1.string,
  buttonClassName: PropTypes$1.string,
  buttonBorderClassName: PropTypes$1.string,
  labelClassName: PropTypes$1.string,
  arrowClassName: PropTypes$1.string,
  focusable: PropTypes$1.bool,
  openWebView: PropTypes$1.func,
  onClick: PropTypes$1.func
};
var defaultProps$E = {
  type: null,
  url: null,
  label: null,
  boxStyle: null,
  inWebView: false,
  elRef: null,
  disabled: false,
  animationDisabled: false,
  icon: null,
  arrow: null,
  dragAmount: 50,
  className: null,
  buttonClassName: null,
  buttonBorderClassName: null,
  labelClassName: null,
  arrowClassName: null,
  focusable: true,
  openWebView: null,
  onClick: null
};
function CallToAction(_ref) {
  var type = _ref.type,
    url = _ref.url,
    label = _ref.label,
    boxStyle = _ref.boxStyle,
    inWebView = _ref.inWebView,
    elRef = _ref.elRef,
    disabled = _ref.disabled,
    animationDisabled = _ref.animationDisabled,
    icon = _ref.icon,
    arrow = _ref.arrow,
    dragAmount = _ref.dragAmount,
    className = _ref.className,
    buttonClassName = _ref.buttonClassName,
    buttonBorderClassName = _ref.buttonBorderClassName,
    labelClassName = _ref.labelClassName,
    arrowClassName = _ref.arrowClassName,
    focusable = _ref.focusable,
    openWebView = _ref.openWebView,
    onClick = _ref.onClick;
  var trackEvent = useTrackEvent();
  var swipeUpEnabled = type === null || type === 'swipe-up';
  var validUrl = React.useMemo(function () {
    return isValidUrl$1(url);
  }, [url]);
  var buttonRef = React.useRef(null);
  var _ref2 = label || {},
    _ref2$textStyle = _ref2.textStyle,
    textStyle = _ref2$textStyle === void 0 ? null : _ref2$textStyle;
  var _ref3 = textStyle || {},
    _ref3$fontSize = _ref3.fontSize,
    fontSize = _ref3$fontSize === void 0 ? null : _ref3$fontSize,
    _ref3$color = _ref3.color,
    color = _ref3$color === void 0 ? null : _ref3$color,
    _ref3$lineHeight = _ref3.lineHeight,
    lineHeight = _ref3$lineHeight === void 0 ? null : _ref3$lineHeight;
  var _ref4 = boxStyle || {},
    _ref4$backgroundColor = _ref4.backgroundColor,
    backgroundColor = _ref4$backgroundColor === void 0 ? null : _ref4$backgroundColor;
  var arrowStyle = React.useMemo(function () {
    return _objectSpread$1(_objectSpread$1({}, {
      fontSize: fontSize
    }), backgroundColor === null ? getStyleFromColor$1(color, 'color') : getStyleFromColor$1(backgroundColor, 'color'));
  }, [fontSize, backgroundColor, color]);

  // MobileSafari blocks popup no matter what
  var selfTargetLinkRef = React.useRef(null);
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    leaving = _useState2[0],
    setLeaving = _useState2[1];
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    toggled = _useState4[0],
    setToggled = _useState4[1];

  // On click
  var onClickLink = React.useCallback(function (e) {
    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'click';
    setToggled(!toggled);
    if (inWebView && openWebView !== null) {
      openWebView({
        url: url
      });
    }
    if (onClick !== null && action === 'cllick') {
      onClick(e);
    }
    if (trackEvent !== null) {
      trackEvent('call_to_action', isString(action) ? action : 'click', url);
    }
  }, [toggled, url, onClick, trackEvent, inWebView, openWebView]);
  var onDrag = React.useCallback(function (_ref5) {
    var event = _ref5.event;
    // fix firefox https://use-gesture.netlify.app/docs/faq/#why-cant-i-properly-drag-an-image-or-a-link
    event.preventDefault();
  }, []);
  var onDragEnd = React.useCallback(function (_ref6) {
    var _ref6$movement = _slicedToArray(_ref6.movement, 2),
      my = _ref6$movement[1];
    if (my < -dragAmount) {
      if (inWebView) {
        onClickLink(null, 'swipe');
      } else if (isIos$1() && selfTargetLinkRef.current !== null) {
        selfTargetLinkRef.current.click();
        setLeaving(true);
        onClickLink(null, 'swipe');
      } else if (buttonRef.current) {
        buttonRef.current.click();
        onClickLink(null, 'swipe');
      }
    }
  }, [dragAmount, inWebView, onClickLink, setLeaving]);
  var bind = react.useGesture({
    onDrag: onDrag,
    onDragEnd: onDragEnd
  });
  React.useEffect(function () {
    var onPageHide = function onPageHide() {
      setLeaving(false);
    };
    window.addEventListener('pagehide', onPageHide);
    return function () {
      window.removeEventListener('pagehide', onPageHide);
    };
  }, [setLeaving]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$E.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$E.disabled, disabled), styles$E.animationDisabled, animationDisabled), styles$E.invalidUrl, !validUrl), styles$E.inWebView, inWebView)]),
    ref: elRef
  }, leaving ? /*#__PURE__*/React.createElement("div", {
    className: styles$E.leavingFrame
  }) : null, !inWebView && swipeUpEnabled ? /*#__PURE__*/React.createElement("a", {
    className: styles$E.selfTargetLink,
    href: url,
    ref: selfTargetLinkRef,
    tabIndex: focusable ? '0' : '-1'
  }) : null, swipeUpEnabled ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$E.arrow, _defineProperty({}, arrowClassName, arrowClassName !== null)]),
    style: arrowStyle
  }, arrow || /*#__PURE__*/React.createElement(ArrowIcon, null)) : null, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$E.buttonBorder, _defineProperty({}, buttonBorderClassName, buttonBorderClassName !== null)])
  }, /*#__PURE__*/React.createElement(Button$1, Object.assign({
    className: classNames([styles$E.button, _defineProperty({}, buttonClassName, buttonClassName !== null)]),
    refButton: buttonRef,
    focusable: focusable,
    buttonStyle: boxStyle,
    inline: true,
    "aria-pressed": toggled,
    href: !inWebView ? url : null,
    external: true,
    onClick: onClickLink
  }, swipeUpEnabled && !disabled ? bind() : null), /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$E.label, _defineProperty({}, labelClassName, labelClassName !== null)])
  }, icon !== null ? /*#__PURE__*/React.createElement("div", {
    className: styles$E.icon
  }, icon) : null, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, label, {
    textStyle: _objectSpread$1(_objectSpread$1({}, textStyle), {}, {
      lineHeight: lineHeight || 1
    }),
    inline: true
  }))))));
}
CallToAction.propTypes = propTypes$E;
CallToAction.defaultProps = defaultProps$E;
var CallToAction$1 = /*#__PURE__*/React.forwardRef(function (props, ref) {
  return /*#__PURE__*/React.createElement(CallToAction, Object.assign({
    elRef: ref
  }, props));
});

var styles$D = {};

var propTypes$D = {
  callToAction: PropTypes.callToAction,
  className: PropTypes$1.string
};
var defaultProps$D = {
  callToAction: null,
  className: null
};
function Footer(_ref) {
  var callToAction = _ref.callToAction,
    className = _ref.className;
  if (callToAction === null) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$D.container, _defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement(CallToAction$1, callToAction));
}
Footer.propTypes = propTypes$D;
Footer.defaultProps = defaultProps$D;

var styles$C = {"container":"micromag-element-badge-container","label":"micromag-element-badge-label"};

var propTypes$C = {
  label: PropTypes.textElement,
  boxStyle: PropTypes.boxStyle,
  className: PropTypes$1.string,
  labelClassName: PropTypes$1.string
};
var defaultProps$C = {
  label: null,
  boxStyle: null,
  className: null,
  labelClassName: null
};
function Badge(_ref) {
  var label = _ref.label,
    boxStyle = _ref.boxStyle,
    className = _ref.className,
    labelClassName = _ref.labelClassName;
  var _ref2 = label || {},
    _ref2$textStyle = _ref2.textStyle,
    textStyle = _ref2$textStyle === void 0 ? null : _ref2$textStyle;
  var _ref3 = textStyle || {},
    _ref3$lineHeight = _ref3.lineHeight,
    lineHeight = _ref3$lineHeight === void 0 ? null : _ref3$lineHeight;
  var boxStyles = null;
  if (boxStyle !== null) {
    boxStyles = _objectSpread$1(_objectSpread$1({}, boxStyles), getStyleFromBox$1(boxStyle));
  }
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$C.container, _defineProperty({}, className, className !== null)]),
    style: boxStyles
  }, /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$C.label, _defineProperty({}, labelClassName, labelClassName !== null)])
  }, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, label, {
    textStyle: _objectSpread$1(_objectSpread$1({}, textStyle), {}, {
      lineHeight: lineHeight || 1
    }),
    inline: true
  }))));
}
Badge.propTypes = propTypes$C;
Badge.defaultProps = defaultProps$C;

var styles$B = {"container":"micromag-element-header-container","fade":"micromag-element-header-fade"};

var propTypes$B = {
  badge: PropTypes.badge,
  fade: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$B = {
  badge: null,
  fade: false,
  className: null
};
function Header(_ref) {
  var badge = _ref.badge,
    fade = _ref.fade,
    className = _ref.className;
  if (badge === null) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$B.container, _defineProperty(_defineProperty({}, styles$B.fade, fade === true), className, className !== null)])
  }, badge !== null ? /*#__PURE__*/React.createElement(Badge, Object.assign({
    className: styles$B.badge
  }, badge)) : null);
}
Header.propTypes = propTypes$B;
Header.defaultProps = defaultProps$B;

var styles$A = {"container":"micromag-element-heading-container"};

var propTypes$A = {
  size: PropTypes$1.oneOf([1, 2, 3, 4, 5, 6]),
  body: PropTypes$1.string,
  textStyle: PropTypes.textStyle,
  linksStyle: PropTypes.textStyle,
  margin: PropTypes.margin,
  className: PropTypes$1.string,
  headingRef: PropTypes$1.shape({})
};
var defaultProps$A = {
  size: 1,
  body: null,
  textStyle: null,
  linksStyle: null,
  margin: null,
  className: null,
  headingRef: null
};
var Heading = function Heading(_ref) {
  var size = _ref.size,
    body = _ref.body,
    textStyle = _ref.textStyle,
    linksStyle = _ref.linksStyle,
    margin = _ref.margin,
    className = _ref.className,
    headingRef = _ref.headingRef;
  var HeadingComponent = "h".concat(size);
  var _ref2 = textStyle || {},
    _ref2$link = _ref2.link,
    linkStyle = _ref2$link === void 0 ? null : _ref2$link,
    _ref2$highlight = _ref2.highlight,
    highlightStyle = _ref2$highlight === void 0 ? null : _ref2$highlight;
  var finalStyle = null;
  var finalLinkStyle = linkStyle !== null ? getStyleFromLink$1(linkStyle) : null;
  var finalHighlightStyle = highlightStyle !== null ? getStyleFromHighlight$1(highlightStyle) : null;
  if (textStyle !== null) {
    finalStyle = _objectSpread$1(_objectSpread$1({}, finalStyle), getStyleFromText$1(textStyle));
  }
  if (margin !== null) {
    finalStyle = _objectSpread$1(_objectSpread$1({}, finalStyle), getStyleFromMargin$1(margin));
  }
  if (linksStyle !== null) {
    finalLinkStyle = _objectSpread$1(_objectSpread$1({}, finalLinkStyle), getStyleFromText$1(linksStyle));
  }
  var needsId = finalLinkStyle !== null || highlightStyle !== null;
  var id = React.useMemo(function () {
    return needsId ? "text-component-".concat(uuid.v1()) : null;
  }, [needsId]);
  return /*#__PURE__*/React.createElement(React.Fragment, null, finalLinkStyle !== null ? /*#__PURE__*/React.createElement(LinkStyle$1, {
    selector: "#".concat(id),
    style: finalLinkStyle
  }) : null, finalHighlightStyle !== null ? /*#__PURE__*/React.createElement(HighlightStyle$1, {
    selector: "#".concat(id),
    style: finalHighlightStyle
  }) : null, /*#__PURE__*/React.createElement(HeadingComponent, {
    id: id,
    className: classNames([styles$A.container, _defineProperty({}, className, className !== null)]),
    style: finalStyle,
    dangerouslySetInnerHTML: {
      __html: body
    },
    ref: headingRef
  }));
};
Heading.propTypes = propTypes$A;
Heading.defaultProps = defaultProps$A;

// eslint-disable-next-line react/jsx-props-no-spreading
var Heading$1 = /*#__PURE__*/React.forwardRef(function (props, ref) {
  return /*#__PURE__*/React.createElement(Heading, Object.assign({
    headingRef: ref
  }, props));
});

/* eslint-disable react/jsx-props-no-spreading */
var StackContext = /*#__PURE__*/React.createContext({
  direction: 'horizontal'
});
var useStackDirection = function useStackDirection() {
  var _useContext = React.useContext(StackContext),
    direction = _useContext.direction;
  return direction;
};
var propTypes$4$3 = {
  children: PropTypes$1.node.isRequired,
  direction: PropTypes$1.oneOf(['vertical', 'horizontal'])
};
var defaultProps$4$3 = {
  direction: 'vertical'
};

// Note: this is done to avoid excessive renders on the screens that use the context

function StackProvider(_ref) {
  var direction = _ref.direction,
    children = _ref.children;
  var value = React.useMemo(function () {
    return {
      direction: direction
    };
  }, [direction]);
  return /*#__PURE__*/React.createElement(StackContext.Provider, {
    value: value
  }, children);
}
StackProvider.propTypes = propTypes$4$3;
StackProvider.defaultProps = defaultProps$4$3;

var styles$1$7 = {"container":"micromag-element-stack-spacer-container","hasSize":"micromag-element-stack-spacer-hasSize"};

var propTypes$3$4 = {
  size: PropTypes$1.number,
  minSize: PropTypes$1.number,
  maxSize: PropTypes$1.number,
  className: PropTypes$1.string
};
var defaultProps$3$4 = {
  size: null,
  minSize: null,
  maxSize: null,
  className: null
};
function Spacer(_ref) {
  var size = _ref.size,
    minSize = _ref.minSize,
    maxSize = _ref.maxSize,
    className = _ref.className;
  var direction = useStackDirection();
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$1$7.container, _defineProperty(_defineProperty({}, styles$1$7.hasSize, size !== null), className, className !== null)]),
    style: {
      width: direction === 'horizontal' ? size : null,
      minWidth: direction === 'horizontal' ? minSize : null,
      maxWidth: direction === 'horizontal' ? maxSize : null,
      height: direction === 'vertical' ? size : null,
      minHeight: direction === 'vertical' ? minSize : null,
      maxHeight: direction === 'vertical' ? maxSize : null
    }
  });
}
Spacer.propTypes = propTypes$3$4;
Spacer.defaultProps = defaultProps$3$4;
Spacer.withoutTransitionsWrapper = true;

({
  direction: PropTypes.stackDirection,
  align: PropTypes.stackAlign,
  spacing: PropTypes.stackSpacing,
  reverse: PropTypes$1.bool,
  size: PropTypes$1.number,
  minSize: PropTypes$1.number,
  maxSize: PropTypes$1.number,
  className: PropTypes$1.string,
  children: PropTypes$1.node
});

var styles$z = {"container":"micromag-element-layout-container","fullscreen":"micromag-element-layout-fullscreen","horizontal":"micromag-element-layout-horizontal"};

var propTypes$z = {
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  horizontalAlign: PropTypes$1.oneOf(['left', 'center', 'right']),
  verticalAlign: PropTypes$1.oneOf(['top', 'middle', 'bottom']),
  distribution: PropTypes$1.oneOf(['between', 'around', null]),
  fullscreen: PropTypes$1.bool,
  className: PropTypes$1.string,
  children: PropTypes$1.node,
  style: PropTypes$1.object // eslint-disable-line
};
var defaultProps$z = {
  width: null,
  height: null,
  horizontalAlign: 'left',
  verticalAlign: 'top',
  distribution: null,
  fullscreen: false,
  className: null,
  children: null,
  style: null
};
var Layout = function Layout(_ref) {
  var width = _ref.width,
    height = _ref.height,
    horizontalAlign = _ref.horizontalAlign,
    verticalAlign = _ref.verticalAlign,
    distribution = _ref.distribution,
    fullscreen = _ref.fullscreen,
    className = _ref.className,
    children = _ref.children,
    style = _ref.style;
  var justifyContent = null;
  if (distribution !== null) {
    justifyContent = "space-".concat(distribution);
  } else if (verticalAlign === 'middle') {
    justifyContent = 'center';
  } else if (verticalAlign === 'bottom') {
    justifyContent = 'flex-end';
  }
  var alignItems = null;
  if (horizontalAlign === 'center') {
    alignItems = 'center';
  } else if (horizontalAlign === 'right') {
    alignItems = 'flex-end';
  }
  var finalStyle = _objectSpread$1({
    width: width,
    height: height,
    justifyContent: justifyContent,
    alignItems: alignItems
  }, style);
  return /*#__PURE__*/React.createElement(StackProvider, {
    direction: "vertical"
  }, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$z.container, _defineProperty(_defineProperty({}, styles$z.fullscreen, fullscreen), className, className !== null)]),
    style: finalStyle
  }, children));
};
Layout.propTypes = propTypes$z;
Layout.defaultProps = defaultProps$z;
var Layout$1 = Layout;

var styles$y = {"container":"micromag-element-scroll-container","withScroll":"micromag-element-scroll-withScroll","scrollable":"micromag-element-scroll-scrollable","top":"micromag-element-scroll-top","scrollee":"micromag-element-scroll-scrollee","middle":"micromag-element-scroll-middle","bottom":"micromag-element-scroll-bottom","withArrow":"micromag-element-scroll-withArrow","arrowContainer":"micromag-element-scroll-arrowContainer","withShadow":"micromag-element-scroll-withShadow","arrow":"micromag-element-scroll-arrow","upAndDown":"micromag-element-scroll-upAndDown"};

var propTypes$y = {
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  disabled: PropTypes$1.bool,
  verticalAlign: PropTypes$1.oneOf(['top', 'middle', 'bottom']),
  className: PropTypes$1.string,
  children: PropTypes$1.node,
  scrollPosition: PropTypes$1.oneOf([PropTypes$1.number, PropTypes$1.string]),
  onScrolledBottom: PropTypes$1.func,
  onScrolledNotBottom: PropTypes$1.func,
  onScrollHeightChange: PropTypes$1.func,
  scrollContainerRef: PropTypes$1.any,
  // eslint-disable-line
  withShadow: PropTypes$1.bool,
  withArrow: PropTypes$1.bool
};
var defaultProps$y = {
  width: null,
  height: null,
  disabled: false,
  verticalAlign: null,
  className: null,
  children: null,
  scrollPosition: null,
  onScrolledBottom: null,
  onScrolledNotBottom: null,
  onScrollHeightChange: null,
  scrollContainerRef: null,
  withShadow: false,
  withArrow: true
};
function Scroll(_ref) {
  var width = _ref.width,
    height = _ref.height,
    disabled = _ref.disabled,
    verticalAlign = _ref.verticalAlign,
    className = _ref.className,
    children = _ref.children,
    scrollPosition = _ref.scrollPosition,
    onScrolledBottom = _ref.onScrolledBottom,
    onScrolledNotBottom = _ref.onScrolledNotBottom,
    onScrollHeightChange = _ref.onScrollHeightChange,
    scrollContainerRef = _ref.scrollContainerRef,
    withShadow = _ref.withShadow,
    showArrow = _ref.withArrow;
  var finalStyle = {
    width: width,
    height: height
  };
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    withArrow = _useState2[0],
    setWithArrow = _useState2[1];
  var _useDimensionObserver = useDimensionObserver(),
    scrollableRef = _useDimensionObserver.ref,
    scrollableHeight = _useDimensionObserver.height;
  if (scrollContainerRef !== null) {
    scrollContainerRef.current = scrollableRef.current; // eslint-disable-line
  }
  var _useDimensionObserver2 = useDimensionObserver(),
    scrolleeRef = _useDimensionObserver2.ref,
    scrolleeHeight = _useDimensionObserver2.height;
  var scrolledBottomOnce = React.useRef(false);
  var scrolledNotBottomOnce = React.useRef(false);
  var reachedBottom = React.useRef(false);
  var bind = react.useScroll(function (_ref2) {
    var _ref2$xy = _slicedToArray(_ref2.xy, 2),
      scrollY = _ref2$xy[1];
    var newWithArrow = scrollY <= 1;
    var maxScrollAmount = scrolleeHeight - scrollableHeight;
    var nowReachedBottom = scrollY + 1 >= maxScrollAmount;
    if (nowReachedBottom) {
      if (!reachedBottom.current) {
        if (onScrolledBottom !== null) {
          onScrolledBottom({
            initial: !scrolledBottomOnce.current
          });
        }
        scrolledBottomOnce.current = true;
      }
    } else if (reachedBottom.current) {
      if (onScrolledNotBottom !== null) {
        onScrolledNotBottom({
          initial: !scrolledNotBottomOnce.current
        });
      }
      scrolledNotBottomOnce.current = true;
    }
    if (newWithArrow !== withArrow && showArrow) {
      setWithArrow(newWithArrow);
    }
    reachedBottom.current = nowReachedBottom;
  }, {
    enabled: !disabled
  });

  // need to call scrolled callbacks on initial render also

  React.useEffect(function () {
    if (scrolleeHeight > 0 && scrollableHeight > 0 && !disabled) {
      setWithArrow(Math.round(scrolleeHeight) > Math.round(scrollableHeight));
      var maxScrollAmount = scrolleeHeight - scrollableHeight;
      var nowReachedBottom = scrollableRef.current.scrollTop + 1 >= maxScrollAmount;
      if (nowReachedBottom) {
        if (onScrolledBottom !== null) {
          onScrolledBottom({
            initial: false
          });
        }
      } else if (onScrolledNotBottom !== null) {
        onScrolledNotBottom({
          initial: false
        });
      }
    }
  }, [scrollableHeight, scrolleeHeight, setWithArrow, disabled]);
  React.useEffect(function () {
    if (onScrollHeightChange !== null) {
      var canScroll = (scrolleeHeight || 0) > (scrollableHeight || 0);
      onScrollHeightChange({
        scrollableHeight: scrollableHeight,
        scrolleeHeight: scrolleeHeight,
        canScroll: canScroll
      });
    }
  }, [scrollableHeight, scrolleeHeight, onScrollHeightChange]);
  React.useEffect(function () {
    if (scrollableRef.current !== null && scrollPosition !== null) {
      scrollableRef.current.scrollTop = scrollPosition;
    }
  }, [scrolleeRef, scrollPosition]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$y.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, styles$y.withScroll, !disabled), className, className !== null), styles$y[verticalAlign], verticalAlign !== null), styles$y.withArrow, showArrow && withArrow), styles$y.withShadow, withShadow)]),
    style: finalStyle
  }, /*#__PURE__*/React.createElement("div", Object.assign({
    className: styles$y.scrollable,
    ref: scrollableRef
  }, bind()), /*#__PURE__*/React.createElement("div", {
    className: styles$y.scrollee,
    ref: scrolleeRef
  }, children)), !disabled && showArrow ? /*#__PURE__*/React.createElement("div", {
    className: styles$y.arrowContainer
  }, /*#__PURE__*/React.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "10",
    height: "16",
    viewBox: "0 0 10 16",
    className: styles$y.arrow,
    fill: "currentColor"
  }, /*#__PURE__*/React.createElement("polygon", {
    // stroke="#000"
    // strokeWidth="0.5"
    points: ".38 11.38 5 16 9.62 11.38 8.56 10.32 5.75 13.13 5.75 1.61 4.25 1.61 4.25 13.13 1.44 10.32 .38 11.38"
  }))) : null);
}
Scroll.defaultProps = defaultProps$y;
Scroll.propTypes = propTypes$y;
var Scroll$1 = /*#__PURE__*/React.forwardRef(function (props, ref) {
  return /*#__PURE__*/React.createElement(Scroll, Object.assign({
    scrollContainerRef: ref
  }, props));
});

var styles$x = {"container":"micromag-element-image-container","showEmpty":"micromag-element-image-showEmpty","img":"micromag-element-image-img"};

var propTypes$x = {
  media: PropTypes.imageMedia,
  alt: PropTypes$1.string,
  width: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  height: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  resolution: PropTypes$1.number,
  objectFit: PropTypes.objectFit,
  containerStyle: PropTypes.containerStyle,
  imageStyle: PropTypes.containerStyle,
  className: PropTypes$1.string,
  imageClassName: PropTypes$1.string,
  onLoaded: PropTypes$1.func,
  loadingMode: PropTypes$1.string,
  shouldLoad: PropTypes$1.bool
};
var defaultProps$x = {
  media: null,
  alt: null,
  width: null,
  height: null,
  resolution: 1,
  objectFit: null,
  containerStyle: {},
  //
  imageStyle: {},
  className: null,
  imageClassName: null,
  onLoaded: null,
  loadingMode: 'lazy',
  shouldLoad: true
};
var Image$1 = function Image(_ref) {
  var media = _ref.media,
    alt = _ref.alt,
    width = _ref.width,
    height = _ref.height,
    resolution = _ref.resolution,
    objectFit = _ref.objectFit,
    containerStyle = _ref.containerStyle,
    imageStyle = _ref.imageStyle,
    className = _ref.className,
    imageClassName = _ref.imageClassName,
    onLoaded = _ref.onLoaded,
    loadingMode = _ref.loadingMode,
    shouldLoad = _ref.shouldLoad;
  var _ref2 = media || {},
    _ref2$metadata = _ref2.metadata,
    metadata = _ref2$metadata === void 0 ? null : _ref2$metadata;
  var _ref3 = metadata || {},
    _ref3$width = _ref3.width,
    mediaWidth = _ref3$width === void 0 ? 0 : _ref3$width,
    _ref3$height = _ref3.height,
    mediaHeight = _ref3$height === void 0 ? 0 : _ref3$height,
    _ref3$description = _ref3.description,
    description = _ref3$description === void 0 ? 'image' : _ref3$description;
  var mediaRatio = mediaWidth / mediaHeight;
  var _useState = React.useState({
      width: mediaWidth,
      height: mediaHeight
    }),
    _useState2 = _slicedToArray(_useState, 2),
    _useState2$ = _useState2[0],
    _useState2$$width = _useState2$.width,
    realWidth = _useState2$$width === void 0 ? 0 : _useState2$$width,
    _useState2$$height = _useState2$.height,
    realHeight = _useState2$$height === void 0 ? 0 : _useState2$$height,
    setRealSize = _useState2[1];
  var wasLoadedRef = React.useRef(shouldLoad);
  if (shouldLoad && !wasLoadedRef.current) {
    wasLoadedRef.current = shouldLoad;
  }
  var finalShouldLoad = wasLoadedRef.current;
  var onImageLoaded = React.useCallback(function (e) {
    var _e$target = e.target,
      _e$target$naturalWidt = _e$target.naturalWidth,
      naturalWidth = _e$target$naturalWidt === void 0 ? 0 : _e$target$naturalWidt,
      _e$target$naturalHeig = _e$target.naturalHeight,
      naturalHeight = _e$target$naturalHeig === void 0 ? 0 : _e$target$naturalHeig;
    if (naturalWidth !== realWidth || naturalHeight !== realHeight) {
      setRealSize({
        width: naturalWidth || 0,
        height: naturalHeight || 0
      });
    }
    if (onLoaded !== null) {
      onLoaded(e);
    }
  }, [onLoaded]);
  var withFit = objectFit !== null;
  var mediaHasSize = realWidth > 0 && realHeight > 0;
  var finalContainerStyle;
  var finalImageStyle;
  if (withFit) {
    var imageTop = 0;
    var imageLeft = 0;
    var imageWidth = width;
    var imageHeight = height;
    var imageObjectFit = null;
    var imageObjectPosition = null;
    var _ref4 = objectFit || {},
      _ref4$fit = _ref4.fit,
      fit = _ref4$fit === void 0 ? null : _ref4$fit,
      _ref4$horizontalPosit = _ref4.horizontalPosition,
      horizontalPosition = _ref4$horizontalPosit === void 0 ? 'center' : _ref4$horizontalPosit,
      _ref4$verticalPositio = _ref4.verticalPosition,
      verticalPosition = _ref4$verticalPositio === void 0 ? 'center' : _ref4$verticalPositio;
    if (mediaHasSize) {
      var _getSizeWithinBounds = getSizeWithinBounds(realWidth, realHeight, width, height, {
          cover: fit === 'cover'
        }),
        resizedImageWidth = _getSizeWithinBounds.width,
        resizedImageHeight = _getSizeWithinBounds.height;
      imageWidth = resizedImageWidth;
      imageHeight = resizedImageHeight;
      if (horizontalPosition === 'center') {
        imageLeft = -(resizedImageWidth - width) / 2;
      } else if (horizontalPosition === 'right') {
        imageLeft = -(resizedImageWidth - width);
      }
      if (verticalPosition === 'center') {
        imageTop = -(resizedImageHeight - height) / 2;
      } else if (verticalPosition === 'bottom') {
        imageTop = -(resizedImageHeight - height);
      }
    } else {
      imageObjectFit = fit;
      imageObjectPosition = "".concat(horizontalPosition, " ").concat(verticalPosition);
    }
    finalContainerStyle = {
      width: width,
      height: height
    };
    finalImageStyle = {
      position: 'absolute',
      width: imageWidth,
      height: imageHeight,
      top: imageTop,
      left: imageLeft,
      objectFit: imageObjectFit,
      objectPosition: imageObjectPosition
    };
  } else {
    var validWidth = width !== null && typeof width === 'number';
    var validHeight = height !== null && typeof height === 'number';
    var ratioWidth = mediaRatio && validHeight ? height * mediaRatio : null;
    var ratioHeight = mediaRatio && validWidth ? width / mediaRatio : null;
    var _finalWidth = width !== null ? width : ratioWidth;
    var _finalHeight = height !== null ? height : ratioHeight;
    if (_finalWidth === null && _finalHeight === null) {
      _finalWidth = realWidth > 0 ? mediaWidth : null;
      _finalHeight = realHeight > 0 ? mediaHeight : null;
    }
    finalImageStyle = {
      width: _finalWidth,
      height: _finalHeight
    };
    finalContainerStyle = finalImageStyle;
  }
  finalContainerStyle = _objectSpread$1(_objectSpread$1({}, finalContainerStyle), containerStyle);
  finalImageStyle = _objectSpread$1(_objectSpread$1({}, finalImageStyle), imageStyle);
  var _finalImageStyle = finalImageStyle,
    _finalImageStyle$widt = _finalImageStyle.width,
    finalWidth = _finalImageStyle$widt === void 0 ? null : _finalImageStyle$widt,
    _finalImageStyle$heig = _finalImageStyle.height,
    finalHeight = _finalImageStyle$heig === void 0 ? null : _finalImageStyle$heig;
  var finalUrl = getOptimalImageUrl$1(media, finalWidth, finalHeight, {
    resolution: resolution
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$x.container, _defineProperty({}, className, className !== null)]),
    style: finalContainerStyle
  }, finalUrl !== null && finalShouldLoad ? /*#__PURE__*/React.createElement("img", {
    src: finalUrl,
    alt: alt || description,
    className: classNames([styles$x.img, _defineProperty({}, imageClassName, imageClassName !== null)]),
    style: finalImageStyle,
    onLoad: onImageLoaded,
    loading: loadingMode
  }) : null);
};
Image$1.propTypes = propTypes$x;
Image$1.defaultProps = defaultProps$x;
var Image$1$1 = Image$1;

var styles$w = {"container":"micromag-element-visual-container","videoContainer":"micromag-element-visual-videoContainer","videoTag":"micromag-element-visual-videoTag","videoTouchOverlay":"micromag-element-visual-videoTouchOverlay"};

var _excluded$5 = ["media", "mediaRef", "width", "height", "resolution", "objectFit", "playing", "muted", "shouldLoad", "videoLoop", "videoInitialMuted", "onLoaded", "className", "imageClassName", "videoClassName", "withoutVideo"];
var propTypes$w = {
  media: PropTypes.media,
  mediaRef: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    // eslint-disable-next-line react/forbid-prop-types
    current: PropTypes$1.any
  })]),
  width: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  height: PropTypes$1.oneOfType([PropTypes$1.number, PropTypes$1.string]),
  resolution: PropTypes$1.number,
  objectFit: PropTypes.objectFit,
  playing: PropTypes$1.bool,
  muted: PropTypes$1.bool,
  shouldLoad: PropTypes$1.bool,
  videoLoop: PropTypes$1.bool,
  withoutVideo: PropTypes$1.bool,
  videoInitialMuted: PropTypes$1.bool,
  onLoaded: PropTypes$1.func,
  className: PropTypes$1.string,
  imageClassName: PropTypes$1.string,
  videoClassName: PropTypes$1.string
};
var defaultProps$w = {
  media: null,
  mediaRef: null,
  width: null,
  height: null,
  resolution: 1,
  objectFit: null,
  playing: true,
  muted: true,
  shouldLoad: true,
  videoLoop: true,
  withoutVideo: false,
  videoInitialMuted: true,
  onLoaded: null,
  className: null,
  imageClassName: null,
  videoClassName: null
};
var Visual = function Visual(_ref) {
  var media = _ref.media,
    mediaRef = _ref.mediaRef,
    width = _ref.width,
    height = _ref.height,
    resolution = _ref.resolution,
    objectFit = _ref.objectFit,
    playing = _ref.playing,
    muted = _ref.muted,
    shouldLoad = _ref.shouldLoad,
    videoLoop = _ref.videoLoop;
    _ref.videoInitialMuted;
    var onParentLoaded = _ref.onLoaded,
    className = _ref.className,
    imageClassName = _ref.imageClassName,
    videoClassName = _ref.videoClassName,
    withoutVideo = _ref.withoutVideo,
    props = _objectWithoutProperties(_ref, _excluded$5);
  var _ref2 = media || {},
    _ref2$type = _ref2.type,
    type = _ref2$type === void 0 ? null : _ref2$type,
    _ref2$thumbnail_url = _ref2.thumbnail_url,
    thumbnailUrl = _ref2$thumbnail_url === void 0 ? null : _ref2$thumbnail_url,
    _ref2$url = _ref2.url,
    url = _ref2$url === void 0 ? null : _ref2$url;
  var isVideo = type === 'video';
  var elProps = React.useMemo(function () {
    return _objectSpread$1(_objectSpread$1({}, props), {}, {
      media: media
    });
  }, [props, media]);
  var imageElProps = React.useMemo(function () {
    var tmpProps = (!shouldLoad || withoutVideo) && isVideo ? _objectSpread$1(_objectSpread$1({}, elProps), {}, {
      media: {
        url: thumbnailUrl
      }
    }) : elProps;
    return shouldLoad && !withoutVideo ? _objectSpread$1(_objectSpread$1({}, elProps), {}, {
      media: _objectSpread$1(_objectSpread$1({}, media), {}, {
        url: url
      })
    }) : tmpProps;
  }, [isVideo, elProps, thumbnailUrl, url, shouldLoad]);
  var videoContainerStyle = null;
  if (type === 'video' && objectFit !== null && shouldLoad) {
    var _ref3 = objectFit || {},
      _ref3$fit = _ref3.fit,
      fit = _ref3$fit === void 0 ? 'cover' : _ref3$fit;
    var _ref4 = media || {},
      _ref4$metadata = _ref4.metadata,
      videoMetadata = _ref4$metadata === void 0 ? null : _ref4$metadata;
    var _ref5 = videoMetadata || {},
      _ref5$width = _ref5.width,
      videoWidth = _ref5$width === void 0 ? 0 : _ref5$width,
      _ref5$height = _ref5.height,
      videoHeight = _ref5$height === void 0 ? 0 : _ref5$height;
    var _getSizeWithinBounds = getSizeWithinBounds(videoWidth, videoHeight, width, height, {
        cover: fit === 'cover'
      }),
      resizedVideoWidth = _getSizeWithinBounds.width,
      resizedVideoHeight = _getSizeWithinBounds.height;
    var resizedVideoLeft = -(resizedVideoWidth - width) / 2;
    var resizedVideoTop = -(resizedVideoHeight - height) / 2;
    videoContainerStyle = {
      width: resizedVideoWidth,
      height: resizedVideoHeight,
      left: resizedVideoLeft,
      top: resizedVideoTop
    };
  }
  var onLoaded = React.useCallback(function (e) {
    if (onParentLoaded !== null) {
      onParentLoaded(e);
    }
  }, []);
  return type !== null ? /*#__PURE__*/React.createElement(React.Fragment, null, type === 'image' || !shouldLoad || withoutVideo ? /*#__PURE__*/React.createElement(Image$1$1, Object.assign({}, imageElProps, {
    objectFit: objectFit,
    width: width,
    height: height,
    resolution: resolution,
    shouldLoad: shouldLoad,
    onLoaded: onLoaded,
    className: classNames([styles$w.container, _defineProperty({}, className, className !== null)]),
    imageClassName: imageClassName
  })) : null, type === 'video' && shouldLoad && !withoutVideo ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$w.container, _defineProperty({}, className, className !== null)]),
    style: {
      width: width,
      height: height
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$w.videoContainer, _defineProperty({}, videoClassName, videoClassName !== null)]),
    style: videoContainerStyle
  }, /*#__PURE__*/React.createElement(Video$1, Object.assign({}, elProps, {
    innerClassName: styles$w.videoTag,
    mediaRef: mediaRef,
    width: objectFit === null ? width : null,
    height: objectFit === null ? height : null,
    paused: !playing,
    muted: muted,
    loop: videoLoop,
    shouldLoad: shouldLoad,
    onReady: onLoaded,
    autoPlay: true
  })), /*#__PURE__*/React.createElement("div", {
    className: styles$w.videoTouchOverlay
  }))) : null) : null;
};
Visual.propTypes = propTypes$w;
Visual.defaultProps = defaultProps$w;
var Visual$1 = Visual;

var styles$v = {"container":"micromag-screen-article-container","background":"micromag-screen-article-background","emptySurtitle":"micromag-screen-article-emptySurtitle","emptyDate":"micromag-screen-article-emptyDate","emptyTitle":"micromag-screen-article-emptyTitle","emptyAuthor":"micromag-screen-article-emptyAuthor","emptyText":"micromag-screen-article-emptyText","content":"micromag-screen-article-content","layout":"micromag-screen-article-layout","main":"micromag-screen-article-main","hasText":"micromag-screen-article-hasText","visualContainer":"micromag-screen-article-visualContainer","surtitle":"micromag-screen-article-surtitle","date":"micromag-screen-article-date","title":"micromag-screen-article-title","text":"micromag-screen-article-text","topContent":"micromag-screen-article-topContent","footer":"micromag-screen-article-footer","disabled":"micromag-screen-article-disabled","isPlaceholder":"micromag-screen-article-isPlaceholder"};

var propTypes$v = {
  layout: PropTypes$1.oneOf(['normal']),
  image: PropTypes.imageMedia,
  title: PropTypes.text,
  surtitle: PropTypes.text,
  date: PropTypes$1.string,
  author: PropTypes$1.shape({}),
  // author: MicromagPropTypes.text,
  text: PropTypes.text,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$v = {
  layout: 'normal',
  image: null,
  title: null,
  surtitle: null,
  date: null,
  author: null,
  text: null,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  type: null,
  className: null
};
var ArticleScreen = function ArticleScreen(_ref) {
  var image = _ref.image,
    title = _ref.title,
    surtitle = _ref.surtitle,
    date = _ref.date,
    author = _ref.author,
    text = _ref.text,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    type = _ref.type,
    className = _ref.className;
  var intl = reactIntl.useIntl();
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var _useDimensionObserver = useDimensionObserver(),
    imageCntRef = _useDimensionObserver.ref,
    imageHeight = _useDimensionObserver.height;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var ready = true;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var _ref2 = author || {},
    _ref2$name = _ref2.name,
    authorName = _ref2$name === void 0 ? null : _ref2$name,
    _ref2$image = _ref2.image,
    authorImage = _ref2$image === void 0 ? null : _ref2$image,
    authorCollabs = _ref2.collaborator;
  var hasText = isTextFilled$1(text);
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var hasTitle = isTextFilled$1(title);
  var hasSurtitle = isTextFilled$1(surtitle);
  var hasSimpleAuthor = isTextFilled$1(author); // legacy
  var hasAuthor = isTextFilled$1(authorName) || isImageFilled$1(authorImage) || isTextFilled$1(authorCollabs);
  var hasImage = isImageFilled$1(image);
  var hasDate = isTextFilled$1(date);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var mediaHeight = React.useMemo(function () {
    if (!hasImage) {
      return 0;
    }
    var _ref3 = image || {},
      _ref3$metadata = _ref3.metadata,
      metadata = _ref3$metadata === void 0 ? {} : _ref3$metadata;
    var _ref4 = metadata || {},
      _ref4$width = _ref4.width,
      initialWidth = _ref4$width === void 0 ? 0 : _ref4$width,
      _ref4$height = _ref4.height,
      initialHeight = _ref4$height === void 0 ? 0 : _ref4$height;
    return width * initialHeight / initialWidth;
  }, [image]);
  var partialDate = hasDate ? date.body || null : null;
  var finalDate = React.useMemo(function () {
    return partialDate !== null ? "<p>".concat(intl.formatDate(dayjs(partialDate).toDate(), {
      year: 'numeric',
      month: 'long',
      day: '2-digit'
    }), "</p>") : null;
  }, [partialDate]);
  var imageElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "image",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "ebsPd4",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    }),
    emptyClassName: styles$v.emptyText,
    isEmpty: !hasImage
  }, /*#__PURE__*/React.createElement("div", {
    ref: imageCntRef,
    className: styles$v.visualContainer
  }, hasImage ? /*#__PURE__*/React.createElement(Visual$1, {
    media: image
    // width={width - spacing * 2} // in layout flow
    ,
    width: width,
    height: mediaHeight,
    resolution: resolution,
    className: styles$v.visual
  }) : null));
  var titleElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "2ZOPe+",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$v.emptyTitle,
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$v.title
  }, title)) : null);
  var surtitleElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "surtitle",
    placeholder: "line",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "vdWMTA",
      defaultMessage: [{
        "type": 0,
        "value": "Surtitle"
      }]
    }),
    emptyClassName: styles$v.emptySurtitle,
    isEmpty: !hasSurtitle
  }, hasSurtitle ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$v.surtitle
  }, surtitle)) : null);
  var dateElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "date",
    placeholder: "line",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "/MsgWe",
      defaultMessage: [{
        "type": 0,
        "value": "Date"
      }]
    }),
    emptyClassName: styles$v.emptyDate,
    isEmpty: !hasDate
  }, hasDate ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$v.date
  }, date, {
    body: finalDate
  })) : null);
  var authorElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "author",
    placeholder: "line",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "xYqGzM",
      defaultMessage: [{
        "type": 0,
        "value": "Author"
      }]
    }),
    emptyClassName: styles$v.emptyAuthor,
    isEmpty: !hasAuthor && !hasSimpleAuthor
  }, hasSimpleAuthor ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$v.author
  }, author)) : null, hasAuthor ? /*#__PURE__*/React.createElement(Author$1, {
    author: author
  }) : null);
  var contentElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "text",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "z4CiV1",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    }),
    emptyClassName: styles$v.emptyText,
    isEmpty: !hasText
  }, hasText ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$v.text
  }, text)) : null);
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    scrolledBottom = _useState2[0],
    setScrolledBottom = _useState2[1];
  var onScrolledBottom = React.useCallback(function (_ref5) {
    var initial = _ref5.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$v.container, _defineProperty(_defineProperty({}, className, className !== null), styles$v.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$v.content
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    withShadow: true
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$v.layout,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: hasHeader ? spacing / 2 + (!isPreview ? viewerTopHeight : 0) : spacing / 2 + imageHeight,
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + spacing / 2
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    key: "header",
    style: {
      height: hasImage && imageHeight > 0 ? 0 : 'auto',
      paddingBottom: imageHeight > 0 ? imageHeight - viewerTopHeight : spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$v.main, _defineProperty({}, styles$v.hasText, hasText && hasAuthor)])
  }, imageElement, /*#__PURE__*/React.createElement("div", {
    className: styles$v.topContent
  }, surtitleElement, dateElement), titleElement, authorElement), contentElement, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$v.footer, _defineProperty({}, styles$v.disabled, !scrolledBottom)]),
    style: {
      paddingLeft: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingRight: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingTop: spacing
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null))), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$v.background
  }) : null);
};
ArticleScreen.propTypes = propTypes$v;
ArticleScreen.defaultProps = defaultProps$v;
var ArticleScreen$1 = ArticleScreen;

// import * as transforms from './transforms/index';

var definition$n = [{
  id: 'article',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "fIawTr",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    }),
    order: 2
  },
  title: reactIntl.defineMessage({
    id: "ouMwWq",
    defaultMessage: [{
      "type": 0,
      "value": "Article"
    }]
  }),
  component: ArticleScreen$1,
  layouts: ['normal'],
  // transforms,
  fields: [{
    name: 'image',
    type: 'visual',
    label: reactIntl.defineMessage({
      id: "xsipID",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    inline: true,
    theme: {
      textStyle: 'header2'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'surtitle',
    type: 'text-element',
    label: reactIntl.defineMessage({
      id: "YD9M2p",
      defaultMessage: [{
        "type": 0,
        "value": "Overtitle"
      }]
    })
  }, {
    name: 'date',
    type: 'date-element',
    label: reactIntl.defineMessage({
      id: "9AP246",
      defaultMessage: [{
        "type": 0,
        "value": "Date"
      }]
    })
  }, {
    name: 'author',
    type: 'author-element',
    label: reactIntl.defineMessage({
      id: "73hxYw",
      defaultMessage: [{
        "type": 0,
        "value": "Author"
      }]
    })
  },
  // {
  //     name: 'author',
  //     type: 'text-element',
  //     label: defineMessage({
  //         defaultMessage: 'Author',
  //         description: 'Author field label',
  //     }),
  // },

  {
    name: 'text',
    type: 'text-modal',
    label: reactIntl.defineMessage({
      id: "4E2gbX",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$2$4 = {"container":"micromag-element-audio-audio-bars-container","seekButton":"micromag-element-audio-audio-bars-seekButton"};

var propTypes$2$8 = {
  progress: PropTypes$1.number,
  duration: PropTypes$1.number,
  playing: PropTypes$1.bool,
  seek: PropTypes$1.func,
  play: PropTypes$1.func,
  // onReady: PropTypes.func,
  className: PropTypes$1.string
};
var defaultProps$2$8 = {
  progress: 0,
  duration: 0,
  playing: false,
  seek: null,
  play: null,
  // onReady: null,
  className: null
};
function AudioBars(_ref) {
  var progress = _ref.progress,
    playing = _ref.playing,
    duration = _ref.duration,
    seek = _ref.seek,
    play = _ref.play,
    className = _ref.className;
  var intl = reactIntl.useIntl();
  var _useDimensionObserver = useDimensionObserver(),
    elRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.width,
    elWidth = _useDimensionObserver2 === void 0 ? null : _useDimensionObserver2,
    elHeight = _useDimensionObserver.height;
  var barWidth = 1;
  var barGap = 1;
  var barSize = barWidth + barGap;
  var current = progress * elWidth;
  var _useState = React.useState(null),
    _useState2 = _slicedToArray(_useState, 2),
    currentSeek = _useState2[0],
    setCurrentSeek = _useState2[1];
  var items = React.useMemo(function () {
    var count = Math.floor(elWidth / barSize);
    return _toConsumableArray(Array(count).keys()).map(function () {
      return Math.floor(Math.random() * 100);
    });
  }, [elWidth, barSize]);
  var seekFromX = React.useCallback(function () {
    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    if (x === null) {
      return;
    }
    var _elRef$current$getBou = elRef.current.getBoundingClientRect(),
      elX = _elRef$current$getBou.left,
      width = _elRef$current$getBou.width;
    var distance = Math.max(0, Math.min(1, (x - elX) / width));
    if (seek !== null && duration !== null) {
      seek(parseFloat(distance * duration, 10));
    }
    if (!playing && play != null) {
      play();
    }
  }, [elRef.current, elWidth, duration, playing, seek, play]);
  var seekTemporary = React.useCallback(function (x) {
    var _elRef$current$getBou2 = elRef.current.getBoundingClientRect(),
      elX = _elRef$current$getBou2.left,
      width = _elRef$current$getBou2.width;
    var distance = Math.max(0, Math.min(1, (x - elX) / width));
    setCurrentSeek(distance * elWidth);
  }, [elRef.current, elWidth, setCurrentSeek]);
  var onClick = React.useCallback(function (e) {
    if (e) {
      seekFromX(e.clientX || null);
      setCurrentSeek(null);
    }
  }, [seekFromX, setCurrentSeek]);
  var bind = react.useGesture({
    onDrag: function onDrag(_ref2) {
      var _ref2$xy = _slicedToArray(_ref2.xy, 1),
        x = _ref2$xy[0],
        elapsedTime = _ref2.elapsedTime,
        active = _ref2.active;
      if (!active && elapsedTime > 300) {
        return;
      }
      seekTemporary(x);
    },
    onDragStart: function onDragStart(_ref3) {
      var _ref3$xy = _slicedToArray(_ref3.xy, 1),
        x = _ref3$xy[0],
        elapsedTime = _ref3.elapsedTime,
        active = _ref3.active;
      if (!active && elapsedTime > 300) {
        return;
      }
      seekTemporary(x);
    },
    onDragEnd: function onDragEnd(_ref4) {
      var _ref4$xy = _slicedToArray(_ref4.xy, 1),
        x = _ref4$xy[0];
      seekFromX(x);
      setTimeout(function () {
        setCurrentSeek(null);
      }, 1000);
    }
  }, {
    drag: {
      axis: 'x',
      filterTaps: true
    }
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$2$4.container, _defineProperty({}, className, className !== null)]),
    ref: elRef
  }, /*#__PURE__*/React.createElement("svg", {
    version: "1.1",
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    x: "0",
    y: "0",
    width: "".concat(elWidth, "px"),
    height: "".concat(elHeight, "px"),
    viewBox: "0 0 ".concat(elWidth, " ").concat(elHeight),
    className: className,
    xmlSpace: "preserve"
  }, items.map(function (size, i) {
    return /*#__PURE__*/React.createElement("rect", {
      key: "bar-".concat(i + 1),
      width: barWidth,
      height: size,
      x: i * barSize,
      y: elHeight / 2 - size / 2,
      fill: (currentSeek || current) > i * barSize ? 'white' : 'gray',
      stroke: "black",
      strokeWidth: "0px",
      strokeLinejoin: "round",
      strokeLinecap: "round"
    });
  })), /*#__PURE__*/React.createElement("button", Object.assign({}, bind(), {
    onClick: onClick,
    type: "button",
    className: styles$2$4.seekButton,
    title: intl.formatMessage({
      id: "G1Gyjn",
      defaultMessage: [{
        "type": 0,
        "value": "Seek"
      }]
    }),
    "aria-label": intl.formatMessage({
      id: "G1Gyjn",
      defaultMessage: [{
        "type": 0,
        "value": "Seek"
      }]
    })
  })));
}
AudioBars.propTypes = propTypes$2$8;
AudioBars.defaultProps = defaultProps$2$8;

var styles$1$6 = {"container":"micromag-element-audio-container","wave":"micromag-element-audio-wave","withAutoHeight":"micromag-element-audio-withAutoHeight"};

var propTypes$1$9 = {
  media: PropTypes.audioMedia,
  mediaRef: PropTypes$1.oneOfType([PropTypes$1.func, PropTypes$1.shape({
    current: PropTypes$1.any
  })]),
  muted: PropTypes$1.bool,
  autoPlay: PropTypes$1.bool,
  paused: PropTypes$1.bool,
  loop: PropTypes$1.bool,
  preload: PropTypes$1.oneOf(['auto', 'none', 'metadata']),
  shouldLoad: PropTypes$1.bool,
  waveFake: PropTypes$1.bool,
  // waveProps: PropTypes.shape({
  //     sampleWidth: PropTypes.number,
  //     sampleMargin: PropTypes.number,
  //     minSampleHeight: PropTypes.number,
  // }),
  withWave: PropTypes$1.bool,
  autoWaveHeight: PropTypes$1.bool,
  // reduceBufferFactor: PropTypes.number,
  updateInterval: PropTypes$1.number,
  className: PropTypes$1.string,
  onReady: PropTypes$1.func,
  onPlay: PropTypes$1.func,
  onPause: PropTypes$1.func,
  onEnded: PropTypes$1.func,
  onSeeked: PropTypes$1.func,
  onTimeUpdate: PropTypes$1.func,
  onProgressStep: PropTypes$1.func,
  onDurationChange: PropTypes$1.func,
  onVolumeChange: PropTypes$1.func,
  onPlayError: PropTypes$1.func
};
var defaultProps$1$9 = {
  media: null,
  mediaRef: null,
  muted: false,
  autoPlay: false,
  paused: false,
  loop: false,
  preload: 'auto',
  shouldLoad: true,
  waveFake: false,
  // waveProps: null,
  withWave: false,
  autoWaveHeight: false,
  // reduceBufferFactor: 100,
  updateInterval: 1000,
  className: null,
  onReady: null,
  onPlay: null,
  onPause: null,
  onEnded: null,
  onSeeked: null,
  onTimeUpdate: null,
  onProgressStep: null,
  onDurationChange: null,
  onVolumeChange: null,
  onPlayError: null
};
var Audio = function Audio(_ref) {
  var media = _ref.media,
    mediaRef = _ref.mediaRef,
    muted = _ref.muted,
    autoPlay = _ref.autoPlay,
    paused = _ref.paused,
    loop = _ref.loop,
    preload = _ref.preload,
    shouldLoad = _ref.shouldLoad,
    waveFake = _ref.waveFake,
    withWave = _ref.withWave,
    autoWaveHeight = _ref.autoWaveHeight,
    updateInterval = _ref.updateInterval,
    className = _ref.className,
    onReady = _ref.onReady,
    onPlay = _ref.onPlay,
    onPause = _ref.onPause,
    onEnded = _ref.onEnded,
    onSeeked = _ref.onSeeked,
    onTimeUpdate = _ref.onTimeUpdate,
    onProgressStep = _ref.onProgressStep,
    customOnDurationChange = _ref.onDurationChange,
    customOnVolumeChange = _ref.onVolumeChange,
    onPlayError = _ref.onPlayError;
  var _ref2 = media || {},
    _ref2$url = _ref2.url,
    url = _ref2$url === void 0 ? null : _ref2$url;
  var _ref4 = React.useRef(null);
  var currentTime = useMediaCurrentTime(_ref4.current, {
    id: url,
    disabled: paused || !withWave && onProgressStep === null,
    updateInterval: updateInterval
  });
  var ready = useMediaReady(_ref4.current, {
    id: url
  });
  var duration = useMediaDuration(_ref4.current, {
    id: url
  });

  // const audioLevels = useMediaWaveform(media, {
  //     fake: waveFake,
  //     reduceBufferFactor,
  // });

  useMediaLoad(_ref4.current, {
    preload: preload,
    shouldLoad: shouldLoad
  });
  var waveReady = waveFake || ready;
  React.useEffect(function () {
    if (duration > 0 && customOnDurationChange !== null) {
      customOnDurationChange(duration);
    }
  }, [duration, customOnDurationChange]);
  var onVolumeChange = React.useCallback(function () {
    var _ref$current = _ref4.current,
      element = _ref$current === void 0 ? null : _ref$current;
    if (element === null) {
      return;
    }
    if (customOnVolumeChange !== null) {
      customOnVolumeChange(element.volume);
    }
  }, [_ref4.current, customOnVolumeChange]);
  var onWavePlay = React.useCallback(function () {
    var _ref$current2 = _ref4.current,
      element = _ref$current2 === void 0 ? null : _ref$current2;
    if (element === null) {
      return;
    }
    element.play();
  }, [_ref4.current]);
  var onWaveSeek = React.useCallback(function (newTime) {
    var _ref$current3 = _ref4.current,
      element = _ref$current3 === void 0 ? null : _ref$current3;
    if (element === null) {
      return;
    }
    if (isNumber(newTime)) {
      element.currentTime = newTime;
    }
  }, [_ref4.current]);
  React.useEffect(function () {
    if (waveReady && onReady !== null) {
      onReady();
    }
  }, [waveReady, onReady]);
  React.useEffect(function () {
    var _ref$current4 = _ref4.current,
      element = _ref$current4 === void 0 ? null : _ref$current4;
    if (element === null) {
      return;
    }
    var isPaused = element.paused;
    if (paused && !isPaused) {
      element.pause();
    } else if (!paused && isPaused) {
      element.play()["catch"](function (e) {
        if (onPlayError !== null) {
          onPlayError(e);
        }
      });
    }
  }, [paused, media, onPlayError]);
  useProgressSteps({
    currentTime: currentTime,
    duration: duration,
    disabled: paused,
    onStep: onProgressStep
  });
  var progress = currentTime !== null && duration > 0 ? currentTime / duration : 0;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$1$6.container, _defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement("audio", {
    key: url,
    ref: function ref(newRef) {
      _ref4.current = newRef;
      if (mediaRef !== null && isFunction(mediaRef)) {
        mediaRef(newRef);
      } else if (mediaRef !== null) {
        mediaRef.current = newRef;
      }
    },
    src: url,
    autoPlay: autoPlay,
    muted: muted,
    loop: loop,
    crossOrigin: "anonymous",
    preload: preload,
    onPlay: onPlay,
    onPause: onPause,
    onEnded: onEnded,
    onSeeked: onSeeked,
    onTimeUpdate: onTimeUpdate,
    onVolumeChange: onVolumeChange
  }), withWave ? /*#__PURE__*/React.createElement(AudioBars, {
    className: classNames([styles$1$6.wave, _defineProperty({}, styles$1$6.withAutoHeight, autoWaveHeight)]),
    progress: progress
    // {...waveProps}
    ,
    duration: duration,
    playing: !paused,
    seek: onWaveSeek,
    play: onWavePlay
  }) : null);
};
Audio.propTypes = propTypes$1$9;
Audio.defaultProps = defaultProps$1$9;
var Audio$1 = /*#__PURE__*/React.forwardRef(function (props, ref) {
  return /*#__PURE__*/React.createElement(Audio, Object.assign({
    mediaRef: ref
  }, props));
});

({
  currentTime: PropTypes$1.number,
  duration: PropTypes$1.number,
  playing: PropTypes$1.bool,
  sampleWidth: PropTypes$1.number,
  sampleMargin: PropTypes$1.number,
  minSampleHeight: PropTypes$1.number,
  backgroundColor: PropTypes.color,
  progressColor: PropTypes.color,
  audioLevels: PropTypes$1.arrayOf(PropTypes$1.number),
  className: PropTypes$1.string,
  onSeek: PropTypes$1.func,
  onResume: PropTypes$1.func,
  onReady: PropTypes$1.func
});

var styles$u = {"container":"micromag-element-closed-captions-container","captions":"micromag-element-closed-captions-captions"};

var propTypes$u = {
  media: PropTypes.closedCaptionsMedia,
  currentTime: PropTypes$1.number,
  // in seconds
  timeOffset: PropTypes$1.string,
  // in srt time format (10:00:01,034)
  textStyle: PropTypes.textStyle,
  boxStyle: PropTypes.boxStyle,
  className: PropTypes$1.string
};
var defaultProps$u = {
  media: null,
  currentTime: 0,
  timeOffset: null,
  textStyle: null,
  boxStyle: null,
  className: null
};
var ClosedCaptions = function ClosedCaptions(_ref) {
  var currentTime = _ref.currentTime,
    timeOffset = _ref.timeOffset,
    media = _ref.media,
    textStyle = _ref.textStyle,
    boxStyle = _ref.boxStyle,
    className = _ref.className;
  var _ref2 = media || {},
    _ref2$url = _ref2.url,
    url = _ref2$url === void 0 ? null : _ref2$url;
  var _useState = React.useState([]),
    _useState2 = _slicedToArray(_useState, 2),
    lines = _useState2[0],
    setLines = _useState2[1];
  var _useState3 = React.useState(-1),
    _useState4 = _slicedToArray(_useState3, 2),
    lineIndex = _useState4[0],
    setLineIndex = _useState4[1];
  var startOffset = timeOffset !== null ? timeOffset.split(/[\t ]*-->[\t ]*/) : null;
  var startSeconds = startOffset !== null && startOffset.length ? getSecondsFromTime$1(startOffset[0]) : 0;
  React.useEffect(function () {
    if (url === null) {
      return;
    }
    fetch$1(url, {
      mode: 'cors'
    }).then(function (response) {
      return response.text();
    }).then(function (srt) {
      return parseSRT(srt);
    }).then(function (parsed) {
      setLines(parsed);
    })["catch"](function (e) {
      console.error(e);
    });
  }, [url, fetch$1, setLines]);
  var getLineIndexFromTime = React.useCallback(function (t) {
    var currentLineIndex = lines.findIndex(function (line) {
      return t >= line.start - startSeconds && t <= line.end - startSeconds;
    });
    return currentLineIndex;
  }, [lines, startSeconds]);
  React.useEffect(function () {
    if (lines.length > 0) {
      var nextLineIndex = getLineIndexFromTime(currentTime);
      if (nextLineIndex !== lineIndex) {
        setLineIndex(nextLineIndex);
      }
    }
  }, [currentTime, lines, getLineIndexFromTime, setLineIndex]);
  var line = lineIndex !== -1 ? lines[lineIndex] : null;
  var active = line !== null;
  var finalBoxStyles = boxStyle !== null ? getStyleFromBox$1(boxStyle) : null;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$u.container, _defineProperty({}, className, className !== null)])
  }, active ? /*#__PURE__*/React.createElement("div", {
    className: styles$u.captions,
    style: finalBoxStyles
  }, /*#__PURE__*/React.createElement(Text$1, {
    textStyle: textStyle,
    body: line.text
  })) : null);
};
ClosedCaptions.propTypes = propTypes$u;
ClosedCaptions.defaultProps = defaultProps$u;
var ClosedCaptions$1 = ClosedCaptions;

var styles$t = {"container":"micromag-screen-audio-container","background":"micromag-screen-audio-background","disabled":"micromag-screen-audio-disabled","hidden":"micromag-screen-audio-hidden","placeholder":"micromag-screen-audio-placeholder","content":"micromag-screen-audio-content","empty":"micromag-screen-audio-empty","audio":"micromag-screen-audio-audio","bottom":"micromag-screen-audio-bottom","isPreview":"micromag-screen-audio-isPreview"};

var propTypes$t = {
  layout: PropTypes$1.oneOf(['middle']),
  audio: PropTypes.audioElement,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  mediaRef: PropTypes$1.func,
  showWave: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$t = {
  layout: 'middle',
  audio: null,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  mediaRef: null,
  showWave: true,
  className: null
};
var AudioScreen = function AudioScreen(_ref) {
  _ref.layout;
    var audio = _ref.audio,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    customMediaRef = _ref.mediaRef,
    showWave = _ref.showWave,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isPreview = _useScreenRenderConte.isPreview,
    isView = _useScreenRenderConte.isView,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var trackScreenMedia = useTrackScreenMedia('audio');
  var _useState = React.useState(isStatic || isPlaceholder),
    _useState2 = _slicedToArray(_useState, 2),
    ready = _useState2[0],
    setReady = _useState2[1];
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  // const transitionPlaying = current && ready;
  // const transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;

  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var hasAudio = audio !== null;
  var _ref2 = audio || {},
    _ref2$media = _ref2.media,
    audioMedia = _ref2$media === void 0 ? null : _ref2$media,
    _ref2$autoPlay = _ref2.autoPlay,
    autoPlay = _ref2$autoPlay === void 0 ? true : _ref2$autoPlay,
    _ref2$closedCaptions = _ref2.closedCaptions,
    closedCaptions = _ref2$closedCaptions === void 0 ? null : _ref2$closedCaptions,
    _ref2$captions = _ref2.captions,
    captions = _ref2$captions === void 0 ? null : _ref2$captions,
    _ref2$withWave = _ref2.withWave,
    withWave = _ref2$withWave === void 0 ? false : _ref2$withWave,
    _ref2$withControls = _ref2.withControls,
    withControls = _ref2$withControls === void 0 ? false : _ref2$withControls,
    _ref2$withSeekBar = _ref2.withSeekBar,
    withSeekBar = _ref2$withSeekBar === void 0 ? false : _ref2$withSeekBar,
    _ref2$color = _ref2.color,
    color = _ref2$color === void 0 ? null : _ref2$color,
    _ref2$progressColor = _ref2.progressColor,
    progressColor = _ref2$progressColor === void 0 ? null : _ref2$progressColor;
  var _ref3 = audioMedia || {},
    _ref3$url = _ref3.url,
    audioUrl = _ref3$url === void 0 ? null : _ref3$url;
  var hasAudioUrl = audioUrl !== null;
  var finalAudio = hasAudio ? _objectSpread$1(_objectSpread$1({}, audio), {}, {
    autoPlay: !isPreview && !isStatic && !isCapture && autoPlay && current
  }) : null;
  var hasClosedCaptions = closedCaptions !== null || captions !== null;
  var _usePlaybackContext = usePlaybackContext(),
    playing = _usePlaybackContext.playing,
    muted = _usePlaybackContext.muted,
    setControls = _usePlaybackContext.setControls,
    setControlsSuggestPlay = _usePlaybackContext.setControlsSuggestPlay,
    setControlsTheme = _usePlaybackContext.setControlsTheme,
    setPlaying = _usePlaybackContext.setPlaying;
  var mediaRef = usePlaybackMediaRef(current);
  React.useEffect(function () {
    if (!current) {
      return function () {};
    }
    if (withControls || withSeekBar) {
      setControls(true);
      setControlsTheme({
        seekBarOnly: withSeekBar,
        color: color,
        progressColor: progressColor
      });
    } else {
      setControls(false);
    }
    return function () {
      if (withControls || withSeekBar) {
        setControls(false);
      }
    };
  }, [current, withControls, withSeekBar, setControls, color, progressColor]);
  React.useEffect(function () {
    if (customMediaRef !== null) {
      customMediaRef(mediaRef.current);
    }
  }, [mediaRef.current]);
  var onAudioReady = React.useCallback(function () {
    setReady(true);
  }, [setReady]);
  var _useState3 = React.useState(null),
    _useState4 = _slicedToArray(_useState3, 2),
    currentTime = _useState4[0],
    setCurrentTime = _useState4[1];
  var _useState5 = React.useState(null),
    _useState6 = _slicedToArray(_useState5, 2),
    duration = _useState6[0],
    setDuration = _useState6[1];
  var isIOS = React.useMemo(function () {
    return isIos$1();
  }, [isIos$1]);
  React.useEffect(function () {
    if (current && autoPlay && !playing) {
      setPlaying(true);
    }
  }, [current, autoPlay]);
  var onTimeUpdate = React.useCallback(function (_ref4) {
    var _ref4$timeStamp = _ref4.timeStamp,
      timeStamp = _ref4$timeStamp === void 0 ? 0 : _ref4$timeStamp;
    setCurrentTime(timeStamp);
  }, [setCurrentTime, setDuration, duration]);
  var onProgressStep = React.useCallback(function (step) {
    trackScreenMedia(audio, "progress_".concat(Math.round(step * 100, 10), "%"));
  }, [trackScreenMedia, audio]);
  var onDurationChange = React.useCallback(function (dur) {
    setDuration(dur);
  }, [setDuration]);
  var onPlay = React.useCallback(function (_ref5) {
    var initial = _ref5.initial;
    trackScreenMedia(audio, initial ? 'play' : 'resume');
  }, [trackScreenMedia, audio]);
  var onPause = React.useCallback(function (_ref6) {
    var midway = _ref6.midway;
    trackScreenMedia(audio, midway ? 'pause' : 'ended');
  }, [trackScreenMedia, audio]);
  var onEnded = React.useCallback(function () {
    if (current) {
      setPlaying(false);
    }
  }, [current, setPlaying]);
  var onSeeked = React.useCallback(function (time) {
    if (time > 0) {
      trackScreenMedia(audio, 'seek');
    }
  }, [trackScreenMedia, audio]);
  var onPlayError = React.useCallback(function () {
    if (isView && playing && current && hasAudio && autoPlay) {
      setPlaying(false);
      setControlsSuggestPlay(true);
    }
  }, [isView, current, playing, hasAudio, autoPlay, setPlaying, setControlsSuggestPlay]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$t.container, _defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$t.placeholder, isPlaceholder), styles$t.isPreview, isPreview)]),
    "data-screen-ready": ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$t.content
  }, /*#__PURE__*/React.createElement(Layout$1, {
    fullscreen: true,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (hasHeader ? spacing / 2 : spacing)
    } : null
  }, hasHeader ? /*#__PURE__*/React.createElement(Header, header) : /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-top"
  }), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "audio",
    placeholder: "audio",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "MYZwSA",
      defaultMessage: [{
        "type": 0,
        "value": "Audio"
      }]
    }),
    emptyClassName: styles$t.empty,
    isEmpty: !hasAudioUrl
  }, /*#__PURE__*/React.createElement(Audio$1, Object.assign({}, finalAudio, {
    mediaRef: mediaRef,
    waveFake: isIOS || isPreview,
    waveProps: isPreview ? {
      sampleWidth: 10,
      sampleMargin: 5,
      minSampleHeight: 5,
      backgroundColor: color,
      progressColor: progressColor
    } : {
      backgroundColor: color,
      progressColor: progressColor
    },
    paused: !current || !playing,
    muted: muted,
    className: styles$t.audio,
    onReady: onAudioReady,
    onPlay: onPlay,
    onPause: onPause,
    onTimeUpdate: onTimeUpdate,
    onProgressStep: onProgressStep,
    onDurationChange: onDurationChange,
    onSeeked: onSeeked,
    onEnded: onEnded,
    onPlayError: onPlayError,
    withWave: showWave && withWave
  }))), /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-middle"
  }), !isPlaceholder ? /*#__PURE__*/React.createElement("div", {
    key: "bottom",
    className: styles$t.bottom,
    style: {
      transform: current && !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null,
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingBottom: spacing / 2,
      paddingTop: 0
    }
  }, hasClosedCaptions && !isPreview && !isCapture && !isStatic ? /*#__PURE__*/React.createElement(ClosedCaptions$1, Object.assign({
    className: styles$t.closedCaptions,
    media: closedCaptions
  }, captions, {
    currentTime: currentTime
  })) : null, hasFooter ? /*#__PURE__*/React.createElement(Footer, Object.assign({}, footerProps, {
    className: styles$t.callToAction
  })) : null) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    withoutVideo: isPreview,
    className: styles$t.background
  }) : null);
};
AudioScreen.propTypes = propTypes$t;
AudioScreen.defaultProps = defaultProps$t;
var AudioScreen$1 = AudioScreen;

// import * as transforms from './transforms/index';

var definition$m = {
  id: 'audio',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "+9akmg",
      defaultMessage: [{
        "type": 0,
        "value": "Audio and Video"
      }]
    }),
    order: 5
  },
  title: reactIntl.defineMessage({
    id: "bhEaUt",
    defaultMessage: [{
      "type": 0,
      "value": "Audio"
    }]
  }),
  component: AudioScreen$1,
  layouts: ['middle'],
  // transforms,
  fields: [{
    name: 'audio',
    type: 'audio-element',
    theme: {
      color: 'primary'
    },
    defaultValue: {
      autoPlay: true
    },
    label: reactIntl.defineMessage({
      id: "169xnt",
      defaultMessage: [{
        "type": 0,
        "value": "Audio"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var Base = /*#__PURE__*/function () {
  function Base() {
    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, Base);
    this.options = _objectSpread$1(_objectSpread$1({
      routes: {}
    }, opts), {}, {
      baseUrl: opts.baseUrl || 'https://micromag.ca/api'
    });
  }
  _createClass(Base, [{
    key: "requestGet",
    value: function requestGet(path) {
      var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var queryString$1 = query !== null ? queryString.stringify(query, {
        arrayFormat: 'bracket'
      }) : null;
      return getJSON$1("".concat(this.getFullUrl(path)).concat(queryString$1 !== null && queryString$1.length > 0 ? "?".concat(queryString$1) : ''), {
        credentials: 'include',
        headers: getCSRFHeaders()
      });
    }
  }, {
    key: "requestPost",
    value: function requestPost(path, data) {
      return postJSON$1(this.getFullUrl(path), data, {
        credentials: 'include',
        headers: getCSRFHeaders()
      });
    }
  }, {
    key: "requestPut",
    value: function requestPut(path, data) {
      return postJSON$1(this.getFullUrl(path), _objectSpread$1({
        _method: 'PUT'
      }, data), {
        credentials: 'include',
        headers: getCSRFHeaders()
      });
    }
  }, {
    key: "requestDelete",
    value: function requestDelete(path) {
      return this.requestPost(path, {
        _method: 'DELETE'
      });
    }
  }, {
    key: "route",
    value: function route(_route, params) {
      var routes = this.options.routes;
      return generatePath(routes[_route] || _route, params);
    }
  }, {
    key: "getFullUrl",
    value: function getFullUrl(path) {
      var baseUrl = this.options.baseUrl;
      return "".concat(baseUrl.replace(/\/$/, ''), "/").concat(path.replace(/^\//, ''));
    }
  }]);
  return Base;
}();
var Base$1 = Base;

var ContributionsApi = /*#__PURE__*/function (_Base) {
  _inherits(ContributionsApi, _Base);
  function ContributionsApi() {
    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, ContributionsApi);
    return _callSuper(this, ContributionsApi, [_objectSpread$1(_objectSpread$1({}, opts), {}, {
      routes: _objectSpread$1({
        index: '/contributions/:screen',
        store: '/contributions',
        update: '/contributions/:contribution',
        "delete": '/contributions/:contribution'
      }, opts.routes || null)
    })]);
  }
  _createClass(ContributionsApi, [{
    key: "get",
    value: function get(id) {
      var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var page = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      var count = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10;
      var finalQuery = _objectSpread$1({}, query);
      if (page !== null) {
        finalQuery.page = page;
      }
      if (count !== null) {
        finalQuery.count = count;
      }
      return this.requestGet(this.route('index', {
        screen: id
      }), finalQuery);
    }
  }, {
    key: "create",
    value: function create(data) {
      return this.requestPost(this.route('store'), data);
    }
  }]);
  return ContributionsApi;
}(Base$1);

var MediasApi = /*#__PURE__*/function (_Base) {
  _inherits(MediasApi, _Base);
  function MediasApi() {
    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, MediasApi);
    return _callSuper(this, MediasApi, [_objectSpread$1(_objectSpread$1({}, opts), {}, {
      routes: _objectSpread$1({
        index: 'medias',
        tags: 'medias/tags',
        authors: 'medias/authors',
        requestDelete: 'medias/requestDelete/:media',
        show: 'medias/:media',
        store: 'medias',
        update: 'medias/:media',
        "delete": 'medias/:media'
      }, opts.routes || null)
    })]);
  }
  _createClass(MediasApi, [{
    key: "find",
    value: function find(id) {
      return this.requestGet(this.route('show', {
        media: id
      }));
    }
  }, {
    key: "get",
    value: function get() {
      var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      var count = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;
      var finalQuery = _objectSpread$1({}, query);
      if (page !== null) {
        finalQuery.page = page;
      }
      if (count !== null) {
        finalQuery.count = count;
      }
      return this.requestGet(this.route('index'), finalQuery);
    }
  }, {
    key: "getTags",
    value: function getTags() {
      var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;
      var finalQuery = _objectSpread$1({}, query);
      if (count !== null) {
        finalQuery.count = count;
      }
      return this.requestGet(this.route('tags'), finalQuery);
    }
  }, {
    key: "getAuthors",
    value: function getAuthors() {
      var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;
      var finalQuery = _objectSpread$1({}, query);
      if (count !== null) {
        finalQuery.count = count;
      }
      return this.requestGet(this.route('authors'), finalQuery);
    }
  }, {
    key: "create",
    value: function create(data) {
      return this.requestPost(this.route('store'), data);
    }
  }, {
    key: "update",
    value: function update(id, data) {
      return this.requestPut(this.route('update', {
        media: id
      }), data);
    }
  }, {
    key: "requestDeleteMedia",
    value: function requestDeleteMedia(id) {
      return this.requestPost(this.route('requestDelete', {
        media: id
      }));
    }
  }, {
    key: "delete",
    value: function _delete(id) {
      return this.requestDelete(this.route('delete', {
        media: id
      }));
    }
  }]);
  return MediasApi;
}(Base$1);

var QuizApi = /*#__PURE__*/function (_Base) {
  _inherits(QuizApi, _Base);
  function QuizApi() {
    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, QuizApi);
    return _callSuper(this, QuizApi, [_objectSpread$1(_objectSpread$1({}, opts), {}, {
      routes: _objectSpread$1({
        results: '/quiz/:screen',
        store: '/quiz',
        update: '/quiz/:quiz',
        "delete": '/quiz/:quiz'
      }, opts.routes || null)
    })]);
  }
  _createClass(QuizApi, [{
    key: "results",
    value: function results(screenId) {
      return this.requestGet(this.route('results', {
        screen: screenId
      }));
    }
  }, {
    key: "create",
    value: function create(data) {
      return this.requestPost(this.route('store'), data);
    }
  }]);
  return QuizApi;
}(Base$1);

var Api = /*#__PURE__*/function (_Base) {
  _inherits(Api, _Base);
  function Api() {
    var _this;
    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, Api);
    _this = _callSuper(this, Api, [opts]);
    _this.medias = new MediasApi(opts);
    _this.contributions = new ContributionsApi(opts);
    _this.quiz = new QuizApi(opts);
    return _this;
  }
  return _createClass(Api);
}(Base$1);
var Api$1 = Api;

/* eslint-disable react/jsx-props-no-spreading */
var ApiContext = /*#__PURE__*/React.createContext(null);
var useApi = function useApi() {
  return React.useContext(ApiContext);
};
({
  api: PropTypes$1.instanceOf(Api$1),
  baseUrl: PropTypes$1.string,
  children: PropTypes$1.node.isRequired
});

var useContributionCreate = function useContributionCreate() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    screenId = _ref.screenId,
    _ref$onSuccess = _ref.onSuccess,
    onSuccess = _ref$onSuccess === void 0 ? null : _ref$onSuccess;
  var api = useApi();
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    creating = _useState2[0],
    setCreating = _useState2[1];
  var create = React.useCallback(function (data) {
    if (api === null) {
      return null;
    }
    setCreating(true);
    return api.contributions.create(_objectSpread$1({
      screen_id: screenId
    }, data)).then(function (response) {
      setCreating(false);
      if (onSuccess !== null) {
        onSuccess(response);
      }
      return response;
    });
  }, [api, setCreating, onSuccess, screenId]);
  return {
    create: create,
    creating: creating
  };
};
var useContributionCreate$1 = useContributionCreate;

var useData = function useData(loadData) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$initialData = _ref.initialData,
    initialData = _ref$initialData === void 0 ? null : _ref$initialData,
    _ref$autoload = _ref.autoload,
    autoload = _ref$autoload === void 0 ? true : _ref$autoload;
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    loading = _useState2[0],
    setLoading = _useState2[1];
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    error = _useState4[0],
    setError = _useState4[1];
  var _useState5 = React.useState(initialData),
    _useState6 = _slicedToArray(_useState5, 2),
    data = _useState6[0],
    setData = _useState6[1];
  var load = React.useCallback(function () {
    var canceled = false;
    setLoading(true);
    var promise = loadData.apply(void 0, arguments).then(function (newData) {
      if (!canceled) {
        setData(newData);
        setLoading(false);
      }
      return newData;
    })["catch"](function (newError) {
      setError(newError);
      setLoading(false);
    });
    promise.cancel = function () {
      canceled = true;
      setLoading(false);
    };
    return promise;
  }, [loadData, setLoading, setData]);
  React.useEffect(function () {
    var loader = null;
    if (autoload) {
      loader = load();
    }
    return function () {
      if (loader !== null) {
        loader.cancel();
      }
    };
  }, [autoload, load]);
  return {
    data: data,
    load: load,
    loading: loading,
    error: error
  };
};
var useData$1 = useData;

var _excluded$3$1 = ["data"];
var useContributions = function useContributions() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    screenId = _ref.screenId,
    _ref$opts = _ref.opts,
    opts = _ref$opts === void 0 ? {} : _ref$opts;
  var api = useApi();
  var _useState = React.useState(_toConsumableArray(new Array(10)).map(function (el, i) {
      return {
        name: "Nom ".concat(i + 1),
        message: "Message ".concat(i + 1)
      };
    })),
    _useState2 = _slicedToArray(_useState, 1),
    defaultContributions = _useState2[0];
  var loader = React.useCallback(function () {
    return api !== null ? api.contributions.get(screenId) : null;
  }, [api, screenId]);
  var _ref2 = api !== null ? useData$1(loader, opts) : {
      data: null
    },
    data = _ref2.data,
    request = _objectWithoutProperties(_ref2, _excluded$3$1);
  return _objectSpread$1({
    contributions: data || defaultContributions
  }, request);
};
var useContributions$1 = useContributions;

var _excluded$4 = ["data"];
var useQuiz = function useQuiz() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    screenId = _ref.screenId,
    _ref$opts = _ref.opts,
    opts = _ref$opts === void 0 ? {} : _ref$opts;
  var api = useApi();
  var loader = React.useCallback(function () {
    return api !== null ? api.quiz.results(screenId) : null;
  }, [api, screenId]);
  var _ref2 = api !== null ? useData$1(loader, opts) : {
      data: null
    },
    data = _ref2.data,
    request = _objectWithoutProperties(_ref2, _excluded$4);
  return _objectSpread$1({
    quiz: data || []
  }, request);
};
var useQuiz$1 = useQuiz;

var useQuizCreate = function useQuizCreate() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    screenId = _ref.screenId,
    _ref$visitorId = _ref.visitorId,
    providedVisitorId = _ref$visitorId === void 0 ? null : _ref$visitorId,
    _ref$storyId = _ref.storyId,
    providedStoryId = _ref$storyId === void 0 ? null : _ref$storyId,
    _ref$onSuccess = _ref.onSuccess,
    onSuccess = _ref$onSuccess === void 0 ? null : _ref$onSuccess;
  var api = useApi();
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    creating = _useState2[0],
    setCreating = _useState2[1];
  var _ref2 = useVisitor() || {},
    visitorId = _ref2.id;
  var _ref3 = useStory() || {},
    storyId = _ref3.id;
  var create = React.useCallback(function (data) {
    if (api === null) {
      return null;
    }
    setCreating(true);
    return api.quiz.create(_objectSpread$1({
      screen_id: screenId,
      visitor_id: providedVisitorId || visitorId,
      story_id: providedStoryId || storyId
    }, data)).then(function (response) {
      setCreating(false);
      if (onSuccess !== null) {
        onSuccess(response);
      }
      return response;
    });
  }, [api, setCreating, onSuccess, screenId, visitorId, storyId, providedVisitorId, providedStoryId]);
  return {
    create: create,
    creating: creating
  };
};
var useQuizCreate$1 = useQuizCreate;

/* eslint-disable react/jsx-props-no-spreading */
({
  api: PropTypes$1.instanceOf(Api$1),
  apiBaseUrl: PropTypes$1.string,
  children: PropTypes$1.node
});

var styles$s = {"container":"micromag-element-text-input-container","element":"micromag-element-text-input-element"};

var propTypes$s = {
  label: PropTypes$1.string,
  labelOutside: PropTypes$1.bool,
  labelClassName: PropTypes$1.string,
  textStyle: PropTypes.textStyle,
  buttonStyle: PropTypes.boxStyle,
  labelOutsideStyle: PropTypes.textStyle,
  margin: PropTypes.margin,
  multiline: PropTypes$1.bool,
  value: PropTypes$1.string,
  onChange: PropTypes$1.func,
  onFocus: PropTypes$1.func,
  onBlur: PropTypes$1.func,
  required: PropTypes$1.bool,
  disabled: PropTypes$1.bool,
  focusable: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$s = {
  label: null,
  labelOutside: false,
  labelClassName: null,
  textStyle: null,
  buttonStyle: null,
  labelOutsideStyle: null,
  margin: null,
  multiline: false,
  value: '',
  onChange: null,
  onFocus: null,
  onBlur: null,
  required: false,
  disabled: false,
  focusable: true,
  className: null
};
var TextInput = function TextInput(_ref) {
  var label = _ref.label,
    labelOutside = _ref.labelOutside,
    labelClassName = _ref.labelClassName,
    textStyle = _ref.textStyle,
    buttonStyle = _ref.buttonStyle,
    labelOutsideStyle = _ref.labelOutsideStyle,
    margin = _ref.margin,
    multiline = _ref.multiline,
    value = _ref.value,
    onChange = _ref.onChange,
    onFocus = _ref.onFocus,
    onBlur = _ref.onBlur,
    required = _ref.required,
    disabled = _ref.disabled,
    focusable = _ref.focusable,
    className = _ref.className;
  var containerStyle = {};
  var labelStyle = {};
  var elementStyle = {};
  if (margin !== null) {
    containerStyle = _objectSpread$1(_objectSpread$1({}, containerStyle), getStyleFromMargin$1(margin));
  }
  if (labelOutsideStyle !== null) {
    labelStyle = _objectSpread$1(_objectSpread$1({}, labelStyle), getStyleFromText$1(labelOutsideStyle));
  }
  if (textStyle !== null) {
    elementStyle = _objectSpread$1(_objectSpread$1({}, elementStyle), getStyleFromText$1(textStyle));
  }
  if (buttonStyle !== null) {
    elementStyle = _objectSpread$1(_objectSpread$1({}, elementStyle), getStyleFromBox$1(buttonStyle));
  }
  var containerProps = {
    className: classNames([styles$s.container, _defineProperty(_defineProperty({}, className, className !== null), styles$s.element, !labelOutside)]),
    style: containerStyle
  };
  var elementProps = _objectSpread$1(_objectSpread$1({
    className: styles$s.element
  }, !labelOutside ? containerProps : null), {}, {
    style: elementStyle,
    placeholder: !labelOutside ? label : undefined,
    value: value,
    onChange: onChange,
    onFocus: onFocus,
    onBlur: onBlur,
    required: required,
    disabled: disabled
  });
  var element = multiline ? /*#__PURE__*/React.createElement("textarea", Object.assign({}, elementProps, {
    tabIndex: focusable ? '0' : '-1'
  })) : /*#__PURE__*/React.createElement("input", Object.assign({}, elementProps, {
    type: "text",
    tabIndex: focusable ? '0' : '-1'
  }));
  return !labelOutside ? element : /*#__PURE__*/React.createElement("label", containerProps, /*#__PURE__*/React.createElement("div", {
    className: labelClassName,
    style: labelStyle
  }, label), element);
};
TextInput.propTypes = propTypes$s;
TextInput.defaultProps = defaultProps$s;
var TextInput$1 = TextInput;

var styles$r = {"container":"micromag-screen-contribution-container","inner":"micromag-screen-contribution-inner","background":"micromag-screen-contribution-background","buttonSubmit":"micromag-screen-contribution-buttonSubmit","focus-visible":"micromag-screen-contribution-focus-visible","content":"micromag-screen-contribution-content","header":"micromag-screen-contribution-header","emptyTitle":"micromag-screen-contribution-emptyTitle","emptyInputName":"micromag-screen-contribution-emptyInputName","emptyInputMessage":"micromag-screen-contribution-emptyInputMessage","emptySubmit":"micromag-screen-contribution-emptySubmit","title":"micromag-screen-contribution-title","interactiveContainer":"micromag-screen-contribution-interactiveContainer","form":"micromag-screen-contribution-form","inputName":"micromag-screen-contribution-inputName","inputMessage":"micromag-screen-contribution-inputMessage","formContent":"micromag-screen-contribution-formContent","formLoading":"micromag-screen-contribution-formLoading","rotate":"micromag-screen-contribution-rotate","loadingIcon":"micromag-screen-contribution-loadingIcon","contributionsContainer":"micromag-screen-contribution-contributionsContainer","contributionsContent":"micromag-screen-contribution-contributionsContent","contributions":"micromag-screen-contribution-contributions","contribution":"micromag-screen-contribution-contribution","footer":"micromag-screen-contribution-footer","disabled":"micromag-screen-contribution-disabled","submitting":"micromag-screen-contribution-submitting","submitted":"micromag-screen-contribution-submitted","showContributions":"micromag-screen-contribution-showContributions","isPlaceholder":"micromag-screen-contribution-isPlaceholder"};

var propTypes$r = {
  id: PropTypes$1.string,
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom']),
  title: PropTypes.headingElement,
  name: PropTypes.inputElement,
  message: PropTypes.inputElement,
  submit: PropTypes.textElement,
  nameStyle: PropTypes.textStyle,
  messageStyle: PropTypes.textStyle,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  transitions: PropTypes.transitions,
  transitionStagger: PropTypes$1.number,
  resizeTransitionDuration: PropTypes$1.number,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$r = {
  id: null,
  layout: 'middle',
  title: null,
  name: null,
  message: null,
  submit: null,
  nameStyle: null,
  messageStyle: null,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  transitions: null,
  transitionStagger: 100,
  resizeTransitionDuration: 750,
  type: null,
  className: null
};
var ContributionScreen = function ContributionScreen(_ref) {
  var id = _ref.id,
    layout = _ref.layout,
    title = _ref.title,
    name = _ref.name,
    message = _ref.message,
    submit = _ref.submit,
    nameStyle = _ref.nameStyle,
    messageStyle = _ref.messageStyle,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    transitions = _ref.transitions,
    transitionStagger = _ref.transitionStagger,
    resizeTransitionDuration = _ref.resizeTransitionDuration,
    type = _ref.type,
    className = _ref.className;
  var screenId = id || 'screen-id';
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var transitionPlaying = current;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var hasTitle = isTextFilled$1(title);
  var hasNameLabel = isTextFilled$3(name);
  var hasMessageLabel = isTextFilled$3(message);
  var hasSubmit = isTextFilled$1(submit);
  var contributionsRef = React.useRef(null);
  var formRef = React.useRef(null);
  var _useState = React.useState(null),
    _useState2 = _slicedToArray(_useState, 2),
    interactiveContainerHeight = _useState2[0],
    setInteractiveContainerHeight = _useState2[1];
  var _useState3 = React.useState(''),
    _useState4 = _slicedToArray(_useState3, 2),
    userName = _useState4[0],
    setUserName = _useState4[1];
  var _useState5 = React.useState(''),
    _useState6 = _slicedToArray(_useState5, 2),
    userMessage = _useState6[0],
    setUserMessage = _useState6[1];

  // 0 = default, 1 = submitting, 2 = submitted, 3 = resizing, 4 = done
  var _useState7 = React.useState(isStatic || isCapture ? 4 : 0),
    _useState8 = _slicedToArray(_useState7, 2),
    submitState = _useState8[0],
    setSubmitState = _useState8[1];
  var onContributionSubmitted = React.useCallback(function () {
    setSubmitState(2);
    trackScreenEvent('submit_success', "".concat(userName, ": ").concat(userMessage));
  }, [setSubmitState, trackScreenEvent, userName, userMessage]);
  var _useContributionCreat = useContributionCreate$1({
      screenId: screenId
    }),
    submitContribution = _useContributionCreat.create;
  var _useContributions = useContributions$1({
      screenId: screenId,
      opts: {
        autoload: !isPlaceholder
      }
    }),
    contributions = _useContributions.contributions;
  var onNameChange = React.useCallback(function (e) {
    setUserName(e.currentTarget.value);
  }, [setUserName]);
  var onMessageChange = React.useCallback(function (e) {
    setUserMessage(e.currentTarget.value);
  }, [setUserMessage]);
  var nameFilled = React.useRef(false);
  var onNameBlur = React.useCallback(function (e) {
    if (!nameFilled.current && e.currentTarget.value.length > 0) {
      nameFilled.current = true;
      trackScreenEvent('input_filled', 'Name', {
        userName: e.currentTarget.value,
        userMessage: userMessage
      });
    }
  }, [trackScreenEvent, userMessage]);
  var messageFilled = React.useRef(false);
  var onMessageBlur = React.useCallback(function (e) {
    if (!messageFilled.current && e.currentTarget.value.length > 0) {
      messageFilled.current = true;
      trackScreenEvent('input_filled', 'Message', {
        userName: userName,
        userMessage: e.currentTarget.value
      });
    }
  }, [trackScreenEvent, userName]);

  // Call to Action
  var _useState9 = React.useState(false),
    _useState10 = _slicedToArray(_useState9, 2),
    scrolledBottom = _useState10[0],
    setScrolledBottom = _useState10[1];
  var swipeUpLinkActive = scrolledBottom && submitState === 4;
  var _useDimensionObserver = useDimensionObserver(),
    footerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    callToActionHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var onScrolledBottom = React.useCallback(function (_ref2) {
    var initial = _ref2.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Contributions list');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent, setScrolledBottom]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  var onSubmit = React.useCallback(function (e) {
    e.preventDefault();
    if (submitState === 0) {
      setInteractiveContainerHeight(formRef.current.offsetHeight);
      setSubmitState(1);
      submitContribution({
        name: userName,
        message: userMessage
      });
      onContributionSubmitted();
      trackScreenEvent('click_submit', "".concat(userName, ": ").concat(userMessage), {
        userName: userName,
        userMessage: userMessage
      });
    }
  }, [submitState, setSubmitState, userName, userMessage, trackScreenEvent, onContributionSubmitted]);
  React.useEffect(function () {
    var timeout = null;
    if (submitState === 2) {
      timeout = setTimeout(setSubmitState, resizeTransitionDuration, 4);
      setInteractiveContainerHeight(contributionsRef.current.offsetHeight);
      setSubmitState(3);
    }
    return function () {
      if (submitState === 3 && timeout !== null) {
        clearTimeout(timeout);
      }
    };
  }, [submitState, setInteractiveContainerHeight, setSubmitState, resizeTransitionDuration]);

  // Title

  var items = [/*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    placeholderProps: {
      height: '0.75em'
    },
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "2ZOPe+",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$r.emptyTitle,
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({}, title, {
    className: styles$r.title
  })) : null)];
  var allContributions = [].concat(_toConsumableArray(userName !== null && userMessage !== null ? [{
    name: userName,
    message: userMessage
  }] : []), _toConsumableArray(contributions || []));

  // Form

  items.push( /*#__PURE__*/React.createElement("div", {
    key: "form",
    className: styles$r.interactiveContainer,
    style: {
      height: submitState < 4 ? interactiveContainerHeight : null,
      transitionDuration: "".concat(resizeTransitionDuration, "ms")
    }
  }, /*#__PURE__*/React.createElement("form", {
    className: styles$r.form,
    onSubmit: onSubmit,
    ref: formRef
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$r.formContent
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "inputText",
    placeholderProps: {
      height: '0.25em'
    },
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "G/ITGY",
      defaultMessage: [{
        "type": 0,
        "value": "Your name"
      }]
    }),
    emptyClassName: styles$r.emptyInputName,
    isEmpty: !hasNameLabel
  }, /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    delay: transitionStagger,
    disabled: transitionDisabled
  }, /*#__PURE__*/React.createElement(TextInput$1, Object.assign({
    className: styles$r.inputName
  }, name, {
    value: userName,
    onChange: function onChange(e) {
      return onNameChange(e);
    },
    onBlur: function onBlur(e) {
      return onNameBlur(e);
    },
    focusable: current && isView,
    disabled: isPreview,
    required: true
  })))), /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "inputText",
    placeholderProps: {
      height: '0.75em'
    },
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "JAguka",
      defaultMessage: [{
        "type": 0,
        "value": "Your message"
      }]
    }),
    emptyClassName: styles$r.emptyInputMessage,
    isEmpty: !hasMessageLabel
  }, /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    delay: transitionStagger * 2,
    disabled: transitionDisabled
  }, /*#__PURE__*/React.createElement(TextInput$1, Object.assign({
    className: styles$r.inputMessage
  }, message, {
    value: userMessage,
    onChange: function onChange(e) {
      return onMessageChange(e);
    },
    onBlur: function onBlur(e) {
      return onMessageBlur(e);
    },
    disabled: isPreview,
    focusable: current && isView,
    multiline: true,
    required: true
  })))), /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "button",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "5uH4x7",
      defaultMessage: [{
        "type": 0,
        "value": "Submit"
      }]
    }),
    emptyClassName: styles$r.emptySubmit,
    isEmpty: !hasSubmit
  }, /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    delay: transitionStagger * 3,
    disabled: transitionDisabled
  }, /*#__PURE__*/React.createElement(Button$1, {
    type: "submit",
    className: styles$r.buttonSubmit,
    disabled: isPreview,
    buttonStyle: submit !== null ? submit.buttonStyle : null,
    focusable: current && isView
  }, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, submit, {
    inline: true
  })))))), /*#__PURE__*/React.createElement("div", {
    className: styles$r.formLoading
  }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
    className: styles$r.loadingIcon,
    icon: faSpinner.faSpinner
  }))), /*#__PURE__*/React.createElement("div", {
    className: styles$r.contributionsContainer,
    "aria-hidden": submitState === 4 ? null : 'true'
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$r.contributionsContent
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$r.contributions,
    ref: contributionsRef
  }, allContributions.map(function (contribution, contributionIndex) {
    var nameInnerStyle = nameStyle !== null ? nameStyle.style || null : null;
    var messageInnerStyle = messageStyle !== null ? messageStyle.style || null : null;
    return /*#__PURE__*/React.createElement("div", {
      key: "contribution-".concat(contributionIndex),
      className: styles$r.contribution,
      style: nameInnerStyle !== null ? getStyleFromColor$1(nameInnerStyle.color, 'borderColor') : null
    }, /*#__PURE__*/React.createElement(Heading$1, {
      className: styles$r.contributionName,
      body: contribution.name,
      size: 2,
      textStyle: nameInnerStyle
    }), /*#__PURE__*/React.createElement(Text$1, {
      className: styles$r.contributionMessage,
      body: contribution.message,
      textStyle: messageInnerStyle
    }));
  })))), hasFooter ? /*#__PURE__*/React.createElement("div", {
    style: {
      height: callToActionHeight
    }
  }) : null));
  var headerElement = !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    className: styles$r.header,
    style: {
      paddingBottom: spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null;
  var headerInScroll = submitState >= 4;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$r.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$r.isPlaceholder, isPlaceholder), styles$r.submitting, submitState === 1), styles$r.submitted, submitState > 1), styles$r.showContributions, submitState === 4)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$r.content
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$r.inner,
    style: !isPlaceholder ? {
      paddingLeft: spacing,
      paddingRight: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (hasHeader ? spacing / 2 : spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + spacing
    } : null
  }, !headerInScroll ? headerElement : null, /*#__PURE__*/React.createElement(Scroll$1, {
    verticalAlign: layout,
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    withShadow: true
  }, headerInScroll ? headerElement : null, items), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    ref: footerRef,
    className: classNames([styles$r.footer, _defineProperty({}, styles$r.disabled, !swipeUpLinkActive)]),
    style: {
      paddingLeft: Math.max(viewerBottomSidesWidth, spacing / 2),
      paddingRight: Math.max(viewerBottomSidesWidth, spacing / 2),
      paddingTop: 0,
      paddingBottom: (!isPreview ? viewerBottomHeight : 0) + spacing / 2
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$r.background
  }) : null);
};
ContributionScreen.propTypes = propTypes$r;
ContributionScreen.defaultProps = defaultProps$r;
var ContributionScreen$1 = ContributionScreen;

var definition$l = {
  id: 'contribution',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "ZiWlL6",
      defaultMessage: [{
        "type": 0,
        "value": "Questions"
      }]
    }),
    order: 7
  },
  title: reactIntl.defineMessage({
    id: "g6b9Lg",
    defaultMessage: [{
      "type": 0,
      "value": "Contribution"
    }]
  }),
  component: ContributionScreen$1,
  layouts: ['top', 'middle', 'bottom'],
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'name',
    type: 'input-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "nXVNeg",
      defaultMessage: [{
        "type": 0,
        "value": "Name"
      }]
    })
  }, {
    name: 'message',
    type: 'input-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "RcLsua",
      defaultMessage: [{
        "type": 0,
        "value": "Message"
      }]
    })
  }, {
    name: 'submit',
    type: 'button-element',
    theme: {
      textStyle: 'button'
    },
    label: reactIntl.defineMessage({
      id: "uAKPQ9",
      defaultMessage: [{
        "type": 0,
        "value": "Submit"
      }]
    })
  }, {
    name: 'nameStyle',
    type: 'item-text-style',
    theme: {
      style: {
        textStyle: 'heading2'
      }
    },
    label: reactIntl.defineMessage({
      id: "SyMSDa",
      defaultMessage: [{
        "type": 0,
        "value": "Published name style"
      }]
    })
  }, {
    name: 'messageStyle',
    type: 'item-text-style',
    theme: {
      style: {
        textStyle: 'text'
      }
    },
    label: reactIntl.defineMessage({
      id: "+SlKOi",
      defaultMessage: [{
        "type": 0,
        "value": "Published message style"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var styles$q = {"container":"micromag-screen-conversation-container","background":"micromag-screen-conversation-background","disabled":"micromag-screen-conversation-disabled","hidden":"micromag-screen-conversation-hidden","placeholder":"micromag-screen-conversation-placeholder","content":"micromag-screen-conversation-content","conversationHeader":"micromag-screen-conversation-conversationHeader","empty":"micromag-screen-conversation-empty","title":"micromag-screen-conversation-title","footer":"micromag-screen-conversation-footer","layout":"micromag-screen-conversation-layout","messageContainer":"micromag-screen-conversation-messageContainer","message":"micromag-screen-conversation-message","normalLeft":"micromag-screen-conversation-normalLeft","inBetweenLeft":"micromag-screen-conversation-inBetweenLeft","normalRight":"micromag-screen-conversation-normalRight","inBetweenRight":"micromag-screen-conversation-inBetweenRight","last":"micromag-screen-conversation-last","speakerDetails":"micromag-screen-conversation-speakerDetails","right":"micromag-screen-conversation-right","avatarContainer":"micromag-screen-conversation-avatarContainer","avatar":"micromag-screen-conversation-avatar","imageContainer":"micromag-screen-conversation-imageContainer","withAnimation":"micromag-screen-conversation-withAnimation","appear":"micromag-screen-conversation-appear","loadingContainer":"micromag-screen-conversation-loadingContainer","loading":"micromag-screen-conversation-loading","dot":"micromag-screen-conversation-dot","bounce":"micromag-screen-conversation-bounce","loadingSpeakerName":"micromag-screen-conversation-loadingSpeakerName","audioMessageContainer":"micromag-screen-conversation-audioMessageContainer","playButtonContainer":"micromag-screen-conversation-playButtonContainer","audioMessage":"micromag-screen-conversation-audioMessage","audioAttachment":"micromag-screen-conversation-audioAttachment","beforeText":"micromag-screen-conversation-beforeText","afterText":"micromag-screen-conversation-afterText"};

var propTypes$2$7 = {
  audio: PropTypes.audioMedia,
  audioEventsChannelName: PropTypes$1.string,
  messageId: PropTypes$1.string,
  nextAudioMessageId: PropTypes$1.string
};
var defaultProps$2$7 = {
  audio: null,
  audioEventsChannelName: null,
  messageId: null,
  nextAudioMessageId: null
};
var ConversationAudioAttachment = function ConversationAudioAttachment(_ref) {
  var audio = _ref.audio,
    audioEventsChannelName = _ref.audioEventsChannelName,
    messageId = _ref.messageId,
    nextAudioMessageId = _ref.nextAudioMessageId;
  var _useState = React.useState(true),
    _useState2 = _slicedToArray(_useState, 2),
    paused = _useState2[0],
    setPaused = _useState2[1];
  var audioEventsChannel = React.useMemo(function () {
    return new BroadcastChannel(audioEventsChannelName);
  }, [audioEventsChannelName]);
  React.useEffect(function () {
    var onMessage = function onMessage(message) {
      var _message$data = message.data,
        type = _message$data.type,
        id = _message$data.id;
      switch (type) {
        case 'play':
          {
            setPaused(id !== messageId);
          }
      }
    };
    audioEventsChannel.addEventListener("message", onMessage);
    return function () {
      return audioEventsChannel.removeEventListener("message", onMessage);
    };
  }, [audioEventsChannel]);
  var togglePaused = function togglePaused() {
    if (paused) {
      setPaused(false);
      audioEventsChannel.postMessage({
        type: 'play',
        id: messageId
      });
    } else {
      setPaused(true);
    }
  };
  var onAudioEnded = function onAudioEnded() {
    if (nextAudioMessageId) {
      audioEventsChannel.postMessage({
        type: 'play',
        id: nextAudioMessageId
      });
    }
    setPaused(true);
  };
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$q.audioMessageContainer])
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$q.playButtonContainer
  }, /*#__PURE__*/React.createElement(Button$3, {
    onClick: togglePaused,
    icon: paused ? /*#__PURE__*/React.createElement(PlayIcon$1, null) : /*#__PURE__*/React.createElement(PauseIcon$1, null)
  })), /*#__PURE__*/React.createElement(Audio$1, {
    withWave: true,
    autoWaveHeight: true,
    className: styles$q.audioMessage,
    media: audio,
    paused: paused,
    updateInterval: 100,
    onEnded: onAudioEnded
  }));
};
ConversationAudioAttachment.propTypes = propTypes$2$7;
ConversationAudioAttachment.defaultProps = defaultProps$2$7;
var ConversationAudioAttachment$1 = ConversationAudioAttachment;

var propTypes$1$8 = {
  message: PropTypes.conversationMessage,
  messageId: PropTypes$1.string,
  previousMessage: PropTypes.conversationMessage,
  nextMessage: PropTypes.conversationMessage,
  nextAudioMessageId: PropTypes$1.string,
  nextMessageState: PropTypes$1.bool,
  currentSpeaker: PropTypes.speaker,
  // state: PropTypes.oneOf(['pause', 'typing', 'send']),
  conversationTiming: PropTypes$1.number,
  typingTiming: PropTypes$1.number,
  onChange: PropTypes$1.func,
  withAnimation: PropTypes$1.bool,
  active: PropTypes$1.bool,
  isPlaying: PropTypes$1.bool,
  speakerStyle: PropTypes.textStyle,
  messageStyle: PropTypes.textStyle,
  className: PropTypes$1.string,
  audioEventsChannelName: PropTypes$1.string
};
var defaultProps$1$8 = {
  message: null,
  messageId: null,
  previousMessage: null,
  nextMessage: null,
  nextAudioMessageId: null,
  nextMessageState: null,
  currentSpeaker: null,
  conversationTiming: null,
  typingTiming: null,
  onChange: null,
  withAnimation: false,
  active: false,
  isPlaying: false,
  messageStyle: null,
  speakerStyle: null,
  className: null,
  audioEventsChannelName: null
};
var ConversationMessage = function ConversationMessage(_ref) {
  var message = _ref.message,
    messageId = _ref.messageId,
    previousMessage = _ref.previousMessage,
    nextMessage = _ref.nextMessage,
    nextAudioMessageId = _ref.nextAudioMessageId,
    nextMessageState = _ref.nextMessageState,
    currentSpeaker = _ref.currentSpeaker,
    conversationTiming = _ref.conversationTiming,
    typingTiming = _ref.typingTiming,
    onChange = _ref.onChange,
    withAnimation = _ref.withAnimation,
    active = _ref.active,
    isPlaying = _ref.isPlaying,
    messageStyle = _ref.messageStyle,
    speakerStyle = _ref.speakerStyle,
    className = _ref.className,
    audioEventsChannelName = _ref.audioEventsChannelName;
  var _ref2 = message || {},
    messageBody = _ref2.message,
    _ref2$image = _ref2.image,
    image = _ref2$image === void 0 ? null : _ref2$image,
    audio = _ref2.audio,
    putAudioBeforeText = _ref2.putAudioBeforeText;
  var _ref3 = currentSpeaker || {},
    _ref3$avatar = _ref3.avatar,
    _ref3$avatar2 = _ref3$avatar === void 0 ? {} : _ref3$avatar,
    _ref3$avatar2$url = _ref3$avatar2.url,
    avatarUrl = _ref3$avatar2$url === void 0 ? null : _ref3$avatar2$url,
    speakerName = _ref3.name,
    _ref3$side = _ref3.side,
    side = _ref3$side === void 0 ? 'left' : _ref3$side,
    currentSpeakerId = _ref3.id,
    color = _ref3.color;
  var right = side === 'right';
  var isPrevSpeakerTheSame = previousMessage !== null && previousMessage.speaker === currentSpeakerId;
  var isNextSpeakerTheSame = nextMessage !== null && nextMessage.speaker === currentSpeakerId;

  // Timing
  var _useState = React.useState(withAnimation ? 'pause' : 'send'),
    _useState2 = _slicedToArray(_useState, 2),
    messageState = _useState2[0],
    setMessageState = _useState2[1];
  var pauseBeforeTyping = conversationTiming;
  var typingDuration = typingTiming;
  React.useEffect(function () {
    if (!withAnimation || !isPlaying) {
      return function () {};
    }
    var timeout = null;
    if (messageState === 'pause') {
      timeout = setTimeout(function () {
        return setMessageState('typing');
      }, pauseBeforeTyping);
    } else if (messageState === 'typing') {
      timeout = setTimeout(function () {
        return setMessageState('send');
      }, typingDuration);
    }
    return function () {
      if (timeout !== null) {
        clearTimeout(timeout);
      }
    };
  }, [withAnimation, isPlaying, messageState, setMessageState, pauseBeforeTyping, typingDuration]);
  React.useEffect(function () {
    if (messageState !== 'pause' && onChange !== null) {
      onChange(messageState);
    }
  }, [messageState]);
  var betweenStyle = isNextSpeakerTheSame && nextMessageState;
  var buildAudioAttachment = function buildAudioAttachment() {
    return /*#__PURE__*/React.createElement(ConversationAudioAttachment$1, {
      audio: audio,
      messageId: messageId,
      nextAudioMessageId: nextAudioMessageId,
      audioEventsChannelName: audioEventsChannelName
    });
  };
  return messageState !== 'pause' ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$q.messageContainer, _defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$q.withAnimation, withAnimation === true), styles$q.right, right)])
  }, messageState === 'typing' ? /*#__PURE__*/React.createElement("div", {
    className: styles$q.loadingContainer
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$q.loading
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$q.dot
  }), /*#__PURE__*/React.createElement("div", {
    className: styles$q.dot
  }), /*#__PURE__*/React.createElement("div", {
    className: styles$q.dot
  })), /*#__PURE__*/React.createElement("div", {
    className: styles$q.loadingSpeakerName
  }, speakerName)) : /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$q.message, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, styles$q.normalRight, right), styles$q.nextTheSame, isNextSpeakerTheSame === true && isPrevSpeakerTheSame), styles$q.inBetweenRight, betweenStyle && right), styles$q.normalLeft, !right), styles$q.inBetweenLeft, betweenStyle && !right), styles$q.last, isNextSpeakerTheSame === false)]),
    style: _objectSpread$1({}, getStyleFromColor$1(color))
  }, !isPrevSpeakerTheSame ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$q.speakerDetails, _defineProperty({}, styles$q.right, side === 'right')])
  }, avatarUrl !== null ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$q.avatarContainer, _defineProperty({}, styles$q.right, side === 'right')])
  }, /*#__PURE__*/React.createElement("img", {
    className: styles$q.avatar,
    src: avatarUrl,
    alt: speakerName,
    loading: "lazy"
  })) : null, /*#__PURE__*/React.createElement(Text$1, {
    body: speakerName,
    textStyle: speakerStyle
  })) : null, /*#__PURE__*/React.createElement("div", null), /*#__PURE__*/React.createElement("div", {
    className: styles$q.messageBody
  }, image !== null ? /*#__PURE__*/React.createElement("div", {
    className: styles$q.imageContainer
  }, /*#__PURE__*/React.createElement(Visual$1, {
    media: image,
    width: "100%",
    playing: isPlaying,
    active: active
  })) : null, audio && putAudioBeforeText ? /*#__PURE__*/React.createElement("div", {
    className: classNames(styles$q.audioAttachment, styles$q.beforeText)
  }, buildAudioAttachment()) : null, /*#__PURE__*/React.createElement(Text$1, {
    className: styles$q.messageBody,
    body: messageBody,
    textStyle: messageStyle
  }), audio && !putAudioBeforeText ? /*#__PURE__*/React.createElement("div", {
    className: classNames(styles$q.audioAttachment, styles$q.afterText)
  }, buildAudioAttachment()) : null))) : null;
};
ConversationMessage.propTypes = propTypes$1$8;
ConversationMessage.defaultProps = defaultProps$1$8;
var ConversationMessage$1 = ConversationMessage;

var propTypes$q = {
  // id: PropTypes.string,
  // layout: PropTypes.oneOf(['normal']),
  title: PropTypes.headingElement,
  timing: PropTypes$1.oneOf(['instant', 'sequence']),
  readingSpeed: PropTypes$1.number,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  type: PropTypes$1.string,
  conversation: PropTypes.conversation,
  transitions: PropTypes.transitions,
  className: PropTypes$1.string
};
var defaultProps$q = {
  // layout: 'normal',
  title: null,
  timing: 'sequence',
  readingSpeed: 255,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  type: null,
  conversation: null,
  transitions: null,
  className: null
};
var ConversationScreen = function ConversationScreen(_ref) {
  var title = _ref.title,
    timingMode = _ref.timing,
    readingSpeed = _ref.readingSpeed,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    type = _ref.type,
    conversation = _ref.conversation,
    transitions = _ref.transitions,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var trackScreenEvent = useTrackScreenEvent(type);
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var audioEventsChannel = new BroadcastChannel("conversation_".concat(uuid.v1(), "_audioEvents"));
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var withAnimation = isView && !isStatic && timingMode === 'sequence';
  var _ref2 = conversation || {},
    _ref2$speakers = _ref2.speakers,
    speakers = _ref2$speakers === void 0 ? null : _ref2$speakers,
    _ref2$messages = _ref2.messages,
    messages = _ref2$messages === void 0 ? [] : _ref2$messages,
    messageStyle = _ref2.messageStyle,
    speakerStyle = _ref2.speakerStyle;
  var _useState = React.useState([]),
    _useState2 = _slicedToArray(_useState, 2),
    conversationState = _useState2[0],
    setConversationState = _useState2[1];
  var chatBottomRef = React.useRef(null);
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var hasTitle = isTextFilled$1(title);
  var _useDimensionObserver = useDimensionObserver(),
    contentRef = _useDimensionObserver.ref,
    scrollHeight = _useDimensionObserver.height;
  var scrollRef = React.useRef(null);
  React.useEffect(function () {
    if (withAnimation && scrollRef.current !== null) {
      scrollRef.current.scrollTo({
        top: scrollHeight,
        behavior: 'smooth'
      });
    }
  }, [scrollHeight, withAnimation]);
  var animationFinished = messages.length === conversationState.length;
  var conversationStateChange = React.useCallback(function (state) {
    var newConversationState = _toConsumableArray(conversationState);
    if (state === 'send') {
      newConversationState.push(true);
      setConversationState(newConversationState);
    }
  }, [conversationState, setConversationState]);

  // sequence timings
  var defaultHesitationDelay = 1500;
  var imageReadDelay = 5000; // 5 seconds
  var millisecondsPerWord = 60 * 1000 / readingSpeed;
  var filteredMessages = (messages || []).filter(function (m) {
    return m !== null;
  });
  var timings = filteredMessages.map(function (messageParams, messageIndex) {
    if (messageIndex === 0) {
      return 0;
    }
    var _ref3 = messageParams || {},
      _ref3$timing = _ref3.timing,
      timing = _ref3$timing === void 0 ? null : _ref3$timing,
      _ref3$message = _ref3.message,
      message = _ref3$message === void 0 ? null : _ref3$message,
      image = _ref3.image,
      audio = _ref3.audio,
      timingOverrides = _ref3.timingOverrides;
    if (timing !== null) {
      return timing;
    }
    if (timingOverrides !== null && timingOverrides !== void 0 && timingOverrides.enabled && Number.isFinite(timingOverrides === null || timingOverrides === void 0 ? void 0 : timingOverrides.writingDuration)) {
      return timingOverrides.writingDuration * 1000; // seconds to milliseconds
    }

    // if the current message has an audio attachment, use the time it takes to record that message
    if (audio) {
      return audio.metadata.duration;
    }

    // counting words: only keep whitespaces and alphanumeric characters, then split of whitespaces
    var wordCount = message ? message.replace(/[^\w\d\s]/g, '').trim().split(/\s/g).length : 0;
    var finalTimeMs = wordCount * millisecondsPerWord;

    // if the message includes an image, add some more time to "read" it
    if (image) {
      finalTimeMs += imageReadDelay;
    }
    return finalTimeMs;
  });
  var hesitationTimings = filteredMessages.map(function (messageParams, messageIndex) {
    var timingOverrides = messageParams.timingOverrides;
    if (messageIndex !== 0 && timingOverrides !== null && timingOverrides !== void 0 && timingOverrides.enabled && Number.isFinite(timingOverrides === null || timingOverrides === void 0 ? void 0 : timingOverrides.appearDelay)) {
      return timingOverrides.appearDelay * 1000; // seconds to milliseconds
    }
    return defaultHesitationDelay;
  });
  var messagesUniqueId = React.useMemo(function () {
    return (messages || []).map(function () {
      return uuid.v1();
    });
  }, [messages]);

  // scroll
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    scrolledBottom = _useState4[0],
    setScrolledBottom = _useState4[1];
  var showFooter = animationFinished && !isPlaceholder && hasFooter || !withAnimation;
  var onScrolledBottom = React.useCallback(function (_ref4) {
    var initial = _ref4.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$q.container, _defineProperty(_defineProperty({}, className, className !== null), styles$q.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$q.content
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    ref: scrollRef,
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    withShadow: true
  }, /*#__PURE__*/React.createElement("div", {
    ref: contentRef
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$q.layout,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + spacing / 2,
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + spacing / 2
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    key: "header",
    style: {
      paddingBottom: spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "conversation",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "NmCfTO",
      defaultMessage: [{
        "type": 0,
        "value": "Conversation"
      }]
    }),
    emptyClassName: styles$q.empty,
    isEmpty: messages.length === 0 && title === null
  }, /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: current,
    disabled: transitionDisabled
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({}, title, {
    className: styles$q.title,
    isEmpty: title === null
  })) : null, /*#__PURE__*/React.createElement("div", {
    className: styles$q.conversation
  }, filteredMessages.map(function (m, messageI) {
    var previousMessage = messageI !== 0 ? messages[messageI - 1] : null;
    var nextMessage = messageI + 1 < messages.length ? messages[messageI + 1] : null;
    var speaker = m.speaker;
    var currentSpeaker = (speakers || []).find(function (s) {
      return s.id === speaker;
    }) || null;
    var shouldPlay = messageI === 0 || conversationState[messageI - 1] === true;
    var pauseTiming = hesitationTimings[messageI];
    var typingTiming = timings[messageI];
    var messageId = "".concat(m.message, "-").concat(messagesUniqueId[messageI]);
    var nextAudioMessage = filteredMessages.slice(messageI + 1).find(function (c) {
      return c.audio != null;
    });
    var nextAudioMessageId = nextAudioMessage ? "".concat(m.message, "-").concat(messagesUniqueId[filteredMessages.indexOf(nextAudioMessage)]) : null;
    return /*#__PURE__*/React.createElement(ConversationMessage$1, {
      key: messageId,
      message: m,
      messageId: messageId,
      previousMessage: previousMessage,
      nextMessage: nextMessage,
      nextAudioMessageId: nextAudioMessageId,
      nextMessageState: conversationState[messageI + 1] || !withAnimation,
      currentSpeaker: currentSpeaker,
      conversationTiming: pauseTiming,
      typingTiming: typingTiming,
      onChange: conversationStateChange,
      withAnimation: withAnimation,
      isPlaying: current && shouldPlay,
      shouldLoad: mediaShouldLoad,
      withoutVideo: isPreview,
      messageStyle: messageStyle,
      speakerStyle: speakerStyle,
      audioEventsChannelName: audioEventsChannel.name
    });
  })), showFooter ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$q.footer, _defineProperty({}, styles$q.disabled, !scrolledBottom)]),
    style: {
      paddingLeft: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingRight: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingTop: spacing
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null, /*#__PURE__*/React.createElement("div", {
    ref: chatBottomRef
  }))))))), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$q.background
  }) : null);
};
ConversationScreen.propTypes = propTypes$q;
ConversationScreen.defaultProps = defaultProps$q;
var ConversationScreen$1 = ConversationScreen;

var definition$k = {
  id: 'conversation',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "fIawTr",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    }),
    order: 3
  },
  title: reactIntl.defineMessage({
    id: "rBPIgw",
    defaultMessage: [{
      "type": 0,
      "value": "Conversation"
    }]
  }),
  component: ConversationScreen$1,
  layouts: ['normal'],
  fields: [
  // {
  //     name: 'theme',
  //     type: 'select',
  //     options: [
  //         {
  //             value: 'ios',
  //             label: 'iOS',
  //         },
  //     ],
  //     label: defineMessage({
  //         defaultMessage: 'Theme',
  //         description: 'Theme field label',
  //     }),
  // },
  {
    name: 'timing',
    type: 'select',
    options: [{
      value: 'instant',
      label: 'Instant'
    }, {
      value: 'sequence',
      label: 'Sequence'
    }],
    label: reactIntl.defineMessage({
      id: "6DV50M",
      defaultMessage: [{
        "type": 0,
        "value": "Timing"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'conversation',
    type: 'conversation',
    label: reactIntl.defineMessage({
      id: "8tANs8",
      defaultMessage: [{
        "type": 0,
        "value": "Conversation"
      }]
    })
  }, {
    name: 'readingSpeed',
    type: 'number',
    defaultValue: 255,
    label: reactIntl.defineMessage({
      id: "QjbLZ9",
      defaultMessage: [{
        "type": 0,
        "value": "Reading speed (in Words Per Minute)"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var styles$p = {"container":"micromag-element-grid-container","items":"micromag-element-grid-items","cross":"micromag-element-grid-cross","axis":"micromag-element-grid-axis"};

var propTypes$p = {
  layout: PropTypes.gridLayout,
  items: PropTypes$1.arrayOf(PropTypes$1.node),
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  spacing: PropTypes$1.number,
  vertical: PropTypes$1.bool,
  className: PropTypes$1.string,
  axisClassName: PropTypes$1.string,
  crossClassName: PropTypes$1.string
};
var defaultProps$p = {
  layout: null,
  items: [],
  width: null,
  height: null,
  spacing: 0,
  vertical: false,
  className: null,
  axisClassName: null,
  crossClassName: null
};
function Grid(_ref) {
  var items = _ref.items,
    layout = _ref.layout,
    width = _ref.width,
    height = _ref.height,
    spacing = _ref.spacing,
    vertical = _ref.vertical,
    className = _ref.className,
    axisClassName = _ref.axisClassName,
    crossClassName = _ref.crossClassName;
  var itemIndex = 0;
  var finalLayout = isArray(layout) ? layout : [{
    rows: vertical ? items.map(function () {
      return 1;
    }) : 1,
    columns: vertical ? 1 : items.map(function () {
      return 1;
    })
  }];
  var crossTotal = finalLayout.reduce(function (total, _ref2) {
    var _ref2$rows = _ref2.rows,
      rows = _ref2$rows === void 0 ? 1 : _ref2$rows,
      _ref2$columns = _ref2.columns,
      columns = _ref2$columns === void 0 ? 1 : _ref2$columns;
    return total + (vertical ? columns : rows);
  }, 0);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$p.container, _defineProperty({}, className, className !== null)]),
    style: {
      width: width,
      height: height,
      padding: spacing !== null && spacing > 0 ? spacing / 2 : null
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$p.items,
    style: {
      flexDirection: vertical ? 'row' : 'column'
    }
  }, finalLayout.map(function (_ref4, crossIndex) {
    var rows = _ref4.rows,
      columns = _ref4.columns;
    var crossSizeRatio = (vertical ? columns : rows) / crossTotal;
    var crossSize = "".concat(100 * crossSizeRatio, "%");
    var axisItems = vertical ? rows : columns;
    var finalAxisItems = isArray(axisItems) ? axisItems : [axisItems];
    var axisTotal = finalAxisItems.reduce(function (total, it) {
      return total + it;
    }, 0);
    return /*#__PURE__*/React.createElement("div", {
      key: "cross-".concat(crossIndex),
      className: classNames([styles$p.cross, _defineProperty({}, crossClassName, crossClassName !== null)]),
      style: {
        flexDirection: vertical ? 'column' : 'row',
        width: vertical ? crossSize : null,
        height: vertical ? null : crossSize
      }
    }, finalAxisItems.map(function (axisItem, axisIndex) {
      var axisSizeRatio = axisItem / axisTotal;
      var axisSize = "".concat(100 * axisSizeRatio, "%");
      var item = items[itemIndex];
      itemIndex += 1;
      return /*#__PURE__*/React.createElement("div", {
        key: "axis-".concat(axisIndex),
        className: classNames([styles$p.axis, _defineProperty({}, axisClassName, axisClassName !== null)]),
        style: {
          width: vertical ? null : axisSize,
          height: vertical ? axisSize : null,
          padding: spacing > 0 ? spacing / 2 : 0
        }
      }, item);
    }));
  })));
}
Grid.propTypes = propTypes$p;
Grid.defaultProps = defaultProps$p;

var layoutProps = {
  // 2
  'two-vertical-equal': {
    vertical: true,
    layout: [{
      columns: 1,
      rows: [1, 1]
    }]
  },
  'two-vertical-top': {
    vertical: true,
    layout: [{
      columns: 1,
      rows: [2, 1]
    }]
  },
  'two-vertical-bottom': {
    vertical: true,
    layout: [{
      columns: 1,
      rows: [1, 2]
    }]
  },
  // 3
  'three-vertical': {
    vertical: true,
    layout: [{
      columns: 1,
      rows: [1, 1, 1]
    }]
  },
  'one-two': {
    layout: [{
      rows: 2,
      columns: [1]
    }, {
      rows: 1,
      columns: [1, 1]
    }]
  },
  'two-one': {
    layout: [{
      rows: 1,
      columns: [1, 1]
    }, {
      rows: 2,
      columns: [1]
    }]
  },
  // 4
  'two-by-two': {
    layout: [{
      rows: 1,
      columns: [1, 1]
    }, {
      rows: 1,
      columns: [1, 1]
    }]
  },
  'four-vertical': {
    vertical: true,
    layout: [{
      columns: 1,
      rows: [1, 1, 1, 1]
    }]
  },
  'one-two-one': {
    layout: [{
      rows: 3,
      columns: [1]
    }, {
      rows: 2,
      columns: [1, 1]
    }, {
      rows: 3,
      columns: [1]
    }]
  },
  'four-mosaic': {
    vertical: true,
    layout: [{
      columns: 1,
      rows: [2, 1]
    }, {
      columns: 1,
      rows: [1, 2]
    }]
  },
  // 5
  'two-one-two': {
    layout: [{
      rows: 2,
      columns: [1, 1]
    }, {
      rows: 3,
      columns: [1]
    }, {
      rows: 2,
      columns: [1, 1]
    }]
  },
  'one-two-two': {
    layout: [{
      rows: 3,
      columns: [1]
    }, {
      rows: 2,
      columns: [1, 1]
    }, {
      rows: 2,
      columns: [1, 1]
    }]
  },
  'two-two-one': {
    layout: [{
      rows: 2,
      columns: [1, 1]
    }, {
      rows: 2,
      columns: [1, 1]
    }, {
      rows: 3,
      columns: [1]
    }]
  },
  // 6
  'two-by-three': {
    layout: [{
      rows: 1,
      columns: [1, 1]
    }, {
      rows: 1,
      columns: [1, 1]
    }, {
      rows: 1,
      columns: [1, 1]
    }]
  },
  'one-one-two-two': {
    layout: [{
      rows: 1,
      columns: [1]
    }, {
      rows: 1,
      columns: [1]
    }, {
      rows: 1,
      columns: [1, 1]
    }, {
      rows: 1,
      columns: [1, 1]
    }]
  },
  'two-two-one-one': {
    layout: [{
      rows: 1,
      columns: [1, 1]
    }, {
      rows: 1,
      columns: [1, 1]
    }, {
      rows: 1,
      columns: [1]
    }, {
      rows: 1,
      columns: [1]
    }]
  }
};

var styles$o = {"container":"micromag-screen-gallery-container","image":"micromag-screen-gallery-image","inner":"micromag-screen-gallery-inner","background":"micromag-screen-gallery-background","disabled":"micromag-screen-gallery-disabled","hidden":"micromag-screen-gallery-hidden","placeholder":"micromag-screen-gallery-placeholder","content":"micromag-screen-gallery-content","emptyImage":"micromag-screen-gallery-emptyImage","emptyCaption":"micromag-screen-gallery-emptyCaption","grid":"micromag-screen-gallery-grid","gridItem":"micromag-screen-gallery-gridItem","imageContainer":"micromag-screen-gallery-imageContainer","header":"micromag-screen-gallery-header","footer":"micromag-screen-gallery-footer","caption":"micromag-screen-gallery-caption"};

var propTypes$o = {
  layout: PropTypes$1.oneOf([
  // 2
  'two-vertical-equal', 'two-vertical-top', 'two-vertical-bottom',
  // 3
  'three-vertical', 'one-two', 'two-one',
  // 4
  'two-by-two', 'four-vertical', 'one-two-one', 'four-mosaic',
  // 5
  'two-one-two', 'one-two-two', 'two-two-one',
  // 6
  'two-by-three', 'one-one-two-two', 'two-two-one-one']),
  images: PropTypes$1.oneOfType([PropTypes.imageMedias, PropTypes.imageElements]),
  withCaptions: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  captionMaxLines: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$o = {
  layout: 'four-mosaic',
  withCaptions: false,
  images: [],
  spacing: 20,
  captionMaxLines: 2,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  className: null
};
var GalleryScreen = function GalleryScreen(_ref) {
  var layout = _ref.layout,
    images = _ref.images,
    withCaptions = _ref.withCaptions,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    spacing = _ref.spacing,
    captionMaxLines = _ref.captionMaxLines,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var finalSpacing = isPlaceholder ? 5 : spacing;
  var grid = isPlainObject(layoutProps[layout]) ? layoutProps[layout] : {};
  var _grid$layout = grid.layout,
    gridLayout = _grid$layout === void 0 ? [] : _grid$layout,
    _grid$vertical = grid.vertical,
    vertical = _grid$vertical === void 0 ? false : _grid$vertical;
  var gridSpaces = gridLayout.reduce(function (acc, _ref2) {
    var rows = _ref2.rows,
      columns = _ref2.columns;
    return acc + (vertical ? rows : columns).length;
  }, 0);
  var _useState = React.useState(0),
    _useState2 = _slicedToArray(_useState, 2),
    imagesLoaded = _useState2[0],
    setImagesLoaded = _useState2[1];
  var imagesCount = images !== null ? Math.min(gridSpaces, images.length) : 0;
  var ready = imagesLoaded >= imagesCount;
  var onImageLoaded = React.useCallback(function () {
    setImagesLoaded(function (count) {
      return count + 1;
    });
  }, [setImagesLoaded]);
  var imagesEl = React.useRef([]);
  var _useState3 = React.useState([]),
    _useState4 = _slicedToArray(_useState3, 2),
    imagesSizes = _useState4[0],
    setImagesSizes = _useState4[1];
  var _useDimensionObserver = useDimensionObserver(),
    contentRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.width,
    contentWidth = _useDimensionObserver2 === void 0 ? null : _useDimensionObserver2,
    _useDimensionObserver3 = _useDimensionObserver.height,
    contentHeight = _useDimensionObserver3 === void 0 ? null : _useDimensionObserver3;
  React.useEffect(function () {
    if (imagesEl.current.length) {
      setImagesSizes(imagesEl.current.map(function (imageEl) {
        return imageEl !== null ? {
          width: imageEl.offsetWidth,
          height: imageEl.offsetHeight
        } : {};
      }));
    }
  }, [contentWidth, contentHeight, layout, setImagesSizes]);

  // header + footer
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useDimensionObserver4 = useDimensionObserver(),
    headerRef = _useDimensionObserver4.ref,
    _useDimensionObserver5 = _useDimensionObserver4.height,
    headerHeight = _useDimensionObserver5 === void 0 ? 0 : _useDimensionObserver5;
  var _useDimensionObserver6 = useDimensionObserver(),
    footerRef = _useDimensionObserver6.ref,
    _useDimensionObserver7 = _useDimensionObserver6.height,
    footerHeight = _useDimensionObserver7 === void 0 ? 0 : _useDimensionObserver7;

  // items
  var items = _toConsumableArray(Array(gridSpaces)).map(function (item, itemI) {
    var image = images !== null ? images[itemI] : null;
    var imageSize = imagesSizes[itemI] || {};
    var finalImage = withCaptions ? image : {
      media: image
    };
    var _ref3 = finalImage || {},
      _ref3$caption = _ref3.caption,
      caption = _ref3$caption === void 0 ? null : _ref3$caption;
    var hasImage = isImageFilled$1(finalImage);
    var hasCaption = isTextFilled$1(caption);
    return /*#__PURE__*/React.createElement("div", {
      key: "item-".concat(itemI),
      className: styles$o.gridItem
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$o.imageContainer,
      ref: function ref(el) {
        imagesEl.current[itemI] = el;
      }
    }, /*#__PURE__*/React.createElement(ScreenElement$1, {
      placeholder: "image",
      placeholderProps: {
        className: styles$o.placeholder,
        height: '100%'
      },
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "ebsPd4",
        defaultMessage: [{
          "type": 0,
          "value": "Image"
        }]
      }),
      emptyClassName: styles$o.emptyImage,
      isEmpty: !hasImage
    }, active || current ? /*#__PURE__*/React.createElement(Visual$1, Object.assign({
      className: styles$o.image
    }, finalImage, imageSize, {
      resolution: resolution,
      objectFit: {
        fit: 'cover'
      },
      playing: backgroundPlaying,
      active: active,
      shouldLoad: mediaShouldLoad,
      withoutVideo: isPreview,
      onLoaded: onImageLoaded
    })) : null)), withCaptions ? /*#__PURE__*/React.createElement(ScreenElement$1, {
      placeholder: "line",
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "6tIigB",
        defaultMessage: [{
          "type": 0,
          "value": "Caption"
        }]
      }),
      emptyClassName: styles$o.emptyCaption,
      isEmpty: !hasCaption
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$o.caption
    }, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, caption, {
      className: styles$o.captionText,
      lineClamp: captionMaxLines
    })))) : null);
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$o.container, _defineProperty(_defineProperty({}, className, className !== null), styles$o.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$o.content
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$o.inner,
    style: {
      paddingTop: (hasHeader ? headerHeight : 0) + (!isPreview ? viewerTopHeight : 0),
      paddingBottom: (hasFooter ? footerHeight : 0) + (current && !isPreview ? viewerBottomHeight : 0)
    },
    ref: contentRef
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    className: styles$o.header,
    ref: headerRef,
    style: {
      paddingTop: hasHeader ? finalSpacing / 2 : spacing,
      paddingLeft: spacing,
      paddingRight: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(Grid, Object.assign({
    className: styles$o.grid,
    spacing: finalSpacing,
    items: items
  }, grid)), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    className: styles$o.footer,
    ref: footerRef,
    style: {
      paddingLeft: Math.max(finalSpacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(finalSpacing / 2, viewerBottomSidesWidth),
      // paddingTop: finalSpacing / 2,
      paddingBottom: finalSpacing / 2,
      transform: !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$o.background
  }) : null);
};
GalleryScreen.propTypes = propTypes$o;
GalleryScreen.defaultProps = defaultProps$o;
var GalleryScreen$1 = GalleryScreen;

function GalleryCaptionsScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(GalleryScreen$1, Object.assign({}, props, {
    withCaptions: true
  }));
}

// import * as transforms from './transforms/index';

var definition$j = [{
  id: 'gallery',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "6mX2ya",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    }),
    order: 4
  },
  title: reactIntl.defineMessage({
    id: "jaFXki",
    defaultMessage: [{
      "type": 0,
      "value": "Gallery"
    }]
  }),
  component: GalleryScreen$1,
  layouts: [
  // 2
  'two-vertical-equal', 'two-vertical-top', 'two-vertical-bottom',
  // 3
  'three-vertical', 'one-two', 'two-one',
  // 4
  'two-by-two', 'four-vertical', 'one-two-one', 'four-mosaic',
  // 5
  'two-one-two', 'one-two-two', 'two-two-one',
  // 6
  'two-by-three', 'one-one-two-two', 'two-two-one-one'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'two-vertical-equal',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'images',
    type: 'visuals',
    label: reactIntl.defineMessage({
      id: "muYwrB",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'gallery-captions',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "6mX2ya",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    }),
    order: 4
  },
  title: reactIntl.defineMessage({
    id: "MmJQ7o",
    defaultMessage: [{
      "type": 0,
      "value": "Gallery with captions"
    }]
  }),
  component: GalleryCaptionsScreen,
  layouts: [
  // 2
  'two-vertical-equal', 'two-vertical-top', 'two-vertical-bottom',
  // 3
  'three-vertical', 'one-two', 'two-one',
  // 4
  'two-by-two', 'four-vertical', 'one-two-one', 'four-mosaic',
  // 5
  'two-one-two', 'one-two-two', 'two-two-one',
  // 6
  'two-by-three', 'one-one-two-two', 'two-two-one-one'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'two-vertical-equal',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'images',
    type: 'visuals-with-caption',
    theme: {
      caption: {
        textStyle: 'text'
      }
    },
    label: reactIntl.defineMessage({
      id: "59f2bg",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$n = {"container":"micromag-screen-gallery-feed-container","background":"micromag-screen-gallery-feed-background","emptyImage":"micromag-screen-gallery-feed-emptyImage","emptyCaption":"micromag-screen-gallery-feed-emptyCaption","content":"micromag-screen-gallery-feed-content","image":"micromag-screen-gallery-feed-image","imageContainer":"micromag-screen-gallery-feed-imageContainer","video":"micromag-screen-gallery-feed-video","footer":"micromag-screen-gallery-feed-footer","disabled":"micromag-screen-gallery-feed-disabled","isPlaceholder":"micromag-screen-gallery-feed-isPlaceholder","layout":"micromag-screen-gallery-feed-layout"};

var propTypes$n = {
  layout: PropTypes$1.oneOf(['normal', 'reverse']),
  images: PropTypes$1.oneOfType([PropTypes.imageElementsWithCaption, PropTypes.imageMedias]),
  withCaptions: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$n = {
  layout: 'normal',
  images: null,
  withCaptions: false,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  type: null,
  className: null
};
var GalleryFeedScreen = function GalleryFeedScreen(_ref) {
  var layout = _ref.layout,
    images = _ref.images,
    withCaptions = _ref.withCaptions,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    type = _ref.type,
    className = _ref.className;
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var hasImages = images !== null;
  var imagesCount = hasImages ? images.length : 0;
  var _useState = React.useState(0),
    _useState2 = _slicedToArray(_useState, 2),
    imagesLoaded = _useState2[0],
    setImagesLoaded = _useState2[1];
  var ready = imagesLoaded >= imagesCount;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var onImageLoaded = React.useCallback(function () {
    setImagesLoaded(imagesLoaded + 1);
  }, [imagesLoaded, setImagesLoaded]);
  var isReversed = layout === 'reverse';
  var items = [];
  var editImages = isEdit && imagesCount === 0 ? [null] : images;
  var finalImages = isPlaceholder ? _toConsumableArray(Array(5)) : editImages;
  var _useDimensionObserver = useDimensionObserver(),
    firstImageRef = _useDimensionObserver.ref,
    firstImageRefWidth = _useDimensionObserver.width;
  (finalImages || []).forEach(function (image, index) {
    var finalImage = withCaptions ? image : {
      media: image
    };
    var _ref2 = finalImage || {},
      _ref2$caption = _ref2.caption,
      caption = _ref2$caption === void 0 ? null : _ref2$caption;
    var hasImage = isImageFilled$1(finalImage);
    var hasCaption = isTextFilled$1(caption);
    var imageElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
      key: "image-".concat(index),
      placeholder: "image",
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "ebsPd4",
        defaultMessage: [{
          "type": 0,
          "value": "Image"
        }]
      }),
      emptyClassName: styles$n.emptyImage,
      isEmpty: !hasImage
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$n.imageContainer,
      ref: index === 0 ? firstImageRef : null
    }, /*#__PURE__*/React.createElement(Visual$1, Object.assign({}, finalImage, {
      className: styles$n.image,
      videoClassName: styles$n.video,
      width: firstImageRefWidth,
      resolution: resolution,
      playing: backgroundPlaying,
      active: active,
      shouldLoad: mediaShouldLoad,
      withoutVideo: isPreview,
      onLoaded: onImageLoaded
    }))));
    var captionElement = null;
    if (withCaptions) {
      var marginTop = !isReversed || index > 0 ? spacing / 2 : 0;
      var marginBottom = isReversed || index < (finalImages || []).length - 1 ? spacing / 2 : 0;
      captionElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
        key: "caption-".concat(index),
        placeholder: "text",
        placeholderProps: {
          lines: 2
        },
        emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
          id: "6tIigB",
          defaultMessage: [{
            "type": 0,
            "value": "Caption"
          }]
        }),
        emptyClassName: styles$n.emptyCaption,
        isEmpty: !hasCaption
      }, hasCaption ? /*#__PURE__*/React.createElement("div", {
        className: styles$n.caption,
        style: {
          marginTop: marginTop,
          marginBottom: marginBottom
        }
      }, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, caption, {
        className: styles$n.captionText
      }))) : null);
    }
    if (isReversed) {
      if (withCaptions) {
        items.push(captionElement);
      }
      items.push(imageElement);
    } else {
      items.push(imageElement);
      if (withCaptions) {
        items.push(captionElement);
      }
    }
    if (!isPlaceholder && index < (finalImages || []).length - 1) {
      items.push( /*#__PURE__*/React.createElement("div", {
        key: "spacing-".concat(index),
        style: {
          height: spacing
        }
      }));
    }
  });
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    scrolledBottom = _useState4[0],
    setScrolledBottom = _useState4[1];
  var onScrolledBottom = React.useCallback(function (_ref3) {
    var initial = _ref3.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$n.container, _defineProperty(_defineProperty({}, className, className !== null), styles$n.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$n.content
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    withShadow: true
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$n.layout,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (hasHeader ? spacing / 2 : spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + spacing / 2
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    key: "header",
    style: {
      paddingBottom: spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, items, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$n.footer, _defineProperty({}, styles$n.disabled, !scrolledBottom)]),
    style: {
      paddingLeft: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingRight: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingTop: spacing
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null))), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$n.background
  }) : null);
};
GalleryFeedScreen.propTypes = propTypes$n;
GalleryFeedScreen.defaultProps = defaultProps$n;
var GalleryFeedScreen$1 = GalleryFeedScreen;

var GalleryFeedCaptionsScreen = function GalleryFeedCaptionsScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(GalleryFeedScreen$1, Object.assign({}, props, {
    withCaptions: true
  }));
};
var GalleryFeedCaptionsScreen$1 = GalleryFeedCaptionsScreen;

var definition$i = [{
  id: 'gallery-feed',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "6mX2ya",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    }),
    order: 4
  },
  title: reactIntl.defineMessage({
    id: "4bHvRS",
    defaultMessage: [{
      "type": 0,
      "value": "Gallery Feed"
    }]
  }),
  component: GalleryFeedScreen$1,
  layouts: ['normal'],
  // transforms,
  fields: [{
    name: 'images',
    type: 'visuals',
    label: reactIntl.defineMessage({
      id: "muYwrB",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'gallery-feed-captions',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "6mX2ya",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    }),
    order: 4
  },
  title: reactIntl.defineMessage({
    id: "XTJGzY",
    defaultMessage: [{
      "type": 0,
      "value": "Gallery feed with captions"
    }]
  }),
  component: GalleryFeedCaptionsScreen$1,
  layouts: ['normal', 'reverse'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'normal',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'images',
    type: 'visuals-with-caption',
    theme: {
      caption: {
        textStyle: 'text'
      }
    },
    label: reactIntl.defineMessage({
      id: "T9NZPQ",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$m = {"container":"micromag-screen-image-container","image":"micromag-screen-image-image","background":"micromag-screen-image-background","disabled":"micromag-screen-image-disabled","hidden":"micromag-screen-image-hidden","placeholder":"micromag-screen-image-placeholder","content":"micromag-screen-image-content","emptyImage":"micromag-screen-image-emptyImage","emptyTitle":"micromag-screen-image-emptyTitle","emptyText":"micromag-screen-image-emptyText","emptyLegend":"micromag-screen-image-emptyLegend","imageContainer":"micromag-screen-image-imageContainer","placeholderImage":"micromag-screen-image-placeholderImage","isPlaceholder":"micromag-screen-image-isPlaceholder","layout":"micromag-screen-image-layout","isCard":"micromag-screen-image-isCard","isCardReverse":"micromag-screen-image-isCardReverse","footer":"micromag-screen-image-footer","isFullscreen":"micromag-screen-image-isFullscreen","header":"micromag-screen-image-header"};

// NOTE: should this be a scrolling element ?

var propTypes$m = {
  layout: PropTypes$1.oneOf(['normal', 'fullscreen', 'reverse', 'card', 'card-reverse', 'title-top']),
  image: PropTypes.imageMedia,
  imageFit: PropTypes$1.oneOf(['contain', 'cover']),
  defaultImageFit: PropTypes$1.string,
  title: PropTypes.headingElement,
  text: PropTypes.textElement,
  legend: PropTypes.textElement,
  withTitle: PropTypes$1.bool,
  withText: PropTypes$1.bool,
  withLegend: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$m = {
  layout: 'normal',
  image: null,
  imageFit: null,
  defaultImageFit: 'cover',
  title: null,
  text: null,
  legend: null,
  withTitle: false,
  withText: false,
  withLegend: false,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  className: null
};
var ImageScreen = function ImageScreen(_ref) {
  var layout = _ref.layout,
    image = _ref.image,
    imageFit = _ref.imageFit,
    defaultImageFit = _ref.defaultImageFit,
    title = _ref.title,
    text = _ref.text,
    legend = _ref.legend,
    withTitle = _ref.withTitle,
    withText = _ref.withText,
    withLegend = _ref.withLegend,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var hasImage = image !== null;
  var hasTitle = isTextFilled$1(title);
  var hasText = isTextFilled$1(text);
  var hasLegend = isTextFilled$1(legend);
  var _useState = React.useState(!hasImage),
    _useState2 = _slicedToArray(_useState, 2),
    ready = _useState2[0],
    setReady = _useState2[1];
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var onImageLoaded = React.useCallback(function () {
    setReady(true);
  }, [setReady]);
  var finalImageFit = React.useMemo(function () {
    return {
      fit: imageFit || defaultImageFit
    };
  }, [imageFit, defaultImageFit]);
  var isReversed = layout === 'reverse' || layout === 'card-reverse';
  var isTitleTop = layout === 'title-top';
  var isCardLayout = layout === 'card' || layout === 'card-reverse';
  var isCard = layout === 'card';
  var isCardReverse = layout === 'card-reverse';
  var isFullscreen = layout === 'fullscreen';
  var finalSpacing = !isFullscreen && !isPlaceholder ? spacing : 0;
  var _useDimensionObserver = useDimensionObserver(),
    imageCntRef = _useDimensionObserver.ref,
    imageWidth = _useDimensionObserver.width,
    imageHeight = _useDimensionObserver.height;
  var cardImageMargin = isCardReverse ? "".concat(finalSpacing / 2, "px ").concat(-finalSpacing / 2, "px 0") : "0 ".concat(-finalSpacing / 2, "px ").concat(finalSpacing / 2, "px");
  var imageMargin = isCardLayout ? cardImageMargin : finalSpacing / 2;
  var itemMarginStyle = !isPlaceholder ? {
    margin: finalSpacing / 2,
    marginTop: isCardReverse && !hasHeader ? finalSpacing : finalSpacing / 2,
    marginBottom: isCard && !hasHeader ? finalSpacing : finalSpacing / 2
  } : null;
  var items = [/*#__PURE__*/React.createElement("div", {
    key: "image",
    ref: imageCntRef,
    className: styles$m.imageContainer,
    style: !isPlaceholder ? {
      margin: imageMargin
    } : null
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "image",
    placeholderProps: {
      className: styles$m.placeholderImage,
      height: '100%'
    },
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "ebsPd4",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    }),
    emptyClassName: styles$m.emptyImage,
    isEmpty: !hasImage
  }, hasImage ? /*#__PURE__*/React.createElement(Visual$1, {
    className: styles$m.image,
    media: image,
    objectFit: finalImageFit,
    width: imageWidth,
    height: imageHeight,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    active: active,
    shouldLoad: mediaShouldLoad,
    withoutVideo: isPreview,
    onLoaded: onImageLoaded
  }) : null)), withTitle && /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "2ZOPe+",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$m.emptyTitle,
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement("div", {
    style: itemMarginStyle
  }, /*#__PURE__*/React.createElement(Heading$1, title)) : null), withText && /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "text",
    placeholder: "text",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "z4CiV1",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    }),
    emptyClassName: styles$m.emptyText,
    isEmpty: !hasText
  }, hasText ? /*#__PURE__*/React.createElement("div", {
    style: itemMarginStyle
  }, /*#__PURE__*/React.createElement(Text$1, text)) : null), withLegend && /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "legend",
    placeholder: "shortText",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "dqnkQk",
      defaultMessage: [{
        "type": 0,
        "value": "Legend"
      }]
    }),
    emptyClassName: styles$m.emptyLegend,
    isEmpty: !hasLegend
  }, hasLegend ? /*#__PURE__*/React.createElement("div", {
    style: itemMarginStyle
  }, /*#__PURE__*/React.createElement(Text$1, legend)) : null)];
  if (isReversed) {
    items.reverse();
  } else if (isTitleTop) {
    if (withTitle && (hasTitle || isPlaceholder)) {
      items.splice(0, 0, items.splice(1, 1)[0]);
    }
  }
  var paddingBottom = (current && !isPreview ? viewerBottomHeight : 0) + finalSpacing / 2;
  var paddingTop = (!isPreview ? viewerTopHeight : 0) + finalSpacing / 2;
  if (isCardLayout || isFullscreen) {
    paddingTop = 0;
    paddingBottom = 0;
  }
  if (isCardReverse) {
    paddingTop = current && !isPreview ? viewerTopHeight : 0;
    paddingBottom = current && !isPreview ? viewerBottomHeight : 0;
  }
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$m.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$m.isReversed, isReversed), styles$m.isPlaceholder, isPlaceholder), styles$m.isCard, isCard), styles$m.isCardReverse, isCardReverse), styles$m.isFullscreen, isFullscreen)]),
    "data-screen-ready": ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$m.content
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$m.layout,
    fullscreen: true,
    style: !isPlaceholder ? {
      padding: finalSpacing / 2,
      paddingTop: paddingTop,
      paddingBottom: paddingBottom
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    className: styles$m.header,
    style: isFullscreen || isCardReverse ? {
      paddingTop: hasHeader ? spacing / 2 : spacing,
      paddingBottom: hasHeader ? spacing / 2 : spacing,
      paddingLeft: isCardReverse ? spacing / 2 : spacing,
      paddingRight: isCardReverse ? spacing / 2 : spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    } : {
      paddingTop: isCardLayout ? spacing / 2 : null,
      paddingBottom: isCardLayout ? spacing : spacing / 2,
      paddingLeft: spacing / 2,
      paddingRight: spacing / 2
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, items, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    className: styles$m.footer,
    style: isFullscreen || isCardReverse ? {
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingTop: spacing / 2,
      paddingBottom: spacing / 2,
      transform: !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null
    } : {
      paddingLeft: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingRight: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingTop: isCardLayout ? spacing / 2 : null,
      paddingBottom: isCardLayout ? spacing / 2 : null
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$m.background
  }) : null);
};
ImageScreen.propTypes = propTypes$m;
ImageScreen.defaultProps = defaultProps$m;
var ImageScreen$1 = ImageScreen;

var ImageLegendScreen = function ImageLegendScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(ImageScreen$1, Object.assign({}, props, {
    withLegend: true
  }));
};
var ImageLegendScreen$1 = ImageLegendScreen;

var ImageTextScreen = function ImageTextScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(ImageScreen$1, Object.assign({}, props, {
    withText: true
  }));
};
var ImageTextScreen$1 = ImageTextScreen;

var ImageTitleScreen = function ImageTitleScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(ImageScreen$1, Object.assign({}, props, {
    withTitle: true
  }));
};
var ImageTitleScreen$1 = ImageTitleScreen;

var ImageTitleTextScreen = function ImageTitleTextScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(ImageScreen$1, Object.assign({}, props, {
    withTitle: true,
    withText: true
  }));
};
var ImageTitleTextScreen$1 = ImageTitleTextScreen;

// import * as transforms from './transforms/index';

var definition$h = [{
  id: 'image',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "6mX2ya",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    }),
    order: 4
  },
  title: reactIntl.defineMessage({
    id: "uJ9eBc",
    defaultMessage: [{
      "type": 0,
      "value": "Image"
    }]
  }),
  component: ImageScreen$1,
  layouts: ['normal', 'fullscreen'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'normal',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'image',
    type: 'visual',
    label: reactIntl.defineMessage({
      id: "xsipID",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    })
  }, {
    name: 'imageFit',
    type: 'fit',
    defaultValue: 'cover',
    values: ['cover', 'contain'],
    label: reactIntl.defineMessage({
      id: "dkBBRa",
      defaultMessage: [{
        "type": 0,
        "value": "Image fit"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'image-title',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "S/mavZ",
      defaultMessage: [{
        "type": 0,
        "value": "Text and Images"
      }]
    }),
    order: 3
  },
  title: reactIntl.defineMessage({
    id: "AA8TV9",
    defaultMessage: [{
      "type": 0,
      "value": "Image with title"
    }]
  }),
  component: ImageTitleScreen$1,
  layouts: ['normal', 'reverse', 'card', 'card-reverse'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'normal',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'image',
    type: 'visual',
    label: reactIntl.defineMessage({
      id: "xsipID",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    })
  }, {
    name: 'imageFit',
    type: 'fit',
    defaultValue: 'cover',
    values: ['cover', 'contain'],
    label: reactIntl.defineMessage({
      id: "dkBBRa",
      defaultMessage: [{
        "type": 0,
        "value": "Image fit"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    inline: true,
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'image-text',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "S/mavZ",
      defaultMessage: [{
        "type": 0,
        "value": "Text and Images"
      }]
    }),
    order: 3
  },
  title: reactIntl.defineMessage({
    id: "CJmQeh",
    defaultMessage: [{
      "type": 0,
      "value": "Image with text"
    }]
  }),
  component: ImageTextScreen$1,
  layouts: ['normal', 'reverse', 'card', 'card-reverse'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'normal',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'image',
    type: 'visual',
    label: reactIntl.defineMessage({
      id: "xsipID",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    })
  }, {
    name: 'imageFit',
    type: 'fit',
    defaultValue: 'cover',
    values: ['cover', 'contain'],
    label: reactIntl.defineMessage({
      id: "dkBBRa",
      defaultMessage: [{
        "type": 0,
        "value": "Image fit"
      }]
    })
  }, {
    name: 'text',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "4E2gbX",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'image-title-text',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "S/mavZ",
      defaultMessage: [{
        "type": 0,
        "value": "Text and Images"
      }]
    }),
    order: 3
  },
  title: reactIntl.defineMessage({
    id: "eWIM/8",
    defaultMessage: [{
      "type": 0,
      "value": "Image with title and text"
    }]
  }),
  component: ImageTitleTextScreen$1,
  layouts: ['normal', 'reverse', 'title-top', 'card', 'card-reverse'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'normal',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'image',
    type: 'visual',
    isHorizontal: false,
    label: reactIntl.defineMessage({
      id: "xsipID",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    })
  }, {
    name: 'imageFit',
    type: 'fit',
    defaultValue: 'cover',
    values: ['cover', 'contain'],
    label: reactIntl.defineMessage({
      id: "dkBBRa",
      defaultMessage: [{
        "type": 0,
        "value": "Image fit"
      }]
    })
  }, {
    name: 'title',
    type: 'text-element',
    inline: true,
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'text',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "4E2gbX",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'image-legend',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "6mX2ya",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    }),
    order: 4
  },
  title: reactIntl.defineMessage({
    id: "H1YcaV",
    defaultMessage: [{
      "type": 0,
      "value": "Image with legend"
    }]
  }),
  component: ImageLegendScreen$1,
  layouts: ['normal', 'reverse', 'card', 'card-reverse'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'normal',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'image',
    type: 'visual',
    label: reactIntl.defineMessage({
      id: "xsipID",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    })
  }, {
    name: 'imageFit',
    type: 'fit',
    defaultValue: 'cover',
    values: ['cover', 'contain'],
    label: reactIntl.defineMessage({
      id: "dkBBRa",
      defaultMessage: [{
        "type": 0,
        "value": "Image fit"
      }]
    })
  }, {
    name: 'legend',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "3OS3Ms",
      defaultMessage: [{
        "type": 0,
        "value": "Legend"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$l = {"inner":"micromag-element-keypad-inner","slot":"micromag-element-keypad-slot"};

var propTypes$l = {
  align: PropTypes$1.oneOf(['left', 'right', 'middle']),
  columns: PropTypes$1.number,
  spacing: PropTypes$1.number,
  className: PropTypes$1.string,
  itemClassName: PropTypes$1.string,
  innerClassName: PropTypes$1.string,
  items: PropTypes$1.node
};
var defaultProps$l = {
  align: null,
  columns: 3,
  spacing: 10,
  className: null,
  itemClassName: null,
  innerClassName: null,
  items: null
};
function Keypad$1(_ref) {
  var items = _ref.items,
    align = _ref.align,
    columns = _ref.columns,
    spacing = _ref.spacing,
    className = _ref.className,
    itemClassName = _ref.itemClassName,
    innerClassName = _ref.innerClassName;
  var itemWidth = "".concat(100 / columns, "%");
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$l.container, _defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$l.inner, _defineProperty({}, innerClassName, innerClassName !== null)]),
    style: _objectSpread$1({}, getStyleFromAlignment$1({
      horizontal: align
    }))
  }, items !== null ? items.map(function (item) {
    var _ref4 = item || {},
      key = _ref4.key;
    return /*#__PURE__*/React.createElement("div", {
      key: key,
      className: classNames([styles$l.item, _defineProperty({}, itemClassName, itemClassName !== null)]),
      style: {
        width: itemWidth,
        padding: spacing / 2
      }
    }, item);
  }) : null));
}
Keypad$1.propTypes = propTypes$l;
Keypad$1.defaultProps = defaultProps$l;

var styles$k = {"popupButton":"micromag-screen-keypad-popupButton","popup":"micromag-screen-keypad-popup","layoutLabelOver":"micromag-screen-keypad-layoutLabelOver","emptyButtonLabel":"micromag-screen-keypad-emptyButtonLabel","buttonLabel":"micromag-screen-keypad-buttonLabel","withSquareItems":"micromag-screen-keypad-withSquareItems","layoutNoLabel":"micromag-screen-keypad-layoutNoLabel","thumbnail":"micromag-screen-keypad-thumbnail","popupBackdrop":"micromag-screen-keypad-popupBackdrop","button":"micromag-screen-keypad-button","background":"micromag-screen-keypad-background","container":"micromag-screen-keypad-container","disabled":"micromag-screen-keypad-disabled","hidden":"micromag-screen-keypad-hidden","placeholder":"micromag-screen-keypad-placeholder","content":"micromag-screen-keypad-content","emptyTitle":"micromag-screen-keypad-emptyTitle","emptyText":"micromag-screen-keypad-emptyText","isPlaceholder":"micromag-screen-keypad-isPlaceholder","layout":"micromag-screen-keypad-layout","header":"micromag-screen-keypad-header","footer":"micromag-screen-keypad-footer","inner":"micromag-screen-keypad-inner","grid":"micromag-screen-keypad-grid","item":"micromag-screen-keypad-item","placeholderItem":"micromag-screen-keypad-placeholderItem","focus-visible":"micromag-screen-keypad-focus-visible","isEmpty":"micromag-screen-keypad-isEmpty","disableHover":"micromag-screen-keypad-disableHover","isLink":"micromag-screen-keypad-isLink","imagePlaceholder":"micromag-screen-keypad-imagePlaceholder","buttonPlaceholder":"micromag-screen-keypad-buttonPlaceholder","buttonVisualPlaceholder":"micromag-screen-keypad-buttonVisualPlaceholder","empty":"micromag-screen-keypad-empty","emptyButtonVisual":"micromag-screen-keypad-emptyButtonVisual","popupScroll":"micromag-screen-keypad-popupScroll","popupInner":"micromag-screen-keypad-popupInner","popupContent":"micromag-screen-keypad-popupContent","popupHeading":"micromag-screen-keypad-popupHeading","popupVisual":"micromag-screen-keypad-popupVisual","contentSplit":"micromag-screen-keypad-contentSplit","emptyHeading":"micromag-screen-keypad-emptyHeading","emptyVisual":"micromag-screen-keypad-emptyVisual","emptyContent":"micromag-screen-keypad-emptyContent","emptyCTA":"micromag-screen-keypad-emptyCTA","popupCTA":"micromag-screen-keypad-popupCTA","contentBottom":"micromag-screen-keypad-contentBottom","layoutLabelTop":"micromag-screen-keypad-layoutLabelTop","buttonVisual":"micromag-screen-keypad-buttonVisual"};

var placeholders = [{
  id: '1'
}, {
  id: '2'
}, {
  id: '3'
}, {
  id: '4'
}, {
  id: '5'
}, {
  id: '6'
}, {
  id: '7'
}, {
  id: '8'
}, {
  id: '9'
}];
var placeholderPopupBoxStyles = {
  padding: {
    left: 30,
    top: 30,
    right: 30,
    bottom: 30
  }
};
var stopDragEventsPropagation$3 = {
  onTouchMove: function onTouchMove(e) {
    return e.stopPropagation();
  },
  onTouchStart: function onTouchStart(e) {
    return e.stopPropagation();
  },
  onTouchEnd: function onTouchEnd(e) {
    return e.stopPropagation();
  },
  onPointerMove: function onPointerMove(e) {
    return e.stopPropagation();
  },
  onPointerUp: function onPointerUp(e) {
    return e.stopPropagation();
  },
  onPointerDown: function onPointerDown(e) {
    return e.stopPropagation();
  }
};
var mouseBlocker$1 = _objectSpread$1(_objectSpread$1({}, stopDragEventsPropagation$3), {}, {
  onClick: function onClick(e) {
    return e.stopPropagation();
  },
  style: {
    position: 'fixed',
    zIndex: '1000',
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    cursor: 'default'
  }
});
var propTypes$k = {
  items: PropTypes$1.arrayOf(PropTypes$1.shape({
    id: PropTypes$1.string,
    heading: PropTypes.headingElement,
    description: PropTypes.textElement,
    visual: PropTypes.visualElement,
    boxStyle: PropTypes.boxStyle
  })),
  title: PropTypes.headingElement,
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom']),
  spacing: PropTypes$1.number,
  keypadSettings: PropTypes$1.shape({
    layout: PropTypes$1.shape({
      columnAlign: PropTypes$1.oneOf(['left', 'right', 'middle']),
      columns: PropTypes$1.number,
      spacing: PropTypes$1.number,
      withSquareItems: PropTypes$1.bool
    })
  }),
  buttonStyles: PropTypes$1.shape({
    layout: PropTypes$1.string,
    textStyle: PropTypes.textStyle,
    boxStyle: PropTypes.boxStyle
  }),
  popupStyles: PropTypes$1.shape({
    layout: PropTypes$1.oneOf(['content-top', 'content-split', 'content-bottom']),
    headingTextStyle: PropTypes.textStyle,
    contentTextStyle: PropTypes.textStyle,
    boxStyle: PropTypes.boxStyle
  }),
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$k = {
  items: null,
  title: null,
  layout: null,
  spacing: 20,
  keypadSettings: null,
  buttonStyles: null,
  popupStyles: null,
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  className: null
};
var KeypadScreen = function KeypadScreen(_ref) {
  var items = _ref.items,
    title = _ref.title,
    layout = _ref.layout,
    spacing = _ref.spacing,
    keypadSettings = _ref.keypadSettings,
    buttonStyles = _ref.buttonStyles,
    popupStyles = _ref.popupStyles,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    className = _ref.className;
  var containerRef = React.useRef(null);
  var popupInnerRef = React.useRef(null);
  var trackScreenEvent = useTrackScreenEvent('keypad');
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var screenState = useScreenState();
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _useViewerInteraction = useViewerInteraction(),
    enableInteraction = _useViewerInteraction.enableInteraction,
    disableInteraction = _useViewerInteraction.disableInteraction;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var hasTitle = isTextFilled$1(title);
  var _ref2 = title || {},
    _ref2$textStyle = _ref2.textStyle,
    titleTextStyle = _ref2$textStyle === void 0 ? null : _ref2$textStyle;
  var _useDimensionObserver = useDimensionObserver(),
    headerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    headerHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var _useDimensionObserver3 = useDimensionObserver(),
    footerRef = _useDimensionObserver3.ref,
    _useDimensionObserver4 = _useDimensionObserver3.height,
    footerHeight = _useDimensionObserver4 === void 0 ? 0 : _useDimensionObserver4;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = !isPlaceholder && (current || active);
  var isInteractivePreview = isEdit && screenState === null;
  var _ref3 = keypadSettings || {},
    _ref3$layout = _ref3.layout,
    keypadLayout = _ref3$layout === void 0 ? null : _ref3$layout;
  var _ref4 = keypadLayout || {},
    _ref4$columnAlign = _ref4.columnAlign,
    columnAlign = _ref4$columnAlign === void 0 ? null : _ref4$columnAlign,
    _ref4$columns = _ref4.columns,
    columns = _ref4$columns === void 0 ? null : _ref4$columns,
    _ref4$spacing = _ref4.spacing,
    columnSpacing = _ref4$spacing === void 0 ? null : _ref4$spacing,
    _ref4$withSquareItems = _ref4.withSquareItems,
    withSquareItems = _ref4$withSquareItems === void 0 ? false : _ref4$withSquareItems;
  var _ref5 = buttonStyles || {},
    _ref5$layout = _ref5.layout,
    buttonLayout = _ref5$layout === void 0 ? null : _ref5$layout,
    _ref5$textStyle = _ref5.textStyle,
    buttonTextStyle = _ref5$textStyle === void 0 ? null : _ref5$textStyle,
    _ref5$boxStyle = _ref5.boxStyle,
    buttonBoxStyle = _ref5$boxStyle === void 0 ? null : _ref5$boxStyle;
  var _ref6 = popupStyles || {},
    _ref6$layout = _ref6.layout,
    popupLayout = _ref6$layout === void 0 ? null : _ref6$layout,
    _ref6$headingTextStyl = _ref6.headingTextStyle,
    headingTextStyle = _ref6$headingTextStyl === void 0 ? null : _ref6$headingTextStyl,
    _ref6$contentTextStyl = _ref6.contentTextStyle,
    contentTextStyle = _ref6$contentTextStyl === void 0 ? null : _ref6$contentTextStyl,
    _ref6$button = _ref6.button,
    popupButtons = _ref6$button === void 0 ? null : _ref6$button,
    _ref6$boxStyle = _ref6.boxStyle,
    popupBoxStyle = _ref6$boxStyle === void 0 ? null : _ref6$boxStyle;
  var _ref7 = popupButtons || {},
    _ref7$buttonTextStyle = _ref7.buttonTextStyle,
    popupButtonsTextStyle = _ref7$buttonTextStyle === void 0 ? null : _ref7$buttonTextStyle,
    _ref7$boxStyle = _ref7.boxStyle,
    popupButtonsBoxStyle = _ref7$boxStyle === void 0 ? null : _ref7$boxStyle;
  var popupLayoutClassName = React.useMemo(function () {
    return popupLayout !== null ? changeCase.camelCase(popupLayout) : '';
  }, [popupLayout]);
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    showPopup = _useState2[0],
    setShowPopup = _useState2[1];
  var _useState3 = React.useState(null),
    _useState4 = _slicedToArray(_useState3, 2),
    popup = _useState4[0],
    setPopup = _useState4[1];
  var _ref8 = popup || {},
    _ref8$heading = _ref8.heading,
    popupHeading = _ref8$heading === void 0 ? null : _ref8$heading,
    _ref8$content = _ref8.content,
    popupContent = _ref8$content === void 0 ? null : _ref8$content,
    _ref8$largeVisual = _ref8.largeVisual,
    largeVisual = _ref8$largeVisual === void 0 ? null : _ref8$largeVisual,
    _ref8$button = _ref8.button,
    popupButton = _ref8$button === void 0 ? null : _ref8$button;
  var hasPopupHeading = isTextFilled$1(popupHeading);
  var _ref9 = popupHeading || {},
    _ref9$textStyle = _ref9.textStyle,
    popupHeadingTextStyle = _ref9$textStyle === void 0 ? null : _ref9$textStyle;
  var hasPopupContent = isTextFilled$1(popupContent);
  var _ref10 = popupContent || {},
    _ref10$textStyle = _ref10.textStyle,
    popupContentTextStyle = _ref10$textStyle === void 0 ? null : _ref10$textStyle;
  var _ref11 = popupButton || {},
    _ref11$label = _ref11.label,
    buttonLabel = _ref11$label === void 0 ? null : _ref11$label,
    _ref11$url = _ref11.url,
    buttonUrl = _ref11$url === void 0 ? null : _ref11$url,
    _ref11$inWebView = _ref11.inWebView,
    popupInWebView = _ref11$inWebView === void 0 ? false : _ref11$inWebView,
    _ref11$boxStyle = _ref11.boxStyle,
    popupButtonBoxStyle = _ref11$boxStyle === void 0 ? null : _ref11$boxStyle;
  var onItemClick = React.useCallback(function (e, item) {
    e.stopPropagation();
    trackScreenEvent('click_item', item);
    var _ref12 = item || {},
      _ref12$inWebView = _ref12.inWebView,
      inWebView = _ref12$inWebView === void 0 ? false : _ref12$inWebView,
      _ref12$url = _ref12.url,
      url = _ref12$url === void 0 ? null : _ref12$url;
    if (inWebView && url !== null) {
      openWebView({
        url: url
      });
      return;
    }
    setPopup(item);
    setShowPopup(true);
  }, [disableInteraction, setPopup, trackScreenEvent]);
  var onCloseModal = React.useCallback(function () {
    setShowPopup(false);
    trackScreenEvent('close_modal');
  }, [enableInteraction, setShowPopup, trackScreenEvent]);
  var _useState5 = React.useState(0),
    _useState6 = _slicedToArray(_useState5, 2),
    popupDragDirection = _useState6[0],
    setPopupDragDirection = _useState6[1];
  var onPopupScrollHeightChange = React.useCallback(function (_ref13) {
    var _ref13$scrolleeHeight = _ref13.scrolleeHeight,
      scrolleeHeight = _ref13$scrolleeHeight === void 0 ? 0 : _ref13$scrolleeHeight;
    if (Math.floor(scrolleeHeight) >= Math.floor(height)) {
      setPopupDragDirection('top');
    } else {
      setPopupDragDirection('bottom');
    }
  }, [height]);
  var computePopupProgress = React.useCallback(function (_ref14) {
    var dragActive = _ref14.active,
      _ref14$movement = _slicedToArray(_ref14.movement, 2),
      my = _ref14$movement[1],
      _ref14$velocity = _slicedToArray(_ref14.velocity, 2),
      vy = _ref14$velocity[1];
    var damper = 0.5;
    var delta = Math.abs(my) / window.innerHeight;
    var reachedThreshold = vy > 1 || delta > 0.3;
    var progress = 0;
    if (popupDragDirection === 'top' && my < 0) {
      progress = delta * damper * -1;
    } else if (popupDragDirection === 'bottom' && my > 0) {
      progress = delta * damper;
    }
    if (!dragActive) {
      if (reachedThreshold) {
        onCloseModal();
        return 1;
      }
      return 0;
    }
    return progress;
  }, [onCloseModal, popupDragDirection]);
  React.useEffect(function () {
    if (showPopup) {
      disableInteraction();
    } else {
      enableInteraction();
    }
  }, [showPopup]);
  React.useEffect(function () {
    function handleClickOutside(event) {
      if (!current && isView || popupInnerRef.current && !popupInnerRef.current.contains(event.target) && containerRef.current && containerRef.current.contains(event.target) && !isInteractivePreview && !isEdit && showPopup) {
        onCloseModal();
      }
    }
    document.addEventListener('mousedown', handleClickOutside);
    return function () {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [current, popupInnerRef, containerRef, isInteractivePreview, isEdit, showPopup]);
  var _useState7 = React.useState(false),
    _useState8 = _slicedToArray(_useState7, 2),
    popupDragDisabled = _useState8[0],
    setPopupDragDisabled = _useState8[1];
  var onPopupScrollBottom = React.useCallback(function () {
    setPopupDragDisabled(false);
  }, [setPopupDragDisabled]);
  var onPopupScrollNotBottom = React.useCallback(function () {
    setPopupDragDisabled(true);
  }, [setPopupDragDisabled]);
  var _useDragProgress = useDragProgress({
      disabled: !isView || popupDragDisabled,
      progress: showPopup ? 0 : 1,
      computeProgress: computePopupProgress,
      springParams: {
        config: {
          tension: 300,
          friction: 30
        }
      }
    }),
    bindPopupDrag = _useDragProgress.bind,
    popupSpring = _useDragProgress.progress;
  React.useEffect(function () {
    var keyup = function keyup(e) {
      if (e.key === 'Escape') {
        if (showPopup) {
          onCloseModal();
        }
      }
    };
    document.addEventListener('keyup', keyup);
    return function () {
      document.removeEventListener('keyup', keyup);
    };
  }, [showPopup, onCloseModal]);
  var gridItems = React.useMemo(function () {
    return (items === null || items.length === 0 ? placeholders : items).map(function (item) {
      var _ref15 = item || {},
        _ref15$id = _ref15.id,
        id = _ref15$id === void 0 ? null : _ref15$id,
        _ref15$label = _ref15.label,
        label = _ref15$label === void 0 ? null : _ref15$label,
        _ref15$visual = _ref15.visual,
        visual = _ref15$visual === void 0 ? null : _ref15$visual,
        _ref15$textStyle = _ref15.textStyle,
        textStyle = _ref15$textStyle === void 0 ? null : _ref15$textStyle,
        _ref15$boxStyle = _ref15.boxStyle,
        boxStyle = _ref15$boxStyle === void 0 ? null : _ref15$boxStyle,
        _ref15$heading = _ref15.heading,
        heading = _ref15$heading === void 0 ? null : _ref15$heading,
        _ref15$content = _ref15.content,
        content = _ref15$content === void 0 ? null : _ref15$content,
        _ref15$url = _ref15.url,
        url = _ref15$url === void 0 ? null : _ref15$url,
        _ref15$inWebView = _ref15.inWebView,
        inWebView = _ref15$inWebView === void 0 ? false : _ref15$inWebView,
        _ref15$largeVisual = _ref15.largeVisual,
        popupLargeVisual = _ref15$largeVisual === void 0 ? null : _ref15$largeVisual;
      var _ref16 = visual || {},
        _ref16$url = _ref16.url,
        visualUrl = _ref16$url === void 0 ? null : _ref16$url;
      var _ref17 = heading || {},
        _ref17$body = _ref17.body,
        headingBody = _ref17$body === void 0 ? null : _ref17$body;
      var _ref18 = content || {},
        _ref18$body = _ref18.body,
        contentBody = _ref18$body === void 0 ? null : _ref18$body;
      var key = label || visualUrl || id;
      var isEmpty = label === null && visual === null;
      var isExternalLink = url !== null && !inWebView;
      var isPopupEmpty = (heading === null || headingBody === null || headingBody === '') && (content === null || contentBody === null || contentBody === '') && popupLargeVisual === null;
      return /*#__PURE__*/React.createElement("div", {
        key: key,
        className: styles$k.item
      }, /*#__PURE__*/React.createElement(Button$1, {
        className: classNames([styles$k.button, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, styles$k.layoutLabelBottom, buttonLayout === 'label-bottom'), styles$k.layoutLabelTop, buttonLayout === 'label-top'), styles$k.layoutNoLabel, buttonLayout === 'no-label'), styles$k.layoutLabelOver, buttonLayout === 'label-over'), styles$k.isEmpty, isEmpty), styles$k.isLink, url !== null), styles$k.disableHover, isPopupEmpty && url === null)]),
        style: _objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({}, getStyleFromBox$1(buttonBoxStyle)), getStyleFromText$1(buttonTextStyle)), getStyleFromBox$1(boxStyle)), getStyleFromText$1(textStyle)),
        external: isExternalLink,
        href: isExternalLink ? url : null,
        focusable: current,
        onClick: !isPopupEmpty || url !== null && !isExternalLink ? function (e) {
          return onItemClick(e, item);
        } : null
      }, /*#__PURE__*/React.createElement(ScreenElement$1, {
        emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
          id: "Qanvis",
          defaultMessage: [{
            "type": 0,
            "value": "Visual"
          }]
        }),
        emptyClassName: classNames([styles$k.empty, styles$k.buttonVisual, styles$k.emptyButtonVisual]),
        isEmpty: visual === null
      }, visual !== null ? /*#__PURE__*/React.createElement(Visual$1, {
        className: styles$k.buttonVisual,
        imageClassName: styles$k.thumbnail,
        media: visual,
        width: "auto"
      }) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
        placeholder: /*#__PURE__*/React.createElement(Button$1$1, null),
        emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
          id: "Zbu5Uk",
          defaultMessage: [{
            "type": 0,
            "value": "Label"
          }]
        }),
        emptyClassName: classNames([styles$k.empty, styles$k.emptyButtonLabel]),
        isEmpty: label === null
      }, label !== null || !isInteractivePreview ? /*#__PURE__*/React.createElement("div", {
        className: styles$k.buttonLabel
      }, label) : null)));
    });
  }, [items, screenState, keypadSettings]);
  React.useEffect(function () {
    if (screenState === 'popup' && isPlaceholder) {
      setPopup(placeholderPopupBoxStyles); // @note force placeholder
      setShowPopup(true);
    }
    if (screenState === 'keypad') {
      setPopup(null);
      setShowPopup(false);
    }
    if (screenState !== null && screenState.includes('popup')) {
      var index = screenState.split('.').pop();
      var found = items[index];
      setPopup(found);
      setShowPopup(true);
    }
    if (screenState === null) {
      setPopup(null);
      setShowPopup(false);
    }
  }, [screenState, items]);
  return /*#__PURE__*/React.createElement("div", {
    ref: containerRef,
    className: classNames([styles$k.container, _defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$k.isPlaceholder, isPlaceholder), styles$k.withSquareItems, withSquareItems)]),
    "data-screen-ready": true
  }, isEdit && screenState !== null ? /*#__PURE__*/React.createElement("div", mouseBlocker$1) : null, !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    className: styles$k.background
  }) : null, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$k.inner
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    width: width,
    height: height,
    verticalAlign: layout,
    withArrow: !showPopup,
    withShadow: !showPopup,
    disabled: isPreview || isPlaceholder || showPopup
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$k.layout,
    verticalAlign: layout,
    width: width,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (hasHeader ? headerHeight : spacing) + (current && !isPreview ? viewerTopHeight : 0),
      paddingBottom: (hasFooter ? footerHeight : spacing) + (current && !isPreview ? viewerBottomHeight : 0)
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    ref: headerRef,
    className: styles$k.header,
    style: {
      paddingTop: spacing / 2,
      paddingLeft: spacing,
      paddingRight: spacing,
      paddingBottom: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "Title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "BSTWf8",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: classNames([styles$k.empty, styles$k.emptyHeading]),
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$k.title
  }, title, {
    textStyle: titleTextStyle
  })) : null), /*#__PURE__*/React.createElement(Keypad$1, {
    className: classNames([styles$k.grid, _defineProperty({}, styles$k.gridPlaceholder, isPlaceholder)]),
    align: columnAlign,
    columns: isPlaceholder ? 3 : columns,
    spacing: isPlaceholder ? 2 : columnSpacing,
    items: gridItems
  }), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    ref: footerRef,
    className: styles$k.footer,
    style: {
      transform: current && !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null,
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingBottom: spacing / 2,
      paddingTop: spacing
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null), popup !== null ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(web.animated.div, {
    className: classNames([styles$k.popupBackdrop]),
    style: {
      opacity: popupSpring.to(function (p) {
        return 1 - Math.abs(p);
      })
    }
  }), /*#__PURE__*/React.createElement(web.animated.div, Object.assign({
    className: styles$k.popup,
    style: {
      transform: popupSpring.to(function (p) {
        return "translateY(".concat(100 * p, "%) scale(").concat(1 - Math.abs(p * 0.5), ")");
      }),
      pointerEvents: popupSpring.to(function (p) {
        return Math.abs(p) > 0.5 ? 'none' : 'auto';
      })
    }
  }, bindPopupDrag()), /*#__PURE__*/React.createElement(Scroll$1, {
    disabled: isPreview || isPlaceholder,
    verticalAlign: "middle",
    withArrow: false,
    scrollPosition: !showPopup ? 1 : null,
    onScrolledBottom: onPopupScrollBottom,
    onScrolledNotBottom: onPopupScrollNotBottom,
    onScrollHeightChange: onPopupScrollHeightChange,
    className: styles$k.popupScroll,
    withShadow: true
  }, /*#__PURE__*/React.createElement("div", {
    ref: popupInnerRef,
    className: classNames([styles$k.popupInner, styles$k[popupLayoutClassName]]),
    style: _objectSpread$1(_objectSpread$1({}, getStyleFromBox$1(placeholderPopupBoxStyles)), getStyleFromBox$1(popupBoxStyle))
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "IE7U/Q",
      defaultMessage: [{
        "type": 0,
        "value": "Heading"
      }]
    }),
    emptyClassName: classNames([styles$k.empty, styles$k.emptyHeading]),
    isEmpty: !hasPopupHeading
  }, hasPopupHeading ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$k.popupHeading
  }, popupHeading, {
    textStyle: _objectSpread$1(_objectSpread$1({}, headingTextStyle), popupHeadingTextStyle)
  })) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "popupContent",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "JRZoe6",
      defaultMessage: [{
        "type": 0,
        "value": "Content"
      }]
    }),
    emptyClassName: classNames([styles$k.empty, styles$k.emptyContent]),
    isEmpty: !hasPopupContent
  }, hasPopupContent ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$k.popupContent
  }, popupContent, {
    textStyle: _objectSpread$1(_objectSpread$1({}, contentTextStyle), popupContentTextStyle)
  })) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "image",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "z4Pr+g",
      defaultMessage: [{
        "type": 0,
        "value": "Visual (Image or Video)"
      }]
    }),
    emptyClassName: classNames([styles$k.empty, styles$k.emptyVisual]),
    isEmpty: largeVisual === null
  }, largeVisual !== null ? /*#__PURE__*/React.createElement(Visual$1, {
    className: styles$k.popupVisual,
    media: largeVisual,
    width: "100%"
  }) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "button",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "N7Kj8z",
      defaultMessage: [{
        "type": 0,
        "value": "Button"
      }]
    }),
    emptyClassName: classNames([styles$k.empty, styles$k.emptyCTA]),
    isEmpty: popupButton === null
  }, popupButton !== null ? /*#__PURE__*/React.createElement(CallToAction$1, {
    className: styles$k.popupCTA,
    label: _objectSpread$1(_objectSpread$1({}, popupButtonsTextStyle), buttonLabel),
    url: buttonUrl,
    inWebView: popupInWebView,
    openWebView: openWebView,
    type: "click",
    boxStyle: _objectSpread$1(_objectSpread$1({}, popupButtonsBoxStyle), popupButtonBoxStyle)
  }) : null))))) : null)));
};
KeypadScreen.propTypes = propTypes$k;
KeypadScreen.defaultProps = defaultProps$k;
var Keypad = KeypadScreen;

var definition$g = [{
  id: 'keypad',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "cGItoy",
      defaultMessage: [{
        "type": 0,
        "value": "List"
      }]
    }),
    order: 4
  },
  title: reactIntl.defineMessage({
    id: "75nZbY",
    defaultMessage: [{
      "type": 0,
      "value": "Keypad"
    }]
  }),
  layouts: ['top', 'middle', 'bottom'],
  component: Keypad,
  states: [{
    id: 'keypad',
    label: reactIntl.defineMessage({
      id: "Z4f5qh",
      defaultMessage: [{
        "type": 0,
        "value": "Buttons"
      }]
    }),
    fields: [{
      name: 'layout',
      type: 'screen-layout',
      defaultValue: 'middle',
      label: reactIntl.defineMessage({
        id: "4iBXj2",
        defaultMessage: [{
          "type": 0,
          "value": "Layout"
        }]
      })
    }, {
      name: 'keypadSettings',
      type: 'fields',
      isList: false,
      withoutLabel: true,
      defaultValue: {
        layout: {
          columnAlign: 'middle',
          columns: 3,
          spacing: 2,
          withSquareItems: false
        }
      },
      label: reactIntl.defineMessage({
        id: "FjuRaw",
        defaultMessage: [{
          "type": 0,
          "value": "Keypad settings"
        }]
      }),
      fields: [{
        name: 'layout',
        type: 'keypad-layout',
        isList: true
      }]
    }, {
      name: 'items',
      type: 'buttons',
      label: reactIntl.defineMessage({
        id: "fbUW2U",
        defaultMessage: [{
          "type": 0,
          "value": "Items"
        }]
      }),
      isSection: true
    }, {
      name: 'buttonStyles',
      type: 'fields',
      defaultValue: {
        layout: 'label-bottom',
        boxStyle: {
          backgroundColor: {
            alpha: 0.15,
            color: '#000000'
          }
        }
      },
      isList: true,
      fields: [{
        name: 'layout',
        type: 'button-layout',
        label: reactIntl.defineMessage({
          id: "OPxJx/",
          defaultMessage: [{
            "type": 0,
            "value": "Layout"
          }]
        })
      }, {
        name: 'textStyle',
        type: 'text-style-form',
        label: reactIntl.defineMessage({
          id: "rzXCu2",
          defaultMessage: [{
            "type": 0,
            "value": "Label style"
          }]
        })
      }, {
        name: 'boxStyle',
        type: 'box-style-form',
        label: reactIntl.defineMessage({
          id: "nno1Pq",
          defaultMessage: [{
            "type": 0,
            "value": "Button style"
          }]
        })
      }]
    }]
  }, {
    id: 'popups',
    label: reactIntl.defineMessage({
      id: "FYm4w+",
      defaultMessage: [{
        "type": 0,
        "value": "Popups"
      }]
    }),
    fields: [{
      name: 'popupStyles',
      type: 'fields',
      defaultValue: {
        layout: 'content-top'
      },
      isList: true,
      fields: [{
        name: 'layout',
        type: 'card-layout',
        label: reactIntl.defineMessage({
          id: "OPxJx/",
          defaultMessage: [{
            "type": 0,
            "value": "Layout"
          }]
        })
      }, {
        name: 'headingTextStyle',
        type: 'text-style-form',
        label: reactIntl.defineMessage({
          id: "zrK6ak",
          defaultMessage: [{
            "type": 0,
            "value": "Heading text style"
          }]
        })
      }, {
        name: 'contentTextStyle',
        type: 'text-style-form',
        label: reactIntl.defineMessage({
          id: "z9nSIG",
          defaultMessage: [{
            "type": 0,
            "value": "Content text style"
          }]
        })
      }, {
        name: 'button',
        type: 'fields',
        label: reactIntl.defineMessage({
          id: "i6bmbD",
          defaultMessage: [{
            "type": 0,
            "value": "Button"
          }]
        }),
        fields: [{
          name: 'buttonTextStyle',
          type: 'text-style-form',
          label: reactIntl.defineMessage({
            id: "p5RHzq",
            defaultMessage: [{
              "type": 0,
              "value": "Button text style"
            }]
          })
        }, {
          name: 'buttonStyle',
          type: 'box-style-form',
          label: reactIntl.defineMessage({
            id: "nno1Pq",
            defaultMessage: [{
              "type": 0,
              "value": "Button style"
            }]
          })
        }]
      }, {
        name: 'boxStyle',
        type: 'box-style-form',
        label: reactIntl.defineMessage({
          id: "p1pghO",
          defaultMessage: [{
            "type": 0,
            "value": "Box style"
          }]
        })
      }]
    }]
  }, {
    id: 'popup',
    label: reactIntl.defineMessage({
      id: "sSahY1",
      defaultMessage: [{
        "type": 0,
        "value": "Popup"
      }]
    }),
    defaultValue: [],
    repeatable: true,
    fieldName: 'items',
    fields: [{
      name: 'heading',
      type: 'heading-element',
      label: reactIntl.defineMessage({
        id: "6iR9Mt",
        defaultMessage: [{
          "type": 0,
          "value": "Heading"
        }]
      })
    }, {
      name: 'content',
      type: 'text-element',
      label: reactIntl.defineMessage({
        id: "uoF5Pv",
        defaultMessage: [{
          "type": 0,
          "value": "Content"
        }]
      }),
      theme: {
        label: {
          textStyle: 'text'
        }
      }
    }, {
      name: 'largeVisual',
      type: 'visual',
      label: reactIntl.defineMessage({
        id: "HwqzVR",
        defaultMessage: [{
          "type": 0,
          "value": "Visual"
        }]
      })
    }, {
      name: 'button',
      type: 'button-link',
      label: reactIntl.defineMessage({
        id: "i6bmbD",
        defaultMessage: [{
          "type": 0,
          "value": "Button"
        }]
      }),
      theme: {
        label: {
          textStyle: 'button'
        }
      }
    }]
  }],
  fields: [{
    name: 'title',
    type: 'heading-element',
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$2$3 = [{
  elementType: 'geometry',
  stylers: [{
    color: '#f5f5f5'
  }]
}, {
  elementType: 'labels.icon',
  stylers: [{
    visibility: 'off'
  }]
}, {
  elementType: 'labels.text.fill',
  stylers: [{
    color: '#616161'
  }]
}, {
  elementType: 'labels.text.stroke',
  stylers: [{
    color: '#f5f5f5'
  }]
}, {
  featureType: 'administrative.land_parcel',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'administrative.land_parcel',
  elementType: 'labels.text.fill',
  stylers: [{
    color: '#bdbdbd'
  }]
}, {
  featureType: 'administrative.neighborhood',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'poi',
  elementType: 'geometry',
  stylers: [{
    color: '#eeeeee'
  }]
}, {
  featureType: 'poi',
  elementType: 'labels.text',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'poi',
  elementType: 'labels.text.fill',
  stylers: [{
    color: '#757575'
  }]
}, {
  featureType: 'poi.business',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'poi.park',
  elementType: 'geometry',
  stylers: [{
    color: '#e5e5e5'
  }]
}, {
  featureType: 'poi.park',
  elementType: 'labels.text.fill',
  stylers: [{
    color: '#9e9e9e'
  }]
}, {
  featureType: 'road',
  elementType: 'geometry',
  stylers: [{
    color: '#ffffff'
  }]
}, {
  featureType: 'road',
  elementType: 'labels',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'road',
  elementType: 'labels.icon',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'road.arterial',
  elementType: 'labels',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'road.arterial',
  elementType: 'labels.text.fill',
  stylers: [{
    color: '#757575'
  }]
}, {
  featureType: 'road.highway',
  elementType: 'geometry',
  stylers: [{
    color: '#dadada'
  }]
}, {
  featureType: 'road.highway',
  elementType: 'labels',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'road.highway',
  elementType: 'labels.text.fill',
  stylers: [{
    color: '#616161'
  }]
}, {
  featureType: 'road.local',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'road.local',
  elementType: 'labels.text.fill',
  stylers: [{
    color: '#9e9e9e'
  }]
}, {
  featureType: 'transit',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'transit.line',
  elementType: 'geometry',
  stylers: [{
    color: '#e5e5e5'
  }]
}, {
  featureType: 'transit.station',
  elementType: 'geometry',
  stylers: [{
    color: '#eeeeee'
  }]
}, {
  featureType: 'water',
  elementType: 'geometry',
  stylers: [{
    color: '#c9c9c9'
  }]
}, {
  featureType: 'water',
  elementType: 'labels.text',
  stylers: [{
    visibility: 'off'
  }]
}, {
  featureType: 'water',
  elementType: 'labels.text.fill',
  stylers: [{
    color: '#9e9e9e'
  }]
}];

var eventsMapping = {
  onClick: ['click', function (map) {
    return map.getCenter();
  }],
  onCenterChanged: ['center_changed', function (map) {
    return map.getCenter();
  }],
  onBoundsChanged: ['bounds_changed', function (map) {
    return map.getBounds();
  }],
  onDragEnd: ['dragend', function (map) {
    return map.getCenter();
  }],
  onTilesLoaded: ['tilesloaded', function () {}]
};
function useGoogleMap(_ref) {
  var zoom = _ref.zoom,
    _ref$maxZoom = _ref.maxZoom,
    maxZoom = _ref$maxZoom === void 0 ? null : _ref$maxZoom,
    _ref$center = _ref.center,
    center = _ref$center === void 0 ? null : _ref$center,
    _ref$withoutStyle = _ref.withoutStyle,
    withoutStyle = _ref$withoutStyle === void 0 ? false : _ref$withoutStyle,
    _ref$fitBounds = _ref.fitBounds,
    fitBounds = _ref$fitBounds === void 0 ? false : _ref$fitBounds,
    _ref$bounds = _ref.bounds,
    bounds = _ref$bounds === void 0 ? null : _ref$bounds,
    events = _ref.events,
    _ref$draggable = _ref.draggable,
    draggable = _ref$draggable === void 0 ? false : _ref$draggable,
    zoomControl = _ref.zoomControl,
    mapTypeControl = _ref.mapTypeControl,
    scaleControl = _ref.scaleControl,
    streetViewControl = _ref.streetViewControl,
    rotateControl = _ref.rotateControl,
    fullscreenControl = _ref.fullscreenControl;
  var client = useGoogleMapsClient();
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    ready = _useState2[0],
    setReady = _useState2[1];
  var containerRef = React.useRef(null);
  var mapRef = React.useRef(null);
  var _useDimensionObserver = useDimensionObserver(),
    resizeRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.width,
    width = _useDimensionObserver2 === void 0 ? null : _useDimensionObserver2,
    _useDimensionObserver3 = _useDimensionObserver.height,
    height = _useDimensionObserver3 === void 0 ? null : _useDimensionObserver3;
  React.useEffect(function () {
    var map = mapRef.current;
    if (map !== null && center !== null) {
      var _ref2 = center || {},
        _ref2$lat = _ref2.lat,
        lat = _ref2$lat === void 0 ? null : _ref2$lat,
        _ref2$lng = _ref2.lng,
        lng = _ref2$lng === void 0 ? null : _ref2$lng;
      map.panTo({
        lat: lat || 0,
        lng: lng || 0
      });
    }
  }, [center]);
  React.useEffect(function () {
    var map = mapRef.current;
    if (map !== null && zoom !== null) {
      map.setZoom(Math.min(maxZoom, zoom));
    }
  }, [zoom, maxZoom]);
  var updateBounds = React.useCallback(function (map, newBounds) {
    if (newBounds === null || newBounds.equals(map.getBounds())) {
      return;
    }
    map.fitBounds(newBounds);
    if (map.getZoom() > maxZoom) {
      map.setZoom(maxZoom);
    }
    map.panToBounds(newBounds);
  }, [maxZoom]);
  React.useEffect(function () {
    var map = mapRef.current;
    if (map !== null && fitBounds) {
      updateBounds(map, bounds);
    }
  }, [updateBounds, bounds, fitBounds, width, height]);
  React.useEffect(function () {
    var map = mapRef.current;
    if (ready && map !== null) {
      map.setOptions({
        draggable: draggable,
        scrollWheel: draggable,
        disableDoubleClickZoom: !draggable,
        gestureHandling: draggable ? 'cooperative' : 'none'
      });
    }
  }, [ready, draggable]);
  React.useEffect(function () {
    if (client === null || containerRef.current === null || mapRef.current !== null) {
      return function () {};
    }
    var map = new client.maps.Map(containerRef.current, {
      zoom: zoom,
      center: center,
      styles: !withoutStyle ? styles$2$3 : null,
      zoomControl: zoomControl,
      mapTypeControl: mapTypeControl,
      scaleControl: scaleControl,
      streetViewControl: streetViewControl,
      rotateControl: rotateControl,
      fullscreenControl: fullscreenControl
    });
    if (fitBounds) {
      updateBounds(map, bounds);
    }
    mapRef.current = map;

    // @TODO unbind events
    if (events !== null) {
      Object.keys(events).forEach(function (eventName) {
        if (events[eventName] !== null) {
          map.addListener(eventsMapping[eventName][0], function () {
            return events[eventName](eventsMapping[eventName][1](map));
          });
        }
      });
    }
    setReady(true);
    return function () {};
  }, [client, setReady]);
  var finalRef = React.useCallback(function (ref) {
    resizeRef.current = ref;
    containerRef.current = ref;
  }, []);
  return {
    ref: finalRef,
    map: mapRef.current,
    ready: ready,
    loading: !ready
  };
}

var styles$1$5 = {"container":"micromag-element-map-container","map":"micromag-element-map-map","preventScroll":"micromag-element-map-preventScroll"};

var stopDragEventsPropagation$2 = {
  onTouchMove: function onTouchMove(e) {
    return e.stopPropagation();
  },
  onTouchStart: function onTouchStart(e) {
    return e.stopPropagation();
  },
  onTouchEnd: function onTouchEnd(e) {
    return e.stopPropagation();
  },
  onPointerMove: function onPointerMove(e) {
    return e.stopPropagation();
  },
  onPointerUp: function onPointerUp(e) {
    return e.stopPropagation();
  },
  onPointerDown: function onPointerDown(e) {
    return e.stopPropagation();
  }
};
var propTypes$2$6 = {
  center: PropTypes$1.shape({
    lat: PropTypes$1.number,
    lng: PropTypes$1.number
  }),
  zoom: PropTypes$1.number,
  maxZoom: PropTypes$1.number,
  bounds: PropTypes$1.object,
  // eslint-disable-line
  draggable: PropTypes$1.bool,
  withoutStyle: PropTypes$1.bool,
  // Global maps events
  events: PropTypes$1.object,
  // eslint-disable-line
  fitBounds: PropTypes$1.bool,
  zoomControl: PropTypes$1.bool,
  mapTypeControl: PropTypes$1.bool,
  scaleControl: PropTypes$1.bool,
  streetViewControl: PropTypes$1.bool,
  rotateControl: PropTypes$1.bool,
  fullscreenControl: PropTypes$1.bool,
  className: PropTypes$1.string,
  children: PropTypes$1.node,
  focusable: PropTypes$1.bool
};
var defaultProps$2$6 = {
  center: null,
  zoom: null,
  maxZoom: 16,
  bounds: null,
  events: null,
  fitBounds: false,
  draggable: true,
  withoutStyle: false,
  zoomControl: false,
  mapTypeControl: false,
  scaleControl: false,
  streetViewControl: false,
  rotateControl: false,
  fullscreenControl: false,
  className: null,
  children: null,
  focusable: true
};
var Map$2 = function Map(_ref) {
  var center = _ref.center,
    zoom = _ref.zoom,
    maxZoom = _ref.maxZoom,
    bounds = _ref.bounds,
    draggable = _ref.draggable,
    withoutStyle = _ref.withoutStyle,
    events = _ref.events,
    fitBounds = _ref.fitBounds,
    zoomControl = _ref.zoomControl,
    mapTypeControl = _ref.mapTypeControl,
    scaleControl = _ref.scaleControl,
    streetViewControl = _ref.streetViewControl,
    rotateControl = _ref.rotateControl,
    fullscreenControl = _ref.fullscreenControl,
    className = _ref.className,
    children = _ref.children,
    focusable = _ref.focusable;
  var _useGoogleMap = useGoogleMap({
      zoom: zoom,
      maxZoom: maxZoom,
      bounds: bounds,
      draggable: draggable,
      fitBounds: fitBounds,
      center: center,
      events: events,
      withoutStyle: withoutStyle,
      zoomControl: zoomControl,
      mapTypeControl: mapTypeControl,
      scaleControl: scaleControl,
      streetViewControl: streetViewControl,
      rotateControl: rotateControl,
      fullscreenControl: fullscreenControl
    }),
    map = _useGoogleMap.map,
    mapRef = _useGoogleMap.ref;
  return /*#__PURE__*/React.createElement("div", Object.assign({
    className: classNames([styles$1$5.container, _defineProperty(_defineProperty({}, className, className !== null), styles$1$5.preventScroll, !draggable)])
  }, stopDragEventsPropagation$2), /*#__PURE__*/React.createElement("div", {
    ref: mapRef,
    className: styles$1$5.map,
    tabIndex: focusable ? '0' : '-1'
  }), React.Children.map(children, function (child) {
    return /*#__PURE__*/React.cloneElement(child, {
      map: map
    });
  }));
};
Map$2.propTypes = propTypes$2$6;
Map$2.defaultProps = defaultProps$2$6;
var GoogleMap = Map$2;

var eventMapping = {
  onClick: 'click',
  onDoubleClick: 'dblclick'
};
function useGoogleMapMarker(map) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$position = _ref.position,
    position = _ref$position === void 0 ? null : _ref$position,
    _ref$icon = _ref.icon,
    icon = _ref$icon === void 0 ? null : _ref$icon,
    _ref$iconSize = _ref.iconSize,
    iconSize = _ref$iconSize === void 0 ? null : _ref$iconSize,
    events = _ref.events,
    title = _ref.title;
  var client = useGoogleMapsClient();
  var markerRef = React.useRef(null);
  React.useEffect(function () {
    var marker = markerRef.current;
    if (marker !== null && position !== null) {
      marker.setPosition(position);
    }
  }, [position]);
  var updateIcon = React.useCallback(function (marker, newIcon) {
    if (client === null) {
      return;
    }
    if (isObject(newIcon)) {
      var _ref2 = newIcon || {},
        _ref2$url = _ref2.url,
        iconUrl = _ref2$url === void 0 ? null : _ref2$url;
      marker.setIcon({
        url: iconUrl,
        scaledSize: new client.maps.Size(iconSize.width, iconSize.height)
      });
    } else {
      marker.setIcon(newIcon);
    }
  }, [client, iconSize]);
  React.useEffect(function () {
    var marker = markerRef.current;
    if (marker === null || client === null) {
      return;
    }
    updateIcon(marker, icon);
  }, [client, icon, updateIcon]);
  React.useEffect(function () {
    if (client === null || map === null || markerRef.current !== null) {
      return function () {};
    }
    var marker = new client.maps.Marker({
      position: position,
      map: map,
      title: title
    });
    updateIcon(marker, icon);
    Object.keys(events).forEach(function (eventName) {
      marker.addListener(eventMapping[eventName], events[eventName]);
    });
    markerRef.current = marker;
    return function () {
      client.maps.event.clearInstanceListeners(marker);
      marker.setMap(null);
    };
  }, [client, map]);
  return markerRef.current;
}

var Pin = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAArCAYAAACJrvP4AAAC+ElEQVR4AWIgBP7//88DxCGAWssB1pIkCsO1iLG27WCtYG17x3Ywtm3bthlNMLZtz/NrXvStM/cbP/Vln6RSOfq/xqlOi2nO10bxUe26RRKLRdnxiZOnTqVpQO6NOc5AiYSd6O4dRcbAnlJQv4rk/fWt5HzzkbDjEydPHfX0pQr6Q4dcI7RqqZP7Z1z8i/cSLuqop4/+ZCB3iOt214UFVkG9SoikvOijHx1fGAXeqWNm7u9f0Zj2oh+dCoHcOlfkA0oZiB66ZYaBZ53uo/N7pOiWGBqmyF21xKEg24uhQf/mOWJsmaYgYOiiDwfYn5yTRE2X42vNWy/KyKcelZ6PPMCOTzwhEH04ii8ABzMRaNwzj0uXB+8rs4gnAqIPR/HJ4UvgV8wdlICUXOR9+9GHo/jG8enxK+aR+cDI+/ajD0eJ50Vzvv3Yt5h35Acj79ePPhylbetyXuVfA70z9OEoXVy0pbBl40DfGfpwVMy1R1kTRnpBTqM1cZQHh3P2Tiwv1wzynKEPR2HaNI4VNmsQyBcE3bj+UTgYE1kncmCvFQQMXRGpfQsmcre27fNFHVtkFYSeOM459OHcDvw+/mwtzkQ2QOigh64qz7RlrXRmTw1nA4ZOXG+F3z/Iozrkmvm1/80IRD866CkfY1hqeSeOGZnA6EdHJWPaNjdYw/tH0wHRR38q/43Padcx8/75ISUQ9fTRr1IxiUZbR7ZtSulxUk9fsoySZ8+xjxZ1bpkUiDrq6Uv3f/9TXVxk53z3qS+IPHXUq0xMbHuRNWGk77CQp05laiLysoRCbu4vn5cLIk6eOpUN06a52J46zisPRpy8ypaJyOvaMqycrz4sAcInTl5l07RprC3u1qYEDJ+4yraJSI3w5vVmiXO1dYNJPAjYQzo+CDlfvi+A2PGJqyBMG8aegiY1BRg7vgrKYqY53RjUS4Cx4wcGk1isa3zUNTB2/OBgIvVDq5bawNjxg4R96Z07U5T393fCjh8k7E7t2PPEi7rs+Kn0XwF82Z38cjx5pwAAAABJRU5ErkJggg==";

var PinInactive = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAArCAYAAACJrvP4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFFmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA0LTA3VDE2OjQ0OjQ4LTA0OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNC0wN1QxNzo1MToxMi0wNDowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wNC0wN1QxNzo1MToxMi0wNDowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMDRhNzAzOS01Mjk1LTQzNjktYmMxNS1kYzEzODM3NDQ0MmIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTA0YTcwMzktNTI5NS00MzY5LWJjMTUtZGMxMzgzNzQ0NDJiIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTA0YTcwMzktNTI5NS00MzY5LWJjMTUtZGMxMzgzNzQ0NDJiIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMDRhNzAzOS01Mjk1LTQzNjktYmMxNS1kYzEzODM3NDQ0MmIiIHN0RXZ0OndoZW49IjIwMjAtMDQtMDdUMTY6NDQ6NDgtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5lxvhNAAAEzUlEQVRYhbWXTWgbRxiG329mNLuKtVrrEMlEQsL4YhNIIoiQffFhcwkG44MugRBIXFpyq2+BUnJom0Mgh/bWQ35EcimE3kJoAg605BZMqLB7SEKMChKKA7bDypK1vz1UNrZr70qx+l52Z76fZ2b4ZoYhhMj3/RiAi51O55LneWeFECeFEEOO42w5jvORMfanoii/APiNiJpBuSgAMmxZ1k3O+fVarWZVKhW9Xq/DNE20221Eo1FomoZTp07hzJkzn9LptHRd92cp5XdEtNkzzPf9km3bD1ZWVsTi4mK02QwcMAAgFovhwoUL7dOnTzuRSOQaEf0aCPN9n2zb/t627YVHjx4NNRqNUMhBjYyM4MqVK1uRSORHKeW3R8Isy/phc3Pz63K5HGu1Wn2DdnTixAlcvXq1OTw8/NNeINv56S7dwnFBANBqtVAul2O2bS/4vl/a6acuaNi27b/v37+vfc7SHaWRkRHMz8+bkUgkS0SbDAAsy7q5vLwsBgkCgEajgZWVFWFZ1k0AYL7vxzjn11+8eBEdKKmrxcXFKOf8uu/7MQHgYq1Ws5rNZiisWq1ibW1td58lk0nkcrnAmGaziVqtZmWz2Yui0+lcqlQqehjo9evX2NjY2G2bpgnTNLG+vo58Ph8YW6lU9FQqdYl5nne2Xq+HzmgvaK82NjZQrVYD4+v1OjzPO8uEECdN0wx0XltbO5bdNE0IIU4yzvlQu90OdB6EnXM+xGzbXo/H44HO0Whw7YTZ4/E4bNteZ57nVROJRKBzMpk8lj2RSMDzvCrjnC+l02k3yDmXy+GoASUSidDyz2QyLud8iUkp7xYKheBFB5DP5zE2NgZN0yCEgKZpGBsbCy17ADh//nxbSnlXENFSu93+MDo6GltdXQ0MyuVyobM4qNHRUUQikQYRLTEAkFLeNgxjq68sPcowjC1VVW8D3SuGMfYgmUx+Gh8fHyhofHwcqVRqE0B5F0ZEjpTyy5mZmS3O+UBAnHPMzMxsRSKRr4jI2YV1gU+llH8YhmENAmYYhiWl/J2Inu70sb0OiqLMFwoFK2zfhCmZTKJQKFiKonyxt38fjIganPOFUqkUfFiGqFQqmZzzBSLadxuzg46c83u6ri8Xi0Xnc0DFYtHRdX2Zc37voO0/MABQFOWyYRjbYWfmQcXjcRiGsa0oyuXD7IfCiGhVCHFrbm6ur+Wcm5szhRC3iOjQ0+FQGAAwxu5kMpkPExMTPYEmJiaQyWQ+MMbuHJnzKEN3712bnZ1tCSECQUIIzM7OtqSU13b2VF+wLvAl5/z51NRUYLFMTU05nPPnRPQyyC8QBgBSyhvT09OOqqqH2lVVxfT0tCOlvBGWKxRGRG8cx3k2OTl56J03OTnpOo7zjIjeHBsGAKqqflMsFrcZ2+/OGEOxWNxWVfWbXvL0BCOivwC8OliZ3farrn0wMABQVfXhuXPn9r0K8/l8U1XVh73m6BkG4EkulxNE/z7piAjZbFYAeDJwGBF9dF33bTqdBgCk02m4rvuWiD4OHNZVJZVKAQC630o/wX3BFEV5r2maDwCapvmKorz/32BEVNd1vQ0Auq63iSj4RXIcGIB32WzW1jQN2WzWBvCuz/je5fs+63Q6j13XbXc6nce+7/c12H8A3aa8zLNKuWMAAAAASUVORK5CYII=";

var propTypes$1$7 = {
  // map: PropTypes.object.isRequired, // eslint-disable-line
  map: PropTypes$1.object,
  // eslint-disable-line
  position: PropTypes$1.shape({
    lat: PropTypes$1.number,
    lng: PropTypes$1.number
  }).isRequired,
  type: PropTypes$1.string,
  // .isRequired,
  events: PropTypes$1.object,
  // eslint-disable-line
  active: PropTypes$1.bool,
  title: PropTypes$1.string,
  image: PropTypes.imageMedia,
  iconSize: PropTypes$1.shape({
    width: PropTypes$1.number,
    height: PropTypes$1.number
  })
};
var defaultProps$1$7 = {
  map: null,
  events: null,
  active: true,
  title: null,
  image: null,
  iconSize: {
    width: 50,
    height: 50
  }
};
var Marker = function Marker(_ref) {
  var map = _ref.map,
    position = _ref.position,
    type = _ref.type,
    events = _ref.events,
    active = _ref.active,
    title = _ref.title,
    image = _ref.image,
    iconSize = _ref.iconSize;
  useGoogleMapMarker(map, {
    position: position,
    type: type,
    events: events,
    title: title,
    icon: image || (active ? Pin : PinInactive),
    iconSize: iconSize
  });
  return null;
};
Marker.propTypes = propTypes$1$7;
Marker.defaultProps = defaultProps$1$7;
var Marker$1 = Marker;

var styles$j = {"container":"micromag-element-map-container"};

var propTypes$j = {
  center: PropTypes$1.shape({
    lat: PropTypes$1.number,
    lng: PropTypes$1.number
  }),
  zoom: PropTypes$1.number,
  draggable: PropTypes$1.bool,
  markers: PropTypes$1.arrayOf(PropTypes$1.object),
  // eslint-disable-line react/forbid-prop-types
  onClickMap: PropTypes$1.func,
  onClickMarker: PropTypes$1.func,
  className: PropTypes$1.string,
  onReady: PropTypes$1.func,
  onCenterChanged: PropTypes$1.func,
  onBoundsChanged: PropTypes$1.func,
  onDrag: PropTypes$1.func,
  onDragEnd: PropTypes$1.func,
  withoutStyle: PropTypes$1.bool,
  fitBounds: PropTypes$1.bool,
  zoomControl: PropTypes$1.bool,
  mapTypeControl: PropTypes$1.bool,
  scaleControl: PropTypes$1.bool,
  streetViewControl: PropTypes$1.bool,
  rotateControl: PropTypes$1.bool,
  fullscreenControl: PropTypes$1.bool,
  focusable: PropTypes$1.bool
};
var defaultProps$j = {
  center: null,
  zoom: null,
  draggable: true,
  markers: [],
  onClickMap: null,
  onClickMarker: null,
  className: null,
  onReady: null,
  onCenterChanged: null,
  onBoundsChanged: null,
  onDrag: null,
  onDragEnd: null,
  withoutStyle: false,
  fitBounds: false,
  zoomControl: false,
  mapTypeControl: false,
  scaleControl: false,
  streetViewControl: false,
  rotateControl: false,
  fullscreenControl: false,
  focusable: true
};
var Map$1 = function Map(_ref) {
  var center = _ref.center,
    zoom = _ref.zoom,
    draggable = _ref.draggable,
    markers = _ref.markers,
    onClickMap = _ref.onClickMap,
    onClickMarker = _ref.onClickMarker,
    className = _ref.className,
    onReady = _ref.onReady,
    onCenterChanged = _ref.onCenterChanged,
    onBoundsChanged = _ref.onBoundsChanged,
    onDrag = _ref.onDrag,
    onDragEnd = _ref.onDragEnd,
    withoutStyle = _ref.withoutStyle,
    fitBounds = _ref.fitBounds,
    zoomControl = _ref.zoomControl,
    mapTypeControl = _ref.mapTypeControl,
    scaleControl = _ref.scaleControl,
    streetViewControl = _ref.streetViewControl,
    rotateControl = _ref.rotateControl,
    fullscreenControl = _ref.fullscreenControl,
    focusable = _ref.focusable;
  var client = useGoogleMapsClient();
  var onClick = React.useCallback(function (position) {
    if (onClickMap !== null) {
      onClickMap(position);
    }
  }, [onClickMap]);
  var bounds = React.useMemo(function () {
    var correctMarkers = (markers || []).filter(function (it) {
      return it !== null && (it.geoPosition || null) !== null;
    });
    if (client === null || correctMarkers === null || correctMarkers.length === 0) {
      return null;
    }
    var markersBounds = correctMarkers.reduce(function (newBounds, _ref2) {
      var _ref2$geoPosition = _ref2.geoPosition,
        geoPosition = _ref2$geoPosition === void 0 ? null : _ref2$geoPosition;
      var _ref3 = geoPosition || {},
        _ref3$lat = _ref3.lat,
        lat = _ref3$lat === void 0 ? null : _ref3$lat,
        _ref3$lng = _ref3.lng,
        lng = _ref3$lng === void 0 ? null : _ref3$lng;
      if (lat !== null && lng !== null) {
        newBounds.extend(new client.maps.LatLng(lat, lng));
      }
      return newBounds;
    }, new client.maps.LatLngBounds());
    return markersBounds;
  }, [client, markers]);
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    loaded = _useState2[0],
    setLoaded = _useState2[1];
  React.useEffect(function () {
    if (client !== null && loaded) {
      if (onReady !== null) {
        onReady(client);
      }
    }
  }, [client, loaded, onReady]);
  var onTilesLoaded = React.useCallback(function () {
    return setLoaded(true);
  }, [setLoaded]);
  var events = React.useMemo(function () {
    return {
      onClick: onClick,
      onCenterChanged: onCenterChanged,
      onBoundsChanged: onBoundsChanged,
      onDrag: onDrag,
      onDragEnd: onDragEnd,
      onTilesLoaded: onTilesLoaded
    };
  }, [onClick, onCenterChanged, onBoundsChanged, onDrag, onDragEnd, onTilesLoaded]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$j.container, _defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement(GoogleMap, {
    center: center,
    zoom: zoom,
    withoutStyle: withoutStyle,
    bounds: bounds,
    draggable: draggable,
    events: events,
    fitBounds: fitBounds,
    zoomControl: zoomControl,
    mapTypeControl: mapTypeControl,
    scaleControl: scaleControl,
    streetViewControl: streetViewControl,
    rotateControl: rotateControl,
    fullscreenControl: fullscreenControl,
    focusable: focusable
  }, markers !== null ? markers.map(function (_ref5, index) {
    var _ref5$active = _ref5.active,
      active = _ref5$active === void 0 ? true : _ref5$active,
      _ref5$geoPosition = _ref5.geoPosition,
      geoPosition = _ref5$geoPosition === void 0 ? null : _ref5$geoPosition,
      _ref5$image = _ref5.image,
      image = _ref5$image === void 0 ? null : _ref5$image,
      _ref5$title = _ref5.title,
      title = _ref5$title === void 0 ? null : _ref5$title;
    return geoPosition !== null && (geoPosition.lat || null) !== null && (geoPosition.lng || null) !== null ? /*#__PURE__*/React.createElement(Marker$1, {
      key: "marker-".concat(index),
      active: active,
      title: title !== null && _typeof(title.body) ? title.body : null,
      image: image,
      position: geoPosition,
      events: {
        onClick: onClickMarker !== null ? function (e) {
          return onClickMarker(e, index);
        } : function () {
          return console.log(index);
        } // eslint-disable-line no-console
      }
    }) : /*#__PURE__*/React.createElement("div", null);
  }) : null));
};
Map$1.propTypes = propTypes$j;
Map$1.defaultProps = defaultProps$j;
var Map$1$1 = Map$1;

var styles$i = {"container":"micromag-screen-map-container","splash":"micromag-screen-map-splash","markerOverlayScrollable":"micromag-screen-map-markerOverlayScrollable","markerOverlayContainer":"micromag-screen-map-markerOverlayContainer","background":"micromag-screen-map-background","disabled":"micromag-screen-map-disabled","hidden":"micromag-screen-map-hidden","placeholder":"micromag-screen-map-placeholder","content":"micromag-screen-map-content","markerOverlaySafe":"micromag-screen-map-markerOverlaySafe","markerOverlay":"micromag-screen-map-markerOverlay","markerOverlayContent":"micromag-screen-map-markerOverlayContent","markerOverlayContentInner":"micromag-screen-map-markerOverlayContentInner","swipeIndicator":"micromag-screen-map-swipeIndicator","title":"micromag-screen-map-title","description":"micromag-screen-map-description","button":"micromag-screen-map-button","emptyTitle":"micromag-screen-map-emptyTitle","emptyDescription":"micromag-screen-map-emptyDescription","emptyButton":"micromag-screen-map-emptyButton","splashButton":"micromag-screen-map-splashButton","closeButton":"micromag-screen-map-closeButton","markerImage":"micromag-screen-map-markerImage","markerTitle":"micromag-screen-map-markerTitle","markerSubtitle":"micromag-screen-map-markerSubtitle","markerDescription":"micromag-screen-map-markerDescription","hasSelectedMarker":"micromag-screen-map-hasSelectedMarker","opened":"micromag-screen-map-opened"};

var defaultCenter = {
  lat: 45.5,
  lng: -73.56
};
var defaultZoom = 10;
var stopDragEventsPropagation$1 = {
  onTouchMove: function onTouchMove(e) {
    return e.stopPropagation();
  },
  onTouchStart: function onTouchStart(e) {
    return e.stopPropagation();
  },
  onTouchEnd: function onTouchEnd(e) {
    return e.stopPropagation();
  },
  onPointerMove: function onPointerMove(e) {
    return e.stopPropagation();
  },
  onPointerUp: function onPointerUp(e) {
    return e.stopPropagation();
  },
  onPointerDown: function onPointerDown(e) {
    return e.stopPropagation();
  }
};
var propTypes$i = {
  layout: PropTypes$1.oneOf(['normal']),
  draggable: PropTypes$1.bool,
  markers: PropTypes$1.oneOfType([PropTypes.markers, PropTypes.markersWithImage]),
  title: PropTypes.textElement,
  description: PropTypes.textElement,
  button: PropTypes.textElement,
  openedMarkerSpacerHeight: PropTypes$1.number,
  withMarkerImages: PropTypes$1.bool,
  center: PropTypes.geoPosition,
  zoom: PropTypes$1.number,
  fitBounds: PropTypes$1.bool,
  // header: MicromagPropTypes.header,
  // footer: MicromagPropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  // enableInteractions: PropTypes.func,
  // disableInteraction: PropTypes.func,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$i = {
  layout: 'normal',
  draggable: true,
  markers: [],
  center: defaultCenter,
  zoom: defaultZoom,
  fitBounds: true,
  title: null,
  description: null,
  button: null,
  openedMarkerSpacerHeight: 0.75,
  withMarkerImages: false,
  background: null,
  current: true,
  active: true,
  type: null,
  className: null
};
function MapScreen(_ref) {
  var layout = _ref.layout,
    draggable = _ref.draggable,
    markers = _ref.markers,
    title = _ref.title,
    description = _ref.description,
    button = _ref.button,
    openedMarkerSpacerHeight = _ref.openedMarkerSpacerHeight,
    withMarkerImages = _ref.withMarkerImages,
    zoom = _ref.zoom,
    center = _ref.center,
    fitBounds = _ref.fitBounds,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    type = _ref.type,
    className = _ref.className;
  var _useIntl = reactIntl.useIntl(),
    locale = _useIntl.locale;
  var _useGoogleKeys = useGoogleKeys(),
    _useGoogleKeys$apiKey = _useGoogleKeys.apiKey,
    apiKey = _useGoogleKeys$apiKey === void 0 ? null : _useGoogleKeys$apiKey;
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useState = React.useState(null),
    _useState2 = _slicedToArray(_useState, 2),
    selectedMarkerIndex = _useState2[0],
    setSelectedMarkerIndex = _useState2[1];
  var hasSelectedMarker = selectedMarkerIndex !== null;
  var lastRenderedMarker = React.useRef(null);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var _ref2 = background || {},
    backgroundColor = _ref2.color;
  var markerOverlayContentStyle = getStyleFromColor$1(backgroundColor);
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var screenState = useScreenState();
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    ready = _useState4[0],
    setReady = _useState4[1];
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var backgroundPlaying = current && (isView || isEdit);
  // const backgroundShouldLoad = current || active;
  var backgroundShouldLoad = current || active;
  var _useState5 = React.useState(isStatic || isCapture),
    _useState6 = _slicedToArray(_useState5, 2),
    opened = _useState6[0],
    setOpened = _useState6[1];
  var _useViewerInteraction = useViewerInteraction(),
    enableInteraction = _useViewerInteraction.enableInteraction,
    disableInteraction = _useViewerInteraction.disableInteraction;
  var onMapReady = React.useCallback(function () {
    return setReady(true);
  }, [setReady]);
  var finalMarkers = React.useMemo(function () {
    return (markers || []).map(function (marker, markerI) {
      return _objectSpread$1(_objectSpread$1({}, marker), {}, {
        active: markerI === selectedMarkerIndex
      });
    });
  }, [markers, selectedMarkerIndex]);
  var closeMarker = React.useCallback(function () {
    var lastMarker = finalMarkers[selectedMarkerIndex];
    lastRenderedMarker.current = lastMarker;
    setSelectedMarkerIndex(null);
  }, [finalMarkers, selectedMarkerIndex, setSelectedMarkerIndex]);
  var onClickMap = React.useCallback(function () {
    var lastMarker = finalMarkers[selectedMarkerIndex];
    trackScreenEvent('click_marker_close', "Marker ".concat(selectedMarkerIndex + 1, ": ").concat(lastMarker.title.body), {
      marker: lastMarker,
      markerIndex: selectedMarkerIndex
    });
    closeMarker();
  }, [finalMarkers, selectedMarkerIndex, trackScreenEvent, closeMarker]);
  var onClickMarker = React.useCallback(function (e, index) {
    var marker = finalMarkers[index];
    setSelectedMarkerIndex(index);
    trackScreenEvent('click_marker_open', "Marker ".concat(index + 1, ": ").concat(marker.title.body), {
      marker: marker,
      markerIndex: index
    });
  }, [finalMarkers, setSelectedMarkerIndex, trackScreenEvent]);
  var onButtonClick = React.useCallback(function () {
    setOpened(true);
    if (disableInteraction !== null) {
      disableInteraction();
    }
    trackScreenEvent('click_button', button.body);
  }, [setOpened, disableInteraction, trackScreenEvent, button]);
  var onCloseClick = React.useCallback(function () {
    setOpened(false);
    if (enableInteraction !== null) {
      enableInteraction();
    }
    trackScreenEvent('click_close', 'Close icon');
    closeMarker();
  }, [setOpened, enableInteraction, trackScreenEvent]);
  var onMapDragEnd = React.useCallback(function (newCenter) {
    var coords = newCenter.toJSON();
    trackScreenEvent('drag_map', "Latitude: ".concat(coords.lat.toFixed(4), ", Longitude: ").concat(coords.lng.toFixed(4)), {
      coords: coords
    });
  }, [trackScreenEvent]);
  var onScrolledBottom = React.useCallback(function (_ref3) {
    var initial = _ref3.initial;
    if (initial) {
      var selectedMarker = (markers || [])[selectedMarkerIndex];
      trackScreenEvent('scroll', "Marker ".concat(selectedMarkerIndex + 1, ": ").concat(selectedMarker.title.body), {
        marker: selectedMarker,
        markerIndex: selectedMarkerIndex
      });
    }
  }, [trackScreenEvent, markers, selectedMarkerIndex]);
  var _useDimensionObserver = useDimensionObserver({
      disabled: !isView
    }),
    markerOverContentInnerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.width,
    markerOverContentInnerWidth = _useDimensionObserver2 === void 0 ? '100%' : _useDimensionObserver2;
  var _useState7 = React.useState(0),
    _useState8 = _slicedToArray(_useState7, 2),
    markerImagesLoaded = _useState8[0],
    setMarkerImagesLoaded = _useState8[1];
  var allMarkersImagesLoaded = markerImagesLoaded === (markers || []).length;
  var finalReady = ready && (!withMarkerImages || allMarkersImagesLoaded);
  React.useEffect(function () {
    if (withMarkerImages && markers !== null && (markers || []).length) {
      setMarkerImagesLoaded(0);
      var imgs = markers.map(function (marker) {
        var _ref4 = marker || {},
          _ref4$image = _ref4.image,
          image = _ref4$image === void 0 ? null : _ref4$image;
        var _ref5 = image || {},
          _ref5$url = _ref5.url,
          url = _ref5$url === void 0 ? null : _ref5$url;
        var withUrl = url !== null;
        if (withUrl) {
          var img = new Image();
          img.src = url;
          img.onload = function () {
            setMarkerImagesLoaded(function (index) {
              return setMarkerImagesLoaded(index + 1);
            });
          };
          return img;
        }
        return null;
      });
      return function () {
        imgs.filter(function (img) {
          return img !== null;
        }).forEach(function (img) {
          img.onload = function () {}; // eslint-disable-line no-param-reassign
        });
      };
    }
    return function () {};
  }, [withMarkerImages, markers]);

  // Switch state
  React.useEffect(function () {
    if (!isEdit && !isPreview) {
      return;
    }
    var _ref6 = screenState !== null ? screenState.split('.') : [],
      _ref7 = _slicedToArray(_ref6, 2),
      _ref7$ = _ref7[0],
      stateId = _ref7$ === void 0 ? null : _ref7$,
      _ref7$2 = _ref7[1],
      markerIndex = _ref7$2 === void 0 ? null : _ref7$2;
    if (stateId === 'intro') {
      setOpened(false);
      setSelectedMarkerIndex(null);
    } else if (stateId === 'map') {
      setOpened(true);
      setSelectedMarkerIndex(null);
    } else if (stateId === 'markers' || stateId === 'markers-with-image') {
      setOpened(true);
      setSelectedMarkerIndex(parseInt(markerIndex, 10));
    }
  }, [screenState, isEdit, setOpened]);
  var staticUrl;
  if (width > 0 && height > 0 && apiKey !== null) {
    var correctMarkers = markers !== null ? markers.filter(function (it) {
      return it !== null;
    }).filter(function (_ref8) {
      var _ref8$geoPosition = _ref8.geoPosition,
        geoPosition = _ref8$geoPosition === void 0 ? null : _ref8$geoPosition;
      return geoPosition !== null;
    }) : null;
    staticUrl = "https://maps.googleapis.com/maps/api/staticmap?size=".concat(Math.round(width), "x").concat(Math.round(height));
    if (center !== null && (correctMarkers === null || correctMarkers.length === 0)) {
      var _ref9 = center || {},
        _ref9$lat = _ref9.lat,
        lat = _ref9$lat === void 0 ? null : _ref9$lat,
        _ref9$lng = _ref9.lng,
        lng = _ref9$lng === void 0 ? null : _ref9$lng;
      staticUrl += "&center=".concat(lat, ",").concat(lng);
    }
    if (zoom !== null) {
      staticUrl += "&zoom=".concat(zoom);
    }
    if (apiKey !== null) {
      staticUrl += "&key=".concat(apiKey);
    }
    if (locale !== null) {
      staticUrl += "&language=".concat(locale);
    }
    if (correctMarkers !== null) {
      staticUrl += correctMarkers.map(function (marker) {
        var _ref10 = marker || {},
          _ref10$geoPosition = _ref10.geoPosition,
          geoPosition = _ref10$geoPosition === void 0 ? null : _ref10$geoPosition;
        var _ref11 = geoPosition || {},
          _ref11$lat = _ref11.lat,
          lat = _ref11$lat === void 0 ? null : _ref11$lat,
          _ref11$lng = _ref11.lng,
          lng = _ref11$lng === void 0 ? null : _ref11$lng;
        var _ref12 = marker || {},
          _ref12$image = _ref12.image,
          image = _ref12$image === void 0 ? null : _ref12$image;
        var _ref13 = image || {},
          _ref13$url = _ref13.url,
          url = _ref13$url === void 0 ? null : _ref13$url;
        return lat !== null && lng !== null ? "&markers=".concat(url !== null ? "icon:".concat(url) : '', "%7C").concat(lat, ",").concat(lng) : '';
      }).join('');
    }
  }
  var renderedMarker = hasSelectedMarker ? finalMarkers[selectedMarkerIndex] : lastRenderedMarker.current;
  var _ref14 = renderedMarker || {},
    _ref14$title = _ref14.title,
    markerTitle = _ref14$title === void 0 ? null : _ref14$title,
    _ref14$subtitle = _ref14.subtitle,
    markerSubtitle = _ref14$subtitle === void 0 ? null : _ref14$subtitle,
    _ref14$description = _ref14.description,
    markerDescription = _ref14$description === void 0 ? null : _ref14$description,
    _ref14$image = _ref14.image,
    markerImage = _ref14$image === void 0 ? null : _ref14$image;
  var hasMarkerTitle = markerTitle !== null;
  var hasMarkerSubtitle = markerSubtitle !== null;
  var hasMarkerDescription = markerDescription !== null;
  var hasMarkerImage = markerImage !== null;
  var hasTitle = isTextFilled$1(title);
  var hasDescription = isTextFilled$1(description);
  var hasButton = isTextFilled$1(button);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$i.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$i["".concat(layout, "Layout")], layout !== null), styles$i.opened, opened || isPreview && screenState !== 'intro'), styles$i.hasSelectedMarker, hasSelectedMarker)]),
    "data-screen-ready": finalReady
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$i.content
  }, isPlaceholder ? /*#__PURE__*/React.createElement(Map$1$2, {
    className: styles$i.placeholder,
    withImages: withMarkerImages
  }) : /*#__PURE__*/React.createElement(React.Fragment, null, isPreview ? /*#__PURE__*/React.createElement(Image$1$1, {
    media: staticUrl !== null ? {
      url: staticUrl,
      metadata: {
        width: Math.min(640, width),
        height: Math.min(640, height)
      }
    } : null,
    width: width,
    height: height,
    resolution: resolution,
    objectFit: {
      fit: 'cover'
    }
  }) : /*#__PURE__*/React.createElement(Map$1$1, {
    key: "map",
    center: center,
    zoom: zoom,
    draggable: draggable,
    markers: finalMarkers,
    fitBounds: fitBounds,
    onClickMarker: onClickMarker,
    onReady: onMapReady,
    onDragEnd: onMapDragEnd
  }), /*#__PURE__*/React.createElement("div", Object.assign({
    key: "marker-overlay",
    className: styles$i.markerOverlayContainer
  }, stopDragEventsPropagation$1), /*#__PURE__*/React.createElement("div", {
    className: styles$i.markerOverlayScrollable
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    fullscreen: true,
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom
  }, /*#__PURE__*/React.createElement(Button$3, {
    className: styles$i.markerOverlaySafe,
    onClick: onClickMap,
    withoutStyle: true,
    style: {
      height: height * openedMarkerSpacerHeight
    },
    disabled: isPreview,
    focusable: current && isView
  }), /*#__PURE__*/React.createElement("div", {
    className: styles$i.markerOverlay,
    style: {
      minHeight: height * (1 - openedMarkerSpacerHeight)
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$i.markerOverlayContent,
    style: markerOverlayContentStyle
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$i.swipeIndicator
  }), /*#__PURE__*/React.createElement("div", {
    className: styles$i.markerOverlayContentInner,
    key: "markerContent-".concat(selectedMarkerIndex),
    ref: markerOverContentInnerRef
  }, hasMarkerImage ? /*#__PURE__*/React.createElement(Image$1$1, {
    className: styles$i.markerImage,
    media: markerImage,
    width: markerOverContentInnerWidth,
    resolution: resolution
  }) : null, hasMarkerTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$i.markerTitle
  }, markerTitle)) : null, hasMarkerSubtitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    size: 3,
    className: styles$i.markerSubtitle
  }, markerSubtitle)) : null, hasMarkerDescription ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$i.markerDescription
  }, markerDescription)) : null)))))), /*#__PURE__*/React.createElement("div", {
    key: "splash",
    className: classNames([styles$i.splash])
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "2ZOPe+",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$i.emptyTitle,
    isEmpty: !hasTitle
  }, /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$i.title
  }, title))), /*#__PURE__*/React.createElement(ScreenElement$1, {
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "507VAi",
      defaultMessage: [{
        "type": 0,
        "value": "Description"
      }]
    }),
    emptyClassName: styles$i.emptyDescription,
    isEmpty: !hasDescription
  }, /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$i.description
  }, description))), /*#__PURE__*/React.createElement(ScreenElement$1, {
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "bv3rRe",
      defaultMessage: [{
        "type": 0,
        "value": "Button"
      }]
    }),
    emptyClassName: styles$i.emptyButton,
    isEmpty: !hasButton
  }, /*#__PURE__*/React.createElement(Button$1, {
    className: styles$i.splashButton,
    onClick: onButtonClick,
    buttonStyle: button !== null ? button.buttonStyle : null,
    focusable: current && isView
  }, hasButton ? /*#__PURE__*/React.createElement(Text$1, Object.assign({}, button, {
    className: styles$i.button
  })) : /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
    id: "sXfFFw",
    defaultMessage: [{
      "type": 0,
      "value": "Enter"
    }]
  })))), !isStatic && !isCapture && !isPreview && !isEdit ? /*#__PURE__*/React.createElement(Button$3, {
    key: "close-button",
    className: styles$i.closeButton,
    onClick: onCloseClick,
    focusable: current && isView
  }, "\xD7") : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(Background$1, {
    color: {
      color: '#FFFFFF',
      alpha: 1
    },
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: backgroundShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$i.background
  }) : null);
}
MapScreen.propTypes = propTypes$i;
MapScreen.defaultProps = defaultProps$i;

var MapImagesScreen = function MapImagesScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(MapScreen, Object.assign({}, props, {
    withMarkerImages: true
  }));
};
var MapImagesScreen$1 = MapImagesScreen;

// import * as transforms from './transforms/index';

var definition$f = [{
  id: 'map',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "Z27IP6",
      defaultMessage: [{
        "type": 0,
        "value": "Map"
      }]
    }),
    order: 6
  },
  title: reactIntl.defineMessage({
    id: "dPYwJG",
    defaultMessage: [{
      "type": 0,
      "value": "Map"
    }]
  }),
  component: MapScreen,
  layouts: ['normal'],
  // transforms,
  states: [{
    id: 'intro',
    label: reactIntl.defineMessage({
      id: "BgrRxZ",
      defaultMessage: [{
        "type": 0,
        "value": "Intro"
      }]
    }),
    fields: [{
      name: 'title',
      type: 'heading-element',
      theme: {
        textStyle: 'heading1'
      },
      label: reactIntl.defineMessage({
        id: "+AEVbJ",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      })
    }, {
      name: 'description',
      type: 'text-element',
      theme: {
        textStyle: 'text'
      },
      label: reactIntl.defineMessage({
        id: "ZCe0r4",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      })
    }, {
      name: 'button',
      type: 'button-element',
      theme: {
        textStyle: 'button'
      },
      label: reactIntl.defineMessage({
        id: "i6bmbD",
        defaultMessage: [{
          "type": 0,
          "value": "Button"
        }]
      })
    }]
  }, {
    id: 'map',
    label: reactIntl.defineMessage({
      id: "eYHEYe",
      defaultMessage: [{
        "type": 0,
        "value": "Map"
      }]
    }),
    fields: [{
      name: 'draggable',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "A7ncT3",
        defaultMessage: [{
          "type": 0,
          "value": "Draggable"
        }]
      })
    }, {
      name: 'fitBounds',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "NVUpOG",
        defaultMessage: [{
          "type": 0,
          "value": "Map fit markers"
        }]
      })
    }, {
      name: 'zoom',
      type: 'slider',
      defaultValue: 9,
      min: 0,
      max: 16,
      label: reactIntl.defineMessage({
        id: "vRzzo6",
        defaultMessage: [{
          "type": 0,
          "value": "Zoom"
        }]
      })
    }, {
      name: 'center',
      type: 'geo-position',
      label: reactIntl.defineMessage({
        id: "W5qWPj",
        defaultMessage: [{
          "type": 0,
          "value": "Center"
        }]
      })
    }]
  }, {
    id: 'markers',
    label: reactIntl.defineMessage({
      id: "+LvOvJ",
      defaultMessage: [{
        "type": 0,
        "value": "Markers"
      }]
    }),
    repeatable: true,
    fieldName: 'markers',
    fields: [{
      name: 'title',
      type: 'heading-element',
      label: reactIntl.defineMessage({
        id: "+AEVbJ",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      })
    }, {
      name: 'description',
      type: 'text-element',
      label: reactIntl.defineMessage({
        id: "ZCe0r4",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      })
    }, {
      name: 'geoPosition',
      type: 'geo-position',
      label: reactIntl.defineMessage({
        id: "u3ok54",
        defaultMessage: [{
          "type": 0,
          "value": "Position"
        }]
      })
    }]
  }],
  fields: [{
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "cDj1mZ",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }]
}, {
  id: 'map-images',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "Z27IP6",
      defaultMessage: [{
        "type": 0,
        "value": "Map"
      }]
    }),
    order: 6
  },
  title: reactIntl.defineMessage({
    id: "ro6yHS",
    defaultMessage: [{
      "type": 0,
      "value": "Map with image markers"
    }]
  }),
  component: MapImagesScreen$1,
  layouts: ['normal'],
  // transforms,
  states: [{
    id: 'intro',
    label: reactIntl.defineMessage({
      id: "BgrRxZ",
      defaultMessage: [{
        "type": 0,
        "value": "Intro"
      }]
    }),
    fields: [{
      name: 'title',
      type: 'heading-element',
      theme: {
        textStyle: 'heading1'
      },
      label: reactIntl.defineMessage({
        id: "+AEVbJ",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      })
    }, {
      name: 'description',
      type: 'text-element',
      theme: {
        textStyle: 'text'
      },
      label: reactIntl.defineMessage({
        id: "ZCe0r4",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      })
    }, {
      name: 'button',
      type: 'button-element',
      theme: {
        textStyle: 'button'
      },
      label: reactIntl.defineMessage({
        id: "i6bmbD",
        defaultMessage: [{
          "type": 0,
          "value": "Button"
        }]
      })
    }]
  }, {
    id: 'map',
    label: reactIntl.defineMessage({
      id: "eYHEYe",
      defaultMessage: [{
        "type": 0,
        "value": "Map"
      }]
    }),
    fields: [{
      name: 'draggable',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "A7ncT3",
        defaultMessage: [{
          "type": 0,
          "value": "Draggable"
        }]
      })
    }, {
      name: 'fitBounds',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "NVUpOG",
        defaultMessage: [{
          "type": 0,
          "value": "Map fit markers"
        }]
      })
    }, {
      name: 'zoom',
      type: 'slider',
      defaultValue: 9,
      min: 0,
      max: 16,
      label: reactIntl.defineMessage({
        id: "vRzzo6",
        defaultMessage: [{
          "type": 0,
          "value": "Zoom"
        }]
      })
    }, {
      name: 'center',
      type: 'geo-position',
      label: reactIntl.defineMessage({
        id: "W5qWPj",
        defaultMessage: [{
          "type": 0,
          "value": "Center"
        }]
      })
    }]
  }, {
    id: 'markers-with-image',
    label: reactIntl.defineMessage({
      id: "+LvOvJ",
      defaultMessage: [{
        "type": 0,
        "value": "Markers"
      }]
    }),
    repeatable: true,
    fieldName: 'markers',
    fields: [{
      name: 'title',
      type: 'heading-element',
      label: reactIntl.defineMessage({
        id: "+AEVbJ",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      })
    }, {
      name: 'description',
      type: 'text-element',
      label: reactIntl.defineMessage({
        id: "ZCe0r4",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      })
    }, {
      name: 'geoPosition',
      type: 'geo-position',
      label: reactIntl.defineMessage({
        id: "u3ok54",
        defaultMessage: [{
          "type": 0,
          "value": "Position"
        }]
      })
    }]
  }],
  fields: [{
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "cDj1mZ",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }]
}];

var styles$4$1 = {"emptyAnswer":"micromag-screen-quiz-answers-emptyAnswer","button":"micromag-screen-quiz-answers-button","focus-visible":"micromag-screen-quiz-answers-focus-visible","container":"micromag-screen-quiz-answers-container","items":"micromag-screen-quiz-answers-items","item":"micromag-screen-quiz-answers-item","isPlaceholder":"micromag-screen-quiz-answers-isPlaceholder","userAnswer":"micromag-screen-quiz-answers-userAnswer","otherAnswer":"micromag-screen-quiz-answers-otherAnswer","withIcon":"micromag-screen-quiz-answers-withIcon","resultIcon":"micromag-screen-quiz-answers-resultIcon","answered":"micromag-screen-quiz-answers-answered","rightAnswer":"micromag-screen-quiz-answers-rightAnswer","faIcon":"micromag-screen-quiz-answers-faIcon","itemContent":"micromag-screen-quiz-answers-itemContent"};

var propTypes$5$1 = {
  items: PropTypes.quizAnswers.isRequired,
  answeredIndex: PropTypes$1.number,
  answersCollapseDelay: PropTypes$1.number,
  buttonsStyle: PropTypes.boxStyle,
  buttonsTextStyle: PropTypes.textStyle,
  goodAnswerColor: PropTypes.color,
  badAnswerColor: PropTypes.color,
  showUserAnswer: PropTypes$1.bool,
  withoutGoodAnswer: PropTypes$1.bool,
  withoutIcon: PropTypes$1.bool,
  focusable: PropTypes$1.bool,
  animated: PropTypes$1.bool,
  collapsed: PropTypes$1.bool,
  onClick: PropTypes$1.func,
  onCollapse: PropTypes$1.func,
  onCollapsed: PropTypes$1.func,
  onTransitionEnd: PropTypes$1.func,
  className: PropTypes$1.string
};
var defaultProps$5$1 = {
  answeredIndex: null,
  answersCollapseDelay: 1000,
  buttonsStyle: null,
  buttonsTextStyle: null,
  goodAnswerColor: null,
  badAnswerColor: null,
  showUserAnswer: false,
  withoutGoodAnswer: false,
  withoutIcon: false,
  focusable: false,
  animated: false,
  collapsed: false,
  onClick: null,
  onCollapse: null,
  onCollapsed: null,
  onTransitionEnd: null,
  className: null
};
var Answers = function Answers(_ref) {
  var items = _ref.items,
    answeredIndex = _ref.answeredIndex,
    answersCollapseDelay = _ref.answersCollapseDelay,
    buttonsStyle = _ref.buttonsStyle,
    buttonsTextStyle = _ref.buttonsTextStyle,
    goodAnswerColor = _ref.goodAnswerColor,
    badAnswerColor = _ref.badAnswerColor,
    showUserAnswer = _ref.showUserAnswer,
    withoutGoodAnswer = _ref.withoutGoodAnswer,
    withoutIcon = _ref.withoutIcon,
    focusable = _ref.focusable,
    collapseAnimated = _ref.animated,
    initialCollapsed = _ref.collapsed,
    onClick = _ref.onClick,
    onCollapse = _ref.onCollapse,
    onCollapsed = _ref.onCollapsed,
    onTransitionEnd = _ref.onTransitionEnd,
    className = _ref.className;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var answered = answeredIndex !== null;
  var _ref2 = answeredIndex !== null ? items[answeredIndex] : {},
    _ref2$good = _ref2.good,
    hasAnsweredRight = _ref2$good === void 0 ? false : _ref2$good;
  var _useState = React.useState(true),
    _useState2 = _slicedToArray(_useState, 1),
    visible = _useState2[0];
  var hasRightAnswer = items !== null && !isPlaceholder ? items.reduce(function (hasGood, answer) {
    var _ref3 = answer || {},
      _ref3$good = _ref3.good,
      good = _ref3$good === void 0 ? false : _ref3$good;
    return hasGood || good;
  }, false) : false;
  var finalShowUserAnswer = showUserAnswer || !hasRightAnswer;
  var shouldCollapse = !withoutGoodAnswer || finalShowUserAnswer && answeredIndex !== null;
  var _useState3 = React.useState(answeredIndex !== null),
    _useState4 = _slicedToArray(_useState3, 2),
    answersCollapsed = _useState4[0],
    setAnswersCollapsed = _useState4[1];
  var _useState5 = React.useState(initialCollapsed || answeredIndex !== null),
    _useState6 = _slicedToArray(_useState5, 2),
    answersDidCollapse = _useState6[0],
    setAnswersDidCollapse = _useState6[1];
  var _useState7 = React.useState(initialCollapsed || answeredIndex !== null),
    _useState8 = _slicedToArray(_useState7, 2),
    answersFinalCollapse = _useState8[0],
    setAnswersFinalCollapse = _useState8[1];
  React.useEffect(function () {
    var timeout = null;
    if (answeredIndex !== null && shouldCollapse) {
      timeout = setTimeout(function () {
        setAnswersCollapsed(true);
        if (onCollapse !== null) {
          onCollapse();
        }
      }, hasAnsweredRight || finalShowUserAnswer ? 500 : answersCollapseDelay);
    } else if (answeredIndex === null && shouldCollapse) {
      setAnswersCollapsed(false);
    }
    return function () {
      if (timeout !== null) {
        clearTimeout(timeout);
      }
    };
  }, [answeredIndex, withoutGoodAnswer, setAnswersCollapsed, onCollapse, answersCollapseDelay, hasAnsweredRight, finalShowUserAnswer]);
  React.useEffect(function () {
    var timeout = null;
    if (answersCollapsed) {
      timeout = setTimeout(function () {
        setAnswersFinalCollapse(true);
      }, 300);
    }
    return function () {
      if (timeout !== null) {
        clearTimeout(timeout);
      }
    };
  }, [answersCollapsed]);
  var onAnswerTransitionEnd = React.useCallback(function () {
    if (onTransitionEnd !== null) {
      onTransitionEnd();
    }
    if (shouldCollapse && answersCollapsed && !answersDidCollapse) {
      setAnswersDidCollapse(true);
      if (onCollapsed !== null) {
        onCollapsed();
      }
    }
  }, [shouldCollapse, answersCollapsed, answersDidCollapse, setAnswersCollapsed, onCollapsed, onTransitionEnd]);
  var itemsRefs = React.useRef([]);
  var listOfItems = isPlaceholder || isEdit && items.length === 0 ? _toConsumableArray(new Array(2)) : items;
  var heights = React.useMemo(function () {
    if (web.animated) {
      var allHeights = listOfItems.reduce(function (acc, it, i) {
        if (itemsRefs.current[i] && collapseAnimated) {
          var _ref4 = itemsRefs.current[i].getBoundingClientRect() || {},
            _ref4$height = _ref4.height,
            height = _ref4$height === void 0 ? 0 : _ref4$height;
          acc.push(height);
        }
        return acc;
      }, []);
      return allHeights;
    }
    return [];
  }, [web.animated, answeredIndex, shouldCollapse, collapseAnimated, listOfItems]);
  var showAnimation = isView || isEdit;
  var filteredListOfItems = listOfItems.map(function (answer, answerI) {
    var height = heights[answerI] ? heights[answerI] : 0;
    var userAnswer = answerI === answeredIndex;
    var _ref5 = answer || {},
      _ref5$good = _ref5.good,
      rightAnswer = _ref5$good === void 0 ? false : _ref5$good;
    var hidden = false;
    if (answeredIndex !== null && showAnimation && answersDidCollapse && !rightAnswer && (hasRightAnswer || !userAnswer)) {
      hidden = true;
    }
    if (answeredIndex !== null && showAnimation && answersCollapsed && !rightAnswer) {
      hidden = true;
    }
    return _objectSpread$1(_objectSpread$1({}, answer), {}, {
      hidden: hidden,
      userAnswer: userAnswer,
      index: answerI,
      maxHeight: height
    });
  });
  var transitions = web.useTransition(filteredListOfItems, {
    key: function key(_ref6) {
      var _ref6$index = _ref6.index,
        index = _ref6$index === void 0 ? 0 : _ref6$index,
        _ref6$label = _ref6.label,
        label = _ref6$label === void 0 ? null : _ref6$label;
      return "key-".concat(index, "-").concat((label === null || label === void 0 ? void 0 : label.body) || null);
    },
    update: function update(_ref7) {
      var _ref7$hidden = _ref7.hidden,
        hidden = _ref7$hidden === void 0 ? false : _ref7$hidden,
        _ref7$maxHeight = _ref7.maxHeight,
        maxHeight = _ref7$maxHeight === void 0 ? 0 : _ref7$maxHeight;
      return {
        opacity: hidden && showAnimation && !withoutGoodAnswer ? 0 : 1,
        // Animate this, not height
        maxHeight:
        // eslint-disable-next-line no-nested-ternary
        hidden && showAnimation && !withoutGoodAnswer && collapseAnimated && answersFinalCollapse ? 0 : maxHeight > 0 ? maxHeight : null,
        height: hidden && showAnimation && !withoutGoodAnswer && !collapseAnimated && answersFinalCollapse ? 0 : 'auto'
      };
    },
    // config: { tension: 300, friction: 35 },
    config: {
      duration: 300,
      easing: web.easings.easeOutSine
    }
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$4$1.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, styles$4$1.answered, answered), styles$4$1.withIcon, !withoutIcon), styles$4$1.isPlaceholder, isPlaceholder), className, className !== null)])
  }, filteredListOfItems !== null || isPlaceholder ? /*#__PURE__*/React.createElement("div", {
    className: styles$4$1.items
  }, transitions(function (style, answer, t, answerI) {
    var userAnswer = answerI === answeredIndex;
    var _ref9 = answer || {},
      _ref9$good = _ref9.good,
      rightAnswer = _ref9$good === void 0 ? null : _ref9$good,
      _ref9$label = _ref9.label,
      label = _ref9$label === void 0 ? null : _ref9$label,
      _ref9$buttonStyle = _ref9.buttonStyle,
      answerButtonStyle = _ref9$buttonStyle === void 0 ? null : _ref9$buttonStyle,
      _ref9$textStyle = _ref9.textStyle,
      answerButtonTextStyle = _ref9$textStyle === void 0 ? null : _ref9$textStyle;
    var _ref10 = label || {},
      _ref10$textStyle = _ref10.textStyle,
      textStyle = _ref10$textStyle === void 0 ? null : _ref10$textStyle;
    var hasAnswer = isTextFilled$1(label);
    return /*#__PURE__*/React.createElement(web.animated.div, {
      key: "answer-".concat(answerI),
      className: classNames([styles$4$1.item, _defineProperty(_defineProperty(_defineProperty({}, styles$4$1.rightAnswer, !withoutGoodAnswer && rightAnswer === true), styles$4$1.userAnswer, withoutGoodAnswer && userAnswer), styles$4$1.otherAnswer, withoutGoodAnswer && !userAnswer)]),
      style: _objectSpread$1({}, style)
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$4$1.itemContent,
      ref: function ref(el) {
        itemsRefs.current[answerI] = el;
      }
    }, /*#__PURE__*/React.createElement(ScreenElement$1, {
      placeholder: "quizAnswer",
      placeholderProps: {
        good: answerI === 0
      },
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "+Ok+7S",
        defaultMessage: [{
          "type": 0,
          "value": "Answer"
        }]
      }),
      emptyClassName: styles$4$1.emptyAnswer,
      isEmpty: !hasAnswer
    }, hasAnswer ? /*#__PURE__*/React.createElement(Button$1, {
      className: styles$4$1.button,
      onPointerUp: function onPointerUp(e) {
        if (e.pointerType !== 'mouse' || e.button === 0) {
          onClick(answer, answerI);
          onAnswerTransitionEnd();
        }
      },
      disabled: !visible || isPreview || answered,
      focusable: focusable,
      buttonStyle: _objectSpread$1(_objectSpread$1({}, buttonsStyle), answerButtonStyle),
      textStyle: _objectSpread$1(_objectSpread$1({}, buttonsTextStyle), answerButtonTextStyle)
    }, answered && !withoutIcon && rightAnswer === true ? /*#__PURE__*/React.createElement("span", {
      className: styles$4$1.resultIcon,
      style: getStyleFromColor$1(goodAnswerColor, 'backgroundColor')
    }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
      className: styles$4$1.faIcon,
      icon: faCheck.faCheck
    })) : null, !withoutIcon && answered && rightAnswer === false ? /*#__PURE__*/React.createElement("span", {
      className: styles$4$1.resultIcon,
      style: getStyleFromColor$1(badAnswerColor, 'backgroundColor')
    }, /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
      className: styles$4$1.faIcon,
      icon: faTimes.faTimes
    })) : null, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, label, {
      className: styles$4$1.optionLabel,
      textStyle: _objectSpread$1(_objectSpread$1(_objectSpread$1({}, textStyle), buttonsTextStyle), answerButtonTextStyle)
    }))) : null)));
  })) : null);
};
Answers.propTypes = propTypes$5$1;
Answers.defaultProps = defaultProps$5$1;
var Answers$1 = Answers;

var styles$3$1 = {"container":"micromag-screen-quiz-question-container","emptyQuestion":"micromag-screen-quiz-question-emptyQuestion","emptyResult":"micromag-screen-quiz-question-emptyResult","question":"micromag-screen-quiz-question-question","index":"micromag-screen-quiz-question-index","result":"micromag-screen-quiz-question-result","resultContent":"micromag-screen-quiz-question-resultContent","resultVisible":"micromag-screen-quiz-question-resultVisible","isPlaceholder":"micromag-screen-quiz-question-isPlaceholder"};

var propTypes$4$2 = {
  question: PropTypes.textElement,
  answers: PropTypes.quizAnswers,
  result: PropTypes$1.shape({
    image: PropTypes.imageElement,
    text: PropTypes.textElement
  }),
  resultImage: PropTypes.visualElement,
  index: PropTypes$1.number,
  totalCount: PropTypes$1.number,
  answeredIndex: PropTypes$1.number,
  buttonsStyle: PropTypes.boxStyle,
  buttonsTextStyle: PropTypes.textStyle,
  questionsHeadingStyle: PropTypes.textStyle,
  goodAnswerColor: PropTypes.color,
  badAnswerColor: PropTypes.color,
  focusable: PropTypes$1.bool,
  animated: PropTypes$1.bool,
  layout: PropTypes$1.string,
  showInstantAnswer: PropTypes$1.bool,
  withResult: PropTypes$1.bool,
  withoutGoodAnswer: PropTypes$1.bool,
  withoutTrueFalse: PropTypes$1.bool,
  withoutIndex: PropTypes$1.bool,
  transitions: PropTypes.transitions,
  transitionPlaying: PropTypes$1.bool,
  transitionStagger: PropTypes$1.number,
  transitionDisabled: PropTypes$1.bool,
  onAnswerClick: PropTypes$1.func,
  onAnswerTransitionEnd: PropTypes$1.func,
  className: PropTypes$1.string,
  style: PropTypes$1.objectOf(PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]))
};
var defaultProps$4$2 = {
  question: null,
  answers: null,
  result: null,
  resultImage: null,
  index: null,
  totalCount: null,
  answeredIndex: null,
  buttonsStyle: null,
  buttonsTextStyle: null,
  questionsHeadingStyle: null,
  goodAnswerColor: null,
  badAnswerColor: null,
  focusable: false,
  animated: false,
  layout: null,
  showInstantAnswer: false,
  withResult: false,
  withoutGoodAnswer: false,
  withoutTrueFalse: false,
  withoutIndex: false,
  transitions: null,
  transitionPlaying: false,
  transitionStagger: 100,
  transitionDisabled: false,
  onAnswerClick: null,
  onAnswerTransitionEnd: null,
  className: null,
  style: null
};
var Question = function Question(_ref) {
  var question = _ref.question,
    answers = _ref.answers,
    result = _ref.result,
    resultImage = _ref.resultImage,
    index = _ref.index,
    totalCount = _ref.totalCount,
    answeredIndex = _ref.answeredIndex,
    buttonsStyle = _ref.buttonsStyle,
    buttonsTextStyle = _ref.buttonsTextStyle,
    questionsHeadingStyle = _ref.questionsHeadingStyle,
    goodAnswerColor = _ref.goodAnswerColor,
    badAnswerColor = _ref.badAnswerColor,
    focusable = _ref.focusable,
    animated = _ref.animated,
    showInstantAnswer = _ref.showInstantAnswer,
    withResult = _ref.withResult,
    withoutGoodAnswer = _ref.withoutGoodAnswer,
    withoutTrueFalse = _ref.withoutTrueFalse,
    withoutIndex = _ref.withoutIndex,
    layout = _ref.layout,
    transitions = _ref.transitions,
    transitionPlaying = _ref.transitionPlaying,
    transitionStagger = _ref.transitionStagger,
    transitionDisabled = _ref.transitionDisabled,
    onAnswerClick = _ref.onAnswerClick,
    onAnswerTransitionEnd = _ref.onAnswerTransitionEnd,
    className = _ref.className,
    style = _ref.style;
  var _useScreenRenderConte = useScreenRenderContext(),
    isPlaceholder = _useScreenRenderConte.isPlaceholder;
  var isSplitted = layout === 'split';
  var verticalAlign = isSplitted ? null : layout;
  var hasQuestion = isTextFilled$1(question);
  var _ref2 = question || {},
    _ref2$textStyle = _ref2.textStyle,
    questionTextStyle = _ref2$textStyle === void 0 ? null : _ref2$textStyle;
  var _useState = React.useState(showInstantAnswer),
    _useState2 = _slicedToArray(_useState, 2),
    resultVisible = _useState2[0],
    setResultVisible = _useState2[1];
  var answered = answeredIndex !== null;
  var answer = answeredIndex !== null && answers[answeredIndex] ? answers[answeredIndex] : null;
  var _ref3 = answer || {},
    _ref3$customAnswerLab = _ref3.customAnswerLabel,
    customAnswerLabel = _ref3$customAnswerLab === void 0 ? null : _ref3$customAnswerLab,
    _ref3$answerImage = _ref3.answerImage,
    answerImage = _ref3$answerImage === void 0 ? null : _ref3$answerImage;
  var hasResult = isTextFilled$1(customAnswerLabel) || isTextFilled$1(result);
  var hasResultVisual = isImageFilled$1(answerImage) || isImageFilled$1(resultImage);
  var defaultResult = isTextFilled$1(result) ? result : null;
  var customResult = isTextFilled$1(customAnswerLabel) ? customAnswerLabel : null;
  var onAnswersCollapse = React.useCallback(function () {
    setResultVisible(true);
  }, [setResultVisible]);
  var hasIndex = index !== null && totalCount !== null;
  return /*#__PURE__*/React.createElement(Layout$1, {
    className: classNames([styles$3$1.container, _defineProperty(_defineProperty(_defineProperty({}, styles$3$1.isPlaceholder, isPlaceholder), styles$3$1.resultVisible, resultVisible), className, className !== null)]),
    verticalAlign: verticalAlign,
    style: style
  }, [!withoutIndex && hasIndex ? /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "stats",
    placeholder: /*#__PURE__*/React.createElement("div", {
      className: styles$3$1.index
    }, "1 / 10")
  }, totalCount > 1 ? /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    disabled: transitionDisabled
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$3$1.index
  }, index + 1, " / ", totalCount)) : null) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "question",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "FOmgqv",
      defaultMessage: [{
        "type": 0,
        "value": "Question"
      }]
    }),
    emptyClassName: styles$3$1.emptyQuestion,
    isEmpty: !hasQuestion
  }, hasQuestion ? /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    disabled: transitionDisabled
  }, /*#__PURE__*/React.createElement(Heading$1, Object.assign({}, question, {
    className: styles$3$1.question,
    textStyle: _objectSpread$1(_objectSpread$1({}, questionsHeadingStyle), questionTextStyle)
  }))) : null), isSplitted ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer"
  }) : null, /*#__PURE__*/React.createElement(Answers$1, {
    key: "answers",
    items: answers || [],
    answeredIndex: answeredIndex,
    goodAnswerColor: goodAnswerColor,
    badAnswerColor: badAnswerColor,
    withoutGoodAnswer: withoutGoodAnswer,
    withoutIcon: withoutTrueFalse,
    showUserAnswer: withoutTrueFalse,
    buttonsStyle: buttonsStyle,
    buttonsTextStyle: buttonsTextStyle,
    focusable: focusable,
    animated: animated,
    transitions: transitions,
    transitionStagger: transitionStagger,
    transitionPlaying: transitionPlaying,
    transitionDisabled: transitionDisabled,
    onClick: onAnswerClick,
    onCollapse: onAnswersCollapse,
    onTransitionEnd: onAnswerTransitionEnd
  }), withResult ? /*#__PURE__*/React.createElement("div", {
    className: styles$3$1.result,
    key: "results"
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$3$1.resultContent
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    emptyLabel: answered ? /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "li7ADr",
      defaultMessage: [{
        "type": 0,
        "value": "Result"
      }]
    }) : null,
    isEmpty: answered && !hasResult,
    emptyClassName: styles$3$1.emptyResult
  }, (hasResult || hasResultVisual) && answers !== null ? /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    delay: (1 + answers.length) * transitionStagger,
    disabled: transitionDisabled
  }, hasResult ? /*#__PURE__*/React.createElement(Text$1, Object.assign({}, customResult || defaultResult, {
    className: styles$3$1.resultText
  })) : null, hasResultVisual ? /*#__PURE__*/React.createElement(Visual$1, {
    media: answerImage || resultImage,
    width: "100%",
    height: "auto"
  }) : null) : null))) : null]);
};
Question.propTypes = propTypes$4$2;
Question.defaultProps = defaultProps$4$2;
var Question$1 = Question;

var styles$2$2 = {"container":"micromag-screen-quiz-container","background":"micromag-screen-quiz-background","disabled":"micromag-screen-quiz-disabled","hidden":"micromag-screen-quiz-hidden","placeholder":"micromag-screen-quiz-placeholder","content":"micromag-screen-quiz-content","reset":"micromag-screen-quiz-reset","points":"micromag-screen-quiz-points","layout":"micromag-screen-quiz-layout","header":"micromag-screen-quiz-header","footer":"micromag-screen-quiz-footer","transition":"micromag-screen-quiz-transition","question":"micromag-screen-quiz-question","results":"micromag-screen-quiz-results","intro":"micromag-screen-quiz-intro","enter":"micromag-screen-quiz-enter","left":"micromag-screen-quiz-left","enterActive":"micromag-screen-quiz-enterActive","exit":"micromag-screen-quiz-exit","exitActive":"micromag-screen-quiz-exitActive"};

var propTypes$3$3 = {
  id: PropTypes$1.string,
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom', 'split']),
  question: PropTypes.textElement,
  answers: PropTypes.quizAnswers,
  result: PropTypes$1.shape({
    image: PropTypes.imageElement,
    text: PropTypes.textElement
  }),
  resultImage: PropTypes.visualElement,
  buttonsStyle: PropTypes.boxStyle,
  buttonsTextStyle: PropTypes.textStyle,
  goodAnswerColor: PropTypes.color,
  badAnswerColor: PropTypes.color,
  withoutTrueFalse: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  ready: PropTypes$1.bool,
  transitions: PropTypes.transitions,
  transitionStagger: PropTypes$1.number,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$3$3 = {
  id: null,
  layout: 'middle',
  question: null,
  answers: null,
  result: null,
  resultImage: null,
  buttonsStyle: null,
  buttonsTextStyle: null,
  goodAnswerColor: null,
  badAnswerColor: null,
  withoutTrueFalse: false,
  spacing: 20,
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  ready: true,
  transitions: null,
  transitionStagger: 100,
  type: null,
  className: null
};
var QuizScreen = function QuizScreen(_ref) {
  var id = _ref.id,
    layout = _ref.layout,
    question = _ref.question,
    answers = _ref.answers,
    result = _ref.result,
    resultImage = _ref.resultImage,
    buttonsStyle = _ref.buttonsStyle,
    buttonsTextStyle = _ref.buttonsTextStyle,
    goodAnswerColor = _ref.goodAnswerColor,
    badAnswerColor = _ref.badAnswerColor,
    withoutTrueFalse = _ref.withoutTrueFalse,
    spacing = _ref.spacing,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    ready = _ref.ready,
    transitions = _ref.transitions,
    transitionStagger = _ref.transitionStagger,
    type = _ref.type,
    className = _ref.className;
  var screenId = id || 'screen-id';
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var clickDisabled = !ready;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var transitionPlaying = current && ready;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useDimensionObserver = useDimensionObserver(),
    headerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    headerHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var _useDimensionObserver3 = useDimensionObserver(),
    footerRef = _useDimensionObserver3.ref,
    _useDimensionObserver4 = _useDimensionObserver3.height,
    footerHeight = _useDimensionObserver4 === void 0 ? 0 : _useDimensionObserver4;
  var showInstantAnswer = isStatic || isCapture;
  var goodAnswerIndex = answers !== null ? answers.findIndex(function (answer) {
    return answer !== null && answer.good;
  }) : null;
  var withoutGoodAnswer = goodAnswerIndex === null || goodAnswerIndex === -1;
  var _useState = React.useState(showInstantAnswer ? goodAnswerIndex : null),
    _useState2 = _slicedToArray(_useState, 2),
    userAnswerIndex = _useState2[0],
    setUserAnswerIndex = _useState2[1];
  var _useQuizCreate = useQuizCreate$1({
      screenId: screenId
    }),
    submitQuiz = _useQuizCreate.create;
  var onAnswerClick = React.useCallback(function (answer, answerI) {
    if (userAnswerIndex !== null) {
      return;
    }
    setUserAnswerIndex(answerI);
    trackScreenEvent('click_answer', "".concat(userAnswerIndex + 1, ": ").concat(answer.label.body), {
      answer: answer,
      answerIndex: answerI
    });
  }, [userAnswerIndex, setUserAnswerIndex, trackScreenEvent, answers]);
  React.useEffect(function () {
    if (!current && isEdit && userAnswerIndex !== null) {
      setUserAnswerIndex(null);
    }
  }, [isEdit, current, userAnswerIndex, setUserAnswerIndex]);
  React.useEffect(function () {
    if (!isView) {
      return;
    }
    if (userAnswerIndex !== null) {
      var _ref2 = userAnswerIndex !== null && answers ? answers[userAnswerIndex] : {},
        _ref2$good = _ref2.good,
        isGood = _ref2$good === void 0 ? false : _ref2$good,
        _ref2$label = _ref2.label,
        label = _ref2$label === void 0 ? {} : _ref2$label;
      var _ref3 = label || {},
        _ref3$body = _ref3.body,
        body = _ref3$body === void 0 ? '' : _ref3$body;
      submitQuiz({
        choice: body || userAnswerIndex,
        value: isGood ? 1 : 0
      });
    }
  }, [isView, userAnswerIndex, answers, submitQuiz]);
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    scrolledBottom = _useState4[0],
    setScrolledBottom = _useState4[1];
  var onScrolledBottom = React.useCallback(function (_ref4) {
    var initial = _ref4.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  var _useState5 = React.useState(false),
    _useState6 = _slicedToArray(_useState5, 2),
    hasScroll = _useState6[0],
    setHasScroll = _useState6[1];
  var onScrollHeightChange = React.useCallback(function (_ref5) {
    var _ref5$canScroll = _ref5.canScroll,
      canScroll = _ref5$canScroll === void 0 ? false : _ref5$canScroll;
    setHasScroll(canScroll);
  }, [setHasScroll]);
  var onQuizReset = React.useCallback(function () {
    setUserAnswerIndex(null);
  }, [setUserAnswerIndex]);
  var numberOfAnswers = (answers || []).length;
  React.useEffect(function () {
    onQuizReset();
  }, [numberOfAnswers, onQuizReset]);
  var isSplitted = layout === 'split';
  var verticalAlign = isSplitted ? null : layout;
  var showReset = isEdit;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$2$2.container, _defineProperty(_defineProperty({}, styles$2$2.disabled, clickDisabled), className, className !== null)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$2$2.content
  }, showReset ? /*#__PURE__*/React.createElement(Button$3, {
    className: styles$2$2.reset,
    icon: /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
      icon: faRedo.faRedo,
      size: "md"
    }),
    onClick: onQuizReset
  }) : null, /*#__PURE__*/React.createElement(Scroll$1, {
    verticalAlign: verticalAlign
    // disabled={scrollingDisabled || userAnswerIndex !== null}
    ,
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    onScrollHeightChange: onScrollHeightChange,
    withShadow: true
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$2$2.header, _defineProperty({}, styles$2$2.disabled, userAnswerIndex !== null || scrolledBottom && !scrollingDisabled && hasScroll)]),
    ref: headerRef,
    style: {
      paddingTop: spacing / 2,
      paddingLeft: spacing,
      paddingRight: spacing,
      paddingBottom: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(Question$1, {
    question: question,
    answers: answers,
    result: result,
    resultImage: resultImage,
    answeredIndex: userAnswerIndex,
    buttonsStyle: buttonsStyle,
    buttonsTextStyle: buttonsTextStyle,
    goodAnswerColor: goodAnswerColor,
    badAnswerColor: badAnswerColor,
    withoutTrueFalse: withoutTrueFalse,
    withoutGoodAnswer: withoutGoodAnswer,
    focusable: current && isView,
    animated: isView,
    showInstantAnswer: showInstantAnswer,
    withResult: true,
    layout: layout,
    transitions: transitions,
    transitionPlaying: transitionPlaying,
    transitionStagger: transitionStagger,
    transitionDisabled: transitionDisabled,
    onAnswerClick: onAnswerClick,
    className: styles$2$2.question,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (headerHeight || spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (footerHeight || spacing)
    } : null
  })), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    ref: footerRef,
    className: classNames([styles$2$2.footer, _defineProperty({}, styles$2$2.disabled, !scrolledBottom && hasScroll)]),
    style: {
      transform: current && !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null,
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingTop: spacing / 2,
      paddingBottom: spacing / 2
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$2$2.background
  }) : null);
};
QuizScreen.propTypes = propTypes$3$3;
QuizScreen.defaultProps = defaultProps$3$3;
var QuizScreen$1 = QuizScreen;

var styles$1$4 = {"container":"micromag-screen-quiz-results-container","emptyTitle":"micromag-screen-quiz-results-emptyTitle","emptyDescription":"micromag-screen-quiz-results-emptyDescription","title":"micromag-screen-quiz-results-title","isPlaceholder":"micromag-screen-quiz-results-isPlaceholder"};

var propTypes$2$5 = {
  title: PropTypes.textElement,
  description: PropTypes.textElement,
  resultsHeadingStyle: PropTypes.textStyle,
  resultsTextStyle: PropTypes.textStyle,
  layout: PropTypes$1.string,
  transitions: PropTypes.transitions,
  transitionPlaying: PropTypes$1.bool,
  transitionStagger: PropTypes$1.number,
  transitionDisabled: PropTypes$1.bool,
  className: PropTypes$1.string,
  style: PropTypes$1.objectOf(PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number]))
};
var defaultProps$2$5 = {
  title: null,
  description: null,
  resultsHeadingStyle: null,
  resultsTextStyle: null,
  layout: null,
  transitions: null,
  transitionPlaying: false,
  transitionStagger: 100,
  transitionDisabled: false,
  className: null,
  style: null
};
var Results = function Results(_ref) {
  var layout = _ref.layout,
    title = _ref.title,
    description = _ref.description,
    resultsHeadingStyle = _ref.resultsHeadingStyle,
    resultsTextStyle = _ref.resultsTextStyle,
    transitions = _ref.transitions,
    transitionPlaying = _ref.transitionPlaying,
    transitionStagger = _ref.transitionStagger,
    transitionDisabled = _ref.transitionDisabled,
    className = _ref.className,
    style = _ref.style;
  var isSplitted = layout === 'split';
  var verticalAlign = isSplitted ? null : layout;
  var hasTitle = isTextFilled$1(title);
  var _ref2 = title || {},
    _ref2$textStyle = _ref2.textStyle,
    titleTextStyle = _ref2$textStyle === void 0 ? null : _ref2$textStyle;
  var hasDescription = isTextFilled$1(description);
  var _ref3 = description || {},
    _ref3$textStyle = _ref3.textStyle,
    descriptionTextStyle = _ref3$textStyle === void 0 ? null : _ref3$textStyle;
  return /*#__PURE__*/React.createElement(Layout$1, {
    className: classNames([styles$1$4.container, _defineProperty({}, className, className !== null)]),
    fullscreen: true,
    verticalAlign: verticalAlign,
    style: style
  }, [/*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "BSTWf8",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$1$4.emptyTitle,
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    disabled: transitionDisabled
  }, /*#__PURE__*/React.createElement(Heading$1, Object.assign({}, title, {
    className: styles$1$4.title,
    textStyle: _objectSpread$1(_objectSpread$1({}, resultsHeadingStyle), titleTextStyle)
  }))) : null), isSplitted ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer"
  }) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "description",
    placeholder: "text",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "hoDz0O",
      defaultMessage: [{
        "type": 0,
        "value": "Description"
      }]
    }),
    emptyClassName: styles$1$4.emptyDescription,
    isEmpty: !hasDescription
  }, hasTitle ? /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    disabled: transitionDisabled,
    delay: transitionStagger
  }, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, description, {
    className: styles$1$4.description,
    textStyle: _objectSpread$1(_objectSpread$1({}, resultsTextStyle), descriptionTextStyle)
  }))) : null)]);
};
Results.propTypes = propTypes$2$5;
Results.defaultProps = defaultProps$2$5;
var Results$1 = Results;

var styles$h = {"container":"micromag-screen-quiz-title-container","emptyTitle":"micromag-screen-quiz-title-emptyTitle","emptyDescription":"micromag-screen-quiz-title-emptyDescription","title":"micromag-screen-quiz-title-title","description":"micromag-screen-quiz-title-description","isPlaceholder":"micromag-screen-quiz-title-isPlaceholder"};

var propTypes$1$6 = {
  title: PropTypes.textElement,
  description: PropTypes.textElement,
  button: PropTypes.textElement,
  layout: PropTypes$1.string,
  focusable: PropTypes$1.bool,
  buttonDisabled: PropTypes$1.bool,
  className: PropTypes$1.string,
  style: PropTypes$1.objectOf(PropTypes$1.oneOfType([PropTypes$1.string, PropTypes$1.number])),
  onClickButton: PropTypes$1.func
};
var defaultProps$1$6 = {
  title: null,
  description: null,
  layout: null,
  button: null,
  buttonDisabled: false,
  focusable: false,
  className: null,
  style: null,
  onClickButton: null
};
var Title = function Title(_ref) {
  var layout = _ref.layout,
    title = _ref.title,
    description = _ref.description,
    button = _ref.button,
    buttonDisabled = _ref.buttonDisabled,
    focusable = _ref.focusable,
    className = _ref.className,
    style = _ref.style,
    onClickButton = _ref.onClickButton;
  // const { isPreview, isEdit } = useScreenRenderContext();
  var isSplitted = layout === 'split';
  var verticalAlign = isSplitted ? null : layout;
  var hasTitle = isTextFilled$1(title);
  var hasDescription = isTextFilled$1(description);
  var hasButton = isTextFilled$1(button);
  return /*#__PURE__*/React.createElement(Layout$1, {
    className: classNames([styles$h.container, _defineProperty({}, className, className !== null)]),
    fullscreen: true,
    verticalAlign: verticalAlign,
    style: style
  }, [/*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "BSTWf8",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$h.emptyTitle,
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({}, title, {
    className: styles$h.title
  })) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "description",
    placeholder: "text",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "hoDz0O",
      defaultMessage: [{
        "type": 0,
        "value": "Description"
      }]
    }),
    emptyClassName: styles$h.emptyDescription,
    isEmpty: !hasDescription
  }, hasDescription ? /*#__PURE__*/React.createElement(Text$1, Object.assign({}, description, {
    className: styles$h.description
  })) : null), isSplitted ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer"
  }) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "button",
    placeholder: "button"
  }, /*#__PURE__*/React.createElement(Button$1, {
    disabled: buttonDisabled,
    focusable: focusable,
    buttonStyle: button !== null ? button.buttonStyle : null,
    className: styles$h.button,
    onClick: onClickButton
  }, hasButton ? /*#__PURE__*/React.createElement(Text$1, Object.assign({}, button, {
    className: styles$h.label
  })) : /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
    id: "D7LIZQ",
    defaultMessage: [{
      "type": 0,
      "value": "Start"
    }]
  })))]);
};
Title.propTypes = propTypes$1$6;
Title.defaultProps = defaultProps$1$6;
var Title$1 = Title;

var propTypes$h = {
  id: PropTypes$1.string,
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom', 'split']),
  introLayout: PropTypes$1.oneOf(['top', 'middle', 'bottom', 'split']),
  title: PropTypes.textElement,
  description: PropTypes.textElement,
  questions: PropTypes$1.arrayOf(PropTypes$1.shape({
    text: PropTypes.textElement,
    answers: PropTypes.quizAnswers
  })),
  results: PropTypes$1.arrayOf(PropTypes$1.shape({
    title: PropTypes.textElement,
    description: PropTypes.textElement
  })),
  buttonsStyle: PropTypes.boxStyle,
  buttonsTextStyle: PropTypes.textStyle,
  questionsHeadingStyle: PropTypes.textStyle,
  resultsHeadingStyle: PropTypes.textStyle,
  resultsTextStyle: PropTypes.textStyle,
  goodAnswerColor: PropTypes.color,
  badAnswerColor: PropTypes.color,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  introButton: PropTypes.textElement,
  introBackground: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  transitions: PropTypes.transitions,
  transitionStagger: PropTypes$1.number,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$h = {
  id: null,
  layout: 'middle',
  introLayout: null,
  title: null,
  description: null,
  questions: null,
  results: null,
  buttonsStyle: null,
  buttonsTextStyle: null,
  questionsHeadingStyle: null,
  resultsHeadingStyle: null,
  resultsTextStyle: null,
  goodAnswerColor: null,
  badAnswerColor: null,
  spacing: 20,
  background: null,
  introButton: null,
  introBackground: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  transitions: null,
  transitionStagger: 100,
  type: null,
  className: null
};
var QuizMultipleScreen = function QuizMultipleScreen(_ref) {
  var id = _ref.id,
    layout = _ref.layout,
    introLayout = _ref.introLayout,
    title = _ref.title,
    description = _ref.description,
    questions = _ref.questions,
    results = _ref.results,
    buttonsStyle = _ref.buttonsStyle,
    buttonsTextStyle = _ref.buttonsTextStyle,
    questionsHeadingStyle = _ref.questionsHeadingStyle,
    resultsHeadingStyle = _ref.resultsHeadingStyle,
    resultsTextStyle = _ref.resultsTextStyle,
    goodAnswerColor = _ref.goodAnswerColor,
    badAnswerColor = _ref.badAnswerColor,
    spacing = _ref.spacing,
    background = _ref.background,
    introBackground = _ref.introBackground,
    introButton = _ref.introButton,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    transitions = _ref.transitions,
    transitionStagger = _ref.transitionStagger,
    type = _ref.type,
    className = _ref.className;
  var screenId = id || 'screen-id';
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var screenState = useScreenState();
  var _ref2 = screenState !== null ? screenState.split('.') : [],
    _ref3 = _slicedToArray(_ref2, 2),
    _ref3$ = _ref3[0],
    stateId = _ref3$ === void 0 ? null : _ref3$,
    _ref3$2 = _ref3[1],
    stateIndex = _ref3$2 === void 0 ? 0 : _ref3$2;
  var transitionPlaying = current;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var backgroundPlaying = current && (isView || isEdit);
  var backgroundShouldLoad = current || active;

  // Call to Action

  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useDimensionObserver = useDimensionObserver(),
    headerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    headerHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var _useDimensionObserver3 = useDimensionObserver(),
    footerRef = _useDimensionObserver3.ref,
    _useDimensionObserver4 = _useDimensionObserver3.height,
    callToActionHeight = _useDimensionObserver4 === void 0 ? 0 : _useDimensionObserver4;
  var showInstantAnswer = isStatic || isCapture;
  var hasIntro = title !== null || description !== null || isEdit || stateId === 'intro';
  var _useState = React.useState(null),
    _useState2 = _slicedToArray(_useState, 2),
    userAnswers = _useState2[0],
    setUserAnswers = _useState2[1];
  var initialQuestionIndex = 'intro';
  if (stateId !== null) {
    initialQuestionIndex = stateId === 'questions' ? parseInt(stateIndex, 10) : stateId;
  } else if (isPlaceholder || !hasIntro) {
    initialQuestionIndex = 0;
  }
  var _useState3 = React.useState(initialQuestionIndex),
    _useState4 = _slicedToArray(_useState3, 2),
    questionIndex = _useState4[0],
    setQuestionIndex = _useState4[1];
  React.useEffect(function () {
    if (isPreview && hasIntro && questionIndex !== 'intro') {
      setQuestionIndex('intro');
    }
  }, [isPreview, hasIntro, questionIndex, setQuestionIndex]);
  var onAnswerClick = React.useCallback(function (answer, answerIndex) {
    setUserAnswers(_objectSpread$1(_objectSpread$1({}, userAnswers), {}, _defineProperty({}, questionIndex, answerIndex)));
    trackScreenEvent('click_answer', "Question #".concat(questionIndex + 1, " ").concat(answerIndex + 1, ": ").concat(answer.label.body), {
      question: questions[questionIndex],
      questionIndex: questionIndex,
      answer: answer,
      answerIndex: answerIndex
    });
  }, [userAnswers, setUserAnswers, trackScreenEvent, questions, questionIndex]);
  var onAnswerTransitionEnd = React.useCallback(function () {
    if (isEdit) {
      return;
    }
    var nextIndex = questionIndex + 1;
    var questionsCount = questions.length;
    if (nextIndex < questionsCount) {
      setQuestionIndex(nextIndex);
    } else if (nextIndex === questionsCount) {
      setQuestionIndex('results');
    }
  }, [questions, questionIndex, setQuestionIndex, isEdit]);
  var onClickIntroButton = React.useCallback(function () {
    setQuestionIndex(0);
  }, [setQuestionIndex]);
  React.useEffect(function () {
    if (!current && isEdit && userAnswers !== null) {
      setUserAnswers(null);
    }
  }, [isEdit, current, userAnswers, setUserAnswers]);
  var hasQuestions = questions !== null && questions.length > 0;
  var currentQuestion = hasQuestions ? questions[questionIndex] || {} : {};
  var _currentQuestion$text = currentQuestion.text,
    text = _currentQuestion$text === void 0 ? null : _currentQuestion$text,
    _currentQuestion$answ = currentQuestion.answers,
    answers = _currentQuestion$answ === void 0 ? [] : _currentQuestion$answ,
    _currentQuestion$back = currentQuestion.background,
    questionBackground = _currentQuestion$back === void 0 ? null : _currentQuestion$back,
    _currentQuestion$layo = currentQuestion.layout,
    questionLayout = _currentQuestion$layo === void 0 ? null : _currentQuestion$layo;
  var currentAnsweredIndex = userAnswers !== null && typeof userAnswers[questionIndex] !== 'undefined' ? userAnswers[questionIndex] : null;
  var currentPoints = React.useMemo(function () {
    return userAnswers !== null ? Object.keys(userAnswers).reduce(function (totalPoints, answerQuestionIndex) {
      var _ref4 = questions !== null ? questions[answerQuestionIndex] || {} : {},
        _ref4$answers = _ref4.answers,
        questionAnswers = _ref4$answers === void 0 ? [] : _ref4$answers;
      var answerIndex = userAnswers[answerQuestionIndex];
      var _ref5 = questionAnswers[answerIndex] || {},
        _ref5$points = _ref5.points,
        points = _ref5$points === void 0 ? 0 : _ref5$points;
      return points + totalPoints;
    }, 0) : 0;
  }, [userAnswers, questions]);
  var isIntro = hasIntro && questionIndex === 'intro';
  var isResults = questionIndex === 'results';
  var isQuestion = !isIntro && !isResults;
  var currentResult = React.useMemo(function () {
    if (!isResults) {
      return null;
    }
    if (stateId === 'results') {
      return (results || [])[parseInt(stateIndex, 10)] || null;
    }
    return (results || []).sort(function (_ref6, _ref7) {
      var _ref6$points = _ref6.points,
        pointsA = _ref6$points === void 0 ? 0 : _ref6$points;
      var _ref7$points = _ref7.points,
        pointsB = _ref7$points === void 0 ? 0 : _ref7$points;
      if (pointsA === pointsB) {
        return 0;
      }
      return pointsA > pointsB ? 1 : -1;
    }).reduce(function (lastResult, result) {
      var _ref8 = lastResult || {},
        _ref8$points = _ref8.points,
        lastPoints = _ref8$points === void 0 ? 0 : _ref8$points;
      var _ref9 = result || {},
        _ref9$points = _ref9.points,
        points = _ref9$points === void 0 ? 0 : _ref9$points;
      return currentPoints >= (lastPoints || 0) && currentPoints >= points ? result : lastResult;
    }, null);
  }, [isResults, results, currentPoints, stateId, stateIndex]);
  var _ref10 = currentResult || {},
    _ref10$background = _ref10.background,
    resultBackground = _ref10$background === void 0 ? null : _ref10$background,
    _ref10$layout = _ref10.layout,
    resultLayout = _ref10$layout === void 0 ? null : _ref10$layout;
  var _useQuizCreate = useQuizCreate$1({
      screenId: screenId
    }),
    submitQuiz = _useQuizCreate.create;
  React.useEffect(function () {
    if (!isResults || !isView) {
      return;
    }
    submitQuiz({
      choice: userAnswers,
      value: currentPoints
    });
  }, [isView, isResults, userAnswers, submitQuiz]);

  // Switch state
  React.useEffect(function () {
    if (!isEdit && !isPreview) {
      return;
    }
    if (stateId === 'questions') {
      setQuestionIndex(parseInt(stateIndex, 10));
    } else if (stateId === 'results') {
      setQuestionIndex('results');
    } else if (stateId === 'intro') {
      setQuestionIndex('intro');
    }
  }, [stateId, stateIndex, isEdit, setQuestionIndex]);
  var finalBackground = background;
  var backgroundKey = 'background';
  if (isIntro && introBackground !== null) {
    finalBackground = introBackground;
    backgroundKey = 'results';
  } else if (isResults && resultBackground !== null) {
    finalBackground = resultBackground;
    backgroundKey = 'results';
  } else if (isQuestion && questionBackground !== null) {
    finalBackground = questionBackground;
    backgroundKey = "question_".concat(questionIndex);
  }

  // Transition direction
  var lastQuestionIndexRef = React.useRef(questionIndex);
  var direction = React.useMemo(function () {
    if (questionIndex === lastQuestionIndexRef.current) {
      return null;
    }
    var lastQuestionIndex = lastQuestionIndexRef.current;
    lastQuestionIndexRef.current = questionIndex;
    if (questionIndex === 'intro' || lastQuestionIndex === 'results' || lastQuestionIndex > questionIndex) {
      return 'left';
    }
    lastQuestionIndexRef.current = questionIndex;
    return 'right';
  }, [questionIndex]);
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var _useState5 = React.useState(false),
    _useState6 = _slicedToArray(_useState5, 2),
    scrolledBottom = _useState6[0],
    setScrolledBottom = _useState6[1];
  var onScrolledBottom = React.useCallback(function (_ref11) {
    var initial = _ref11.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  var _useState7 = React.useState(false),
    _useState8 = _slicedToArray(_useState7, 2),
    hasScroll = _useState8[0],
    setHasScroll = _useState8[1];
  var onScrollHeightChange = React.useCallback(function (_ref12) {
    var _ref12$canScroll = _ref12.canScroll,
      canScroll = _ref12$canScroll === void 0 ? false : _ref12$canScroll;
    setHasScroll(canScroll);
  }, [setHasScroll]);
  var onQuizReset = React.useCallback(function () {
    setUserAnswers(null);
  }, [setUserAnswers]);
  var verticalAlign = layout;
  if (isIntro && introLayout !== null) {
    verticalAlign = introLayout;
  } else if (isQuestion && questionLayout !== null) {
    verticalAlign = questionLayout;
  } else if (isResults && resultLayout !== null) {
    verticalAlign = questionLayout;
  }
  var showPoints = isEdit;
  var showReset = isEdit;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$2$2.container, _defineProperty(_defineProperty({}, styles$2$2[direction], direction !== null), className, className !== null)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$2$2.content
  }, showPoints && currentPoints !== null && currentPoints > 0 ? /*#__PURE__*/React.createElement("div", {
    className: styles$2$2.points
  }, "".concat(currentPoints, " "), /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
    id: "Xr1v8l",
    defaultMessage: [{
      "type": 0,
      "value": "points gained"
    }]
  })) : null, showReset ? /*#__PURE__*/React.createElement(Button$3, {
    className: styles$2$2.reset,
    icon: /*#__PURE__*/React.createElement(reactFontawesome.FontAwesomeIcon, {
      icon: faRedo.faRedo,
      size: "md"
    }),
    onClick: onQuizReset
  }) : null, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$2$2.header, _defineProperty({}, styles$2$2.disabled, scrolledBottom && !scrollingDisabled && hasScroll)]),
    ref: headerRef,
    style: {
      paddingTop: spacing / 2,
      paddingLeft: spacing,
      paddingRight: spacing,
      paddingBottom: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(Scroll$1, {
    verticalAlign: verticalAlign,
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    onScrollHeightChange: onScrollHeightChange,
    withShadow: true
  }, /*#__PURE__*/React.createElement(reactTransitionGroup.TransitionGroup, null, [isIntro ? /*#__PURE__*/React.createElement(reactTransitionGroup.CSSTransition, {
    key: "intro",
    classNames: styles$2$2,
    timeout: 1000
  }, /*#__PURE__*/React.createElement(Title$1, {
    title: title,
    description: description,
    layout: introLayout || layout,
    button: introButton,
    buttonDisabled: (questions || []).length < 1 || isEdit || isPreview,
    focusable: current && isView,
    transitions: transitions,
    transitionPlaying: transitionPlaying,
    transitionStagger: transitionStagger,
    transitionDisabled: transitionDisabled,
    className: styles$2$2.intro,
    style: !isPlaceholder ? {
      paddingLeft: spacing,
      paddingRight: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + spacing,
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (callToActionHeight || spacing)
    } : null,
    onClickButton: onClickIntroButton
  })) : null, isQuestion ? /*#__PURE__*/React.createElement(reactTransitionGroup.CSSTransition, {
    key: "question-".concat(questionIndex),
    classNames: styles$2$2,
    timeout: 1000
  }, /*#__PURE__*/React.createElement(Question$1, {
    index: questionIndex,
    totalCount: (questions || []).length,
    question: text,
    answers: answers,
    answeredIndex: currentAnsweredIndex,
    buttonsStyle: buttonsStyle,
    buttonsTextStyle: buttonsTextStyle,
    questionsHeadingStyle: questionsHeadingStyle,
    goodAnswerColor: goodAnswerColor,
    badAnswerColor: badAnswerColor,
    focusable: current && isView,
    showInstantAnswer: showInstantAnswer,
    layout: questionLayout || layout,
    withoutGoodAnswer: true,
    withoutTrueFalse: true,
    transitions: transitions,
    transitionPlaying: transitionPlaying,
    transitionStagger: transitionStagger,
    transitionDisabled: transitionDisabled,
    onAnswerClick: onAnswerClick,
    onAnswerTransitionEnd: onAnswerTransitionEnd,
    className: styles$2$2.question,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (current && !isPreview ? viewerTopHeight : 0) + (headerHeight || spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (callToActionHeight || spacing)
    } : null
  })) : null, isResults ? /*#__PURE__*/React.createElement(reactTransitionGroup.CSSTransition, {
    key: "results",
    classNames: styles$2$2,
    timeout: 2000
  }, /*#__PURE__*/React.createElement(Results$1, Object.assign({}, currentResult, {
    resultsHeadingStyle: resultsHeadingStyle,
    resultsTextStyle: resultsTextStyle,
    layout: resultLayout || layout,
    transitions: transitions,
    transitionPlaying: transitionPlaying,
    transitionStagger: transitionStagger,
    transitionDisabled: transitionDisabled,
    className: styles$2$2.results,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (current && !isPreview ? viewerTopHeight : 0) + (headerHeight || spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (callToActionHeight || spacing)
    } : null
  }))) : null])), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    ref: footerRef,
    className: classNames([styles$2$2.footer, _defineProperty({}, styles$2$2.disabled, !scrolledBottom)]),
    style: {
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingTop: spacing / 2,
      paddingBottom: spacing / 2,
      transform: !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null), !isPlaceholder ? /*#__PURE__*/React.createElement(reactTransitionGroup.TransitionGroup, null, /*#__PURE__*/React.createElement(reactTransitionGroup.CSSTransition, {
    key: backgroundKey,
    classNames: styles$2$2,
    timeout: 1000
  }, /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: finalBackground,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: backgroundShouldLoad,
    mediaRef: mediaRef,
    className: styles$2$2.background,
    withoutVideo: isPreview
  }))) : null);
};
QuizMultipleScreen.propTypes = propTypes$h;
QuizMultipleScreen.defaultProps = defaultProps$h;
var QuizMultipleScreen$1 = QuizMultipleScreen;

var definition$e = [{
  id: 'quiz',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "ZiWlL6",
      defaultMessage: [{
        "type": 0,
        "value": "Questions"
      }]
    }),
    order: 7
  },
  title: reactIntl.defineMessage({
    id: "zW7IVm",
    defaultMessage: [{
      "type": 0,
      "value": "Quiz"
    }]
  }),
  component: QuizScreen$1,
  layouts: ['top', 'middle', 'bottom', 'split'],
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'question',
    type: 'heading-element',
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "hVE7TA",
      defaultMessage: [{
        "type": 0,
        "value": "Question"
      }]
    })
  }, {
    name: 'answers',
    type: 'quiz-answers',
    theme: {
      label: {
        textStyle: 'button'
      }
    },
    label: reactIntl.defineMessage({
      id: "KHWeV7",
      defaultMessage: [{
        "type": 0,
        "value": "Answers"
      }]
    })
  }, {
    name: 'withoutTrueFalse',
    type: 'toggle',
    label: reactIntl.defineMessage({
      id: "LFziCV",
      defaultMessage: [{
        "type": 0,
        "value": "Without right/wrong icon"
      }]
    })
  }, {
    name: 'result',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "iQ5Uf7",
      defaultMessage: [{
        "type": 0,
        "value": "Default feedback"
      }]
    })
  }, {
    name: 'resultImage',
    type: 'visual',
    label: reactIntl.defineMessage({
      id: "yA4B6h",
      defaultMessage: [{
        "type": 0,
        "value": "Result feedback image"
      }]
    })
  }, {
    type: 'fields',
    isList: true,
    label: reactIntl.defineMessage({
      id: "R9DB4a",
      defaultMessage: [{
        "type": 0,
        "value": "Styles"
      }]
    }),
    fields: [{
      name: 'buttonsTextStyle',
      type: 'text-style-form',
      label: reactIntl.defineMessage({
        id: "gwPu/I",
        defaultMessage: [{
          "type": 0,
          "value": "Buttons text"
        }]
      })
    }, {
      name: 'buttonsStyle',
      type: 'box-style-form',
      label: reactIntl.defineMessage({
        id: "l5uLMd",
        defaultMessage: [{
          "type": 0,
          "value": "Buttons"
        }]
      })
    }, {
      name: 'goodAnswerColor',
      type: 'color',
      label: reactIntl.defineMessage({
        id: "I2bIHm",
        defaultMessage: [{
          "type": 0,
          "value": "Good answer color"
        }]
      })
    }, {
      name: 'badAnswerColor',
      type: 'color',
      label: reactIntl.defineMessage({
        id: "ru3tjH",
        defaultMessage: [{
          "type": 0,
          "value": "Bad answer color"
        }]
      })
    }]
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'quiz-multiple',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "ZiWlL6",
      defaultMessage: [{
        "type": 0,
        "value": "Questions"
      }]
    }),
    order: 7
  },
  title: reactIntl.defineMessage({
    id: "ACkeH6",
    defaultMessage: [{
      "type": 0,
      "value": "Quiz with multiple questions"
    }]
  }),
  component: QuizMultipleScreen$1,
  layouts: ['top', 'middle', 'bottom', 'split'],
  states: [{
    id: 'intro',
    label: reactIntl.defineMessage({
      id: "BgrRxZ",
      defaultMessage: [{
        "type": 0,
        "value": "Intro"
      }]
    }),
    fields: [{
      name: 'introLayout',
      type: 'screen-layout',
      defaultValue: 'middle',
      screenState: 'intro',
      label: reactIntl.defineMessage({
        id: "4iBXj2",
        defaultMessage: [{
          "type": 0,
          "value": "Layout"
        }]
      })
    }, {
      name: 'title',
      type: 'heading-element',
      theme: {
        textStyle: 'heading2'
      },
      label: reactIntl.defineMessage({
        id: "+AEVbJ",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      })
    }, {
      name: 'description',
      type: 'text-element',
      theme: {
        textStyle: 'text'
      },
      label: reactIntl.defineMessage({
        id: "ZCe0r4",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      })
    }, {
      name: 'introButton',
      type: 'button-element',
      theme: {
        textStyle: 'button'
      },
      label: reactIntl.defineMessage({
        id: "i6bmbD",
        defaultMessage: [{
          "type": 0,
          "value": "Button"
        }]
      })
    }, {
      name: 'introBackground',
      type: 'background',
      label: reactIntl.defineMessage({
        id: "cDj1mZ",
        defaultMessage: [{
          "type": 0,
          "value": "Background"
        }]
      })
    }]
  }, {
    id: 'questions',
    label: reactIntl.defineMessage({
      id: "VMd1oG",
      defaultMessage: [{
        "type": 0,
        "value": "Questions"
      }]
    }),
    repeatable: true,
    fieldName: 'questions',
    fields: [{
      name: 'text',
      type: 'heading-element',
      theme: {
        textStyle: 'heading2'
      },
      label: reactIntl.defineMessage({
        id: "hVE7TA",
        defaultMessage: [{
          "type": 0,
          "value": "Question"
        }]
      })
    }, {
      name: 'answers',
      type: 'quiz-points-answers',
      theme: {
        label: {
          textStyle: 'button'
        }
      },
      label: reactIntl.defineMessage({
        id: "KHWeV7",
        defaultMessage: [{
          "type": 0,
          "value": "Answers"
        }]
      })
    }, {
      name: 'background',
      type: 'background',
      label: reactIntl.defineMessage({
        id: "cDj1mZ",
        defaultMessage: [{
          "type": 0,
          "value": "Background"
        }]
      })
    }]
  }, {
    id: 'results',
    label: reactIntl.defineMessage({
      id: "uiTxd7",
      defaultMessage: [{
        "type": 0,
        "value": "Results"
      }]
    }),
    repeatable: true,
    fields: [{
      name: 'layout',
      type: 'screen-layout',
      defaultValue: 'top',
      screenState: 'results',
      label: reactIntl.defineMessage({
        id: "4iBXj2",
        defaultMessage: [{
          "type": 0,
          "value": "Layout"
        }]
      })
    }, {
      name: 'title',
      type: 'heading-element',
      theme: {
        textStyle: 'heading2'
      },
      label: reactIntl.defineMessage({
        id: "+AEVbJ",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      })
    }, {
      name: 'description',
      type: 'text-element',
      theme: {
        textStyle: 'text'
      },
      label: reactIntl.defineMessage({
        id: "ZCe0r4",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      })
    }, {
      name: 'points',
      type: 'number',
      isHorizontal: true,
      label: reactIntl.defineMessage({
        id: "jWAJW4",
        defaultMessage: [{
          "type": 0,
          "value": "Points"
        }]
      }),
      help: reactIntl.defineMessage({
        id: "JoyIgA",
        defaultMessage: [{
          "type": 0,
          "value": "Minimum points for this result"
        }]
      })
    }, {
      name: 'background',
      type: 'background',
      label: reactIntl.defineMessage({
        id: "cDj1mZ",
        defaultMessage: [{
          "type": 0,
          "value": "Background"
        }]
      })
    }]
  }],
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "OPxJx/",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    type: 'fields',
    label: reactIntl.defineMessage({
      id: "LOknw0",
      defaultMessage: [{
        "type": 0,
        "value": "Styles"
      }]
    }),
    isList: true,
    fields: [{
      name: 'buttonsStyle',
      type: 'box-style-form',
      label: reactIntl.defineMessage({
        id: "l5uLMd",
        defaultMessage: [{
          "type": 0,
          "value": "Buttons"
        }]
      })
    }, {
      name: 'buttonsTextStyle',
      type: 'text-style-form',
      label: reactIntl.defineMessage({
        id: "gwPu/I",
        defaultMessage: [{
          "type": 0,
          "value": "Buttons text"
        }]
      })
    }, {
      name: 'questionsHeadingStyle',
      type: 'text-style-form',
      label: reactIntl.defineMessage({
        id: "+FHxPO",
        defaultMessage: [{
          "type": 0,
          "value": "Questions title"
        }]
      })
    }, {
      name: 'resultsHeadingStyle',
      type: 'text-style-form',
      label: reactIntl.defineMessage({
        id: "BnRW4y",
        defaultMessage: [{
          "type": 0,
          "value": "Results title"
        }]
      })
    }, {
      name: 'resultsTextStyle',
      type: 'text-style-form',
      label: reactIntl.defineMessage({
        id: "uDHTZn",
        defaultMessage: [{
          "type": 0,
          "value": "Results description"
        }]
      })
    }]
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "cDj1mZ",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$g = {"container":"micromag-element-quote-container","showEmpty":"micromag-element-quote-showEmpty"};

var propTypes$g = {
  body: PropTypes$1.string,
  textStyle: PropTypes.textStyle,
  linksStyle: PropTypes.textStyle,
  margin: PropTypes.margin,
  showEmpty: PropTypes$1.bool,
  className: PropTypes$1.string,
  emptyClassName: PropTypes$1.string
};
var defaultProps$g = {
  body: null,
  textStyle: null,
  linksStyle: null,
  margin: null,
  showEmpty: false,
  className: null,
  emptyClassName: null
};
var Quote = function Quote(_ref) {
  var body = _ref.body,
    textStyle = _ref.textStyle,
    linksStyle = _ref.linksStyle,
    margin = _ref.margin,
    showEmpty = _ref.showEmpty,
    className = _ref.className,
    emptyClassName = _ref.emptyClassName;
  var _ref2 = textStyle || {},
    _ref2$link = _ref2.link,
    linkStyle = _ref2$link === void 0 ? null : _ref2$link,
    _ref2$highlight = _ref2.highlight,
    highlightStyle = _ref2$highlight === void 0 ? null : _ref2$highlight;
  var finalStyle = {};
  var finalLinkStyle = linkStyle !== null ? getStyleFromLink$1(linkStyle) : null;
  var finalHighlightStyle = highlightStyle !== null ? getStyleFromHighlight$1(highlightStyle) : null;
  if (textStyle !== null) {
    finalStyle = _objectSpread$1(_objectSpread$1({}, finalStyle), getStyleFromText$1(textStyle));
  }
  if (margin !== null) {
    finalStyle = _objectSpread$1(_objectSpread$1({}, finalStyle), getStyleFromMargin$1(margin));
  }
  if (linksStyle !== null) {
    finalLinkStyle = _objectSpread$1(_objectSpread$1({}, finalLinkStyle), getStyleFromText$1(linksStyle));
  }
  var id = React.useMemo(function () {
    return finalLinkStyle !== null ? "quote-component-".concat(uuid.v1()) : null;
  }, [finalLinkStyle !== null]);
  return /*#__PURE__*/React.createElement(React.Fragment, null, finalLinkStyle !== null ? /*#__PURE__*/React.createElement(LinkStyle$1, {
    selector: "#".concat(id),
    style: finalLinkStyle
  }) : null, finalHighlightStyle !== null ? /*#__PURE__*/React.createElement(HighlightStyle$1, {
    selector: "#".concat(id),
    style: finalHighlightStyle
  }) : null, /*#__PURE__*/React.createElement("blockquote", {
    id: id,
    className: classNames([styles$g.container, _defineProperty(_defineProperty(_defineProperty({}, styles$g.showEmpty, showEmpty), emptyClassName, showEmpty && emptyClassName !== null), className, className !== null)]),
    style: finalStyle,
    dangerouslySetInnerHTML: {
      __html: body
    }
  }));
};
Quote.propTypes = propTypes$g;
Quote.defaultProps = defaultProps$g;
var Quote$1 = Quote;

var styles$f = {"container":"micromag-screen-quote-container","background":"micromag-screen-quote-background","disabled":"micromag-screen-quote-disabled","hidden":"micromag-screen-quote-hidden","placeholder":"micromag-screen-quote-placeholder","content":"micromag-screen-quote-content","emptyQuote":"micromag-screen-quote-emptyQuote","emptyAuthor":"micromag-screen-quote-emptyAuthor","quote":"micromag-screen-quote-quote","withMargin":"micromag-screen-quote-withMargin","isPlaceholder":"micromag-screen-quote-isPlaceholder","layout":"micromag-screen-quote-layout"};

// NOTE: this might be better with a scroll

var propTypes$f = {
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom', 'split']),
  quote: PropTypes.textElement,
  author: PropTypes.textElement,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$f = {
  layout: 'top',
  quote: null,
  author: null,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  className: null
};
var QuoteScreen = function QuoteScreen(_ref) {
  var layout = _ref.layout,
    quote = _ref.quote,
    author = _ref.author,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var isSplitted = layout === 'split';
  var isTopLayout = layout === 'top';
  var isMiddleLayout = layout === 'middle';
  var isBottomLayout = layout === 'bottom';
  var verticalAlign = isSplitted ? null : layout;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var hasQuote = isTextFilled$1(quote);
  var hasAuthor = isTextFilled$1(author);
  var quoteWithMargin = hasQuote && hasAuthor && !isSplitted;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$f.container, _defineProperty(_defineProperty({}, className, className), styles$f.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$f.content
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$f.layout,
    fullscreen: true,
    verticalAlign: verticalAlign,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (hasHeader ? spacing / 2 : spacing),
      paddingBottom: (!isPreview ? viewerBottomHeight : 0) + (hasFooter ? spacing / 2 : spacing)
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    style: {
      paddingBottom: spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, !isPlaceholder && hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, !isPlaceholder && hasHeader && isBottomLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, !isPlaceholder && hasHeader && !hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "quote",
    placeholder: "quote",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "CrzYgw",
      defaultMessage: [{
        "type": 0,
        "value": "Quote"
      }]
    }),
    emptyClassName: styles$f.emptyQuote,
    isEmpty: !hasQuote
  }, hasQuote ? /*#__PURE__*/React.createElement(Quote$1, Object.assign({
    className: classNames([styles$f.quote, _defineProperty({}, styles$f.withMargin, quoteWithMargin)])
  }, quote)) : null), isSplitted ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer"
  }) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "author",
    placeholder: "subtitle",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "xYqGzM",
      defaultMessage: [{
        "type": 0,
        "value": "Author"
      }]
    }),
    emptyClassName: styles$f.emptyAuthor,
    isEmpty: !hasAuthor
  }, hasAuthor ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$f.author
  }, author)) : null), !isPlaceholder && hasFooter && (isTopLayout || isMiddleLayout) ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-bottom"
  }) : null, !isPlaceholder && hasHeader && !hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-bottom"
  }) : null, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    style: {
      paddingTop: spacing,
      paddingLeft: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingRight: Math.max(viewerBottomSidesWidth - spacing, 0)
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$f.background
  }) : null);
};
QuoteScreen.propTypes = propTypes$f;
QuoteScreen.defaultProps = defaultProps$f;
var QuoteScreen$1 = QuoteScreen;

// import * as transforms from './transforms/index';

var definition$d = {
  id: 'quote',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "fIawTr",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    }),
    order: 2
  },
  title: reactIntl.defineMessage({
    id: "3q9GPv",
    defaultMessage: [{
      "type": 0,
      "value": "Quote"
    }]
  }),
  component: QuoteScreen$1,
  layouts: ['top', 'middle', 'bottom', 'split'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'quote',
    type: 'heading-element',
    fieldType: 'multi',
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "88/Ge8",
      defaultMessage: [{
        "type": 0,
        "value": "Quote"
      }]
    })
  }, {
    name: 'author',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "73hxYw",
      defaultMessage: [{
        "type": 0,
        "value": "Author"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var styles$e = {"container":"micromag-screen-ranking-container","background":"micromag-screen-ranking-background","empty":"micromag-screen-ranking-empty","emptyTitle":"micromag-screen-ranking-emptyTitle","content":"micromag-screen-ranking-content","item":"micromag-screen-ranking-item","rankText":"micromag-screen-ranking-rankText","itemTitle":"micromag-screen-ranking-itemTitle","description":"micromag-screen-ranking-description","callToAction":"micromag-screen-ranking-callToAction","disabled":"micromag-screen-ranking-disabled","sideLayout":"micromag-screen-ranking-sideLayout","elementsContainer":"micromag-screen-ranking-elementsContainer","rank":"micromag-screen-ranking-rank","label":"micromag-screen-ranking-label","isPlaceholder":"micromag-screen-ranking-isPlaceholder","scroll":"micromag-screen-ranking-scroll"};

var propTypes$e = {
  layout: PropTypes$1.oneOf(['side', 'over']),
  title: PropTypes.headingElement,
  items: PropTypes$1.arrayOf(PropTypes.textElement),
  numbersStyle: PropTypes.textStyle,
  ascending: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$e = {
  layout: 'side',
  title: null,
  items: [null],
  numbersStyle: null,
  ascending: false,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  type: null,
  className: null
};
var RankingScreen = function RankingScreen(_ref) {
  var layout = _ref.layout,
    title = _ref.title,
    items = _ref.items,
    numbersStyle = _ref.numbersStyle,
    ascending = _ref.ascending,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    type = _ref.type,
    className = _ref.className;
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var finalItems = isPlaceholder ? _toConsumableArray(new Array(10)).map(function () {
    return {};
  }) : items || [null];
  var itemsCount = finalItems !== null ? finalItems.length : 0;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var hasTitle = isTextFilled$1(title);
  var titleElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "Title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "BSTWf8",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: classNames([styles$e.empty, styles$e.emptyTitle]),
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$e.title
  }, title)) : null);
  var elements = (finalItems || []).map(function (item, itemI) {
    var _ref2 = item || {},
      _ref2$title = _ref2.title,
      itemTitle = _ref2$title === void 0 ? null : _ref2$title,
      _ref2$description = _ref2.description,
      description = _ref2$description === void 0 ? null : _ref2$description;
    var hasItemTitle = isTextFilled$1(itemTitle);
    var hasDescription = isTextFilled$1(description);
    var itemTitleElement = /*#__PURE__*/React.createElement("div", {
      className: styles$e.itemTitle
    }, /*#__PURE__*/React.createElement(ScreenElement$1, {
      placeholder: "title",
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "bmO4Ss",
        defaultMessage: [{
          "type": 0,
          "value": "Entry Title"
        }]
      }),
      emptyClassName: styles$e.empty,
      isEmpty: !hasItemTitle
    }, hasItemTitle ? /*#__PURE__*/React.createElement(Heading$1, itemTitle) : null));
    var descriptionElement = /*#__PURE__*/React.createElement("div", {
      className: styles$e.description
    }, /*#__PURE__*/React.createElement(ScreenElement$1, {
      placeholder: "text",
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "507VAi",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      }),
      emptyClassName: styles$e.empty,
      isEmpty: !hasDescription
    }, hasDescription ? /*#__PURE__*/React.createElement(Text$1, description) : null));
    var rankText = "".concat(ascending ? itemI + 1 : itemsCount - itemI);
    return /*#__PURE__*/React.createElement("div", {
      className: styles$e.item,
      key: "item-".concat(itemI)
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$e.rank
    }, isPlaceholder ? rankText : /*#__PURE__*/React.createElement(Text$1, {
      className: styles$e.rankText,
      body: rankText,
      textStyle: numbersStyle
    })), /*#__PURE__*/React.createElement("div", {
      className: styles$e.label
    }, itemTitleElement, descriptionElement));
  });

  // Call to Action

  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    scrolledBottom = _useState2[0],
    setScrolledBottom = _useState2[1];
  var _useDimensionObserver = useDimensionObserver(),
    footerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    foterHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var onScrolledBottom = React.useCallback(function (_ref3) {
    var initial = _ref3.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$e.container, _defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$e["".concat(layout, "Layout")], layout !== null), styles$e.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$e.content
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    className: styles$e.scroll,
    verticalAlign: "middle",
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    withShadow: true
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    style: {
      paddingTop: spacing / 2 + viewerTopHeight,
      paddingLeft: spacing,
      paddingRight: spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$e.layout,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: !isPlaceholder && hasHeader ? spacing : (!isPreview ? viewerTopHeight : 0) + spacing,
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (foterHeight || spacing)
    } : null
  }, titleElement, /*#__PURE__*/React.createElement("div", {
    className: styles$e.elementsContainer
  }, elements))), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    ref: footerRef,
    className: classNames([styles$e.callToAction, _defineProperty({}, styles$e.disabled, !scrolledBottom)]),
    style: {
      transform: current && !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null,
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingTop: spacing / 2,
      paddingBottom: spacing / 2
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$e.background
  }) : null);
};
RankingScreen.propTypes = propTypes$e;
RankingScreen.defaultProps = defaultProps$e;
var RankingScreen$1 = RankingScreen;

// import * as transforms from './transforms/index';

var definition$c = {
  id: 'ranking',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "cGItoy",
      defaultMessage: [{
        "type": 0,
        "value": "List"
      }]
    }),
    order: 8
  },
  title: reactIntl.defineMessage({
    id: "17BMn2",
    defaultMessage: [{
      "type": 0,
      "value": "Ranking"
    }]
  }),
  component: RankingScreen$1,
  layouts: ['side', 'over'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'side',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    // inline: true,
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'items',
    type: 'entries',
    theme: {
      title: {
        textStyle: 'heading2'
      },
      description: {
        textStyle: 'text'
      }
    },
    label: reactIntl.defineMessage({
      id: "sESmah",
      defaultMessage: [{
        "type": 0,
        "value": "Entries"
      }]
    })
  }, {
    name: 'ascending',
    type: 'toggle',
    label: reactIntl.defineMessage({
      id: "9DhYaZ",
      defaultMessage: [{
        "type": 0,
        "value": "Ascending"
      }]
    })
  }, {
    name: 'numbersStyle',
    type: 'text-style',
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "UdrdRF",
      defaultMessage: [{
        "type": 0,
        "value": "Numbers style"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var propTypes$3$2 = {
  className: PropTypes$1.string,
  size: PropTypes$1.number
};
var defaultProps$3$2 = {
  className: null,
  size: 45
};
var EmailIcon = function EmailIcon(_ref) {
  var className = _ref.className,
    size = _ref.size;
  return /*#__PURE__*/React.createElement("svg", {
    width: size,
    height: size,
    viewBox: "0 0 45 45",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: classNames([_defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement("g", {
    clipPath: "url(#clip0_837_18233)"
  }, /*#__PURE__*/React.createElement("path", {
    d: "M32.8293 17.0498L27.3973 22.5436C27.3582 22.5825 27.3582 22.6453 27.3973 22.6842L31.1987 26.7044C31.4557 26.9576 31.4568 27.3694 31.2007 27.6247L31.1987 27.6267C30.9417 27.8809 30.526 27.8809 30.2699 27.6267L26.4836 23.6214C26.4435 23.5816 26.3782 23.5816 26.337 23.6214L25.4143 24.5557C24.6512 25.3304 23.607 25.7671 22.5156 25.7691C21.4011 25.7631 20.3367 25.3135 19.5606 24.5198L18.672 23.6224C18.6318 23.5826 18.5666 23.5826 18.5254 23.6224L14.7371 27.6286C14.48 27.8829 14.0644 27.8829 13.8083 27.6286C13.5513 27.3754 13.5503 26.9636 13.8063 26.7084L13.8083 26.7064L17.6097 22.6862C17.6448 22.6463 17.6448 22.5855 17.6097 22.5456L12.1717 17.0498C12.1335 17.0109 12.0703 17.0099 12.0301 17.0478C12.011 17.0667 12 17.0927 12 17.1196V28.1132C12.003 28.9976 12.7239 29.7145 13.6155 29.7175H31.3855C32.2761 29.7145 32.998 28.9986 33.001 28.1132V17.1196C33.001 17.0647 32.9568 17.0199 32.9016 17.0199C32.8745 17.0199 32.8484 17.0308 32.8293 17.0498Z",
    fill: "currentColor"
  }), /*#__PURE__*/React.createElement("path", {
    d: "M22.4995 24.459C23.2425 24.461 23.9544 24.1648 24.4735 23.6364L32.3946 15.631C32.1114 15.4036 31.759 15.28 31.3955 15.28H13.6105C13.246 15.279 12.8936 15.4026 12.6105 15.631L20.5305 23.6364C21.0476 24.1628 21.7585 24.46 22.4995 24.459Z",
    fill: "currentColor"
  })), /*#__PURE__*/React.createElement("defs", null, /*#__PURE__*/React.createElement("clipPath", {
    id: "clip0_837_18233"
  }, /*#__PURE__*/React.createElement("rect", {
    width: "21",
    height: "14.4375",
    fill: "currentColor",
    transform: "translate(12 15.28)"
  }))));
};
EmailIcon.propTypes = propTypes$3$2;
EmailIcon.defaultProps = defaultProps$3$2;
var EmailIcon$1 = EmailIcon;

var propTypes$2$4 = {
  className: PropTypes$1.string,
  size: PropTypes$1.number
};
var defaultProps$2$4 = {
  className: null,
  size: 45
};
var ShareLinkIcon = function ShareLinkIcon(_ref) {
  var className = _ref.className,
    size = _ref.size;
  return /*#__PURE__*/React.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: size,
    height: size,
    viewBox: "0 0 64 64",
    className: classNames([_defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement("path", {
    d: "M29.1,33.4a7.19,7.19,0,0,0,10.1,1.4,5,5,0,0,0,.8-.7l4.3-4.3a7.24,7.24,0,0,0,.1-10.2,7.34,7.34,0,0,0-10.2.1l-.1.1-2.5,2.5",
    fill: "none",
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: "3"
  }), /*#__PURE__*/React.createElement("path", {
    d: "M34.9,30.6a7.19,7.19,0,0,0-10.1-1.4,5,5,0,0,0-.8.7l-4.3,4.3a7.24,7.24,0,0,0-.1,10.2,7.15,7.15,0,0,0,10.2.1l.1-.1,2.5-2.5",
    fill: "none",
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: "3"
  }));
};
ShareLinkIcon.propTypes = propTypes$2$4;
ShareLinkIcon.defaultProps = defaultProps$2$4;
var ShareLinkIcon$1 = ShareLinkIcon;

var propTypes$1$5 = {
  className: PropTypes$1.string,
  size: PropTypes$1.number
};
var defaultProps$1$5 = {
  className: null,
  size: 45
};
var SmsIcon = function SmsIcon(_ref) {
  var className = _ref.className,
    size = _ref.size;
  return /*#__PURE__*/React.createElement("svg", {
    width: size,
    height: size,
    viewBox: "0 0 45 45",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: classNames([_defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement("path", {
    d: "M30.8988 12H14.1001C12.9444 12.0053 12.0106 12.9444 12.0106 14.1001L12 32.9989L16.2002 28.7987H30.8999C32.0578 28.7955 32.9968 27.8576 33 26.6986V14.1001C32.9968 12.9422 32.0588 12.0032 30.8999 12H30.8988ZM19.3498 20.3999C19.3498 20.9798 18.8797 21.4499 18.2998 21.4499V21.4499C17.7199 21.4499 17.2497 20.9798 17.2497 20.3999V20.3999C17.2497 19.82 17.7199 19.3498 18.2998 19.3498V19.3498C18.8797 19.3498 19.3498 19.82 19.3498 20.3999V20.3999ZM23.5501 20.3999C23.5501 20.9798 23.0799 21.4499 22.5 21.4499V21.4499C21.9201 21.4499 21.4499 20.9798 21.4499 20.3999V20.3999C21.4499 19.82 21.9201 19.3498 22.5 19.3498V19.3498C23.0799 19.3498 23.5501 19.82 23.5501 20.3999V20.3999ZM27.7503 20.3999C27.7503 20.9798 27.2801 21.4499 26.7002 21.4499V21.4499C26.1203 21.4499 25.6502 20.9798 25.6502 20.3999V20.3999C25.6502 19.82 26.1203 19.3498 26.7002 19.3498V19.3498C27.2801 19.3498 27.7503 19.82 27.7503 20.3999V20.3999Z",
    fill: "currentColor"
  }));
};
SmsIcon.propTypes = propTypes$1$5;
SmsIcon.defaultProps = defaultProps$1$5;
var SmsIcon$1 = SmsIcon;

var styles$d = {"button":"micromag-element-share-options-button","item":"micromag-element-share-options-item","icon":"micromag-element-share-options-icon","label":"micromag-element-share-options-label","focus-visible":"micromag-element-share-options-focus-visible","spacer":"micromag-element-share-options-spacer","labelText":"micromag-element-share-options-labelText"};

var propTypes$d = {
  className: PropTypes$1.string,
  itemClassName: PropTypes$1.string,
  labelClassName: PropTypes$1.string,
  buttonClassName: PropTypes$1.string,
  title: PropTypes$1.string,
  url: PropTypes$1.string,
  options: PropTypes$1.arrayOf(PropTypes$1.string),
  buttonsStyle: PropTypes.boxStyle,
  buttonsTextStyle: PropTypes.textStyle,
  iconSize: PropTypes$1.number,
  theme: PropTypes.viewerTheme,
  onShare: PropTypes$1.func,
  onClose: PropTypes$1.func,
  focusable: PropTypes$1.bool
};
var defaultProps$d = {
  className: null,
  itemClassName: null,
  labelClassName: null,
  buttonClassName: null,
  title: null,
  url: null,
  options: null,
  buttonsStyle: null,
  buttonsTextStyle: null,
  iconSize: 45,
  theme: null,
  onShare: null,
  onClose: null,
  focusable: true
};
var ShareOptions = function ShareOptions(_ref) {
  var className = _ref.className,
    itemClassName = _ref.itemClassName,
    labelClassName = _ref.labelClassName,
    buttonClassName = _ref.buttonClassName,
    title = _ref.title,
    url = _ref.url,
    options = _ref.options,
    buttonsStyle = _ref.buttonsStyle,
    buttonsTextStyle = _ref.buttonsTextStyle,
    iconSize = _ref.iconSize,
    theme = _ref.theme,
    onShare = _ref.onShare,
    onClose = _ref.onClose,
    focusable = _ref.focusable;
  var _ref2 = theme || {},
    _ref2$menuTheme = _ref2.menuTheme,
    menuTheme = _ref2$menuTheme === void 0 ? null : _ref2$menuTheme;
  var _ref3 = menuTheme || {},
    _ref3$colors = _ref3.colors,
    colors = _ref3$colors === void 0 ? null : _ref3$colors;
  var _ref4 = colors || {},
    _ref4$primary = _ref4.primary,
    brandPrimaryColor = _ref4$primary === void 0 ? null : _ref4$primary;
  var colorStyles = getStyleFromColor$1(brandPrimaryColor, 'color');
  var finalStyles = colorStyles;
  if (buttonsTextStyle !== null) {
    finalStyles = _objectSpread$1(_objectSpread$1({}, finalStyles), getStyleFromText$1(buttonsTextStyle));
  }
  if (buttonsStyle !== null) {
    finalStyles = _objectSpread$1(_objectSpread$1({}, finalStyles), getStyleFromBox$1(buttonsStyle));
  }
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    linkCopied = _useState2[0],
    setLinkCopied = _useState2[1];
  var onClickCopy = React.useCallback(function () {
    copyToClipboard(url).then(function () {
      setLinkCopied(true);
      setTimeout(function () {
        setLinkCopied(false);
      }, 2000);
    });
  }, [url, setLinkCopied]);
  var onShareButtonClick = React.useCallback(function (type) {
    if (onShare !== null) {
      onShare(type);
    }
  }, [onShare]);
  var shareButtonProps = React.useMemo(function () {
    return {
      className: classNames([styles$d.button, _defineProperty({}, buttonClassName, buttonClassName !== null)]),
      url: url,
      onShareWindowClose: function onShareWindowClose() {
        if (onClose !== null) {
          onClose();
        }
      }
    };
  }, [url, onClose]);
  var shareIconProps = React.useMemo(function () {
    return {
      className: styles$d.icon,
      size: iconSize,
      bgStyle: {
        fill: 'none'
      },
      iconFillColor: 'currentColor'
    };
  }, [iconSize]);
  var shareOptions = [{
    id: 'facebook',
    button: /*#__PURE__*/React.createElement(reactShare.FacebookShareButton, Object.assign({}, shareButtonProps, {
      quote: title,
      beforeOnClick: function beforeOnClick() {
        onShareButtonClick('Facebook');
        return Promise.resolve();
      },
      tabIndex: focusable ? null : '-1',
      style: finalStyles
    }), /*#__PURE__*/React.createElement(reactShare.FacebookIcon, shareIconProps), /*#__PURE__*/React.createElement("div", {
      className: classNames([styles$d.label, _defineProperty({}, labelClassName, labelClassName !== null)])
    }, "Facebook"), /*#__PURE__*/React.createElement("div", {
      className: styles$d.spacer,
      style: {
        width: "".concat(iconSize, "px")
      }
    }))
  }, {
    id: 'twitter',
    button: /*#__PURE__*/React.createElement(reactShare.TwitterShareButton, Object.assign({}, shareButtonProps, {
      title: title,
      beforeOnClick: function beforeOnClick() {
        onShareButtonClick('Twitter');
        return Promise.resolve();
      },
      tabIndex: focusable ? null : '-1',
      style: finalStyles
    }), /*#__PURE__*/React.createElement(reactShare.TwitterIcon, shareIconProps), /*#__PURE__*/React.createElement("div", {
      className: classNames([styles$d.label, _defineProperty({}, labelClassName, labelClassName !== null)])
    }, "Twitter"), /*#__PURE__*/React.createElement("div", {
      className: styles$d.spacer,
      style: {
        width: "".concat(iconSize, "px")
      }
    }))
  }, {
    id: 'linkedin',
    button: /*#__PURE__*/React.createElement(reactShare.LinkedinShareButton, Object.assign({}, shareButtonProps, {
      title: title,
      beforeOnClick: function beforeOnClick() {
        onShareButtonClick('LinkedIn');
        return Promise.resolve();
      },
      tabIndex: focusable ? null : '-1',
      style: finalStyles
    }), /*#__PURE__*/React.createElement(reactShare.LinkedinIcon, shareIconProps), /*#__PURE__*/React.createElement("div", {
      className: classNames([styles$d.label, _defineProperty({}, labelClassName, labelClassName !== null)])
    }, "LinkedIn"), /*#__PURE__*/React.createElement("div", {
      className: styles$d.spacer,
      style: {
        width: "".concat(iconSize, "px")
      }
    }))
  }, {
    id: 'whatsapp',
    button: /*#__PURE__*/React.createElement(reactShare.WhatsappShareButton, Object.assign({}, shareButtonProps, {
      title: title,
      beforeOnClick: function beforeOnClick() {
        onShareButtonClick('Whatsapp');
        return Promise.resolve();
      },
      tabIndex: focusable ? null : '-1',
      style: finalStyles
    }), /*#__PURE__*/React.createElement(reactShare.WhatsappIcon, shareIconProps), /*#__PURE__*/React.createElement("div", {
      className: classNames([styles$d.label, _defineProperty({}, labelClassName, labelClassName !== null)])
    }, "Whatsapp"), /*#__PURE__*/React.createElement("div", {
      className: styles$d.spacer,
      style: {
        width: "".concat(iconSize, "px")
      }
    }))
  },
  // {
  //     id: 'facebookMessenger',
  //     button: (
  //         <FacebookMessengerShareButton
  //             {...shareButtonProps}
  //             title={title}
  //             appId="741129940350872"
  //             beforeOnClick={() => {
  //                 onShareButtonClick('Whatsapp');
  //                 return Promise.resolve();
  //             }}
  //             tabIndex={focusable ? null : '-1'}
  //             style={finalStyles}
  //         >
  //             <FacebookMessengerIcon {...shareIconProps} />
  //             <div
  //                 className={classNames([
  //                     styles.label,
  //                     { [labelClassName]: labelClassName !== null },
  //                 ])}
  //             >
  //                 Facebook Messenger
  //             </div>
  //         </FacebookMessengerShareButton>
  //     ),
  // },
  {
    id: 'email',
    button: /*#__PURE__*/React.createElement(reactShare.EmailShareButton, Object.assign({}, shareButtonProps, {
      subject: title,
      beforeOnClick: function beforeOnClick() {
        onShareButtonClick('Email');
        return Promise.resolve();
      },
      tabIndex: focusable ? null : '-1',
      style: finalStyles
    }), /*#__PURE__*/React.createElement(EmailIcon$1, shareIconProps), /*#__PURE__*/React.createElement("div", {
      className: classNames([styles$d.label, _defineProperty({}, labelClassName, labelClassName !== null)])
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "Lrwi2G",
      defaultMessage: [{
        "type": 0,
        "value": "Email"
      }]
    })), /*#__PURE__*/React.createElement("div", {
      className: styles$d.spacer,
      style: {
        width: "".concat(iconSize, "px")
      }
    }))
  }, {
    id: 'sms',
    button: /*#__PURE__*/React.createElement(Button$3, {
      className: classNames([styles$d.button, _defineProperty({}, buttonClassName, buttonClassName !== null)]),
      href: "sms:?&body=".concat(url),
      focusable: focusable,
      style: finalStyles,
      external: true,
      withoutBootstrapStyles: true
    }, /*#__PURE__*/React.createElement(SmsIcon$1, shareIconProps), /*#__PURE__*/React.createElement("div", {
      className: classNames([styles$d.label, _defineProperty({}, labelClassName, labelClassName !== null)])
    }, /*#__PURE__*/React.createElement("span", {
      className: styles$d.labelText
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "dSfmnf",
      defaultMessage: [{
        "type": 0,
        "value": "SMS"
      }]
    }))), /*#__PURE__*/React.createElement("div", {
      className: styles$d.spacer,
      style: {
        width: "".concat(iconSize, "px")
      }
    }))
  }];
  var hasShareLink = options !== null ? options.includes('copylink') : true; // default is true
  var selectedOptions = options !== null ? shareOptions.filter(function (opt) {
    return options.includes(opt.id);
  }) : shareOptions;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$d.container, _defineProperty({}, className, className !== null)])
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$d.options
  }, hasShareLink ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$d.item, _defineProperty(_defineProperty({}, itemClassName, itemClassName !== null), styles$d.isLinkCopied, linkCopied)])
  }, /*#__PURE__*/React.createElement(Button$3, {
    className: classNames([styles$d.button, _defineProperty({}, buttonClassName, buttonClassName !== null)]),
    onClick: onClickCopy,
    focusable: focusable,
    style: finalStyles,
    withoutBootstrapStyles: true
  }, /*#__PURE__*/React.createElement(ShareLinkIcon$1, shareIconProps), /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$d.label, _defineProperty({}, labelClassName, labelClassName !== null)])
  }, /*#__PURE__*/React.createElement("span", {
    className: styles$d.labelText
  }, !linkCopied ? /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
    id: "D21uVQ",
    defaultMessage: [{
      "type": 0,
      "value": "Copy link"
    }]
  }) : null, linkCopied ? /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
    id: "xFlbR7",
    defaultMessage: [{
      "type": 0,
      "value": "Link copied!"
    }]
  }) : null)), /*#__PURE__*/React.createElement("div", {
    className: styles$d.spacer,
    style: {
      width: "".concat(iconSize, "px")
    }
  }))) : null, selectedOptions.map(function (_ref17) {
    var id = _ref17.id,
      button = _ref17.button;
    return /*#__PURE__*/React.createElement("div", {
      key: id,
      className: classNames([styles$d.item, _defineProperty({}, itemClassName, itemClassName !== null)])
    }, button);
  })));
};
ShareOptions.propTypes = propTypes$d;
ShareOptions.defaultProps = defaultProps$d;
var ShareOptions$1 = ShareOptions;

var styles$c = {"container":"micromag-screen-share-container","background":"micromag-screen-share-background","disabled":"micromag-screen-share-disabled","hidden":"micromag-screen-share-hidden","placeholder":"micromag-screen-share-placeholder","content":"micromag-screen-share-content","emptyHeading":"micromag-screen-share-emptyHeading","emptyOptions":"micromag-screen-share-emptyOptions","heading":"micromag-screen-share-heading","layout":"micromag-screen-share-layout","shareOptions":"micromag-screen-share-shareOptions","isCentered":"micromag-screen-share-isCentered","shareButton":"micromag-screen-share-shareButton","header":"micromag-screen-share-header","footer":"micromag-screen-share-footer"};

var propTypes$c = {
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom']),
  heading: PropTypes.headingElement,
  shareUrl: PropTypes$1.string,
  options: PropTypes$1.objectOf(PropTypes$1.bool),
  buttonsStyle: PropTypes.boxStyle,
  buttonsTextStyle: PropTypes.textStyle,
  centered: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  id: PropTypes$1.string,
  index: PropTypes$1.number,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$c = {
  layout: 'top',
  heading: null,
  shareUrl: null,
  options: null,
  buttonsStyle: null,
  buttonsTextStyle: null,
  centered: false,
  spacing: 20,
  background: null,
  header: null,
  footer: null,
  id: null,
  index: null,
  current: true,
  active: true,
  className: null
};
var ShareScreen = function ShareScreen(_ref) {
  var layout = _ref.layout,
    heading = _ref.heading,
    shareUrl = _ref.shareUrl,
    options = _ref.options,
    buttonsStyle = _ref.buttonsStyle,
    buttonsTextStyle = _ref.buttonsTextStyle,
    centered = _ref.centered,
    spacing = _ref.spacing,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    id = _ref.id,
    index = _ref.index,
    current = _ref.current,
    active = _ref.active,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var backgroundPlaying = current && (isView || isEdit);
  var backgroundShouldLoad = current || active;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useDimensionObserver = useDimensionObserver(),
    headerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    headerHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var _useDimensionObserver3 = useDimensionObserver(),
    footerRef = _useDimensionObserver3.ref,
    _useDimensionObserver4 = _useDimensionObserver3.height,
    footerHeight = _useDimensionObserver4 === void 0 ? 0 : _useDimensionObserver4;
  var currentUrl = React.useMemo(function () {
    if (typeof window === 'undefined') return '';
    var _ref2 = window.location || {},
      _ref2$hostname = _ref2.hostname,
      hostname = _ref2$hostname === void 0 ? null : _ref2$hostname,
      _ref2$pathname = _ref2.pathname,
      pathname = _ref2$pathname === void 0 ? null : _ref2$pathname;
    var parts = pathname.split('/');
    /**
     * for the last portion of the path, if it's equal to the screen index,
     * or the screen id, then don't include it in the share URL.
     * This makes sure we're not doing a `.replace()` that might remove a part
     * from the slug of the current Micromag.
     * (e.g. if the url is `/10-reasons-to-lorem-ipsum` and the share screen
     * is on screen 10, then a string replace would remove the `/10` from the
     * URL)
     */
    return parts.reduce(function (acc, part, i) {
      return (
        // it's equal to the screen index, or equal to the screen ID, or it's empty
        i === parts.length - 1 && parseInt(part, 10) === index || part === id || part === '' ? acc : "".concat(acc, "/").concat(part)
      );
    }, hostname);
  }, [index, id]);

  // if not share URl was specified, default to the currentURL (without the screen index/id part)
  var finalShareURL = shareUrl || currentUrl;
  var defaultOptions = options !== null ? ['email', 'facebook', 'twitter', 'linkedin', 'whatsapp'] : [];
  var selectedOptions = options !== null ? Object.keys(options).reduce(function (acc, key) {
    if (!options[key]) return acc;
    return [].concat(_toConsumableArray(acc), [key]);
  }, []) : defaultOptions;
  var trackingEnabled = isView;
  var trackEvent = useTrackScreenEvent('share');
  var onClickShare = React.useCallback(function (type) {
    if (trackingEnabled) {
      trackEvent('click_share', type, {
        shareUrl: finalShareURL
      });
    }
  }, [trackEvent]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$c.container, _defineProperty(_defineProperty({}, className, className !== null), styles$c.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$c.content
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$c.layout,
    verticalAlign: layout,
    fullscreen: true,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (headerHeight || spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (footerHeight || spacing)
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    className: styles$c.header,
    ref: headerRef,
    style: {
      paddingTop: spacing / 2,
      paddingBottom: spacing,
      paddingLeft: spacing,
      paddingRight: spacing,
      transform: "translate(0px, ".concat(viewerTopHeight, "px)")
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "X7kRRa",
      defaultMessage: [{
        "type": 0,
        "value": "Heading"
      }]
    }),
    emptyClassName: styles$c.emptyHeading,
    isEmpty: !heading || (heading === null || heading === void 0 ? void 0 : heading.body) === ''
  }, heading ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: classNames([styles$c.heading])
  }, heading)) : null), /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer",
    size: 5
  }), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "share-options",
    placeholder: "share-options",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "RucIeL",
      defaultMessage: [{
        "type": 0,
        "value": "Share options"
      }]
    }),
    emptyClassName: styles$c.emptyOptions,
    isEmpty: !options
  }, /*#__PURE__*/React.createElement(ShareOptions$1, {
    className: classNames([styles$c.shareOptions, _defineProperty({}, styles$c.isCentered, centered)]),
    buttonClassName: styles$c.shareButton,
    url: finalShareURL,
    options: selectedOptions,
    onShare: onClickShare,
    buttonsStyle: buttonsStyle,
    buttonsTextStyle: buttonsTextStyle
  })), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    className: styles$c.footer,
    ref: footerRef,
    style: {
      paddingTop: spacing,
      paddingBottom: spacing / 2,
      paddingLeft: Math.max(viewerBottomSidesWidth - spacing, 0),
      paddingRight: Math.max(viewerBottomSidesWidth - spacing, 0)
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: backgroundShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$c.background
  }) : null);
};
ShareScreen.propTypes = propTypes$c;
ShareScreen.defaultProps = defaultProps$c;
var ShareScreen$1 = ShareScreen;

// import * as transforms from './transforms/index';

var definition$b = {
  id: 'share',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "64JlRq",
      defaultMessage: [{
        "type": 0,
        "value": "Share"
      }]
    }),
    order: 12
  },
  title: reactIntl.defineMessage({
    id: "5mk1b+",
    defaultMessage: [{
      "type": 0,
      "value": "Share"
    }]
  }),
  component: ShareScreen$1,
  layouts: ['top', 'middle', 'bottom'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'shareUrl',
    type: 'url',
    label: reactIntl.defineMessage({
      id: "0R+nB5",
      defaultMessage: [{
        "type": 0,
        "value": "Custom URL"
      }]
    }),
    help: reactIntl.defineMessage({
      id: "bQsPrs",
      defaultMessage: [{
        "type": 0,
        "value": "If this field is left empty, this Micromag's URL will be shared."
      }]
    })
  }, {
    name: 'heading',
    type: 'heading-element',
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "wx5PI0",
      defaultMessage: [{
        "type": 0,
        "value": "Heading"
      }]
    })
  }, {
    name: 'options',
    type: 'fields',
    isList: true,
    label: reactIntl.defineMessage({
      id: "4js1kW",
      defaultMessage: [{
        "type": 0,
        "value": "Share Options"
      }]
    }),
    fields: [{
      name: 'copylink',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "rKuiKj",
        defaultMessage: [{
          "type": 0,
          "value": "Copy link"
        }]
      })
    }, {
      name: 'facebook',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "r+bcpa",
        defaultMessage: [{
          "type": 0,
          "value": "Facebook"
        }]
      })
    }, {
      name: 'twitter',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "mlucL+",
        defaultMessage: [{
          "type": 0,
          "value": "Twitter"
        }]
      })
    }, {
      name: 'linkedin',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "hvxkzE",
        defaultMessage: [{
          "type": 0,
          "value": "LinkedIn"
        }]
      })
    }, {
      name: 'whatsapp',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "3B9cb3",
        defaultMessage: [{
          "type": 0,
          "value": "Whatsapp"
        }]
      })
    },
    // {
    //     name: 'facebookMessenger',
    //     type: 'toggle',
    //     defaultValue: true,
    //     label: defineMessage({
    //         defaultMessage: 'Facebook Messenger',
    //         description: 'Field label',
    //     }),
    // },
    {
      name: 'email',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "LI0Gz4",
        defaultMessage: [{
          "type": 0,
          "value": "Email"
        }]
      })
    }, {
      name: 'sms',
      type: 'toggle',
      defaultValue: true,
      label: reactIntl.defineMessage({
        id: "d3va12",
        defaultMessage: [{
          "type": 0,
          "value": "SMS"
        }]
      })
    }]
  }, {
    name: 'buttonsTextStyle',
    type: 'text-style-form',
    label: reactIntl.defineMessage({
      id: "gwPu/I",
      defaultMessage: [{
        "type": 0,
        "value": "Buttons text"
      }]
    })
  }, {
    name: 'buttonsStyle',
    type: 'box-style-form',
    label: reactIntl.defineMessage({
      id: "l5uLMd",
      defaultMessage: [{
        "type": 0,
        "value": "Buttons"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var styles$b = {"container":"micromag-screen-slideshow-container","placeholder":"micromag-screen-slideshow-placeholder","inner":"micromag-screen-slideshow-inner","background":"micromag-screen-slideshow-background","disabled":"micromag-screen-slideshow-disabled","hidden":"micromag-screen-slideshow-hidden","content":"micromag-screen-slideshow-content","caption":"micromag-screen-slideshow-caption","header":"micromag-screen-slideshow-header","footer":"micromag-screen-slideshow-footer"};

var propTypes$b = {
  slides: PropTypes$1.oneOfType([PropTypes.imageMedias, PropTypes.imageElements]),
  withCaptions: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  captionMaxLines: PropTypes$1.number,
  transitionDelay: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  transitions: PropTypes.transitions,
  className: PropTypes$1.string
};
var defaultProps$b = {
  withCaptions: false,
  slides: [],
  spacing: 20,
  captionMaxLines: 2,
  transitionDelay: 1,
  // in seconds
  background: null,
  header: null,
  footer: null,
  current: true,
  active: true,
  transitions: null,
  className: null
};
var SlideshowScreen = function SlideshowScreen(_ref) {
  var slides = _ref.slides,
    withCaptions = _ref.withCaptions,
    background = _ref.background,
    header = _ref.header,
    footer = _ref.footer,
    current = _ref.current,
    active = _ref.active,
    spacing = _ref.spacing,
    transitionDelay = _ref.transitionDelay,
    captionMaxLines = _ref.captionMaxLines,
    transitions = _ref.transitions,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight;
  var _useViewerInteraction = useViewerInteraction(),
    enableInteraction = _useViewerInteraction.enableInteraction,
    disableInteraction = _useViewerInteraction.disableInteraction;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var finalSpacing = isPlaceholder ? 5 : spacing;
  var _useState = React.useState(0),
    _useState2 = _slicedToArray(_useState, 2),
    imagesLoaded = _useState2[0],
    setImagesLoaded = _useState2[1];
  var ready = true;
  var transitionPlaying = current && ready;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview;
  var onImageLoaded = React.useCallback(function () {
    setImagesLoaded(imagesLoaded + 1);
  }, [imagesLoaded, setImagesLoaded]);
  var imagesEl = React.useRef([]);

  // Head and foot
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    isPreview: isPreview,
    enableInteraction: enableInteraction,
    disableInteraction: disableInteraction
  });
  var _useDimensionObserver = useDimensionObserver(),
    footerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    footerHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var _useDimensionObserver3 = useDimensionObserver(),
    headerRef = _useDimensionObserver3.ref;
  var items = (slides || []).map(function (item, itemI) {
    var _ref2 = item || {},
      _ref2$media = _ref2.media,
      media = _ref2$media === void 0 ? null : _ref2$media,
      _ref2$caption = _ref2.caption,
      caption = _ref2$caption === void 0 ? null : _ref2$caption;
    var imageSize = {
      width: width,
      height: height
    };
    var hasImage = media !== null;
    var hasCaption = isTextFilled$1(caption);
    var finalTransitionDelay = itemI > 0 ? itemI * (transitionDelay * 1000) : 0;
    return /*#__PURE__*/React.createElement("div", {
      key: "item-".concat(itemI),
      className: styles$b.gridItem
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$b.imageContainer,
      ref: function ref(el) {
        imagesEl.current[itemI] = el;
      }
    }, /*#__PURE__*/React.createElement(Transitions, {
      transitions: transitions,
      delay: finalTransitionDelay,
      playing: transitionPlaying,
      disabled: transitionDisabled,
      fullscreen: true
    }, /*#__PURE__*/React.createElement(ScreenElement$1, {
      placeholder: "image",
      placeholderProps: {
        className: styles$b.placeholder,
        height: '100%'
      },
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "ebsPd4",
        defaultMessage: [{
          "type": 0,
          "value": "Image"
        }]
      }),
      emptyClassName: styles$b.emptyImage,
      isEmpty: !hasImage
    }, mediaShouldLoad ? /*#__PURE__*/React.createElement(Visual$1, Object.assign({
      className: styles$b.image,
      media: media
    }, imageSize, {
      resolution: resolution,
      objectFit: {
        fit: 'cover'
      },
      playing: backgroundPlaying,
      active: active,
      withoutVideo: isPreview,
      onLoaded: onImageLoaded
    })) : null))), withCaptions ? /*#__PURE__*/React.createElement(Transitions, {
      transitions: transitions,
      delay: finalTransitionDelay,
      playing: transitionPlaying,
      disabled: transitionDisabled
    }, /*#__PURE__*/React.createElement(ScreenElement$1, {
      placeholder: "line",
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "6tIigB",
        defaultMessage: [{
          "type": 0,
          "value": "Caption"
        }]
      }),
      emptyClassName: styles$b.emptyCaption,
      isEmpty: !hasCaption
    }, hasCaption ? /*#__PURE__*/React.createElement("div", {
      className: styles$b.caption
    }, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, caption, {
      className: styles$b.captionText,
      lineClamp: captionMaxLines
    }))) : null)) : null);
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$b.container, _defineProperty(_defineProperty({}, className, className !== null), styles$b.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$b.content
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$b.inner,
    style: {
      paddingTop: !isPreview ? viewerTopHeight : null,
      paddingBottom: (hasFooter ? footerHeight - finalSpacing : 0) + (current && !isPreview ? viewerBottomHeight : 0)
    }
  }, isPlaceholder ? /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "image",
    placeholderProps: {
      className: styles$b.placeholder,
      height: '100%'
    },
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "ebsPd4",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    })
  }) : null, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    className: styles$b.header,
    ref: headerRef,
    style: {
      padding: finalSpacing,
      paddingTop: finalSpacing / 2
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, items, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    className: styles$b.footer,
    ref: footerRef,
    style: {
      padding: finalSpacing / 2
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    shouldLoad: mediaShouldLoad,
    withoutVideo: isPreview,
    className: styles$b.background
  }) : null);
};
SlideshowScreen.propTypes = propTypes$b;
SlideshowScreen.defaultProps = defaultProps$b;
var SlideshowScreen$1 = SlideshowScreen;

// import * as transforms from './transforms/index';

var definition$a = [{
  id: 'slideshow',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "6mX2ya",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    }),
    order: 7
  },
  title: reactIntl.defineMessage({
    id: "MhGUaY",
    defaultMessage: [{
      "type": 0,
      "value": "Slideshow"
    }]
  }),
  component: SlideshowScreen$1,
  fields: [{
    name: 'slides',
    type: 'visuals-with-caption',
    label: reactIntl.defineMessage({
      id: "muYwrB",
      defaultMessage: [{
        "type": 0,
        "value": "Images"
      }]
    })
  }, {
    name: 'transitionDelay',
    type: 'number',
    min: 0,
    "float": true,
    label: reactIntl.defineMessage({
      id: "/6zaOP",
      defaultMessage: [{
        "type": 0,
        "value": "Transition Delay (in seconds)"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$a = {"container":"micromag-screen-survey-container","background":"micromag-screen-survey-background","disabled":"micromag-screen-survey-disabled","hidden":"micromag-screen-survey-hidden","placeholder":"micromag-screen-survey-placeholder","content":"micromag-screen-survey-content","emptyQuestion":"micromag-screen-survey-emptyQuestion","emptyAnswer":"micromag-screen-survey-emptyAnswer","question":"micromag-screen-survey-question","answers":"micromag-screen-survey-answers","items":"micromag-screen-survey-items","header":"micromag-screen-survey-header","footer":"micromag-screen-survey-footer","item":"micromag-screen-survey-item","placeholderAnswer":"micromag-screen-survey-placeholderAnswer","itemContent":"micromag-screen-survey-itemContent","resultBar":"micromag-screen-survey-resultBar","resultLabel":"micromag-screen-survey-resultLabel","itemInner":"micromag-screen-survey-itemInner","button":"micromag-screen-survey-button","itemLabel":"micromag-screen-survey-itemLabel","itemText":"micromag-screen-survey-itemText","userAnswer":"micromag-screen-survey-userAnswer","result":"micromag-screen-survey-result","answered":"micromag-screen-survey-answered","resultContainer":"micromag-screen-survey-resultContainer","resultContent":"micromag-screen-survey-resultContent","withPercentage":"micromag-screen-survey-withPercentage","isPlaceholder":"micromag-screen-survey-isPlaceholder","layout":"micromag-screen-survey-layout"};

var propTypes$a = {
  id: PropTypes$1.string,
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom', 'split']),
  question: PropTypes.textElement,
  answers: PropTypes.answers,
  buttonsStyle: PropTypes.boxStyle,
  buttonsTextStyle: PropTypes.textStyle,
  resultsStyle: PropTypes$1.shape({
    barColor: PropTypes.color,
    textColor: PropTypes.color,
    percentageTextStyle: PropTypes.textStyle
  }),
  spacing: PropTypes$1.number,
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  withoutPercentage: PropTypes$1.bool,
  withoutBar: PropTypes$1.bool,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  transitions: PropTypes.transitions,
  // transitionStagger: PropTypes.number,
  resultTransitionDuration: PropTypes$1.number,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$a = {
  id: null,
  layout: 'middle',
  question: null,
  answers: null,
  buttonsStyle: null,
  buttonsTextStyle: null,
  resultsStyle: null,
  spacing: 20,
  header: null,
  footer: null,
  background: null,
  withoutPercentage: false,
  withoutBar: false,
  current: true,
  active: true,
  transitions: null,
  // transitionStagger: 100,
  resultTransitionDuration: 500,
  type: null,
  className: null
};
var SurveyScreen = function SurveyScreen(_ref) {
  var id = _ref.id,
    layout = _ref.layout,
    question = _ref.question,
    answers = _ref.answers,
    buttonsStyle = _ref.buttonsStyle,
    buttonsTextStyle = _ref.buttonsTextStyle,
    resultsStyle = _ref.resultsStyle,
    spacing = _ref.spacing,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    withoutPercentage = _ref.withoutPercentage,
    withoutBar = _ref.withoutBar,
    current = _ref.current,
    active = _ref.active,
    transitions = _ref.transitions,
    resultTransitionDuration = _ref.resultTransitionDuration,
    type = _ref.type,
    className = _ref.className;
  var screenId = id || 'screen-id';
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useQuizCreate = useQuizCreate$1({
      screenId: screenId
    }),
    submitQuiz = _useQuizCreate.create;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var _useQuiz = useQuiz$1({
      screenId: screenId,
      opts: {
        autoload: !isPlaceholder
      }
    }),
    _useQuiz$quiz = _useQuiz.quiz,
    allQuizAnswers = _useQuiz$quiz === void 0 ? [] : _useQuiz$quiz;
  var quizAnswers = allQuizAnswers.filter(function (item) {
    var _ref2 = item || {},
      _ref2$choice = _ref2.choice,
      choice = _ref2$choice === void 0 ? null : _ref2$choice;
    var answersBody = (answers || []).map(function (answer) {
      var _ref3 = answer || {},
        _ref3$label = _ref3.label,
        label = _ref3$label === void 0 ? null : _ref3$label;
      var _ref4 = label || {},
        _ref4$body = _ref4.body,
        body = _ref4$body === void 0 ? null : _ref4$body;
      return body;
    }).filter(function (body) {
      return body !== null;
    });
    var hasResult = answersBody.find(function (body) {
      return body === choice;
    });
    if (hasResult) {
      return true;
    }
    return false;
  });
  var hasQuestion = isTextFilled$1(question);
  var showInstantAnswer = isStatic || isCapture;
  var _useState = React.useState(showInstantAnswer ? -1 : null),
    _useState2 = _slicedToArray(_useState, 2),
    userAnswerIndex = _useState2[0],
    setUserAnswerIndex = _useState2[1];
  var answered = userAnswerIndex !== null;
  var quizAnswersComputed = React.useMemo(function () {
    var total = answers !== null ? (quizAnswers || []).reduce(function (points, _ref5) {
      var _ref5$count = _ref5.count,
        count = _ref5$count === void 0 ? 0 : _ref5$count;
      return points + parseInt(count, 10);
    }, userAnswerIndex !== null && userAnswerIndex > -1 ? 1 : 0) : 0;
    var computed = answers !== null ? (answers || []).reduce(function (answersTotal, ans, i) {
      var _ref6 = ans || {},
        _ref6$label = _ref6.label,
        label = _ref6$label === void 0 ? {} : _ref6$label;
      var _ref7 = label || {},
        _ref7$body = _ref7.body,
        body = _ref7$body === void 0 ? null : _ref7$body;
      var _ref8 = quizAnswers.find(function (qa) {
          return qa.choice === body;
        }) || {},
        _ref8$count = _ref8.count,
        count = _ref8$count === void 0 ? 0 : _ref8$count;
      var countWithUser = i === userAnswerIndex ? count + 1 : count;
      if (body !== null) {
        return _objectSpread$1(_objectSpread$1({}, answersTotal), {}, _defineProperty({}, body, {
          percent: total > 0 ? countWithUser / total * 100 : 0,
          count: countWithUser
        }));
      }
      return answersTotal;
    }, {}) : {};
    var quizAnswersPct = total > 0 ? Object.keys(computed).map(function (key) {
      return computed[key].percent || 0;
    }) : [];
    var evenlySplit = largestRemainderRound$1(quizAnswersPct, 100);
    return Object.keys(computed).reduce(function (acc, key, i) {
      return _objectSpread$1(_objectSpread$1({}, acc), {}, _defineProperty({}, key, _objectSpread$1(_objectSpread$1({}, computed[key]), {}, {
        percent: evenlySplit[i]
      })));
    }, {});
  }, [answers, quizAnswers, userAnswerIndex]);
  var isSplitted = layout === 'split';
  // const isTopLayout = layout === 'top';
  var isMiddleLayout = layout === 'middle';
  var verticalAlign = isSplitted ? null : layout;
  var transitionPlaying = current;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var onAnswerClick = React.useCallback(function (answerIndex) {
    if (userAnswerIndex === null) {
      setUserAnswerIndex(answerIndex);
      var answer = answers[answerIndex];
      submitQuiz({
        choice: answer.label.body || answerIndex,
        value: 1
      });
      trackScreenEvent('click_answer', "Answer ".concat(userAnswerIndex + 1, ": ").concat(answer.label.body), {
        answer: answer,
        answerIndex: answerIndex
      });
    }
  }, [userAnswerIndex, setUserAnswerIndex, trackScreenEvent, submitQuiz]);
  React.useEffect(function () {
    if (!current && isEdit && userAnswerIndex !== null) {
      setUserAnswerIndex(null);
    }
  }, [isEdit, current, userAnswerIndex, setUserAnswerIndex]);
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useDimensionObserver = useDimensionObserver(),
    headerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    headerHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var _useDimensionObserver3 = useDimensionObserver(),
    footerRef = _useDimensionObserver3.ref,
    _useDimensionObserver4 = _useDimensionObserver3.height,
    footerHeight = _useDimensionObserver4 === void 0 ? 0 : _useDimensionObserver4;
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    scrolledBottom = _useState4[0],
    setScrolledBottom = _useState4[1];
  var onScrolledBottom = React.useCallback(function (_ref9) {
    var initial = _ref9.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  var _useState5 = React.useState(false),
    _useState6 = _slicedToArray(_useState5, 2),
    hasScroll = _useState6[0],
    setHasScroll = _useState6[1];
  var onScrollHeightChange = React.useCallback(function (_ref10) {
    var _ref10$canScroll = _ref10.canScroll,
      canScroll = _ref10$canScroll === void 0 ? false : _ref10$canScroll;
    setHasScroll(canScroll);
  }, [setHasScroll]);

  // Question
  var items = [/*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "question",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "e1I+KU",
      defaultMessage: [{
        "type": 0,
        "value": "Question"
      }]
    }),
    emptyClassName: styles$a.emptyQuestion,
    isEmpty: !hasQuestion
  }, hasQuestion ? /*#__PURE__*/React.createElement(Transitions, {
    transitions: transitions,
    playing: transitionPlaying,
    disabled: transitionDisabled
  }, /*#__PURE__*/React.createElement(Heading$1, Object.assign({}, question, {
    className: styles$a.question
  }))) : null)];
  if (isSplitted || !isPlaceholder && hasFooter && isMiddleLayout) {
    items.push( /*#__PURE__*/React.createElement(Spacer, {
      key: "spacer"
    }));
  }
  var finalTransitionDuration = showInstantAnswer ? 0 : "".concat(resultTransitionDuration, "ms");
  var _ref11 = resultsStyle || {},
    _ref11$barColor = _ref11.barColor,
    resultsBarColor = _ref11$barColor === void 0 ? null : _ref11$barColor,
    _ref11$textColor = _ref11.textColor,
    resultsTextColor = _ref11$textColor === void 0 ? null : _ref11$textColor,
    _ref11$percentageText = _ref11.percentageTextStyle,
    resultsPercentageTextStyle = _ref11$percentageText === void 0 ? null : _ref11$percentageText;
  items.push( /*#__PURE__*/React.createElement("div", {
    key: "answers",
    className: styles$a.answers
  }, answers !== null || isPlaceholder ? /*#__PURE__*/React.createElement("div", {
    className: styles$a.items
  }, (isPlaceholder ? _toConsumableArray(new Array(3)) : answers).map(function (answer, answerIndex) {
    var hasAnswer = answer !== null;
    var _ref12 = answer || {},
      _ref12$label = _ref12.label,
      label = _ref12$label === void 0 ? null : _ref12$label,
      _ref12$buttonStyle = _ref12.buttonStyle,
      answerButtonStyle = _ref12$buttonStyle === void 0 ? null : _ref12$buttonStyle,
      _ref12$textStyle = _ref12.textStyle,
      answerButtonTextStyle = _ref12$textStyle === void 0 ? null : _ref12$textStyle,
      _ref12$resultStyle = _ref12.resultStyle,
      answerResultStyle = _ref12$resultStyle === void 0 ? null : _ref12$resultStyle;
    var _ref13 = answerResultStyle || {},
      _ref13$barColor = _ref13.barColor,
      answerResultBarColor = _ref13$barColor === void 0 ? null : _ref13$barColor,
      answerResultTextColor = _ref13.textColor,
      _ref13$percentageText = _ref13.percentageTextStyle,
      answerResultPercentageTextStyle = _ref13$percentageText === void 0 ? null : _ref13$percentageText;
    var _ref14 = label || {},
      _ref14$body = _ref14.body,
      body = _ref14$body === void 0 ? null : _ref14$body;
    var _ref15 = body !== null ? quizAnswersComputed[body] || {} : {},
      _ref15$percent = _ref15.percent,
      percent = _ref15$percent === void 0 ? 0 : _ref15$percent;
    var _ref16 = label || {},
      _ref16$textStyle = _ref16.textStyle,
      textStyle = _ref16$textStyle === void 0 ? null : _ref16$textStyle;
    var _ref17 = textStyle || {},
      _ref17$color = _ref17.color,
      labelColor = _ref17$color === void 0 ? null : _ref17$color;
    var hasAnswerLabel = isTextFilled$1(label);
    var userAnswer = userAnswerIndex === answerIndex;
    var buttonStyles = _objectSpread$1(_objectSpread$1(_objectSpread$1({}, buttonsStyle), answerButtonStyle), answered ? {
      textAlign: 'left'
    } : null);
    var _ref18 = buttonStyles || {},
      _ref18$borderRadius = _ref18.borderRadius,
      answerResultBorderRadius = _ref18$borderRadius === void 0 ? null : _ref18$borderRadius;
    var finalBarBorderRadius = answerResultBorderRadius !== null && isNumber(answerResultBorderRadius) && answerResultBorderRadius > 2 ? answerResultBorderRadius - 2 : answerResultBorderRadius;
    return /*#__PURE__*/React.createElement("div", {
      key: "answer-".concat(answerIndex),
      className: classNames([styles$a.item, _defineProperty({}, styles$a.userAnswer, userAnswer)])
    }, /*#__PURE__*/React.createElement(ScreenElement$1, {
      placeholder: "surveyAnswer",
      placeholderProps: {
        className: styles$a.placeholderAnswer
      },
      emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
        id: "+Ok+7S",
        defaultMessage: [{
          "type": 0,
          "value": "Answer"
        }]
      }),
      emptyClassName: styles$a.emptyAnswer,
      isEmpty: !hasAnswerLabel
    }, hasAnswer ? /*#__PURE__*/React.createElement("div", {
      className: styles$a.itemContent
    }, /*#__PURE__*/React.createElement("div", {
      className: styles$a.itemInner,
      style: {
        borderRadius: answerResultBorderRadius,
        transitionDuration: finalTransitionDuration
      }
    }, /*#__PURE__*/React.createElement(Button$1, {
      className: styles$a.button,
      onPointerUp: function onPointerUp(e) {
        if (e.pointerType !== 'mouse' || e.button === 0) {
          onAnswerClick(answerIndex);
        }
      },
      disabled: isPreview || userAnswerIndex !== null,
      focusable: current && isView,
      buttonStyle: buttonStyles,
      textStyle: _objectSpread$1(_objectSpread$1(_objectSpread$1({}, textStyle), buttonsTextStyle), answerButtonTextStyle)
    }, /*#__PURE__*/React.createElement("span", {
      className: styles$a.itemLabel
    }, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, label, {
      textStyle: _objectSpread$1(_objectSpread$1(_objectSpread$1({}, textStyle), buttonsTextStyle), answerButtonTextStyle),
      inline: true,
      className: styles$a.itemText
    })), !withoutPercentage ? /*#__PURE__*/React.createElement("div", {
      className: styles$a.resultLabel,
      style: _objectSpread$1(_objectSpread$1({}, getStyleFromColor$1(answered ? answerResultTextColor || resultsTextColor || answerResultBarColor || resultsBarColor || labelColor : null, 'color')), answered ? {
        opacity: 1
      } : {
        opacity: 0
      })
    }, /*#__PURE__*/React.createElement(Text$1, Object.assign({}, label, {
      textStyle: _objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({}, textStyle), buttonsTextStyle), answerButtonTextStyle), resultsTextColor), resultsPercentageTextStyle), answerResultTextColor), answerResultPercentageTextStyle),
      inline: true,
      className: styles$a.resultText,
      body: "".concat(percent, "%")
    }))) : null, !withoutBar ? /*#__PURE__*/React.createElement("div", {
      className: styles$a.resultBar,
      style: _objectSpread$1(_objectSpread$1({
        borderRadius: finalBarBorderRadius,
        transitionDuration: finalTransitionDuration,
        width: percent !== null ? "".concat(percent, "%") : '0%'
      }, getStyleFromColor$1(answerResultBarColor || resultsBarColor || labelColor, 'backgroundColor')), answered ? {
        opacity: 0.5
      } : {
        opacity: 0
      })
    }) : null)))) : null));
  })) : null));
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$a.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$a.answered, answered), styles$a.withPercentage, !withoutPercentage), styles$a.isPlaceholder, isPlaceholder)])
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$a.content
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    verticalAlign: verticalAlign,
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    onScrollHeightChange: onScrollHeightChange,
    withShadow: true
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$a.header, _defineProperty({}, styles$a.disabled, scrolledBottom && !scrollingDisabled && hasScroll)]),
    ref: headerRef,
    style: {
      paddingTop: spacing / 2,
      paddingLeft: spacing,
      paddingRight: spacing,
      paddingBottom: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$a.layout,
    verticalAlign: verticalAlign,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (current && !isPreview ? viewerTopHeight : 0) + (headerHeight || spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (footerHeight + spacing)
    } : null
  }, items)), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    ref: footerRef,
    className: classNames([styles$a.footer, _defineProperty({}, styles$a.disabled, !scrolledBottom)]),
    style: {
      transform: !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null,
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingTop: spacing / 2,
      paddingBottom: spacing / 2
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$a.background
  }) : null);
};
SurveyScreen.propTypes = propTypes$a;
SurveyScreen.defaultProps = defaultProps$a;
var SurveyScreen$1 = SurveyScreen;

var definition$9 = {
  id: 'survey',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "ZiWlL6",
      defaultMessage: [{
        "type": 0,
        "value": "Questions"
      }]
    }),
    order: 7
  },
  title: reactIntl.defineMessage({
    id: "650XRF",
    defaultMessage: [{
      "type": 0,
      "value": "Survey"
    }]
  }),
  component: SurveyScreen$1,
  layouts: ['top', 'middle', 'bottom', 'split'],
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'question',
    type: 'heading-element',
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "hVE7TA",
      defaultMessage: [{
        "type": 0,
        "value": "Question"
      }]
    })
  }, {
    name: 'answers',
    type: 'answers',
    theme: {
      label: {
        textStyle: 'button'
      }
    },
    label: reactIntl.defineMessage({
      id: "KHWeV7",
      defaultMessage: [{
        "type": 0,
        "value": "Answers"
      }]
    })
  }, {
    type: 'fields',
    isList: true,
    label: reactIntl.defineMessage({
      id: "R9DB4a",
      defaultMessage: [{
        "type": 0,
        "value": "Styles"
      }]
    }),
    fields: [{
      name: 'withoutPercentage',
      type: 'toggle',
      defaultValue: false,
      label: reactIntl.defineMessage({
        id: "crLqJd",
        defaultMessage: [{
          "type": 0,
          "value": "Without percentage"
        }]
      })
    }, {
      name: 'withoutBar',
      type: 'toggle',
      defaultValue: false,
      label: reactIntl.defineMessage({
        id: "D7kxD3",
        defaultMessage: [{
          "type": 0,
          "value": "Without bar"
        }]
      })
    }, {
      name: 'buttonsStyle',
      type: 'box-style-form',
      label: reactIntl.defineMessage({
        id: "l5uLMd",
        defaultMessage: [{
          "type": 0,
          "value": "Buttons"
        }]
      })
    }, {
      name: 'buttonsTextStyle',
      type: 'text-style-form',
      label: reactIntl.defineMessage({
        id: "gwPu/I",
        defaultMessage: [{
          "type": 0,
          "value": "Buttons text"
        }]
      })
    }, {
      name: 'resultsStyle',
      type: 'graph-bar-style-form',
      label: reactIntl.defineMessage({
        id: "e4UTx9",
        defaultMessage: [{
          "type": 0,
          "value": "Results"
        }]
      }),
      noValueLabel: reactIntl.defineMessage({
        id: "65rc70",
        defaultMessage: [{
          "type": 0,
          "value": "Edit style..."
        }]
      })
    }]
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var styles$9 = {"container":"micromag-screen-text-container","background":"micromag-screen-text-background","disabled":"micromag-screen-text-disabled","hidden":"micromag-screen-text-hidden","placeholder":"micromag-screen-text-placeholder","content":"micromag-screen-text-content","emptyTitle":"micromag-screen-text-emptyTitle","emptyText":"micromag-screen-text-emptyText","title":"micromag-screen-text-title","withMargin":"micromag-screen-text-withMargin","isPlaceholder":"micromag-screen-text-isPlaceholder","layout":"micromag-screen-text-layout"};

var propTypes$9 = {
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom', 'split']),
  text: PropTypes.textElement,
  title: PropTypes.headingElement,
  withTitle: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$9 = {
  layout: 'top',
  text: null,
  title: null,
  withTitle: false,
  spacing: 20,
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  className: null
};
var TextScreen = function TextScreen(_ref) {
  var layout = _ref.layout,
    text = _ref.text,
    title = _ref.title,
    withTitle = _ref.withTitle,
    spacing = _ref.spacing,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var hasTitle = isTextFilled$1(title);
  var hasText = isTextFilled$1(text);
  var isSplitted = layout === 'split';
  var isTopLayout = layout === 'top';
  var isMiddleLayout = layout === 'middle';
  var isBottomLayout = layout === 'bottom';
  var verticalAlign = isSplitted ? null : layout;
  var titleWithMargin = hasTitle && hasText && !isSplitted;
  var backgroundPlaying = current && (isView || isEdit);
  var backgroundShouldLoad = current || active;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$9.container, _defineProperty(_defineProperty({}, className, className !== null), styles$9.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$9.content
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$9.layout,
    fullscreen: true,
    verticalAlign: verticalAlign,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (hasHeader ? spacing / 2 : spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (hasFooter ? spacing / 2 : spacing)
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    style: {
      paddingBottom: spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, !isPlaceholder && hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, !isPlaceholder && hasHeader && isBottomLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, !isPlaceholder && hasHeader && !hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, withTitle ? /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "2ZOPe+",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$9.emptyTitle,
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: classNames([styles$9.title, _defineProperty({}, styles$9.withMargin, titleWithMargin)])
  }, title)) : null) : null, isSplitted && withTitle ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer"
  }) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "description",
    placeholder: "text",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "z4CiV1",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    }),
    emptyClassName: styles$9.emptyText,
    isEmpty: !hasText
  }, hasText ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$9.text
  }, text)) : null), !isPlaceholder && hasFooter && (isTopLayout || isMiddleLayout) ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-bottom"
  }) : null, !isPlaceholder && hasHeader && !hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-bottom"
  }) : null, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    className: styles$9.footer,
    style: {
      paddingTop: spacing,
      paddingLeft: Math.max(0, viewerBottomSidesWidth - spacing),
      paddingRight: Math.max(0, viewerBottomSidesWidth - spacing)
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: backgroundShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$9.background
  }) : null);
};
TextScreen.propTypes = propTypes$9;
TextScreen.defaultProps = defaultProps$9;
var TextScreen$1 = TextScreen;

var TextTitleScreen = function TextTitleScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(TextScreen$1, Object.assign({}, props, {
    withTitle: true
  }));
};
var TextTitleScreen$1 = TextTitleScreen;

// import * as transforms from './transforms/index';

var definition$8 = [{
  id: 'text',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "fIawTr",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    }),
    order: 2
  },
  title: reactIntl.defineMessage({
    id: "S9YpbV",
    defaultMessage: [{
      "type": 0,
      "value": "Text"
    }]
  }),
  component: TextScreen$1,
  layouts: ['top', 'middle', 'bottom'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'text',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "4E2gbX",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'text-title',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "fIawTr",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    }),
    order: 2
  },
  title: reactIntl.defineMessage({
    id: "oCBQKV",
    defaultMessage: [{
      "type": 0,
      "value": "Text with title"
    }]
  }),
  component: TextTitleScreen$1,
  layouts: ['top', 'middle', 'bottom', 'split'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    inline: true,
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'text',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "4E2gbX",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$8 = {"container":"micromag-screen-timeline-container","background":"micromag-screen-timeline-background","empty":"micromag-screen-timeline-empty","content":"micromag-screen-timeline-content","emptyTitle":"micromag-screen-timeline-emptyTitle","item":"micromag-screen-timeline-item","element":"micromag-screen-timeline-element","hidden":"micromag-screen-timeline-hidden","body":"micromag-screen-timeline-body","timeline":"micromag-screen-timeline-timeline","line":"micromag-screen-timeline-line","bullet":"micromag-screen-timeline-bullet","last":"micromag-screen-timeline-last","title":"micromag-screen-timeline-title","description":"micromag-screen-timeline-description","imageContainer":"micromag-screen-timeline-imageContainer","image":"micromag-screen-timeline-image","video":"micromag-screen-timeline-video","callToAction":"micromag-screen-timeline-callToAction","disabled":"micromag-screen-timeline-disabled","isPlaceholder":"micromag-screen-timeline-isPlaceholder","scroll":"micromag-screen-timeline-scroll","circleBulletShape":"micromag-screen-timeline-circleBulletShape","withoutLines":"micromag-screen-timeline-withoutLines"};

var propTypes$8 = {
  layout: PropTypes$1.oneOf(['normal', 'title-description-image', 'title-image-description', 'image-title-description']),
  title: PropTypes.headingElement,
  items: PropTypes$1.arrayOf(PropTypes.textElement),
  withoutLine: PropTypes$1.bool,
  bulletColor: PropTypes.color,
  lineColor: PropTypes.color,
  bulletShape: PropTypes$1.oneOf(['circle', 'square']),
  bulletFilled: PropTypes$1.bool,
  illustrated: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$8 = {
  layout: 'normal',
  title: null,
  items: [null],
  withoutLine: false,
  bulletColor: null,
  lineColor: null,
  bulletShape: 'circle',
  bulletFilled: true,
  illustrated: false,
  spacing: 20,
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  type: null,
  className: null
};
var Timeline = function Timeline(_ref) {
  var layout = _ref.layout,
    title = _ref.title,
    items = _ref.items,
    withoutLine = _ref.withoutLine,
    bulletColor = _ref.bulletColor,
    lineColor = _ref.lineColor,
    bulletShape = _ref.bulletShape,
    bulletFilled = _ref.bulletFilled,
    illustrated = _ref.illustrated,
    spacing = _ref.spacing,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    type = _ref.type,
    className = _ref.className;
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var finalItems = React.useMemo(function () {
    return isPlaceholder ? _toConsumableArray(new Array(5)).map(function () {
      return {};
    }) : items || [null];
  }, [isPlaceholder, items]);
  var hasTitle = isTextFilled$1(title);
  var itemsCount = finalItems !== null ? finalItems.length : 0;
  var hasItems = finalItems !== null && itemsCount;
  var imagesCount = hasItems ? finalItems.reduce(function (acc, curr) {
    var _ref2 = curr || {},
      _ref2$image = _ref2.image,
      image = _ref2$image === void 0 ? null : _ref2$image;
    return acc + (image !== null ? 1 : 0);
  }, 0) : 0;
  var _useState = React.useState(0),
    _useState2 = _slicedToArray(_useState, 2),
    imagesLoaded = _useState2[0],
    setImagesLoaded = _useState2[1];
  var ready = imagesLoaded >= imagesCount;
  // const transitionsPlaying = current && ready;
  var transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var onImageLoaded = React.useCallback(function () {
    setImagesLoaded(function (count) {
      return count + 1;
    });
  }, [setImagesLoaded]);
  var firstLineRef = React.useRef(null);
  var firstContentRef = React.useRef(null);
  var _useState3 = React.useState(0),
    _useState4 = _slicedToArray(_useState3, 2),
    imageWidth = _useState4[0],
    setImageWidth = _useState4[1];
  React.useEffect(function () {
    if (firstLineRef.current !== null) {
      setImageWidth(firstContentRef.current.offsetWidth - firstLineRef.current.offsetWidth);
    } else {
      setImageWidth(firstContentRef.current.offsetWidth);
    }
  }, [width, height]);
  var timelineElements = (finalItems || []).map(function (item, itemI) {
    var _ref3 = item || {},
      _ref3$title = _ref3.title,
      itemTitle = _ref3$title === void 0 ? null : _ref3$title,
      _ref3$description = _ref3.description,
      description = _ref3$description === void 0 ? null : _ref3$description,
      _ref3$image = _ref3.image,
      image = _ref3$image === void 0 ? null : _ref3$image;
    var hasItemTitle = isTextFilled$1(itemTitle);
    var hasDescription = isTextFilled$1(description);
    var hasImage = image !== null;
    var elementsTypes = (layout === 'normal' ? 'title-description-image' : layout).split('-');
    var titleIndex = elementsTypes.indexOf('title');
    var imageIndex = elementsTypes.indexOf('image');
    if (!illustrated) {
      elementsTypes.splice(imageIndex, 1);
    }
    var typesCount = elementsTypes.length;
    var _ref4 = description || {},
      descriptionTextStyle = _ref4.textStyle;
    return /*#__PURE__*/React.createElement("div", {
      className: styles$8.item,
      key: "item-".concat(itemI)
    }, elementsTypes.map(function (elementType, typeI) {
      var elementContent = null;
      var hasElement = false;
      switch (elementType) {
        case 'title':
          hasElement = hasItemTitle;
          elementContent = /*#__PURE__*/React.createElement("div", {
            className: styles$8.title
          }, /*#__PURE__*/React.createElement(ScreenElement$1, {
            placeholder: "title",
            emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
              id: "bmO4Ss",
              defaultMessage: [{
                "type": 0,
                "value": "Entry Title"
              }]
            }),
            emptyClassName: styles$8.empty,
            isEmpty: !hasItemTitle
          }, hasItemTitle ? /*#__PURE__*/React.createElement(Heading$1, itemTitle) : null));
          break;
        case 'image':
          hasElement = hasImage;
          elementContent = /*#__PURE__*/React.createElement("div", {
            className: styles$8.imageContainer
          }, /*#__PURE__*/React.createElement(ScreenElement$1, {
            placeholder: "image",
            emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
              id: "ebsPd4",
              defaultMessage: [{
                "type": 0,
                "value": "Image"
              }]
            }),
            emptyClassName: styles$8.empty,
            isEmpty: !hasImage
          }, hasImage ? /*#__PURE__*/React.createElement(Visual$1, {
            className: styles$8.image,
            videoClassName: styles$8.video,
            media: image,
            width: imageWidth,
            resolution: resolution,
            playing: backgroundPlaying,
            active: active,
            shouldLoad: mediaShouldLoad,
            withoutVideo: isPreview,
            onLoaded: onImageLoaded
          }) : null));
          break;
        case 'description':
          hasElement = hasDescription;
          elementContent = /*#__PURE__*/React.createElement("div", {
            className: styles$8.description
          }, /*#__PURE__*/React.createElement(ScreenElement$1, {
            placeholder: "text",
            emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
              id: "507VAi",
              defaultMessage: [{
                "type": 0,
                "value": "Description"
              }]
            }),
            emptyClassName: styles$8.empty,
            isEmpty: !hasDescription
          }, hasDescription ? /*#__PURE__*/React.createElement(Text$1, Object.assign({}, description, {
            textStyle: _objectSpread$1({}, descriptionTextStyle)
          })) : null));
          break;
        default:
          elementContent = null;
          hasElement = false;
      }
      var firstItem = itemI === 0;
      var lastItem = itemI === itemsCount - 1;
      var lastType = typeI === typesCount - 1;
      var topLineHidden = firstItem && typeI <= titleIndex || lastItem && typeI > titleIndex;
      var bottomLineHidden = firstItem && typeI < titleIndex || lastItem && typeI >= titleIndex;
      return /*#__PURE__*/React.createElement("div", {
        key: "element-".concat(elementType),
        className: classNames([styles$8.element, styles$8["element-".concat(elementType)], _defineProperty({}, styles$8.hidden, (isView || isStatic) && !hasElement)]),
        ref: itemI === 0 ? firstContentRef : null
      }, !withoutLine ? /*#__PURE__*/React.createElement("div", {
        className: styles$8.timeline,
        ref: itemI === 0 ? firstLineRef : null
      }, /*#__PURE__*/React.createElement("div", {
        className: classNames([styles$8.line, _defineProperty({}, styles$8.hidden, topLineHidden)]),
        style: _objectSpread$1({}, !topLineHidden ? getStyleFromColor$1(lineColor, 'backgroundColor') : null)
      }), elementType === 'title' ? /*#__PURE__*/React.createElement("div", {
        className: styles$8.bullet,
        style: _objectSpread$1(_objectSpread$1({}, getStyleFromColor$1(bulletColor, 'borderColor')), bulletFilled ? getStyleFromColor$1(bulletColor, 'backgroundColor') : null)
      }) : null, /*#__PURE__*/React.createElement("div", {
        className: classNames([styles$8.line, _defineProperty({}, styles$8.hidden, bottomLineHidden)]),
        style: _objectSpread$1({}, !bottomLineHidden ? getStyleFromColor$1(lineColor, 'backgroundColor') : null)
      })) : null, /*#__PURE__*/React.createElement("div", {
        className: classNames([styles$8.body, _defineProperty({}, styles$8.last, lastType && !lastItem)])
      }, elementContent));
    }));
  });

  // Call to Action
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useState5 = React.useState(false),
    _useState6 = _slicedToArray(_useState5, 2),
    scrolledBottom = _useState6[0],
    setScrolledBottom = _useState6[1];
  var _useDimensionObserver = useDimensionObserver(),
    footerRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    footerHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var onScrolledBottom = React.useCallback(function (_ref9) {
    var initial = _ref9.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$8.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$8.isPlaceholder, isPlaceholder), styles$8["".concat(bulletShape, "BulletShape")], bulletShape !== null), styles$8.withoutLines, itemsCount < 2)]),
    "data-screen-ready": ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$8.content
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    className: styles$8.scroll,
    verticalAlign: "middle",
    disabled: scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    withShadow: true
  }, /*#__PURE__*/React.createElement(Layout$1, {
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (hasHeader ? spacing / 2 : spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (footerHeight || spacing)
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    style: {
      paddingBottom: spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: "Title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "BSTWf8",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: classNames([styles$8.empty, styles$8.emptyTitle]),
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$8.title
  }, title)) : null), timelineElements)), !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    ref: footerRef,
    className: classNames([styles$8.callToAction, _defineProperty({}, styles$8.disabled, !scrolledBottom)]),
    style: {
      transform: current && !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null,
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingTop: spacing / 2,
      paddingBottom: spacing / 2
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$8.background
  }) : null);
};
Timeline.propTypes = propTypes$8;
Timeline.defaultProps = defaultProps$8;
var TimelineScreen = Timeline;

var TimelineIllustratedScreen = function TimelineIllustratedScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(TimelineScreen, Object.assign({}, props, {
    illustrated: true
  }));
};
var TimelineIllustratedScreen$1 = TimelineIllustratedScreen;

var definition$7 = [{
  id: 'timeline',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "cGItoy",
      defaultMessage: [{
        "type": 0,
        "value": "List"
      }]
    }),
    order: 8
  },
  title: reactIntl.defineMessage({
    id: "GzoKNb",
    defaultMessage: [{
      "type": 0,
      "value": "Timeline"
    }]
  }),
  component: TimelineScreen,
  layouts: ['normal'],
  // transforms,
  fields: [{
    name: 'title',
    type: 'heading-element',
    // inline: true,
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'items',
    type: 'entries',
    theme: {
      title: {
        textStyle: 'heading2'
      },
      description: {
        textStyle: 'text'
      }
    },
    label: reactIntl.defineMessage({
      id: "3ifj0j",
      defaultMessage: [{
        "type": 0,
        "value": "Entries"
      }]
    })
  }, {
    name: 'bulletShape',
    type: 'radios',
    defaultValue: 'circle',
    options: [{
      value: 'circle',
      label: reactIntl.defineMessage({
        id: "+uInZz",
        defaultMessage: [{
          "type": 0,
          "value": "Circle"
        }]
      })
    }, {
      value: 'square',
      label: reactIntl.defineMessage({
        id: "fusnxf",
        defaultMessage: [{
          "type": 0,
          "value": "Square"
        }]
      })
    }],
    label: reactIntl.defineMessage({
      id: "twTaAZ",
      defaultMessage: [{
        "type": 0,
        "value": "Bullet shape"
      }]
    })
  }, {
    name: 'withoutLine',
    type: 'toggle',
    defaultValue: false,
    label: reactIntl.defineMessage({
      id: "N4lZhy",
      defaultMessage: [{
        "type": 0,
        "value": "Without line"
      }]
    })
  }, {
    name: 'bulletFilled',
    type: 'toggle',
    defaultValue: false,
    label: reactIntl.defineMessage({
      id: "YWcp4v",
      defaultMessage: [{
        "type": 0,
        "value": "Bullet filled"
      }]
    })
  }, {
    name: 'bulletColor',
    type: 'color',
    defaultValue: {
      alpha: 1,
      color: '#FFFFFF'
    },
    label: reactIntl.defineMessage({
      id: "uNpHnA",
      defaultMessage: [{
        "type": 0,
        "value": "Bullet color"
      }]
    })
  }, {
    name: 'lineColor',
    type: 'color',
    defaultValue: {
      alpha: 1,
      color: '#FFFFFF'
    },
    label: reactIntl.defineMessage({
      id: "RHMS2f",
      defaultMessage: [{
        "type": 0,
        "value": "Line color"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'timeline-illustrated',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "cGItoy",
      defaultMessage: [{
        "type": 0,
        "value": "List"
      }]
    }),
    order: 8
  },
  title: reactIntl.defineMessage({
    id: "33UbSd",
    defaultMessage: [{
      "type": 0,
      "value": "Timeline with images"
    }]
  }),
  component: TimelineIllustratedScreen$1,
  layouts: ['title-image-description', 'title-description-image', 'image-title-description'],
  fields: [{
    name: 'title',
    type: 'heading-element',
    // inline: true,
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'title-image-description',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'items',
    type: 'entries-with-visual',
    theme: {
      title: {
        textStyle: 'heading2'
      },
      description: {
        textStyle: 'text'
      }
    },
    label: reactIntl.defineMessage({
      id: "3ifj0j",
      defaultMessage: [{
        "type": 0,
        "value": "Entries"
      }]
    })
  }, {
    name: 'withoutLine',
    type: 'toggle',
    defaultValue: false,
    label: reactIntl.defineMessage({
      id: "N4lZhy",
      defaultMessage: [{
        "type": 0,
        "value": "Without line"
      }]
    })
  }, {
    name: 'bulletShape',
    type: 'radios',
    defaultValue: 'circle',
    options: [{
      value: 'circle',
      label: reactIntl.defineMessage({
        id: "+uInZz",
        defaultMessage: [{
          "type": 0,
          "value": "Circle"
        }]
      })
    }, {
      value: 'square',
      label: reactIntl.defineMessage({
        id: "fusnxf",
        defaultMessage: [{
          "type": 0,
          "value": "Square"
        }]
      })
    }],
    label: reactIntl.defineMessage({
      id: "twTaAZ",
      defaultMessage: [{
        "type": 0,
        "value": "Bullet shape"
      }]
    })
  }, {
    name: 'bulletFilled',
    type: 'toggle',
    defaultValue: false,
    label: reactIntl.defineMessage({
      id: "YWcp4v",
      defaultMessage: [{
        "type": 0,
        "value": "Bullet filled"
      }]
    })
  }, {
    name: 'bulletColor',
    type: 'color',
    defaultValue: {
      alpha: 1,
      color: '#FFFFFF'
    },
    label: reactIntl.defineMessage({
      id: "uNpHnA",
      defaultMessage: [{
        "type": 0,
        "value": "Bullet color"
      }]
    })
  }, {
    name: 'lineColor',
    type: 'color',
    defaultValue: {
      alpha: 1,
      color: '#FFFFFF'
    },
    label: reactIntl.defineMessage({
      id: "RHMS2f",
      defaultMessage: [{
        "type": 0,
        "value": "Line color"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$7 = {"container":"micromag-screen-title-container","background":"micromag-screen-title-background","disabled":"micromag-screen-title-disabled","hidden":"micromag-screen-title-hidden","placeholder":"micromag-screen-title-placeholder","content":"micromag-screen-title-content","emptyTitle":"micromag-screen-title-emptyTitle","emptySubtitle":"micromag-screen-title-emptySubtitle","emptyDescription":"micromag-screen-title-emptyDescription","title":"micromag-screen-title-title","withMargin":"micromag-screen-title-withMargin","subtitle":"micromag-screen-title-subtitle","box":"micromag-screen-title-box","isPlaceholder":"micromag-screen-title-isPlaceholder","layout":"micromag-screen-title-layout"};

var propTypes$2$3 = {
  layout: PropTypes$1.oneOf(['top', 'middle', 'bottom', 'split', 'split-top', 'split-bottom']),
  title: PropTypes.headingElement,
  subtitle: PropTypes.headingElement,
  description: PropTypes.textElement,
  boxStyle: PropTypes.boxStyle,
  withSubtitle: PropTypes$1.bool,
  withDescription: PropTypes$1.bool,
  withBox: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  descriptionEmptyLabel: PropTypes.label,
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  transitionStagger: PropTypes$1.number,
  className: PropTypes$1.string
};
var defaultProps$2$3 = {
  layout: 'top',
  title: null,
  subtitle: null,
  description: null,
  boxStyle: null,
  withSubtitle: false,
  withDescription: false,
  withBox: false,
  spacing: 20,
  descriptionEmptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
    id: "507VAi",
    defaultMessage: [{
      "type": 0,
      "value": "Description"
    }]
  }),
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  transitionStagger: 100,
  className: null
};
var TitleScreen = function TitleScreen(_ref) {
  var layout = _ref.layout,
    title = _ref.title,
    subtitle = _ref.subtitle,
    description = _ref.description,
    boxStyle = _ref.boxStyle,
    withSubtitle = _ref.withSubtitle,
    withDescription = _ref.withDescription,
    withBox = _ref.withBox,
    spacing = _ref.spacing,
    descriptionEmptyLabel = _ref.descriptionEmptyLabel,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var hasTitle = isTextFilled$1(title);
  var hasSubtitle = isTextFilled$1(subtitle);
  var hasDescription = isTextFilled$1(description);
  var layoutParts = layout.split('-');
  var isSplitted = layoutParts[0] === 'split';
  var isTopLayout = layout === 'top';
  var isMiddleLayout = layout === 'middle';
  var isBottomLayout = layout === 'bottom';
  var verticalAlign = isSplitted ? layoutParts[1] || null : layoutParts[0];
  var titleWithMargin = hasTitle && (hasSubtitle || hasDescription) && (!isSplitted || verticalAlign === 'top');
  var subtitleWithMargin = hasSubtitle && hasDescription && (!isSplitted || verticalAlign === 'bottom');
  var backgroundPlaying = current && (isView || isEdit);
  var backgroundShouldLoad = current || active;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var titleElement = /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "2ZOPe+",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$7.emptyTitle,
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: classNames([styles$7.title, _defineProperty({}, styles$7.withMargin, titleWithMargin)])
  }, title, {
    size: 1
  })) : null);
  var subtitleElement = withSubtitle ? /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "subtitle",
    placeholder: "subtitle",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "d60tSn",
      defaultMessage: [{
        "type": 0,
        "value": "Subtitle"
      }]
    }),
    emptyClassName: styles$7.emptySubtitle,
    isEmpty: !hasSubtitle
  }, hasSubtitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: classNames([styles$7.subtitle, _defineProperty({}, styles$7.withMargin, subtitleWithMargin)])
  }, subtitle, {
    size: 2
  })) : null) : null;
  var descriptionElement = withDescription ? /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "description",
    placeholder: "shortText",
    emptyLabel: descriptionEmptyLabel,
    emptyClassName: styles$7.emptyDescription,
    isEmpty: !hasDescription
  }, hasDescription ? /*#__PURE__*/React.createElement(Text$1, description) : null) : null;
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$7.container, _defineProperty(_defineProperty({}, className, className !== null), styles$7.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$7.content
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$7.layout,
    fullscreen: true,
    verticalAlign: verticalAlign,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + (hasHeader ? spacing / 2 : spacing),
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + (hasFooter ? spacing / 2 : spacing)
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    style: {
      paddingBottom: spacing
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, !isPlaceholder && hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, !isPlaceholder && hasHeader && isBottomLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, !isPlaceholder && hasHeader && !hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, withBox && !isSplitted ? /*#__PURE__*/React.createElement("div", {
    className: styles$7.box,
    style: isEdit || isPlaceholder || hasTitle || hasSubtitle || hasDescription ? getStyleFromBox$1(boxStyle) : null
  }, [titleElement, subtitleElement, descriptionElement]) : null, withBox && isSplitted ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
    className: styles$7.box,
    key: "top",
    style: isEdit || isPlaceholder || hasTitle || withDescription && verticalAlign === 'top' && hasSubtitle ? getStyleFromBox$1(boxStyle) : null
  }, titleElement, withDescription && verticalAlign === 'top' ? subtitleElement : null), /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer1"
  }), /*#__PURE__*/React.createElement("div", {
    className: styles$7.box,
    key: "bottom",
    style: isEdit || isPlaceholder || hasDescription || (!withDescription || verticalAlign === 'bottom') && hasSubtitle ? getStyleFromBox$1(boxStyle) : null
  }, !withDescription || verticalAlign === 'bottom' ? subtitleElement : null, descriptionElement)) : null, !withBox ? /*#__PURE__*/React.createElement(React.Fragment, null, titleElement, isSplitted && (!withDescription || verticalAlign === 'bottom') && /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer1"
  }), subtitleElement, isSplitted && withDescription && verticalAlign === 'top' && /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer2"
  }), descriptionElement) : null, !isPlaceholder && hasFooter && (isTopLayout || isMiddleLayout) ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-bottom"
  }) : null, !isPlaceholder && hasHeader && !hasFooter && isMiddleLayout ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-bottom"
  }) : null, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    key: "call-to-action",
    style: {
      paddingTop: spacing,
      paddingLeft: Math.max(0, viewerBottomSidesWidth - spacing),
      paddingRight: Math.max(0, viewerBottomSidesWidth - spacing)
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: backgroundShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$7.background
  }) : null);
};
TitleScreen.propTypes = propTypes$2$3;
TitleScreen.defaultProps = defaultProps$2$3;
var TitleScreen$1 = TitleScreen;

var TitleSubtitleScreen = function TitleSubtitleScreen(_ref) {
  var props = _extends({}, (_objectDestructuringEmpty(_ref), _ref));
  return /*#__PURE__*/React.createElement(TitleScreen$1, Object.assign({}, props, {
    withSubtitle: true
  }));
};
var TitleSubtitleScreen$1 = TitleSubtitleScreen;

var _excluded$3 = ["credits"];
var propTypes$1$4 = {
  credits: PropTypes.textElement
};
var defaultProps$1$4 = {
  credits: null
};
var TitleSubtitleCreditsScreen = function TitleSubtitleCreditsScreen(_ref) {
  var credits = _ref.credits,
    props = _objectWithoutProperties(_ref, _excluded$3);
  return /*#__PURE__*/React.createElement(TitleScreen$1, Object.assign({}, props, {
    description: credits,
    withSubtitle: true,
    withDescription: true,
    descriptionEmptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "/hupzO",
      defaultMessage: [{
        "type": 0,
        "value": "Credits"
      }]
    })
  }));
};
TitleSubtitleCreditsScreen.propTypes = propTypes$1$4;
TitleSubtitleCreditsScreen.defaultProps = defaultProps$1$4;
var TitleSubtitleCreditsScreen$1 = TitleSubtitleCreditsScreen;

/* eslint-disable react/jsx-props-no-spreading */
var propTypes$7 = {};
var defaultProps$7 = {};
var TitleWithBoxScreen = function TitleWithBoxScreen(props) {
  return /*#__PURE__*/React.createElement(TitleScreen$1, Object.assign({}, props, {
    withSubtitle: true,
    withDescription: true,
    withBox: true
  }));
};
TitleWithBoxScreen.propTypes = propTypes$7;
TitleWithBoxScreen.defaultProps = defaultProps$7;
var TitleWithBoxScreen$1 = TitleWithBoxScreen;

var definition$6 = [{
  id: 'title',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "uKJRh2",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    order: 1
  },
  title: reactIntl.defineMessage({
    id: "dVcog7",
    defaultMessage: [{
      "type": 0,
      "value": "Title"
    }]
  }),
  component: TitleScreen$1,
  layouts: ['top', 'middle', 'bottom'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'title-subtitle',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "uKJRh2",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    order: 1
  },
  title: reactIntl.defineMessage({
    id: "P1dwGU",
    defaultMessage: [{
      "type": 0,
      "value": "Title with subtitle"
    }]
  }),
  component: TitleSubtitleScreen$1,
  layouts: ['top', 'middle', 'bottom', 'split'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'subtitle',
    type: 'heading-element',
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "EcZYpr",
      defaultMessage: [{
        "type": 0,
        "value": "Subtitle"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'title-subtitle-credits',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "uKJRh2",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    order: 1
  },
  title: reactIntl.defineMessage({
    id: "vZrFq6",
    defaultMessage: [{
      "type": 0,
      "value": "Title with subtitle and credits"
    }]
  }),
  component: TitleSubtitleCreditsScreen$1,
  layouts: ['top', 'middle', 'bottom', 'split-top', 'split-bottom'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'subtitle',
    type: 'heading-element',
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "EcZYpr",
      defaultMessage: [{
        "type": 0,
        "value": "Subtitle"
      }]
    })
  }, {
    name: 'credits',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "upzOTm",
      defaultMessage: [{
        "type": 0,
        "value": "Credits"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}, {
  id: 'title-with-box',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "uKJRh2",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    order: 1
  },
  title: reactIntl.defineMessage({
    id: "9a5s+m",
    defaultMessage: [{
      "type": 0,
      "value": "Title with box"
    }]
  }),
  component: TitleWithBoxScreen$1,
  layouts: ['top', 'middle', 'bottom', 'split-top', 'split-bottom'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'top',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    theme: {
      textStyle: 'heading1'
    },
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'subtitle',
    type: 'heading-element',
    theme: {
      textStyle: 'heading2'
    },
    label: reactIntl.defineMessage({
      id: "EcZYpr",
      defaultMessage: [{
        "type": 0,
        "value": "Subtitle"
      }]
    })
  }, {
    name: 'description',
    type: 'text-element',
    theme: {
      textStyle: 'text'
    },
    label: reactIntl.defineMessage({
      id: "ZCe0r4",
      defaultMessage: [{
        "type": 0,
        "value": "Description"
      }]
    })
  }, {
    type: 'fields',
    isList: true,
    label: reactIntl.defineMessage({
      id: "LOknw0",
      defaultMessage: [{
        "type": 0,
        "value": "Styles"
      }]
    }),
    fields: [{
      name: 'boxStyle',
      type: 'box-style-form',
      label: reactIntl.defineMessage({
        id: "f5Yipd",
        defaultMessage: [{
          "type": 0,
          "value": "Box"
        }]
      })
    }]
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "cDj1mZ",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$1$3 = {"container":"micromag-element-urbania-author-avatar-container","shapeCircle":"micromag-element-urbania-author-avatar-shapeCircle","shape":"micromag-element-urbania-author-avatar-shape"};

var propTypes$1$3 = {
  image: PropTypes.imageElement,
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  resolution: PropTypes$1.number,
  isTag: PropTypes$1.bool,
  shape: PropTypes$1.oneOf([null, 'tag', 'circle']),
  className: PropTypes$1.string,
  shouldLoad: PropTypes$1.bool
};
var defaultProps$1$3 = {
  image: null,
  width: 100,
  height: 100,
  resolution: 1,
  isTag: false,
  shape: 'circle',
  className: null,
  shouldLoad: true
};
var Avatar = function Avatar(_ref) {
  var image = _ref.image,
    width = _ref.width,
    height = _ref.height,
    resolution = _ref.resolution,
    shape = _ref.shape,
    isTag = _ref.isTag,
    className = _ref.className,
    shouldLoad = _ref.shouldLoad;
  var imageAtSize = getOptimalImageUrl$1(image, width, height, {
    resolution: resolution
  });
  var finalShape = shape !== null ? changeCase.pascalCase(shape) : null;
  return /*#__PURE__*/React.createElement("span", {
    className: classNames([styles$1$3.container, _defineProperty(_defineProperty(_defineProperty({}, styles$1$3["shape".concat(finalShape)], finalShape !== null), styles$1$3.isTag, isTag), className, className !== null)])
  }, /*#__PURE__*/React.createElement("span", {
    className: styles$1$3.shape,
    style: {
      backgroundImage: shouldLoad ? "url(\"".concat(imageAtSize, "\")") : null
    }
  }));
};
Avatar.propTypes = propTypes$1$3;
Avatar.defaultProps = defaultProps$1$3;
var Avatar$1 = Avatar;

var styles$6 = {"container":"micromag-element-urbania-author-container","image":"micromag-element-urbania-author-image","link":"micromag-element-urbania-author-link","right":"micromag-element-urbania-author-right","name":"micromag-element-urbania-author-name","prefix":"micromag-element-urbania-author-prefix","collaborator":"micromag-element-urbania-author-collaborator","collaboratorText":"micromag-element-urbania-author-collaboratorText","isSmall":"micromag-element-urbania-author-isSmall","withoutImage":"micromag-element-urbania-author-withoutImage","withoutBackground":"micromag-element-urbania-author-withoutBackground"};

var _excluded$2 = ["author", "withImage", "withoutLink", "withoutPrefix", "withoutBackground", "isSmall", "linkUnderlineColor", "className", "backgroundClassName", "collaboratorClassName", "shouldLoad"];
var propTypes$6 = {
  author: PropTypes$1.shape({
    slug: PropTypes$1.string,
    name: PropTypes.textElement,
    image: PropTypes.imageElement,
    url: PropTypes$1.string,
    collaborator: PropTypes.textElement
  }),
  withImage: PropTypes$1.bool,
  withoutLink: PropTypes$1.bool,
  withoutPrefix: PropTypes$1.bool,
  withoutBackground: PropTypes$1.bool,
  isSmall: PropTypes$1.bool,
  linkUnderlineColor: PropTypes$1.string,
  className: PropTypes$1.string,
  backgroundClassName: PropTypes$1.string,
  collaboratorClassName: PropTypes$1.string,
  shouldLoad: PropTypes$1.bool
};
var defaultProps$6 = {
  author: null,
  withImage: true,
  withoutLink: false,
  withoutPrefix: false,
  withoutBackground: false,
  isSmall: false,
  linkUnderlineColor: null,
  className: null,
  backgroundClassName: null,
  collaboratorClassName: null,
  shouldLoad: true
};
var UrbaniaAuthor = function UrbaniaAuthor(_ref) {
  var author = _ref.author,
    withImage = _ref.withImage,
    withoutLink = _ref.withoutLink,
    withoutPrefix = _ref.withoutPrefix,
    withoutBackground = _ref.withoutBackground,
    isSmall = _ref.isSmall,
    linkUnderlineColor = _ref.linkUnderlineColor,
    className = _ref.className,
    backgroundClassName = _ref.backgroundClassName,
    collaboratorClassName = _ref.collaboratorClassName,
    shouldLoad = _ref.shouldLoad,
    otherProps = _objectWithoutProperties(_ref, _excluded$2);
  var intl = reactIntl.useIntl();
  var _ref2 = author || {},
    _ref2$name = _ref2.name,
    name = _ref2$name === void 0 ? null : _ref2$name,
    _ref2$image = _ref2.image,
    image = _ref2$image === void 0 ? null : _ref2$image,
    _ref2$url = _ref2.url,
    url = _ref2$url === void 0 ? null : _ref2$url,
    _ref2$collaborator = _ref2.collaborator,
    collaborator = _ref2$collaborator === void 0 ? null : _ref2$collaborator;
  var withAvatar = withImage && image !== null;
  var prefix = intl.formatMessage({
    id: "jEK6B8",
    defaultMessage: [{
      "type": 0,
      "value": "By"
    }]
  });
  var authorText = isTextFilled$1(name) ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: classNames([styles$6.name, _defineProperty({}, backgroundClassName, backgroundClassName)])
  }, name)) : null;
  var collaboratorText = isTextFilled$1(collaborator) ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$6.collaboratorText
  }, collaborator, {
    inline: true
  })) : null;
  return /*#__PURE__*/React.createElement("div", Object.assign({
    className: classNames([styles$6.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, styles$6.isSmall, isSmall), styles$6.withoutAvatar, withAvatar), styles$6.withoutImage, !withImage || image === null), styles$6.withoutBackground, withoutBackground), className, className !== null)])
  }, otherProps), !withoutPrefix ? /*#__PURE__*/React.createElement(Text$1, Object.assign({}, name, {
    className: classNames([styles$6.prefix, _defineProperty({}, backgroundClassName, backgroundClassName)]),
    body: "<span>".concat(prefix, "<span>")
  })) : null, withAvatar ? /*#__PURE__*/React.createElement(Avatar$1, {
    className: styles$6.image,
    image: image,
    shouldLoad: shouldLoad
  }) : null, /*#__PURE__*/React.createElement("div", {
    className: styles$6.right
  }, url !== null && !withoutLink ? /*#__PURE__*/React.createElement(Link$1, {
    className: styles$6.link,
    url: url,
    external: true,
    style: {
      backgroundImage: linkUnderlineColor !== null ? "linear-gradient(0deg, ".concat(linkUnderlineColor, " 0, ").concat(linkUnderlineColor, ")") : null
    }
  }, authorText) : /*#__PURE__*/React.createElement("div", null, authorText), collaboratorText !== null ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$6.collaborator, _defineProperty({}, collaboratorClassName, collaboratorClassName)])
  }, collaboratorText !== null ? collaboratorText : null) : null));
};
UrbaniaAuthor.propTypes = propTypes$6;
UrbaniaAuthor.defaultProps = defaultProps$6;
var UrbaniaAuthor$1 = UrbaniaAuthor;

var propTypes$4$1 = {
  color: PropTypes$1.string,
  strokeWidth: PropTypes$1.number,
  className: PropTypes$1.string
};
var defaultProps$4$1 = {
  color: 'currentColor',
  strokeWidth: 3,
  className: null
};
var Arrow = function Arrow(_ref) {
  var color = _ref.color,
    strokeWidth = _ref.strokeWidth,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    version: "1.1",
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    x: "0",
    y: "0px",
    width: "48.53px",
    height: "12.38px",
    viewBox: "0 0 48.53 12.38",
    className: className,
    xmlSpace: "preserve"
  }, /*#__PURE__*/React.createElement("g", {
    transform: "matrix(1, 0, 0, 1, 0, 0)"
  }, /*#__PURE__*/React.createElement("path", {
    id: "b",
    fill: "none",
    stroke: color,
    strokeWidth: "".concat(strokeWidth, "px"),
    strokeLinejoin: "round",
    strokeLinecap: "round",
    d: "M1.5,10.88L24.26,1.5l22.77,9.38"
  })));
};
Arrow.propTypes = propTypes$4$1;
Arrow.defaultProps = defaultProps$4$1;
var Arrow$1 = Arrow;

var propTypes$3$1 = {
  color: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$3$1 = {
  color: '#222',
  className: null
};
var WatchIcon = function WatchIcon(_ref) {
  var color = _ref.color,
    className = _ref.className;
  return /*#__PURE__*/React.createElement("svg", {
    version: "1.1",
    xmlns: "http://www.w3.org/2000/svg",
    xmlnsXlink: "http://www.w3.org/1999/xlink",
    x: "0",
    y: "0px",
    width: "17.76px",
    height: "17.76px",
    viewBox: "0 0 17.76 17.76",
    className: className,
    xmlSpace: "preserve"
  }, /*#__PURE__*/React.createElement("g", {
    transform: "translate(0 0)"
  }, /*#__PURE__*/React.createElement("path", {
    fill: color,
    d: "M8.34,0h1.08s.06,.02,.1,.02c.89,.07,1.77,.26,2.6,.59,1.9,.74,3.48,2.11,4.48,3.88,.5,.88,.85,1.84,1.02,2.84,.06,.34,.1,.69,.14,1.04v1.05s-.02,.1-.03,.15c-.2,2.62-1.55,5.01-3.69,6.53-1.17,.85-2.54,1.39-3.98,1.57l-.64,.09h-1.08s-.1-.02-.15-.03c-.94-.07-1.87-.3-2.74-.66C2.55,15.85,.51,13.18,.08,10.06c-.03-.21-.06-.43-.08-.64v-1.08c0-.06,.02-.11,.03-.17C.21,5.84,1.32,3.67,3.1,2.15,4.4,1.02,6,.3,7.71,.08l.63-.08Zm7.94,8.71c-.09-4.09-3.48-7.32-7.57-7.23-4.09,.09-7.32,3.48-7.23,7.57,.09,4.09,3.48,7.32,7.57,7.23,.04,0,.07,0,.11,0,4.04-.16,7.2-3.53,7.12-7.56h0Z"
  }), /*#__PURE__*/React.createElement("path", {
    fill: color,
    d: "M7.42,8.89v-2.61c-.02-.2,.09-.4,.28-.48,.15-.06,.32-.04,.44,.06,.39,.28,.78,.56,1.17,.85,.82,.59,1.63,1.19,2.45,1.78,.22,.11,.3,.38,.19,.59-.04,.08-.11,.15-.19,.19-.6,.45-1.21,.89-1.82,1.33-.59,.43-1.18,.86-1.78,1.29-.16,.17-.43,.17-.6,0-.02-.02-.03-.03-.04-.05-.07-.11-.1-.24-.1-.37,0-.86,0-1.72,0-2.58h0Z"
  })));
};
WatchIcon.propTypes = propTypes$3$1;
WatchIcon.defaultProps = defaultProps$3$1;
var WatchIcon$1 = WatchIcon;

var styles$1$2 = {"footerContainer":"micromag-screen-urbania-article-urbania-base-article-footerContainer","video":"micromag-screen-urbania-article-urbania-base-article-video","empty":"micromag-screen-urbania-article-urbania-base-article-empty","container":"micromag-screen-urbania-article-urbania-base-article-container","isVideo":"micromag-screen-urbania-article-urbania-base-article-isVideo","visual":"micromag-screen-urbania-article-urbania-base-article-visual","disabled":"micromag-screen-urbania-article-urbania-base-article-disabled","hidden":"micromag-screen-urbania-article-urbania-base-article-hidden","placeholder":"micromag-screen-urbania-article-urbania-base-article-placeholder","content":"micromag-screen-urbania-article-urbania-base-article-content","isPlaceholder":"micromag-screen-urbania-article-urbania-base-article-isPlaceholder","articleContent":"micromag-screen-urbania-article-urbania-base-article-articleContent","title":"micromag-screen-urbania-article-urbania-base-article-title","description":"micromag-screen-urbania-article-urbania-base-article-description","sponsors":"micromag-screen-urbania-article-urbania-base-article-sponsors","callToAction":"micromag-screen-urbania-article-urbania-base-article-callToAction","emptyContainer":"micromag-screen-urbania-article-urbania-base-article-emptyContainer","small":"micromag-screen-urbania-article-urbania-base-article-small","background":"micromag-screen-urbania-article-urbania-base-article-background","overTitle":"micromag-screen-urbania-article-urbania-base-article-overTitle","authors":"micromag-screen-urbania-article-urbania-base-article-authors","lede":"micromag-screen-urbania-article-urbania-base-article-lede","isAboveDescription":"micromag-screen-urbania-article-urbania-base-article-isAboveDescription","sponsor":"micromag-screen-urbania-article-urbania-base-article-sponsor","quatre95":"micromag-screen-urbania-article-urbania-base-article-quatre95","author":"micromag-screen-urbania-article-urbania-base-article-author","urbania":"micromag-screen-urbania-article-urbania-base-article-urbania","dehors":"micromag-screen-urbania-article-urbania-base-article-dehors","universities":"micromag-screen-urbania-article-urbania-base-article-universities","footer":"micromag-screen-urbania-article-urbania-base-article-footer","arrow":"micromag-screen-urbania-article-urbania-base-article-arrow","icon":"micromag-screen-urbania-article-urbania-base-article-icon","button":"micromag-screen-urbania-article-urbania-base-article-button","mediaControls":"micromag-screen-urbania-article-urbania-base-article-mediaControls","header":"micromag-screen-urbania-article-urbania-base-article-header","bottom":"micromag-screen-urbania-article-urbania-base-article-bottom","visible":"micromag-screen-urbania-article-urbania-base-article-visible","withGradient":"micromag-screen-urbania-article-urbania-base-article-withGradient","image":"micromag-screen-urbania-article-urbania-base-article-image","isCurrent":"micromag-screen-urbania-article-urbania-base-article-isCurrent","slowZoom":"micromag-screen-urbania-article-urbania-base-article-slowZoom","img":"micromag-screen-urbania-article-urbania-base-article-img"};

var _excluded$1 = ["callToAction"];
var propTypes$2$2 = {
  hasArticle: PropTypes$1.bool,
  type: PropTypes$1.oneOf(['article', 'video']),
  image: PropTypes.visualElement,
  title: PropTypes.headingElement,
  description: PropTypes.textElement,
  overTitle: PropTypes.headingElement,
  author: PropTypes.authorElement,
  sponsors: PropTypes$1.arrayOf(PropTypes$1.shape({})),
  sponsorPrefix: PropTypes$1.oneOfType([PropTypes$1.node, PropTypes$1.func]),
  sponsorColor: PropTypes.color,
  site: PropTypes$1.string,
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  className: PropTypes$1.string
};
var defaultProps$2$2 = {
  hasArticle: false,
  type: null,
  image: null,
  title: null,
  description: null,
  overTitle: null,
  author: null,
  sponsors: null,
  sponsorPrefix: null,
  sponsorColor: null,
  site: null,
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  spacing: 20,
  className: null
};
var UrbaniaArticle = function UrbaniaArticle(_ref) {
  var hasArticle = _ref.hasArticle,
    type = _ref.type,
    image = _ref.image,
    title = _ref.title,
    description = _ref.description,
    overTitle = _ref.overTitle,
    author = _ref.author,
    sponsors = _ref.sponsors,
    sponsorPrefix = _ref.sponsorPrefix,
    sponsorColor = _ref.sponsorColor,
    site = _ref.site,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    spacing = _ref.spacing,
    className = _ref.className;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _ref2 = background || {},
    _ref2$color = _ref2.color,
    backgroundColor = _ref2$color === void 0 ? null : _ref2$color;
  var _useViewerWebView = useViewerWebView(),
    openedWebView = _useViewerWebView.opened,
    openWebView = _useViewerWebView.open;
  var _useViewerContext = useViewerContext(),
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth,
    viewerTopHeight = _useViewerContext.topHeight;
  var _useViewerInteraction = useViewerInteraction(),
    enableInteraction = _useViewerInteraction.enableInteraction,
    disableInteraction = _useViewerInteraction.disableInteraction;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted,
    playing = _usePlaybackContext.playing;
  var mediaRef = usePlaybackMediaRef(current);
  var _useDimensionObserver = useDimensionObserver(),
    contentRef = _useDimensionObserver.ref,
    contentRect = _useDimensionObserver.entry.contentRect,
    contentHeight = _useDimensionObserver.height;
  var _ref3 = contentRect || {},
    contentTop = _ref3.top;
  var _useMemo = React.useMemo(function () {
      // const defaultImageHeight = width * 0.8;
      var difference = height - contentHeight - contentTop + 1;
      return {
        imageHeight: difference
      };
    }, [contentTop, contentHeight, width, height]),
    _useMemo$minContentHe = _useMemo.minContentHeight,
    minContentHeight = _useMemo$minContentHe === void 0 ? null : _useMemo$minContentHe;
  var isVideo = type === 'video';
  var hasOverTitle = isTextFilled$1(overTitle);
  var hasTitle = isTextFilled$1(title);
  var hasDescription = isTextFilled$1(description);
  var hasSponsor = (sponsors || []).length > 0 && isTextFilled$1(sponsors[0]);
  var _ref4 = author || {},
    authorFullName = _ref4.name;
  var hasAuthor = isTextFilled$1(authorFullName);
  var _ref5 = image || {},
    _ref5$url = _ref5.url,
    url = _ref5$url === void 0 ? null : _ref5$url,
    _ref5$type = _ref5.type,
    imageType = _ref5$type === void 0 ? null : _ref5$type;
  var hasImage = url !== null;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer) || hasArticle;
  var footerCta = {
    buttonClassName: styles$1$2.button,
    labelClassName: styles$1$2.label,
    arrowClassName: styles$1$2.arrow,
    arrow: /*#__PURE__*/React.createElement(Arrow$1, null),
    icon: type === 'video' ? /*#__PURE__*/React.createElement(WatchIcon$1, {
      className: styles$1$2.icon
    }) : null
  };
  var _ref6 = footer || {},
    _ref6$callToAction = _ref6.callToAction,
    callToAction = _ref6$callToAction === void 0 ? null : _ref6$callToAction,
    otherFooterProps = _objectWithoutProperties(_ref6, _excluded$1);
  var footerProps = getFooterProps$1(_objectSpread$1(_objectSpread$1({}, otherFooterProps), {}, {
    callToAction: _objectSpread$1(_objectSpread$1({}, callToAction), footerCta)
  }), {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview,
    animationDisabled: isPreview,
    focusable: current && isView,
    enableInteraction: enableInteraction,
    disableInteraction: disableInteraction
  });
  var _ref7 = background || {},
    _ref7$video = _ref7.video,
    backgroundVideo = _ref7$video === void 0 ? null : _ref7$video;
  var hasVideoBackground = backgroundVideo !== null;
  var mediaShouldLoad = current || active;
  var finalPlaying = playing && current;
  var backgroundPlaying = current && !openedWebView && (isView || isEdit);
  var items = [/*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "overTitle",
    placeholder: /*#__PURE__*/React.createElement(Subtitle$1, {
      className: styles$1$2.placeholder
    }),
    empty: /*#__PURE__*/React.createElement("div", {
      className: classNames([styles$1$2.emptyContainer, styles$1$2.small])
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$1$2.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "pRzSQ7",
      defaultMessage: [{
        "type": 0,
        "value": "Overtitle"
      }]
    }))),
    isEmpty: !hasOverTitle
  }, hasOverTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: classNames([styles$1$2.overTitle])
  }, overTitle)) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: /*#__PURE__*/React.createElement(Title$3, {
      className: styles$1$2.placeholder
    }),
    empty: /*#__PURE__*/React.createElement("div", {
      className: styles$1$2.emptyContainer
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$1$2.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "2ZOPe+",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }))),
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: classNames([styles$1$2.title])
  }, title)) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "authors",
    empty: /*#__PURE__*/React.createElement("div", {
      className: styles$1$2.emptyContainer
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$1$2.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "6jX5Tb",
      defaultMessage: [{
        "type": 0,
        "value": "Authors"
      }]
    }))),
    isEmpty: !hasAuthor
  }, hasAuthor ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$1$2.authors, _defineProperty({}, styles$1$2.isAboveDescription, hasDescription)])
  }, /*#__PURE__*/React.createElement(UrbaniaAuthor$1, {
    author: author,
    shouldLoad: mediaShouldLoad
  })) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "description",
    empty: /*#__PURE__*/React.createElement("div", {
      className: styles$1$2.emptyContainer
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$1$2.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "zl6zsZ",
      defaultMessage: [{
        "type": 0,
        "value": "Lede"
      }]
    }))),
    isEmpty: !hasDescription && !hasArticle
  }, hasDescription ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$1$2.description])
  }, /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: classNames([styles$1$2.lede])
  }, description))) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "sponsors",
    empty: /*#__PURE__*/React.createElement("div", {
      className: classNames([styles$1$2.emptyContainer, styles$1$2.small])
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$1$2.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "zGIcdn",
      defaultMessage: [{
        "type": 0,
        "value": "Sponsors"
      }]
    }))),
    isEmpty: !hasSponsor && !hasArticle
  }, hasSponsor ? /*#__PURE__*/React.createElement("div", {
    className: styles$1$2.sponsors,
    style: _objectSpread$1({}, getStyleFromColor$1(sponsorColor))
  }, sponsors.map(function () {
    var sponsor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    var _ref9 = sponsor || {},
      _ref9$body = _ref9.body,
      body = _ref9$body === void 0 ? '' : _ref9$body;
    return /*#__PURE__*/React.createElement(React.Fragment, {
      key: body
    }, sponsorPrefix !== null ? /*#__PURE__*/React.createElement("span", {
      className: styles$1$2.sponsor
    }, sponsorPrefix) : null, /*#__PURE__*/React.createElement("span", null, "\xA0"), /*#__PURE__*/React.createElement(Heading$1, Object.assign({
      className: styles$1$2.sponsor,
      size: "6"
    }, sponsor)));
  })) : null)].filter(function (it) {
    return it !== null;
  });
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$1$2.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$1$2.isCurrent, current), styles$1$2.isVideo, isVideo), styles$1$2.hasVideoBackground, hasVideoBackground), styles$1$2.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": isStatic || isCapture
  }, /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    className: styles$1$2.background,
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: imageType !== 'video' && hasVideoBackground ? mediaRef : null,
    withoutVideo: isPreview
  }), /*#__PURE__*/React.createElement(Container$1, {
    className: styles$1$2.content,
    width: width,
    height: height
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    key: "header",
    className: styles$1$2.header,
    style: {
      paddingTop: spacing / 2,
      paddingLeft: spacing,
      paddingRight: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$1$2.articleContent, _defineProperty({}, styles$1$2["".concat(site)], site !== null)]),
    style: _objectSpread$1({
      paddingTop: spacing,
      minHeight: minContentHeight
    }, !isVideo ? getStyleFromColor$1(backgroundColor, 'backgroundColor') : null),
    ref: contentRef
  }, items), /*#__PURE__*/React.createElement("div", {
    className: styles$1$2.visual
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "image",
    placeholder: /*#__PURE__*/React.createElement(Image$1$2, {
      className: styles$1$2.placeholder
    }),
    empty: /*#__PURE__*/React.createElement("div", {
      className: styles$1$2.emptyContainer
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$1$2.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "ebsPd4",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    }))),
    isEmpty: !hasImage && !hasArticle
  }, hasImage && !isVideo ? /*#__PURE__*/React.createElement(Visual$1, {
    className: styles$1$2.image,
    imageClassName: styles$1$2.img,
    media: image,
    width: width,
    height: height,
    resolution: resolution,
    objectFit: {
      fit: 'cover'
    },
    shouldLoad: mediaShouldLoad
  }) : null, hasImage && isVideo && !hasVideoBackground ? /*#__PURE__*/React.createElement(Visual$1, {
    className: styles$1$2.video,
    media: image,
    width: width,
    height: height,
    resolution: resolution,
    objectFit: {
      fit: 'cover'
    },
    shouldLoad: mediaShouldLoad,
    playing: finalPlaying,
    muted: muted,
    withoutVideo: isPreview,
    mediaRef: mediaRef,
    autoPlay: true
  }) : null)), /*#__PURE__*/React.createElement("div", {
    className: styles$1$2.footerContainer
  }, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    style: {
      paddingTop: spacing,
      paddingLeft: Math.max(0, viewerBottomSidesWidth - spacing),
      paddingRight: Math.max(0, viewerBottomSidesWidth - spacing)
    },
    className: styles$1$2.footer
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null)));
};
UrbaniaArticle.propTypes = propTypes$2$2;
UrbaniaArticle.defaultProps = defaultProps$2$2;
var UrbaniaBaseArticle = UrbaniaArticle;

var _excluded = ["component", "theme", "url", "article"];
var propTypes$1$2 = {
  component: PropTypes$1.elementType,
  theme: PropTypes$1.string,
  url: PropTypes$1.string,
  article: PropTypes$1.shape({
    type: PropTypes$1.string
  })
};
var defaultProps$1$2 = {
  component: UrbaniaBaseArticle,
  theme: null,
  url: null,
  article: null
};
var UrbaniaLoader = function UrbaniaLoader(_ref) {
  var Component = _ref.component,
    theme = _ref.theme,
    url = _ref.url,
    initialArticle = _ref.article,
    props = _objectWithoutProperties(_ref, _excluded);
  var _useState = React.useState(initialArticle),
    _useState2 = _slicedToArray(_useState, 2),
    article = _useState2[0],
    setArticle = _useState2[1];
  // const { isView } = useScreenRenderContext();

  // const hostname = useMemo(() => {
  //     const { hostname: urlHostname = null } =
  //         url !== null && isValidUrl(url) ? new URL(url) : {};
  //     return urlHostname;
  // }, [url]);

  React.useEffect(function () {
    if (url !== null && isValidUrl$1(url)) {
      getJSON$1("".concat(url, ".json"), {
        mode: 'cors'
      }).then(function (art) {
        setArticle(art || null);
      });
    }
  }, [url, setArticle]);
  var values = React.useMemo(function () {
    var _ref2 = props || {},
      _ref2$articleType = _ref2.articleType,
      articleType = _ref2$articleType === void 0 ? null : _ref2$articleType,
      _ref2$title = _ref2.title,
      title = _ref2$title === void 0 ? {} : _ref2$title,
      _ref2$overTitle = _ref2.overTitle,
      overTitle = _ref2$overTitle === void 0 ? {} : _ref2$overTitle,
      _ref2$sponsorLabel = _ref2.sponsorLabel,
      sponsorLabel = _ref2$sponsorLabel === void 0 ? {} : _ref2$sponsorLabel,
      _ref2$author = _ref2.author,
      author = _ref2$author === void 0 ? null : _ref2$author,
      _ref2$image = _ref2.image,
      image = _ref2$image === void 0 ? {} : _ref2$image,
      _ref2$header = _ref2.header,
      header = _ref2$header === void 0 ? {} : _ref2$header,
      _ref2$footer = _ref2.footer,
      footer = _ref2$footer === void 0 ? {} : _ref2$footer;
    var _ref3 = image || {},
      _ref3$url = _ref3.url,
      imageUrl = _ref3$url === void 0 ? null : _ref3$url;
    var _ref4 = footer || {},
      _ref4$callToAction = _ref4.callToAction,
      callToAction = _ref4$callToAction === void 0 ? null : _ref4$callToAction;
    var _ref5 = callToAction || {},
      _ref5$url = _ref5.url,
      ctaUrl = _ref5$url === void 0 ? null : _ref5$url;

    // Straight from article
    var _ref6 = article || {},
      _ref6$type = _ref6.type,
      type = _ref6$type === void 0 ? null : _ref6$type,
      _ref6$title = _ref6.title,
      articleTitle = _ref6$title === void 0 ? null : _ref6$title,
      _ref6$image = _ref6.image,
      articleImage = _ref6$image === void 0 ? null : _ref6$image,
      _ref6$metadata = _ref6.metadata,
      metadata = _ref6$metadata === void 0 ? {} : _ref6$metadata;
    var hasArticle = article !== null;
    var _ref7 = metadata || {},
      _ref7$authors = _ref7.authors,
      authors = _ref7$authors === void 0 ? [] : _ref7$authors,
      _ref7$sponsors = _ref7.sponsors,
      sponsors = _ref7$sponsors === void 0 ? [] : _ref7$sponsors,
      _ref7$site = _ref7.site,
      site = _ref7$site === void 0 ? null : _ref7$site,
      _ref7$canonical = _ref7.canonical,
      canonical = _ref7$canonical === void 0 ? null : _ref7$canonical,
      _ref7$readerUrl = _ref7.readerUrl,
      readerUrl = _ref7$readerUrl === void 0 ? null : _ref7$readerUrl;
    var _ref8 = articleImage || {},
      _ref8$sizes = _ref8.sizes,
      sizes = _ref8$sizes === void 0 ? {} : _ref8$sizes;
    var _ref9 = sizes || {},
      _ref9$medium = _ref9.medium,
      medium = _ref9$medium === void 0 ? {} : _ref9$medium,
      _ref9$large = _ref9.large,
      large = _ref9$large === void 0 ? {} : _ref9$large;
    var articleAuthor = (authors || []).length > 0 ? authors[0] : null;
    var _ref10 = articleAuthor || {},
      _ref10$name = _ref10.name,
      authorName = _ref10$name === void 0 ? null : _ref10$name,
      _ref10$avatar = _ref10.avatar,
      authorImage = _ref10$avatar === void 0 ? null : _ref10$avatar;
    var finalArticleAuthor = _objectSpread$1(_objectSpread$1({}, authorName !== null ? {
      name: {
        body: "<p>".concat(authorName, "</p>")
      }
    } : null), authorImage !== null ? {
      image: authorImage
    } : null);

    // Type
    var defaultType = articleType || type;

    // Url
    var finalReaderUrl = readerUrl !== null ? "".concat(readerUrl).concat(theme !== null ? "?theme=".concat(theme) : '') : null;

    // Sponsors
    var defaultSponsor = (sponsors || []).length > 0 ? (sponsors || []).map(function (_ref11) {
      var _ref11$name = _ref11.name,
        name = _ref11$name === void 0 ? null : _ref11$name;
      return name;
    }).filter(function (name) {
      return name !== null;
    }).join(', ').trim() : null;

    // Content
    var hasTitle = isTextFilled$1(title);
    var hasOverTitle = isTextFilled$1(overTitle);
    var hasSponsorProps = isTextFilled$1(sponsorLabel);
    var sponsorPrefix = !hasSponsorProps && defaultSponsor !== null ? /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "+TPjd4",
      defaultMessage: [{
        "type": 0,
        "value": "Presented by"
      }]
    }) : null;
    return {
      type: defaultType,
      title: hasTitle ? title : _objectSpread$1(_objectSpread$1({}, title), {}, {
        body: articleTitle
      }),
      articleTitle: articleTitle,
      overTitle: hasOverTitle ? overTitle : _objectSpread$1(_objectSpread$1({}, overTitle), {}, {
        body: 'En vedette'
      }),
      author: _objectSpread$1(_objectSpread$1({}, finalArticleAuthor), author),
      sponsors: defaultSponsor !== null && !hasSponsorProps ? [_objectSpread$1(_objectSpread$1({}, sponsorLabel), {}, {
        body: "<strong>".concat(defaultSponsor, "</strong>")
      })] : [sponsorLabel],
      sponsorPrefix: sponsorPrefix,
      site: site,
      image: imageUrl !== null && image !== null ? image : _objectSpread$1(_objectSpread$1({
        type: 'image'
      }, articleImage), {}, {
        sizes: {
          medium: medium,
          large: large
        }
      }),
      url: finalReaderUrl || canonical || url,
      header: header,
      footer: _objectSpread$1(_objectSpread$1({}, footer), {}, {
        callToAction: _objectSpread$1(_objectSpread$1(_objectSpread$1({
          type: 'swipe-up',
          label: defaultType === 'video' ? {
            body: 'Regarder'
          } : {
            body: 'Lire'
          },
          inWebView: true
        }, callToAction), hasArticle ? {
          active: url !== null
        } : null), {}, {
          url: ctaUrl || readerUrl || canonical
        })
      })
    };
  }, [article, url, props]);
  return /*#__PURE__*/React.createElement(Component, Object.assign({}, props, values, {
    hasArticle: url !== null
  }));
};
UrbaniaLoader.propTypes = propTypes$1$2;
UrbaniaLoader.defaultProps = defaultProps$1$2;
var UrbaniaLoader$1 = UrbaniaLoader;

// import * as transforms from './transforms/index';

var definition$5 = {
  id: 'urbania-article',
  type: 'screen',
  namespaces: ['urbania'],
  group: {
    label: reactIntl.defineMessage({
      id: "oPjl8f",
      defaultMessage: [{
        "type": 0,
        "value": "Urbania"
      }]
    }),
    order: 10
  },
  title: reactIntl.defineMessage({
    id: "nJgzwC",
    defaultMessage: [{
      "type": 0,
      "value": "Urbania article"
    }]
  }),
  component: UrbaniaLoader$1,
  fields: [{
    name: 'url',
    type: 'url',
    label: reactIntl.defineMessage({
      id: "2pO2Cj",
      defaultMessage: [{
        "type": 0,
        "value": "Url"
      }]
    })
  }, {
    name: 'articleType',
    type: 'select',
    label: reactIntl.defineMessage({
      id: "ppq6CK",
      defaultMessage: [{
        "type": 0,
        "value": "Type"
      }]
    }),
    options: [{
      value: 'article',
      label: reactIntl.defineMessage({
        id: "pE7UhY",
        defaultMessage: [{
          "type": 0,
          "value": "Article"
        }]
      })
    }, {
      value: 'video',
      label: reactIntl.defineMessage({
        id: "J9e9Qb",
        defaultMessage: [{
          "type": 0,
          "value": "Video"
        }]
      })
    }]
  }, {
    name: 'overTitle',
    type: 'heading-element',
    defaultValue: {
      body: 'En vedette'
    },
    label: reactIntl.defineMessage({
      id: "z2I2bJ",
      defaultMessage: [{
        "type": 0,
        "value": "Overtitle"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'description',
    type: 'text-element',
    label: reactIntl.defineMessage({
      id: "cuKSQz",
      defaultMessage: [{
        "type": 0,
        "value": "Lede"
      }]
    })
  }, {
    name: 'author',
    type: 'author-element',
    label: reactIntl.defineMessage({
      id: "73hxYw",
      defaultMessage: [{
        "type": 0,
        "value": "Author"
      }]
    })
  }, {
    name: 'sponsorLabel',
    type: 'heading-element',
    label: reactIntl.defineMessage({
      id: "hzvEim",
      defaultMessage: [{
        "type": 0,
        "value": "Sponsor Label"
      }]
    })
  }, {
    name: 'sponsorColor',
    type: 'color',
    label: reactIntl.defineMessage({
      id: "Qw8cb5",
      defaultMessage: [{
        "type": 0,
        "value": "Sponsor color"
      }]
    })
  }, {
    name: 'image',
    type: 'visual',
    label: reactIntl.defineMessage({
      id: "k+coTi",
      defaultMessage: [{
        "type": 0,
        "value": "Image"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var styles$5 = {"container":"micromag-screen-urbania-article-urbania-base-article-card-container","iframe":"micromag-screen-urbania-article-urbania-base-article-card-iframe","close":"micromag-screen-urbania-article-urbania-base-article-card-close","dragHandle":"micromag-screen-urbania-article-urbania-base-article-card-dragHandle","empty":"micromag-screen-urbania-article-urbania-base-article-card-empty","cardContainer":"micromag-screen-urbania-article-urbania-base-article-card-cardContainer","content":"micromag-screen-urbania-article-urbania-base-article-card-content","disabled":"micromag-screen-urbania-article-urbania-base-article-card-disabled","hidden":"micromag-screen-urbania-article-urbania-base-article-card-hidden","placeholder":"micromag-screen-urbania-article-urbania-base-article-card-placeholder","background":"micromag-screen-urbania-article-urbania-base-article-card-background","layout":"micromag-screen-urbania-article-urbania-base-article-card-layout","text":"micromag-screen-urbania-article-urbania-base-article-card-text","isPlaceholder":"micromag-screen-urbania-article-urbania-base-article-card-isPlaceholder","card":"micromag-screen-urbania-article-urbania-base-article-card-card","callToAction":"micromag-screen-urbania-article-urbania-base-article-card-callToAction","arrow":"micromag-screen-urbania-article-urbania-base-article-card-arrow","ctaText":"micromag-screen-urbania-article-urbania-base-article-card-ctaText","cardInner":"micromag-screen-urbania-article-urbania-base-article-card-cardInner","pulse":"micromag-screen-urbania-article-urbania-base-article-card-pulse","focus-visible":"micromag-screen-urbania-article-urbania-base-article-card-focus-visible","closeIcon":"micromag-screen-urbania-article-urbania-base-article-card-closeIcon","articlePreview":"micromag-screen-urbania-article-urbania-base-article-card-articlePreview","articlePreviewInner":"micromag-screen-urbania-article-urbania-base-article-card-articlePreviewInner","articleTitle":"micromag-screen-urbania-article-urbania-base-article-card-articleTitle","spinnerContainer":"micromag-screen-urbania-article-urbania-base-article-card-spinnerContainer","spinner":"micromag-screen-urbania-article-urbania-base-article-card-spinner","header":"micromag-screen-urbania-article-urbania-base-article-card-header","iframeBlocker":"micromag-screen-urbania-article-urbania-base-article-card-iframeBlocker","active":"micromag-screen-urbania-article-urbania-base-article-card-active","articleOpened":"micromag-screen-urbania-article-urbania-base-article-card-articleOpened"};

var propTypes$5 = {
  hasArticle: PropTypes$1.bool,
  url: PropTypes$1.string,
  title: PropTypes.headingElement,
  author: PropTypes.authorElement,
  text: PropTypes.textElement,
  image: PropTypes.visualElement,
  header: PropTypes.header,
  background: PropTypes.backgroundElement,
  callToAction: PropTypes.textElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  className: PropTypes$1.string
};
var defaultProps$5 = {
  hasArticle: false,
  url: null,
  title: null,
  author: null,
  text: null,
  image: null,
  header: null,
  background: null,
  callToAction: null,
  current: true,
  active: true,
  spacing: 20,
  className: null
};
var UrbaniaArticleCard = function UrbaniaArticleCard(_ref) {
  var hasArticle = _ref.hasArticle,
    url = _ref.url,
    title = _ref.title,
    author = _ref.author,
    text = _ref.text,
    image = _ref.image,
    header = _ref.header,
    background = _ref.background,
    callToAction = _ref.callToAction,
    current = _ref.current,
    active = _ref.active,
    spacing = _ref.spacing,
    className = _ref.className;
  var intl = reactIntl.useIntl();
  var finalBackground = background !== null ? background : {
    image: image
  };
  var _ref2 = finalBackground || {},
    _ref2$video = _ref2.video,
    backgroundVideo = _ref2$video === void 0 ? null : _ref2$video;
  var isBackgroundVideo = backgroundVideo !== null;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight;
  var _useViewerInteraction = useViewerInteraction(),
    enableInteraction = _useViewerInteraction.enableInteraction,
    disableInteraction = _useViewerInteraction.disableInteraction;
  var _usePlaybackContext = usePlaybackContext(),
    playing = _usePlaybackContext.playing,
    muted = _usePlaybackContext.muted,
    setControls = _usePlaybackContext.setControls,
    setControlsTheme = _usePlaybackContext.setControlsTheme,
    setControlsSuggestPlay = _usePlaybackContext.setControlsSuggestPlay,
    setPlaying = _usePlaybackContext.setPlaying;
  var _ref3 = author || {},
    _ref3$name = _ref3.name,
    authorName = _ref3$name === void 0 ? null : _ref3$name;
  var hasUrl = url !== null && url.length > 0;
  var hasHeader = isHeaderFilled$1(header);
  var hasText = isTextFilled$1(text);
  var hasTitle = isTextFilled$1(title);
  var hasAuthorName = isTextFilled$1(authorName);
  var hasCta = isTextFilled$1(callToAction);
  var finalUrl = hasUrl ? url.replace(/^https?:\/\/([^.]+\.)?urbania\.ca\/article\//, 'https://simple.urbania.ca/article/') : url;
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    articleOpened = _useState2[0],
    setArticleOpened = _useState2[1];
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    iframeEnabled = _useState4[0],
    setIframeEnabled = _useState4[1];
  var _useState5 = React.useState(false),
    _useState6 = _slicedToArray(_useState5, 2),
    iframeMounted = _useState6[0],
    setIframeMounted = _useState6[1];
  var _useState7 = React.useState(false),
    _useState8 = _slicedToArray(_useState7, 2),
    iframeLoaded = _useState8[0],
    setIframeLoaded = _useState8[1];
  var mediaShouldLoad = current || active;
  var backgroundPlaying = current && (isView || isEdit) && !articleOpened && playing;
  var mediaRef = usePlaybackMediaRef(current && !articleOpened);

  // @TODO: collapsed card the height of articlePreview
  // const articlePreviewRef = useRef();
  // const previewCurrent = articlePreviewRef.current || null;

  // const articlePreviewHeight = useMemo(() => {
  //     if (previewCurrent !== null) {
  //         const { height: previewHeight = 0 } = previewCurrent.getBoundingClientRect();
  //         return previewHeight !== 0 ? previewHeight : 0;
  //     }
  //     return 0;
  // }, [previewCurrent, height]);

  // card animations
  var withCardAnimation = !isPlaceholder && !isPreview && !isStatic && !iframeMounted;
  var slideInDelay = withCardAnimation && isBackgroundVideo && backgroundPlaying;
  var withCardBounce = withCardAnimation && current && !articleOpened;
  React.useEffect(function () {
    if (!current) {
      return function () {};
    }
    setControlsTheme({
      seekBarOnly: true
    });
    if (isBackgroundVideo && !articleOpened) {
      setControls(true);
    } else {
      setControls(false);
    }
    return function () {
      if (isBackgroundVideo && !articleOpened) {
        setControls(false);
      }
    };
  }, [current, setControls, isBackgroundVideo, articleOpened, setControls, setControlsTheme]);
  var toggleCard = React.useCallback(function () {
    var newOpened = !articleOpened;
    if (newOpened) {
      openWebView(finalUrl);
    }

    // setArticleOpened(newOpened);
    // if (newOpened) {
    //     disableInteraction();
    // } else {
    //     enableInteraction();
    // }

    // setIframeMounted(true);
  }, [articleOpened, setIframeMounted, setArticleOpened, disableInteraction, enableInteraction, openWebView, finalUrl]);
  React.useEffect(function () {
    if (!iframeMounted || iframeLoaded) {
      return function () {};
    }
    var timeout = setTimeout(function () {
      setIframeLoaded(true);
    }, 2000);
    return function () {
      clearTimeout(timeout);
    };
  }, [iframeMounted, iframeLoaded]);
  var bindGesture = react.useGesture({
    onDrag: function onDrag(_ref4) {
      var _ref4$movement = _slicedToArray(_ref4.movement, 2),
        my = _ref4$movement[1];
      if (!articleOpened && my < 0 || articleOpened && my > 0) {
        toggleCard();
      }
    },
    onWheel: function onWheel(_ref5) {
      var _ref5$movement = _slicedToArray(_ref5.movement, 2),
        my = _ref5$movement[1];
      if (!articleOpened && my > 0 || articleOpened && my < 0) {
        toggleCard();
      }
    }
  }, {
    drag: {
      axis: 'y',
      filterTaps: true,
      preventDefault: true
    },
    wheel: {
      axis: 'y'
    }
  });
  var _useResizeObserver = useResizeObserver({
      disabled: !articleOpened
    }),
    articlePreviewRef = _useResizeObserver.ref,
    _useResizeObserver$en = _useResizeObserver.entry.contentRect,
    articlePreviewContentRect = _useResizeObserver$en === void 0 ? null : _useResizeObserver$en;
  var _ref6 = articlePreviewContentRect || {},
    _ref6$height = _ref6.height,
    articlePreviewHeight = _ref6$height === void 0 ? 0 : _ref6$height;
  var minimumVisibility = 20;
  var y = 100;
  if (current && articleOpened) {
    y = 0;
  } else if (current || isPreview) {
    y = 100 - Math.max(articlePreviewHeight / height * 100, minimumVisibility);
  }
  var springStyle = web.useSpring({
    from: {
      y: isPreview ? y : 100
    },
    to: {
      y: y
    },
    onStart: function onStart() {
      setIframeEnabled(false);
    },
    onResolve: function onResolve() {
      if (articleOpened) {
        setIframeEnabled(true);
      }
    },
    delay: slideInDelay ? 1500 : 0,
    config: {
      easing: web.easings.easeInOutSine,
      duration: y === 100 ? 1000 : 400
    }
  });
  React.useEffect(function () {
    if (!current) {
      setArticleOpened(false);
      setIframeMounted(false);
      setIframeLoaded(false);
    }
  }, [current]);
  var onPlayError = React.useCallback(function () {
    if (isView && playing && current && isBackgroundVideo) {
      setPlaying(false);
      setControlsSuggestPlay(true);
    }
  }, [isView, current, playing, isBackgroundVideo, setPlaying, setControlsSuggestPlay]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$5.container, _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$5.articleOpened, articleOpened), styles$5.isCurrent, current), styles$5.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": isStatic || isCapture
  }, /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    className: styles$5.background,
    background: finalBackground,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    mediaRef: mediaRef,
    onPlayError: onPlayError,
    shouldLoad: mediaShouldLoad,
    withoutVideo: isPreview
  }), /*#__PURE__*/React.createElement(Container$1, {
    className: styles$5.content,
    width: width,
    height: height
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    key: "header",
    className: styles$5.header,
    style: {
      paddingTop: spacing / 2,
      paddingLeft: spacing,
      paddingRight: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$5.layout,
    height: height * 0.65
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "text",
    empty: /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$5.emptyText
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "z4CiV1",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    })),
    placeholder: /*#__PURE__*/React.createElement(TextPlaceholder$1, {
      className: styles$5.placeholderText
    })
  }, hasText ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$5.text
  }, text)) : null)), /*#__PURE__*/React.createElement(Container$1, {
    className: classNames([styles$5.cardContainer, _defineProperty({}, styles$5.isPlaceholder, isPlaceholder)])
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholderProps: {
      className: styles$5.placeholder
    },
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "yMpGIc",
      defaultMessage: [{
        "type": 0,
        "value": "Article"
      }]
    }),
    emptyClassName: styles$5.empty,
    isEmpty: !hasUrl || !hasArticle
  }, !isPlaceholder && hasArticle ? /*#__PURE__*/React.createElement(web.animated.div, {
    className: styles$5.card,
    style: {
      height: height,
      width: width,
      transform: !isPreview ? springStyle.y.to(function (value) {
        return "translateY(".concat(value, "%");
      }) : "translateY(".concat(100 - minimumVisibility, "%)")
    }
  }, /*#__PURE__*/React.createElement("button", Object.assign({
    type: "button",
    onClick: toggleCard,
    className: styles$5.dragHandle,
    tabIndex: !current || articleOpened ? -1 : 0,
    "aria-label": intl.formatMessage({
      id: "IoMJgw",
      defaultMessage: [{
        "type": 0,
        "value": "Toggle article"
      }]
    }),
    "aria-pressed": articleOpened
  }, current ? bindGesture() : null)), /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$5.cardInner, _defineProperty({}, styles$5.pulse, withCardBounce)])
  }, hasCta ? /*#__PURE__*/React.createElement("div", {
    className: styles$5.callToAction
  }, /*#__PURE__*/React.createElement(Arrow$1, {
    strokeWidth: 1,
    className: styles$5.arrow
  }), /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$5.ctaText
  }, callToAction))) : null, /*#__PURE__*/React.createElement(Button$1, {
    className: styles$5.close,
    disabled: !current || !articleOpened,
    onClick: toggleCard
  }, /*#__PURE__*/React.createElement(Close$1, {
    color: "#000",
    className: styles$5.closeIcon
  })), /*#__PURE__*/React.createElement("div", {
    className: styles$5.articlePreview,
    ref: articlePreviewRef
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$5.articlePreviewInner,
    style: {
      paddingBottom: current && !isPreview ? Math.max(viewerBottomHeight, 20) : null
    }
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: classNames([styles$5.articleTitle])
  }, title)) : null, hasAuthorName ? /*#__PURE__*/React.createElement(UrbaniaAuthor$1, {
    isSmall: true,
    withoutBackground: true,
    author: author,
    shouldLoad: mediaShouldLoad
  }) : null)), iframeMounted && !iframeLoaded ? /*#__PURE__*/React.createElement("div", {
    className: styles$5.spinnerContainer
  }, /*#__PURE__*/React.createElement(Spinner$1, {
    className: styles$5.spinner
  })) : null, !iframeEnabled && iframeMounted ? /*#__PURE__*/React.createElement("div", {
    className: styles$5.iframeBlocker
  }) : null)) : null))));
};
UrbaniaArticleCard.defaultProps = defaultProps$5;
UrbaniaArticleCard.propTypes = propTypes$5;
var UrbaniaBaseArticleCard = UrbaniaArticleCard;

/* eslint-disable react/jsx-props-no-spreading */
function UrbaniaCardLoader(props) {
  var _ref = props || {},
    _ref$cardCallToAction = _ref.cardCallToAction,
    cardCallToAction = _ref$cardCallToAction === void 0 ? {} : _ref$cardCallToAction;
  return /*#__PURE__*/React.createElement(UrbaniaLoader$1, Object.assign({
    component: UrbaniaBaseArticleCard,
    callToAction: cardCallToAction
  }, props));
}

var definitionCard = {
  id: 'urbania-article-card',
  type: 'screen',
  namespaces: ['urbania'],
  group: {
    label: reactIntl.defineMessage({
      id: "oPjl8f",
      defaultMessage: [{
        "type": 0,
        "value": "Urbania"
      }]
    }),
    order: 10
  },
  title: reactIntl.defineMessage({
    id: "nJgzwC",
    defaultMessage: [{
      "type": 0,
      "value": "Urbania article"
    }]
  }),
  component: UrbaniaCardLoader,
  fields: [{
    name: 'url',
    type: 'url',
    label: reactIntl.defineMessage({
      id: "2pO2Cj",
      defaultMessage: [{
        "type": 0,
        "value": "Url"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'author',
    type: 'author-element',
    label: reactIntl.defineMessage({
      id: "73hxYw",
      defaultMessage: [{
        "type": 0,
        "value": "Author"
      }]
    })
  }, {
    name: 'text',
    type: 'text-element',
    fieldsProps: {
      textStyle: {
        excludedFields: ['highlight', 'link']
      }
    },
    label: reactIntl.defineMessage({
      id: "4E2gbX",
      defaultMessage: [{
        "type": 0,
        "value": "Text"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'cardCallToAction',
    type: 'text-element',
    fieldsProps: {
      textStyle: {
        excludedFields: ['highlight', 'link']
      }
    },
    label: reactIntl.defineMessage({
      id: "eBFxNl",
      defaultMessage: [{
        "type": 0,
        "value": "Call to Action"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }]
};

var aquarius = "38b67a045c917eba.png";

var aries = "f1d91f035ccb8c4f.png";

var cancer = "c2730eca851f3186.png";

var capricorn = "a6d606997910361a.png";

var gemini = "12148919dcf14f67.png";

var leo = "5ccc4bde48c478ee.png";

var libra = "d94c6aef4634d47f.png";

var pisces = "bc3a4d9747d9235c.png";

var sagittarius = "4aec8c7b2b1f6739.png";

var scorpio = "01b9ca612cf4a6a6.png";

var taurus = "3a3a4d27b9a019b2.png";

var virgo = "f3452bab9d2d80d5.png";

var aquariusThumbnail = "f82faebe2d495394.png";

var ariesThumbnail = "ddafd58fab0d5925.png";

var cancerThumbnail = "7d6b81c3035f5968.png";

var capricornThumbnail = "422146a5faadb139.png";

var geminiThumbnail = "ead69accd3f76ece.png";

var leoThumbnail = "36c18c31d1e80a70.png";

var libraThumbnail = "ef219f6696d5ce04.png";

var piscesThumbnail = "f21db7431692d889.png";

var sagittariusThumbnail = "0964d576c4c1da6d.png";

var scorpioThumbnail = "1ffa37309c1fbcfa.png";

var taurusThumbnail = "822018b354054d62.png";

var virgoThumbnail = "b3e1e35461e78e82.png";

var signs = [{
  id: 'aries',
  image: aries,
  thumbnail: ariesThumbnail,
  label: reactIntl.defineMessage({
    id: "/PJA/1",
    defaultMessage: [{
      "type": 0,
      "value": "Aries"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "ZeosMy",
    defaultMessage: [{
      "type": 0,
      "value": "Mar 21 - Apr 19"
    }]
  })
}, {
  id: 'taurus',
  image: taurus,
  thumbnail: taurusThumbnail,
  label: reactIntl.defineMessage({
    id: "XKcyqx",
    defaultMessage: [{
      "type": 0,
      "value": "Taurus"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "raUY02",
    defaultMessage: [{
      "type": 0,
      "value": "Apr 20 - May 20"
    }]
  })
}, {
  id: 'gemini',
  image: gemini,
  thumbnail: geminiThumbnail,
  label: reactIntl.defineMessage({
    id: "4g35M0",
    defaultMessage: [{
      "type": 0,
      "value": "Gemini"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "142Fjj",
    defaultMessage: [{
      "type": 0,
      "value": "May 21 - June 20"
    }]
  })
}, {
  id: 'cancer',
  image: cancer,
  thumbnail: cancerThumbnail,
  label: reactIntl.defineMessage({
    id: "0acGK7",
    defaultMessage: [{
      "type": 0,
      "value": "Cancer"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "bMdONM",
    defaultMessage: [{
      "type": 0,
      "value": "June 21 - July 22"
    }]
  })
}, {
  id: 'leo',
  image: leo,
  thumbnail: leoThumbnail,
  label: reactIntl.defineMessage({
    id: "EEUc6n",
    defaultMessage: [{
      "type": 0,
      "value": "Leo"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "MBgLeH",
    defaultMessage: [{
      "type": 0,
      "value": "July 23 - Aug 22"
    }]
  })
}, {
  id: 'virgo',
  image: virgo,
  thumbnail: virgoThumbnail,
  label: reactIntl.defineMessage({
    id: "6bd963",
    defaultMessage: [{
      "type": 0,
      "value": "Virgo"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "xL0GD2",
    defaultMessage: [{
      "type": 0,
      "value": "Aug 23 - Sept 22"
    }]
  })
}, {
  id: 'libra',
  image: libra,
  thumbnail: libraThumbnail,
  label: reactIntl.defineMessage({
    id: "M/FGRs",
    defaultMessage: [{
      "type": 0,
      "value": "Libra"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "F0QDfY",
    defaultMessage: [{
      "type": 0,
      "value": "Sept 23 - Oct 22"
    }]
  })
}, {
  id: 'scorpio',
  image: scorpio,
  thumbnail: scorpioThumbnail,
  label: reactIntl.defineMessage({
    id: "YyPYHk",
    defaultMessage: [{
      "type": 0,
      "value": "Scorpio"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "7ZzlUE",
    defaultMessage: [{
      "type": 0,
      "value": "Oct 23 - Nov 22"
    }]
  })
}, {
  id: 'sagittarius',
  image: sagittarius,
  thumbnail: sagittariusThumbnail,
  label: reactIntl.defineMessage({
    id: "7mMPO4",
    defaultMessage: [{
      "type": 0,
      "value": "Sagittarius"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "yCj5uv",
    defaultMessage: [{
      "type": 0,
      "value": "Nov 23 - Dec 21"
    }]
  })
}, {
  id: 'capricorn',
  image: capricorn,
  thumbnail: capricornThumbnail,
  label: reactIntl.defineMessage({
    id: "NumcrW",
    defaultMessage: [{
      "type": 0,
      "value": "Capricorn"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "rAkTvt",
    defaultMessage: [{
      "type": 0,
      "value": "Dec 22 - Jan 20"
    }]
  })
}, {
  id: 'aquarius',
  image: aquarius,
  thumbnail: aquariusThumbnail,
  label: reactIntl.defineMessage({
    id: "fBii8l",
    defaultMessage: [{
      "type": 0,
      "value": "Aquarius"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "Op1ZIp",
    defaultMessage: [{
      "type": 0,
      "value": "Jan 21 - Feb 18"
    }]
  })
}, {
  id: 'pisces',
  image: pisces,
  thumbnail: piscesThumbnail,
  label: reactIntl.defineMessage({
    id: "dxAumJ",
    defaultMessage: [{
      "type": 0,
      "value": "Pisces"
    }]
  }),
  date: reactIntl.defineMessage({
    id: "Evl2dG",
    defaultMessage: [{
      "type": 0,
      "value": "Feb 19 - Mar 20"
    }]
  })
}];

var styles$2$1 = {"container":"micromag-screen-urbania-horoscope-sign-card-container","focus-visible":"micromag-screen-urbania-horoscope-sign-card-focus-visible","placeholder":"micromag-screen-urbania-horoscope-sign-card-placeholder","thumbnail":"micromag-screen-urbania-horoscope-sign-card-thumbnail","name":"micromag-screen-urbania-horoscope-sign-card-name","date":"micromag-screen-urbania-horoscope-sign-card-date","arrow":"micromag-screen-urbania-horoscope-sign-card-arrow","emptyText":"micromag-screen-urbania-horoscope-sign-card-emptyText"};

var propTypes$2$1 = {
  className: PropTypes$1.string,
  sign: PropTypes$1.shape({
    id: PropTypes$1.string,
    label: PropTypes.textElement,
    date: PropTypes.message,
    thumbnail: PropTypes$1.string,
    word: PropTypes.headingElement,
    description: PropTypes.textElement
  }),
  focusable: PropTypes$1.bool,
  onClick: PropTypes$1.func
};
var defaultProps$2$1 = {
  className: null,
  sign: null,
  focusable: true,
  onClick: null
};
var SignCard = function SignCard(_ref) {
  var className = _ref.className,
    sign = _ref.sign,
    focusable = _ref.focusable,
    onClick = _ref.onClick;
  var _ref2 = sign || {},
    _ref2$id = _ref2.id,
    id = _ref2$id === void 0 ? null : _ref2$id,
    _ref2$thumbnail = _ref2.thumbnail,
    thumbnail = _ref2$thumbnail === void 0 ? null : _ref2$thumbnail,
    _ref2$label = _ref2.label,
    label = _ref2$label === void 0 ? null : _ref2$label,
    _ref2$date = _ref2.date,
    date = _ref2$date === void 0 ? null : _ref2$date;
  return /*#__PURE__*/React.createElement(ScreenElement$1, {
    placeholder: /*#__PURE__*/React.createElement(Title$3, {
      className: styles$2$1.placeholder
    }),
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "ceaRdq",
      defaultMessage: [{
        "type": 0,
        "value": "Horoscope sign"
      }]
    }),
    emptyClassName: styles$2$1.emptyText,
    isEmpty: !id
  }, /*#__PURE__*/React.createElement("button", {
    className: classNames([styles$2$1.container, _defineProperty({}, className, className !== null)]),
    type: "button",
    tabIndex: focusable ? '0' : -1,
    onClick: onClick
  }, thumbnail !== null ? /*#__PURE__*/React.createElement("img", {
    className: styles$2$1.thumbnail,
    src: thumbnail,
    alt: id,
    loading: "lazy"
  }) : null, /*#__PURE__*/React.createElement("div", {
    className: styles$2$1.gridText
  }, /*#__PURE__*/React.createElement("h2", {
    className: styles$2$1.name
  }, label !== null ? /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, label) : null), /*#__PURE__*/React.createElement("p", {
    className: styles$2$1.date
  }, date !== null ? /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, date) : null))));
};
SignCard.propTypes = propTypes$2$1;
SignCard.defaultProps = defaultProps$2$1;
var SignCard$1 = SignCard;

var styles$1$1 = {"modalButton":"micromag-screen-urbania-horoscope-sign-modal-modalButton","container":"micromag-screen-urbania-horoscope-sign-modal-container","disabled":"micromag-screen-urbania-horoscope-sign-modal-disabled","hidden":"micromag-screen-urbania-horoscope-sign-modal-hidden","placeholder":"micromag-screen-urbania-horoscope-sign-modal-placeholder","content":"micromag-screen-urbania-horoscope-sign-modal-content","modal":"micromag-screen-urbania-horoscope-sign-modal-modal","name":"micromag-screen-urbania-horoscope-sign-modal-name","wordContainer":"micromag-screen-urbania-horoscope-sign-modal-wordContainer","wordOfTheWeek":"micromag-screen-urbania-horoscope-sign-modal-wordOfTheWeek","word":"micromag-screen-urbania-horoscope-sign-modal-word","description":"micromag-screen-urbania-horoscope-sign-modal-description","illustration":"micromag-screen-urbania-horoscope-sign-modal-illustration","arrow":"micromag-screen-urbania-horoscope-sign-modal-arrow"};

var propTypes$1$1 = {
  width: PropTypes$1.number,
  height: PropTypes$1.number,
  sign: PropTypes$1.shape({
    id: PropTypes$1.string,
    label: PropTypes.textElement,
    date: PropTypes.message,
    image: PropTypes$1.string,
    word: PropTypes.headingElement,
    description: PropTypes.textElement
  }),
  subtitle: PropTypes.headingElement,
  current: PropTypes$1.bool,
  transitionDisabled: PropTypes$1.bool,
  focusable: PropTypes$1.bool,
  onClick: PropTypes$1.func,
  className: PropTypes$1.string
};
var defaultProps$1$1 = {
  width: null,
  height: null,
  sign: null,
  subtitle: null,
  current: true,
  transitionDisabled: false,
  focusable: true,
  onClick: null,
  className: null
};
var SignModal = function SignModal(_ref) {
  var width = _ref.width,
    height = _ref.height,
    sign = _ref.sign,
    subtitle = _ref.subtitle,
    current = _ref.current,
    transitionDisabled = _ref.transitionDisabled,
    focusable = _ref.focusable,
    _onClick = _ref.onClick,
    className = _ref.className;
  // eslint-disable-next-line no-unused-vars
  var _ref2 = sign || {},
    _ref2$label = _ref2.label,
    label = _ref2$label === void 0 ? null : _ref2$label,
    _ref2$image = _ref2.image,
    image = _ref2$image === void 0 ? null : _ref2$image;
    _ref2.date;
    var _ref2$word = _ref2.word,
    word = _ref2$word === void 0 ? null : _ref2$word,
    _ref2$description = _ref2.description,
    description = _ref2$description === void 0 ? null : _ref2$description;
  // const { body: wordBody = null } = word || {};

  var _useScreenRenderConte = useScreenRenderContext(),
    isEdit = _useScreenRenderConte.isEdit;
  var hasWord = isTextFilled$1(word);
  var hasSubtitle = isTextFilled$1(subtitle);
  var scrollingDisabled = !isEdit && transitionDisabled || !current;
  return /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: classNames([styles$1$1.container, _defineProperty(_defineProperty({}, styles$1$1.withoutTransitions, transitionDisabled), className, className !== null)])
  }, /*#__PURE__*/React.createElement("button", {
    type: "button",
    className: styles$1$1.modalButton,
    tabIndex: focusable ? '0' : '-1',
    onClick: function onClick(e) {
      if (_onClick !== null) {
        _onClick(e);
      }
    }
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    disabled: scrollingDisabled,
    verticalAlign: "middle"
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$1$1.modal
  }, label !== null ? /*#__PURE__*/React.createElement(ScreenElement$1, null, /*#__PURE__*/React.createElement("h2", {
    className: styles$1$1.name
  }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, label))) : null, hasWord ? /*#__PURE__*/React.createElement("div", {
    className: styles$1$1.wordContainer
  }, hasSubtitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$1$1.wordOfTheWeek
  }, subtitle)) : /*#__PURE__*/React.createElement("h3", {
    className: styles$1$1.wordOfTheWeek
  }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
    id: "+vzDdb",
    defaultMessage: [{
      "type": 0,
      "value": "Word of the Week"
    }]
  })), /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$1$1.word
  }, word))) : null, description ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$1$1.description
  }, description)) : null, image ? /*#__PURE__*/React.createElement("img", {
    className: styles$1$1.illustration,
    src: image,
    alt: label
  }) : null))));
};
SignModal.propTypes = propTypes$1$1;
SignModal.defaultProps = defaultProps$1$1;
var SignModal$1 = SignModal;

var styles$4 = {"close":"micromag-screen-urbania-horoscope-close","backdrop":"micromag-screen-urbania-horoscope-backdrop","signsGridContainer":"micromag-screen-urbania-horoscope-signsGridContainer","container":"micromag-screen-urbania-horoscope-container","background":"micromag-screen-urbania-horoscope-background","disabled":"micromag-screen-urbania-horoscope-disabled","hidden":"micromag-screen-urbania-horoscope-hidden","placeholder":"micromag-screen-urbania-horoscope-placeholder","content":"micromag-screen-urbania-horoscope-content","emptyTitle":"micromag-screen-urbania-horoscope-emptyTitle","emptyText":"micromag-screen-urbania-horoscope-emptyText","focus-visible":"micromag-screen-urbania-horoscope-focus-visible","isPlaceholder":"micromag-screen-urbania-horoscope-isPlaceholder","layout":"micromag-screen-urbania-horoscope-layout","placeholderGrid":"micromag-screen-urbania-horoscope-placeholderGrid","placeholderItem":"micromag-screen-urbania-horoscope-placeholderItem","headerContainer":"micromag-screen-urbania-horoscope-headerContainer","title":"micromag-screen-urbania-horoscope-title","titleImage":"micromag-screen-urbania-horoscope-titleImage","titlePlaceholder":"micromag-screen-urbania-horoscope-titlePlaceholder","description":"micromag-screen-urbania-horoscope-description","descriptionPlaceholder":"micromag-screen-urbania-horoscope-descriptionPlaceholder","button":"micromag-screen-urbania-horoscope-button","buttonLabel":"micromag-screen-urbania-horoscope-buttonLabel","header":"micromag-screen-urbania-horoscope-header","buttons":"micromag-screen-urbania-horoscope-buttons","signs":"micromag-screen-urbania-horoscope-signs","author":"micromag-screen-urbania-horoscope-author","collaborator":"micromag-screen-urbania-horoscope-collaborator","authorBackground":"micromag-screen-urbania-horoscope-authorBackground","modal":"micromag-screen-urbania-horoscope-modal","backdropVideo":"micromag-screen-urbania-horoscope-backdropVideo"};

var Astrologie = "data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20906.64%20139.48%22%3E%20%20%20%20%3Cpath%20d%3D%22M35.88%2C4.42h35.5l34.66%2C119.78h-28.43l-5.89-23.72H35.55l-6.22%2C23.72H1.4L35.88%2C4.42Zm31.8%2C75.54l-13.63-52.15h-.34l-14.13%2C52.15h28.09Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M123.37%2C122.51c-6.84-3.36-12.17-8.13-15.98-14.3-3.81-6.17-5.78-13.34-5.89-21.53l26.24-4.21c0%2C7.07%2C1.96%2C12.73%2C5.89%2C16.99%2C3.92%2C4.26%2C8.92%2C6.39%2C14.97%2C6.39%2C4.82%2C0%2C8.72-1.29%2C11.69-3.87%2C2.97-2.58%2C4.46-5.89%2C4.46-9.92%2C0-3.37-1.15-6.2-3.45-8.5-2.3-2.3-6.03-4.34-11.19-6.14l-14.64-4.71c-10.66-3.25-18.37-7.68-23.13-13.29-4.77-5.61-7.15-13.01-7.15-22.21%2C0-10.88%2C3.53-19.63%2C10.6-26.24%2C7.07-6.62%2C16.99-9.93%2C29.78-9.93%2C11.89%2C0%2C21.48%2C3.23%2C28.77%2C9.67%2C7.29%2C6.45%2C11.05%2C15.17%2C11.27%2C26.16l-25.57%2C4.88c.11-5.83-1.24-10.51-4.04-14.05-2.8-3.53-6.45-5.3-10.94-5.3-3.93%2C0-7.12%2C1.21-9.59%2C3.62-2.47%2C2.41-3.7%2C5.47-3.7%2C9.17s1.15%2C6.54%2C3.45%2C8.83c2.3%2C2.3%2C6.08%2C4.23%2C11.36%2C5.8l13.96%2C4.71c10.88%2C3.25%2C18.76%2C7.66%2C23.64%2C13.21s7.32%2C12.93%2C7.32%2C22.12c0%2C7.29-1.74%2C13.79-5.22%2C19.51-3.48%2C5.72-8.52%2C10.18-15.14%2C13.38-6.62%2C3.2-14.58%2C4.79-23.89%2C4.79s-17.05-1.68-23.89-5.05Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M213.03%2C28.64h-28.26V4.42h84.96V28.64h-28.26V124.2h-28.43V28.64Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M335.5%2C122.35c-3.59-3.25-5.95-7.63-7.07-13.12l-5.05-21.37c-.79-2.92-2.19-5.3-4.21-7.15s-4.26-2.78-6.73-2.78h-10.09v46.26h-28.26V4.42h46.1c8.86%2C0%2C16.6%2C1.54%2C23.22%2C4.63%2C6.62%2C3.09%2C11.72%2C7.46%2C15.31%2C13.12%2C3.59%2C5.66%2C5.38%2C12.31%2C5.38%2C19.94%2C0%2C7.18-2.08%2C13.6-6.22%2C19.26-4.15%2C5.67-9.76%2C9.51-16.82%2C11.52v.17c2.8%2C1.24%2C4.96%2C3%2C6.48%2C5.3%2C1.51%2C2.3%2C2.66%2C5.13%2C3.45%2C8.5l3.53%2C15.48c.67%2C3.7%2C2.19%2C5.55%2C4.54%2C5.55%2C2.13%2C0%2C4.15-1.29%2C6.06-3.87l6.73%2C13.63c-2.8%2C2.92-6.2%2C5.24-10.18%2C6.98-3.98%2C1.74-8.05%2C2.61-12.2%2C2.61-5.72%2C0-10.38-1.63-13.96-4.88Zm-16.82-64.26c5.05%2C0%2C9.14-1.46%2C12.28-4.37%2C3.14-2.92%2C4.71-6.78%2C4.71-11.61%2C0-5.16-1.54-9.17-4.63-12.03-3.09-2.86-7.21-4.29-12.37-4.29h-16.32V58.08h16.32Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M396.23%2C119.74c-8.52-5.21-15.14-12.62-19.85-22.21-4.71-9.59-7.07-20.66-7.07-33.23s2.36-23.64%2C7.07-33.23c4.71-9.59%2C11.33-16.99%2C19.85-22.21%2C8.52-5.21%2C18.45-7.82%2C29.78-7.82s21.28%2C2.61%2C29.86%2C7.82c8.58%2C5.22%2C15.22%2C12.59%2C19.94%2C22.12%2C4.71%2C9.53%2C7.07%2C20.58%2C7.07%2C33.14s-2.36%2C23.8-7.07%2C33.39c-4.71%2C9.59-11.36%2C16.99-19.94%2C22.21s-18.53%2C7.82-29.86%2C7.82-21.26-2.61-29.78-7.82Zm50.47-27c5.16-7.07%2C7.74-16.54%2C7.74-28.43s-2.58-21.37-7.74-28.43c-5.16-7.07-12.06-10.6-20.69-10.6s-15.51%2C3.53-20.61%2C10.6c-5.1%2C7.07-7.65%2C16.54-7.65%2C28.43s2.55%2C21.37%2C7.65%2C28.43c5.1%2C7.07%2C11.97%2C10.6%2C20.61%2C10.6s15.53-3.53%2C20.69-10.6Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M489.26%2C4.42h28.26V99.97h37.68v24.23h-65.95V4.42Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M580.28%2C119.74c-8.52-5.21-15.14-12.62-19.85-22.21-4.71-9.59-7.07-20.66-7.07-33.23s2.36-23.64%2C7.07-33.23c4.71-9.59%2C11.33-16.99%2C19.85-22.21%2C8.52-5.21%2C18.45-7.82%2C29.78-7.82s21.28%2C2.61%2C29.86%2C7.82c8.58%2C5.22%2C15.22%2C12.59%2C19.94%2C22.12%2C4.71%2C9.53%2C7.07%2C20.58%2C7.07%2C33.14s-2.36%2C23.8-7.07%2C33.39c-4.71%2C9.59-11.36%2C16.99-19.94%2C22.21s-18.53%2C7.82-29.86%2C7.82-21.26-2.61-29.78-7.82Zm50.47-27c5.16-7.07%2C7.74-16.54%2C7.74-28.43s-2.58-21.37-7.74-28.43c-5.16-7.07-12.06-10.6-20.69-10.6s-15.51%2C3.53-20.61%2C10.6c-5.1%2C7.07-7.65%2C16.54-7.65%2C28.43s2.55%2C21.37%2C7.65%2C28.43c5.1%2C7.07%2C11.97%2C10.6%2C20.61%2C10.6s15.53-3.53%2C20.69-10.6Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M693.75%2C119.65c-7.68-5.05-13.6-12.31-17.75-21.79-4.15-9.48-6.22-20.66-6.22-33.56s2.21-24.25%2C6.65-33.73c4.43-9.48%2C10.77-16.77%2C19.01-21.87%2C8.24-5.1%2C17.97-7.65%2C29.19-7.65s21.53%2C3.28%2C29.95%2C9.84c8.41%2C6.56%2C14.19%2C15.56%2C17.33%2C27l-26.58%2C5.72c-1.8-5.72-4.54-10.2-8.24-13.46-3.7-3.25-7.96-4.88-12.79-4.88-8.08%2C0-14.44%2C3.42-19.09%2C10.26-4.66%2C6.84-6.98%2C16.21-6.98%2C28.09s2.63%2C21.84%2C7.91%2C28.85c5.27%2C7.01%2C12.5%2C10.51%2C21.7%2C10.51%2C8.19%2C0%2C14.66-2.49%2C19.43-7.49%2C4.77-4.99%2C7.26-11.92%2C7.49-20.78h-37.18v-18.51h64.26V124.2h-20.86l-1.68-18.67h-.17c-3.93%2C6.73-9.31%2C12.03-16.15%2C15.9-6.84%2C3.87-14.19%2C5.8-22.04%2C5.8-10.43%2C0-19.49-2.52-27.17-7.57Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M789.56%2C4.42h28.26V124.2h-28.26V4.42Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M827.74%2C4.42h68.81V27.13h-41.55v25.57h34.82v20.19h-34.82v28.6h43.24v22.71h-70.49V4.42Z%22%20fill%3D%22%23000f66%22%20stroke%3D%22aqua%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M43.24%2C15.29h35.5l34.66%2C119.78h-28.43l-5.89-23.72H42.91l-6.22%2C23.72H8.76L43.24%2C15.29Zm31.8%2C75.54l-13.63-52.15h-.34l-14.13%2C52.15h28.09Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M130.73%2C133.38c-6.84-3.36-12.17-8.13-15.98-14.3-3.81-6.17-5.78-13.34-5.89-21.53l26.24-4.21c0%2C7.07%2C1.96%2C12.73%2C5.89%2C16.99%2C3.92%2C4.26%2C8.92%2C6.39%2C14.97%2C6.39%2C4.82%2C0%2C8.72-1.29%2C11.69-3.87%2C2.97-2.58%2C4.46-5.89%2C4.46-9.92%2C0-3.37-1.15-6.2-3.45-8.5-2.3-2.3-6.03-4.34-11.19-6.14l-14.64-4.71c-10.66-3.25-18.37-7.68-23.13-13.29-4.77-5.61-7.15-13.01-7.15-22.21%2C0-10.88%2C3.53-19.63%2C10.6-26.24%2C7.07-6.62%2C16.99-9.93%2C29.78-9.93%2C11.89%2C0%2C21.48%2C3.23%2C28.77%2C9.67%2C7.29%2C6.45%2C11.05%2C15.17%2C11.27%2C26.16l-25.57%2C4.88c.11-5.83-1.24-10.51-4.04-14.05-2.8-3.53-6.45-5.3-10.94-5.3-3.93%2C0-7.12%2C1.21-9.59%2C3.62-2.47%2C2.41-3.7%2C5.47-3.7%2C9.17s1.15%2C6.54%2C3.45%2C8.83c2.3%2C2.3%2C6.08%2C4.23%2C11.36%2C5.8l13.96%2C4.71c10.88%2C3.25%2C18.76%2C7.66%2C23.64%2C13.21s7.32%2C12.93%2C7.32%2C22.12c0%2C7.29-1.74%2C13.79-5.22%2C19.51-3.48%2C5.72-8.52%2C10.18-15.14%2C13.38-6.62%2C3.2-14.58%2C4.79-23.89%2C4.79s-17.05-1.68-23.89-5.05Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M220.39%2C39.51h-28.26V15.29h84.96v24.23h-28.26v95.56h-28.43V39.51Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M342.86%2C133.22c-3.59-3.25-5.95-7.63-7.07-13.12l-5.05-21.37c-.79-2.92-2.19-5.3-4.21-7.15s-4.26-2.78-6.73-2.78h-10.09v46.26h-28.26V15.29h46.1c8.86%2C0%2C16.6%2C1.54%2C23.22%2C4.63%2C6.62%2C3.09%2C11.72%2C7.46%2C15.31%2C13.12%2C3.59%2C5.66%2C5.38%2C12.31%2C5.38%2C19.94%2C0%2C7.18-2.08%2C13.6-6.22%2C19.26-4.15%2C5.67-9.76%2C9.51-16.82%2C11.52v.17c2.8%2C1.24%2C4.96%2C3%2C6.48%2C5.3%2C1.51%2C2.3%2C2.66%2C5.13%2C3.45%2C8.5l3.53%2C15.48c.67%2C3.7%2C2.19%2C5.55%2C4.54%2C5.55%2C2.13%2C0%2C4.15-1.29%2C6.06-3.87l6.73%2C13.63c-2.8%2C2.92-6.2%2C5.24-10.18%2C6.98-3.98%2C1.74-8.05%2C2.61-12.2%2C2.61-5.72%2C0-10.38-1.63-13.96-4.88Zm-16.82-64.26c5.05%2C0%2C9.14-1.46%2C12.28-4.37%2C3.14-2.92%2C4.71-6.78%2C4.71-11.61%2C0-5.16-1.54-9.17-4.63-12.03-3.09-2.86-7.21-4.29-12.37-4.29h-16.32v32.3h16.32Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M403.59%2C130.61c-8.52-5.21-15.14-12.62-19.85-22.21-4.71-9.59-7.07-20.66-7.07-33.23s2.36-23.64%2C7.07-33.23c4.71-9.59%2C11.33-16.99%2C19.85-22.21%2C8.52-5.21%2C18.45-7.82%2C29.78-7.82s21.28%2C2.61%2C29.86%2C7.82c8.58%2C5.22%2C15.22%2C12.59%2C19.94%2C22.12%2C4.71%2C9.53%2C7.07%2C20.58%2C7.07%2C33.14s-2.36%2C23.8-7.07%2C33.39c-4.71%2C9.59-11.36%2C16.99-19.94%2C22.21s-18.53%2C7.82-29.86%2C7.82-21.26-2.61-29.78-7.82Zm50.47-27c5.16-7.07%2C7.74-16.54%2C7.74-28.43s-2.58-21.37-7.74-28.43c-5.16-7.07-12.06-10.6-20.69-10.6s-15.51%2C3.53-20.61%2C10.6c-5.1%2C7.07-7.65%2C16.54-7.65%2C28.43s2.55%2C21.37%2C7.65%2C28.43c5.1%2C7.07%2C11.97%2C10.6%2C20.61%2C10.6s15.53-3.53%2C20.69-10.6Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M496.62%2C15.29h28.26V110.84h37.68v24.23h-65.95V15.29Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M587.64%2C130.61c-8.52-5.21-15.14-12.62-19.85-22.21-4.71-9.59-7.07-20.66-7.07-33.23s2.36-23.64%2C7.07-33.23c4.71-9.59%2C11.33-16.99%2C19.85-22.21%2C8.52-5.21%2C18.45-7.82%2C29.78-7.82s21.28%2C2.61%2C29.86%2C7.82c8.58%2C5.22%2C15.22%2C12.59%2C19.94%2C22.12%2C4.71%2C9.53%2C7.07%2C20.58%2C7.07%2C33.14s-2.36%2C23.8-7.07%2C33.39c-4.71%2C9.59-11.36%2C16.99-19.94%2C22.21s-18.53%2C7.82-29.86%2C7.82-21.26-2.61-29.78-7.82Zm50.47-27c5.16-7.07%2C7.74-16.54%2C7.74-28.43s-2.58-21.37-7.74-28.43c-5.16-7.07-12.06-10.6-20.69-10.6s-15.51%2C3.53-20.61%2C10.6c-5.1%2C7.07-7.65%2C16.54-7.65%2C28.43s2.55%2C21.37%2C7.65%2C28.43c5.1%2C7.07%2C11.97%2C10.6%2C20.61%2C10.6s15.53-3.53%2C20.69-10.6Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M701.11%2C130.53c-7.68-5.05-13.6-12.31-17.75-21.79-4.15-9.48-6.22-20.66-6.22-33.56s2.21-24.25%2C6.65-33.73c4.43-9.48%2C10.77-16.77%2C19.01-21.87%2C8.24-5.1%2C17.97-7.65%2C29.19-7.65s21.53%2C3.28%2C29.95%2C9.84c8.41%2C6.56%2C14.19%2C15.56%2C17.33%2C27l-26.58%2C5.72c-1.8-5.72-4.54-10.2-8.24-13.46-3.7-3.25-7.96-4.88-12.79-4.88-8.08%2C0-14.44%2C3.42-19.09%2C10.26-4.66%2C6.84-6.98%2C16.21-6.98%2C28.09s2.63%2C21.84%2C7.91%2C28.85c5.27%2C7.01%2C12.5%2C10.51%2C21.7%2C10.51%2C8.19%2C0%2C14.66-2.49%2C19.43-7.49%2C4.77-4.99%2C7.26-11.92%2C7.49-20.78h-37.18v-18.51h64.26v67.97h-20.86l-1.68-18.67h-.17c-3.93%2C6.73-9.31%2C12.03-16.15%2C15.9-6.84%2C3.87-14.19%2C5.8-22.04%2C5.8-10.43%2C0-19.49-2.52-27.17-7.57Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M796.92%2C15.29h28.26v119.78h-28.26V15.29Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M835.1%2C15.29h68.81v22.71h-41.55v25.57h34.82v20.19h-34.82v28.6h43.24v22.71h-70.49V15.29Z%22%20fill%3D%22aqua%22%20stroke%3D%22%23000f66%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222.1%22%2F%3E%3C%2Fsvg%3E";

var stopDragEventsPropagation = {
  onTouchMove: function onTouchMove(e) {
    return e.stopPropagation();
  },
  onTouchStart: function onTouchStart(e) {
    return e.stopPropagation();
  },
  onTouchEnd: function onTouchEnd(e) {
    return e.stopPropagation();
  },
  onPointerMove: function onPointerMove(e) {
    return e.stopPropagation();
  },
  onPointerUp: function onPointerUp(e) {
    return e.stopPropagation();
  },
  onPointerDown: function onPointerDown(e) {
    return e.stopPropagation();
  }
};
var mouseBlocker = _objectSpread$1(_objectSpread$1({}, stopDragEventsPropagation), {}, {
  onClick: function onClick(e) {
    return e.stopPropagation();
  },
  style: {
    position: 'fixed',
    zIndex: '1000',
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    cursor: 'default'
  }
});
var propTypes$4 = {
  defaultSigns: PropTypes$1.arrayOf(PropTypes$1.shape({
    id: PropTypes$1.string,
    label: PropTypes.textElement
  })),
  signs: PropTypes$1.arrayOf(PropTypes$1.shape({
    id: PropTypes$1.string,
    label: PropTypes.textElement,
    word: PropTypes.headingElement,
    description: PropTypes.textElement
  })),
  title: PropTypes.headingElement,
  description: PropTypes.textElement,
  author: PropTypes.authorElement,
  button: PropTypes.button,
  signSubtitle: PropTypes.headingElement,
  spacing: PropTypes$1.number,
  background: PropTypes.backgroundElement,
  popupBackground: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  type: PropTypes$1.string,
  className: PropTypes$1.string
};
var defaultProps$4 = {
  defaultSigns: signs,
  signs: null,
  title: null,
  description: null,
  author: null,
  button: null,
  signSubtitle: null,
  spacing: 20,
  background: null,
  popupBackground: null,
  current: true,
  active: true,
  type: 'horoscope',
  className: null
};
var UrbaniaHoroscope = function UrbaniaHoroscope(_ref) {
  var defaultSigns = _ref.defaultSigns,
    signsValue = _ref.signs,
    title = _ref.title,
    description = _ref.description,
    author = _ref.author,
    button = _ref.button,
    signSubtitle = _ref.signSubtitle,
    spacing = _ref.spacing,
    background = _ref.background,
    popupBackground = _ref.popupBackground,
    current = _ref.current,
    active = _ref.active,
    type = _ref.type,
    className = _ref.className;
  var intl = reactIntl.useIntl();
  var trackScreenEvent = useTrackScreenEvent(type);
  var _useViewerInteraction = useViewerInteraction(),
    enableInteraction = _useViewerInteraction.enableInteraction,
    disableInteraction = _useViewerInteraction.disableInteraction;
  var _usePlaybackContext = usePlaybackContext(),
    muted = _usePlaybackContext.muted;
  var mediaRef = usePlaybackMediaRef(current);
  var hasAuthor = author !== null && isTextFilled$1(author.name);
  var signs = React.useMemo(function () {
    return defaultSigns.map(function (defaultSign, index) {
      return _objectSpread$1(_objectSpread$1({}, signsValue !== null ? signsValue.find(function (_ref2) {
        var signValueId = _ref2.id;
        return signValueId === defaultSign.id;
      }) || signsValue[index] : null), defaultSign);
    });
  }, [signsValue]);
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit;
  var hasTitle = isTextFilled$1(title);
  var hasDescription = isTextFilled$1(description);
  var hasButton = isTextFilled$1(button);
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = !isPlaceholder && (current || active);
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    showSignsGrid = _useState2[0],
    setShowSignsGrid = _useState2[1];
  var _useState3 = React.useState(null),
    _useState4 = _slicedToArray(_useState3, 2),
    selectedSign = _useState4[0],
    setSelectedSign = _useState4[1];
  var _useState5 = React.useState(false),
    _useState6 = _slicedToArray(_useState5, 2),
    showModal = _useState6[0],
    setShowModal = _useState6[1];
  var _ref3 = popupBackground || {},
    _ref3$video = _ref3.video,
    video = _ref3$video === void 0 ? null : _ref3$video;
  var _ref4 = video || {},
    _ref4$url = _ref4.url,
    popupBackgroundUrl = _ref4$url === void 0 ? null : _ref4$url;
  var onOpenSignsGrid = React.useCallback(function () {
    setShowSignsGrid(true);
    disableInteraction();
    trackScreenEvent('open');
  }, [disableInteraction, trackScreenEvent]);
  var onCloseSignsGrid = React.useCallback(function () {
    setShowSignsGrid(false);
    setShowModal(0); // can't have a modal if signs are closed
    enableInteraction();
    trackScreenEvent('close');
  }, [setShowSignsGrid, setShowModal, enableInteraction, trackScreenEvent]);
  var onSelectSign = React.useCallback(function (e, id) {
    e.stopPropagation();
    var foundSignIndex = signs.findIndex(function (s) {
      return s.id === id;
    });
    setSelectedSign(foundSignIndex);
    setShowModal(true);
    trackScreenEvent('select_sign', signs[foundSignIndex]);
  }, [signs, setSelectedSign, trackScreenEvent]);
  var onCloseModal = React.useCallback(function () {
    setShowModal(0);
    trackScreenEvent('close_sign');
  }, [setShowModal, trackScreenEvent]);
  var computeSignsGridProgress = React.useCallback(function (_ref5) {
    var dragActive = _ref5.active,
      _ref5$movement = _slicedToArray(_ref5.movement, 2),
      my = _ref5$movement[1],
      _ref5$velocity = _slicedToArray(_ref5.velocity, 2),
      vy = _ref5$velocity[1];
    var progress = Math.max(0, my) / (window.innerHeight * 0.8);
    var reachedThreshold = vy > 0.3 || Math.abs(progress) > 0.3;
    if (!dragActive) {
      if (reachedThreshold) {
        onCloseSignsGrid();
      }
      return reachedThreshold ? 0 : 1;
    }
    return 1 - progress;
  }, [onOpenSignsGrid, onCloseSignsGrid]);
  var _useDragProgress = useDragProgress({
      disabled: !isView,
      progress: showSignsGrid ? 1 : 0,
      computeProgress: computeSignsGridProgress,
      springParams: {
        config: {
          tension: 300,
          friction: 30
        }
      },
      dragOptions: {
        pointer: {
          keys: false
        }
      }
    }),
    bindSignsDrag = _useDragProgress.bind,
    showSignsGridProgress = _useDragProgress.progress;
  var computeModalProgress = React.useCallback(function (_ref6) {
    var dragActive = _ref6.active,
      _ref6$movement = _slicedToArray(_ref6.movement, 2),
      my = _ref6$movement[1],
      _ref6$velocity = _slicedToArray(_ref6.velocity, 2),
      vy = _ref6$velocity[1];
    var damper = 0.5;
    var p = Math.max(0, my) / window.innerHeight;
    var progress = p * damper;
    var reachedThreshold = vy > 0.3 || Math.abs(p) > 0.3;
    if (!dragActive) {
      if (reachedThreshold) {
        onCloseModal();
      }
      return reachedThreshold ? 0 : 1;
    }
    return 1 - progress;
  }, [onCloseModal]);
  var _useDragProgress2 = useDragProgress({
      disabled: !isView,
      progress: showModal ? 1 : 0,
      computeProgress: computeModalProgress,
      springParams: {
        config: {
          tension: 300,
          friction: 30
        }
      },
      dragOptions: {
        pointer: {
          keys: false
        }
      }
    }),
    bindModalDrag = _useDragProgress2.bind,
    showModalProgress = _useDragProgress2.progress;
  var getHeaderStyles = function getHeaderStyles(spring) {
    return {
      transform: spring.to(function (p) {
        return "translateY(".concat(-100 * p * (1 - p), "%)");
      }),
      opacity: spring.to(function (p) {
        return p > 0.25 ? 1 - p : 1;
      })
    };
  };
  var getSignsContainerStyles = function getSignsContainerStyles(spring) {
    return {
      opacity: spring,
      pointerEvents: spring.to(function (p) {
        return p < 0.25 ? 'none' : 'auto';
      })
    };
  };
  var getSignStyles = function getSignStyles(spring) {
    return {
      opacity: spring,
      transform: spring.to(function (p) {
        return "translateY(".concat(3 * Math.pow(1 - p, 5), "rem) scale(").concat(1 - 0.25 * (1 - p), ")");
      })
    };
  };
  var getAuthorStyles = function getAuthorStyles(spring) {
    return {
      transform: spring.to(function (p) {
        return "translateY(".concat(2 * (1 - p), "rem)");
      }),
      opacity: spring
    };
  };
  var getBackdropStyles = function getBackdropStyles(spring) {
    return {
      opacity: spring
    };
  };
  var getModalStyles = function getModalStyles(spring) {
    return {
      transform: spring.to(function (p) {
        return "translateY(".concat(100 * (1 - (p < 0.2 ? 0.1 * p + p : p)), "%)");
      }),
      pointerEvents: spring.to(function (p) {
        return p < 0.1 ? 'none' : 'auto';
      })
    };
  };

  // for editor purposes
  var screenState = useScreenState();
  React.useEffect(function () {
    setShowSignsGrid(0);
    if (screenState === null || screenState === 'intro') {
      setShowSignsGrid(0);
      setShowModal(0);
    }
    if (screenState === 'grid') {
      setShowSignsGrid(1);
      setSelectedSign(null);
      setShowModal(0);
    }
    if (screenState !== null && screenState.includes('signs')) {
      var index = screenState.split('.').pop();
      setShowSignsGrid(1);
      setShowModal(1);
      setSelectedSign(index);
    }
  }, [screenState]);
  React.useEffect(function () {
    var keyup = function keyup(e) {
      if (e.key === 'Escape') {
        if (showModal) {
          onCloseModal();
          return;
        }
        if (showSignsGrid) {
          onCloseSignsGrid();
        }
      }
    };
    document.addEventListener('keyup', keyup);
    return function () {
      document.removeEventListener('keyup', keyup);
    };
  }, [showModal, onCloseModal, showSignsGrid, onCloseSignsGrid]);
  return /*#__PURE__*/React.createElement("div", Object.assign({
    className: classNames([styles$4.container, _defineProperty(_defineProperty({}, className, className !== null), styles$4.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": true
  }, showSignsGrid ? stopDragEventsPropagation : null), !isView ? /*#__PURE__*/React.createElement("div", mouseBlocker) : null, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$4.content
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$4.layout,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + spacing,
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + spacing
    } : null,
    height: height * 0.8
  }, isPlaceholder ? /*#__PURE__*/React.createElement("div", {
    className: styles$4.placeholderGrid
  }, _toConsumableArray(Array(12).keys()).map(function () {
    return /*#__PURE__*/React.createElement("div", {
      className: styles$4.placeholderItem
    });
  })) : null, /*#__PURE__*/React.createElement(web.animated.div, {
    className: styles$4.headerContainer,
    style: getHeaderStyles(showSignsGridProgress)
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    emptyClassName: styles$4.emptyText
  }, hasTitle ? /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$4.title
  }, title)) : /*#__PURE__*/React.createElement("img", {
    src: Astrologie,
    alt: "",
    className: styles$4.titleImage
  })), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "description",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "EQdIAR",
      defaultMessage: [{
        "type": 0,
        "value": "Description"
      }]
    }),
    emptyClassName: styles$4.emptyText,
    isEmpty: !hasDescription
  }, hasDescription ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$4.description
  }, description)) : null)), /*#__PURE__*/React.createElement(ScreenElement$1, {
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "bv3rRe",
      defaultMessage: [{
        "type": 0,
        "value": "Button"
      }]
    }),
    emptyClassName: styles$4.emptyText,
    isEmpty: !hasButton
  }, hasButton ? /*#__PURE__*/React.createElement(Button$1, Object.assign({
    className: styles$4.button,
    type: "button",
    onClick: onOpenSignsGrid,
    withoutBootstrapStyles: true,
    focusable: current && !isPreview && !isPlaceholder
  }, button), /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$4.buttonLabel
  }, button, {
    inline: true
  }))) : null), isView && !isPlaceholder ? /*#__PURE__*/React.createElement(web.animated.div, {
    className: styles$4.header,
    style: {
      opacity: showSignsGridProgress,
      pointerEvents: showSignsGridProgress.to(function (p) {
        return p < 0.25 ? 'none' : 'auto';
      })
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$4.buttons
  }, /*#__PURE__*/React.createElement(Button$1, {
    className: styles$4.close,
    onClick: onCloseSignsGrid,
    label: intl.formatMessage({
      id: "dj/p/q",
      defaultMessage: [{
        "type": 0,
        "value": "Close"
      }]
    }),
    iconPosition: "right",
    icon: /*#__PURE__*/React.createElement("svg", {
      className: styles$4.closeIcon,
      xmlns: "http://www.w3.org/2000/svg",
      width: "10",
      height: "16",
      viewBox: "0 0 10 16",
      fill: "currentColor"
    }, /*#__PURE__*/React.createElement("polygon", {
      points: "9.95 4.11 8.89 3.05 5 6.94 1.11 3.05 0.05 4.11 3.94 8 0.05 11.89 1.11 12.95 5 9.06 8.89 12.95 9.95 11.89 6.06 8 9.95 4.11"
    })),
    focusable: !isPreview && !isPlaceholder && (showSignsGrid || showModal),
    withoutStyle: true
  }))) : null, !isPlaceholder ? /*#__PURE__*/React.createElement(web.animated.div, Object.assign({
    className: styles$4.signsGridContainer,
    style: getSignsContainerStyles(showSignsGridProgress)
  }, bindSignsDrag()), /*#__PURE__*/React.createElement(Keypad$1, {
    columns: 3,
    spacing: 5,
    items: signs.map(function (sign) {
      var _ref8 = sign || {},
        _ref8$id = _ref8.id,
        id = _ref8$id === void 0 ? null : _ref8$id;
      return /*#__PURE__*/React.createElement(web.animated.div, {
        key: id,
        className: styles$4.sign,
        style: getSignStyles(showSignsGridProgress)
      }, /*#__PURE__*/React.createElement(SignCard$1, {
        key: id,
        sign: sign,
        focusable: !isPreview && !isPlaceholder && showSignsGrid && !showModal,
        onClick: function onClick(e) {
          return onSelectSign(e, id);
        }
      }));
    })
  }), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "author",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "xYqGzM",
      defaultMessage: [{
        "type": 0,
        "value": "Author"
      }]
    }),
    emptyClassName: styles$4.emptyText,
    isEmpty: !hasAuthor
  }, hasAuthor && !isPlaceholder ? /*#__PURE__*/React.createElement(UrbaniaAuthor$1, {
    author: author,
    className: styles$4.author,
    collaboratorClassName: styles$4.collaborator,
    backgroundClassName: styles$4.authorBackground,
    shouldLoad: mediaShouldLoad,
    style: getAuthorStyles(showSignsGridProgress)
  }) : null)) : null, /*#__PURE__*/React.createElement(web.animated.div, Object.assign({
    className: styles$4.modal,
    style: getModalStyles(showModalProgress)
  }, bindModalDrag()), /*#__PURE__*/React.createElement(SignModal$1, {
    width: width,
    height: height,
    sign: signs[selectedSign],
    subtitle: signSubtitle,
    focusable: !isPreview && !isPlaceholder && showModal,
    onClick: onCloseModal
  })), !isPlaceholder ? /*#__PURE__*/React.createElement(web.animated.div, {
    className: styles$4.backdrop,
    style: getBackdropStyles(showSignsGridProgress)
  }, popupBackgroundUrl !== null ? /*#__PURE__*/React.createElement("video", {
    className: styles$4.videoBackdrop,
    autoPlay: true,
    muted: true,
    loop: true,
    playsInline: true
  }, /*#__PURE__*/React.createElement("source", {
    src: popupBackgroundUrl,
    type: "video/mp4"
  })) : null) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    className: styles$4.background
  }) : null);
};
UrbaniaHoroscope.propTypes = propTypes$4;
UrbaniaHoroscope.defaultProps = defaultProps$4;
var UrbaniaHoroscope$1 = UrbaniaHoroscope;

var definition$4 = [{
  id: 'urbania-horoscope',
  type: 'screen',
  namespaces: ['urbania', 'bayard'],
  group: {
    label: reactIntl.defineMessage({
      id: "oPjl8f",
      defaultMessage: [{
        "type": 0,
        "value": "Urbania"
      }]
    }),
    order: 10
  },
  title: reactIntl.defineMessage({
    id: "F59wsl",
    defaultMessage: [{
      "type": 0,
      "value": "Urbania horoscope"
    }]
  }),
  component: UrbaniaHoroscope$1,
  states: [{
    id: 'intro',
    label: reactIntl.defineMessage({
      id: "82g1F5",
      defaultMessage: [{
        "type": 0,
        "value": "Intro"
      }]
    }),
    fields: [{
      name: 'title',
      type: 'heading-element',
      label: reactIntl.defineMessage({
        id: "N25iDO",
        defaultMessage: [{
          "type": 0,
          "value": "Title"
        }]
      })
    }, {
      name: 'description',
      type: 'text-element',
      label: reactIntl.defineMessage({
        id: "Y7bs1v",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      })
    }, {
      name: 'button',
      type: 'button-element',
      label: reactIntl.defineMessage({
        id: "i6bmbD",
        defaultMessage: [{
          "type": 0,
          "value": "Button"
        }]
      })
    }, {
      name: 'background',
      type: 'background',
      label: reactIntl.defineMessage({
        id: "+MPZRu",
        defaultMessage: [{
          "type": 0,
          "value": "Background"
        }]
      })
    }]
  }, {
    id: 'grid',
    label: reactIntl.defineMessage({
      id: "xj0o1v",
      defaultMessage: [{
        "type": 0,
        "value": "Grid"
      }]
    }),
    fields: [{
      name: 'popupBackground',
      type: 'background',
      label: reactIntl.defineMessage({
        id: "+MPZRu",
        defaultMessage: [{
          "type": 0,
          "value": "Background"
        }]
      })
    }, {
      name: 'author',
      type: 'author-element',
      label: reactIntl.defineMessage({
        id: "73hxYw",
        defaultMessage: [{
          "type": 0,
          "value": "Author"
        }]
      })
    }]
  }, {
    id: 'signs',
    label: reactIntl.defineMessage({
      id: "ap68Fp",
      defaultMessage: [{
        "type": 0,
        "value": "Signs"
      }]
    }),
    defaultValue: signs,
    repeatable: true,
    withoutCreate: true,
    fieldName: 'signs',
    fields: [{
      name: 'word',
      type: 'heading-element',
      label: reactIntl.defineMessage({
        id: "fLdjGi",
        defaultMessage: [{
          "type": 0,
          "value": "Word of the week"
        }]
      })
    }, {
      name: 'description',
      type: 'text-element',
      label: reactIntl.defineMessage({
        id: "ZCe0r4",
        defaultMessage: [{
          "type": 0,
          "value": "Description"
        }]
      })
    }]
  }],
  fields: [{
    name: 'signSubtitle',
    type: 'heading-element',
    defaultValue: {
      body: 'Le mot de la semaine'
    },
    label: reactIntl.defineMessage({
      id: "Qe03Xz",
      defaultMessage: [{
        "type": 0,
        "value": "Sign Subtitle"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }]
}];

var styles$3 = {"container":"micromag-screen-urbania-recommendation-container","visualButton":"micromag-screen-urbania-recommendation-visualButton","close":"micromag-screen-urbania-recommendation-close","backgroundTextContainer":"micromag-screen-urbania-recommendation-backgroundTextContainer","background":"micromag-screen-urbania-recommendation-background","disabled":"micromag-screen-urbania-recommendation-disabled","hidden":"micromag-screen-urbania-recommendation-hidden","placeholder":"micromag-screen-urbania-recommendation-placeholder","content":"micromag-screen-urbania-recommendation-content","emptyCategory":"micromag-screen-urbania-recommendation-emptyCategory","empty":"micromag-screen-urbania-recommendation-empty","emptyText":"micromag-screen-urbania-recommendation-emptyText","backgroundText":"micromag-screen-urbania-recommendation-backgroundText","didAnimate":"micromag-screen-urbania-recommendation-didAnimate","animateFromBottom":"micromag-screen-urbania-recommendation-animateFromBottom","slideFromBottom":"micromag-screen-urbania-recommendation-slideFromBottom","animateFromTop":"micromag-screen-urbania-recommendation-animateFromTop","slideFromTop":"micromag-screen-urbania-recommendation-slideFromTop","emptyVisual":"micromag-screen-urbania-recommendation-emptyVisual","emptySponsor":"micromag-screen-urbania-recommendation-emptySponsor","footer":"micromag-screen-urbania-recommendation-footer","closeIcon":"micromag-screen-urbania-recommendation-closeIcon","textCard":"micromag-screen-urbania-recommendation-textCard","isPlaceholder":"micromag-screen-urbania-recommendation-isPlaceholder","appear":"micromag-screen-urbania-recommendation-appear","visualContainer":"micromag-screen-urbania-recommendation-visualContainer","visualBottom":"micromag-screen-urbania-recommendation-visualBottom","modalOpened":"micromag-screen-urbania-recommendation-modalOpened","sponsor":"micromag-screen-urbania-recommendation-sponsor","hasVisual":"micromag-screen-urbania-recommendation-hasVisual","sponsorPlaceholder":"micromag-screen-urbania-recommendation-sponsorPlaceholder","visualWrapper":"micromag-screen-urbania-recommendation-visualWrapper","transitioning":"micromag-screen-urbania-recommendation-transitioning","iconContainer":"micromag-screen-urbania-recommendation-iconContainer","icon":"micromag-screen-urbania-recommendation-icon","text":"micromag-screen-urbania-recommendation-text","categoryContainer":"micromag-screen-urbania-recommendation-categoryContainer","category":"micromag-screen-urbania-recommendation-category","categoryPlaceholder":"micromag-screen-urbania-recommendation-categoryPlaceholder","textContent":"micromag-screen-urbania-recommendation-textContent","titleContainer":"micromag-screen-urbania-recommendation-titleContainer","title":"micromag-screen-urbania-recommendation-title","date":"micromag-screen-urbania-recommendation-date","location":"micromag-screen-urbania-recommendation-location","description":"micromag-screen-urbania-recommendation-description","descriptionPlaceholder":"micromag-screen-urbania-recommendation-descriptionPlaceholder","layout":"micromag-screen-urbania-recommendation-layout"};

var propTypes$3 = {
  layout: PropTypes$1.string,
  category: PropTypes.headingElement,
  visual: PropTypes$1.shape({
    image: PropTypes.visualElement
  }),
  title: PropTypes.headingElement,
  date: PropTypes.textElement,
  location: PropTypes.textElement,
  description: PropTypes.textElement,
  sponsor: PropTypes.textElement,
  spacing: PropTypes$1.number,
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  className: PropTypes$1.string
};
var defaultProps$3 = {
  layout: null,
  category: null,
  visual: null,
  title: null,
  date: null,
  location: null,
  description: null,
  sponsor: null,
  spacing: 20,
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  className: null
};
var UrbaniaRecommendation = function UrbaniaRecommendation(_ref) {
  var layout = _ref.layout,
    category = _ref.category,
    visual = _ref.visual,
    title = _ref.title,
    date = _ref.date,
    location = _ref.location,
    description = _ref.description,
    sponsor = _ref.sponsor,
    spacing = _ref.spacing,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    className = _ref.className;
  var intl = reactIntl.useIntl();
  var trackScreenEvent = useTrackScreenEvent();
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var _usePlaybackContext = usePlaybackContext(),
    playing = _usePlaybackContext.playing,
    setPlaying = _usePlaybackContext.setPlaying,
    muted = _usePlaybackContext.muted,
    setMuted = _usePlaybackContext.setMuted,
    setControls = _usePlaybackContext.setControls,
    showControls = _usePlaybackContext.showControls,
    hideControls = _usePlaybackContext.hideControls;
  var mediaRef = usePlaybackMediaRef(current);
  var _useViewerInteraction = useViewerInteraction(),
    enableInteraction = _useViewerInteraction.enableInteraction,
    disableInteraction = _useViewerInteraction.disableInteraction;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic;
  var animateBackground = current && !isPlaceholder && !isStatic && !isPreview && !isEdit;
  var _useState = React.useState(animateBackground),
    _useState2 = _slicedToArray(_useState, 2),
    backgroundAnimationStarted = _useState2[0],
    setBackgroundAnimationStarted = _useState2[1];
  var _useState3 = React.useState(false),
    _useState4 = _slicedToArray(_useState3, 2),
    didAnimate = _useState4[0],
    setDidAnimate = _useState4[1];
  var _ref2 = visual || {},
    _ref2$image = _ref2.image,
    image = _ref2$image === void 0 ? null : _ref2$image; // note: image can be a video
  var _ref3 = image || {},
    _ref3$type = _ref3.type,
    type = _ref3$type === void 0 ? null : _ref3$type,
    _ref3$metadata = _ref3.metadata,
    videoMetadata = _ref3$metadata === void 0 ? null : _ref3$metadata;
  var _ref4 = videoMetadata || {},
    _ref4$width = _ref4.width,
    videoWidth = _ref4$width === void 0 ? 0 : _ref4$width,
    _ref4$height = _ref4.height,
    videoHeight = _ref4$height === void 0 ? 0 : _ref4$height;
  var hasVisual = image !== null;
  var isVideo = type === 'video';
  var isVideoLandscape = hasVisual && isVideo && videoWidth > videoHeight;
  var hasCategory = isTextFilled$1(category);
  var hasTitle = isTextFilled$1(title);
  var hasDate = isTextFilled$1(date);
  var hasLocation = isTextFilled$1(location);
  var hasDescription = isTextFilled$1(description);
  var hasSponsor = isTextFilled$1(sponsor);
  var hasTextCard = hasCategory || hasTitle || hasDate || hasLocation || hasDescription || hasSponsor;
  var backgroundPlaying = current && (isView || isEdit);
  var videoPlaying = current && (isView || isEdit) && playing;
  var mediaShouldLoad = current || active;
  var scrollingDisabled = !isView && !isEdit || !current;
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var _useState5 = React.useState(false),
    _useState6 = _slicedToArray(_useState5, 2),
    scrolledBottom = _useState6[0],
    setScrolledBottom = _useState6[1];
  var _useResizeObserver = useResizeObserver(),
    textContainerRef = _useResizeObserver.ref,
    _useResizeObserver$en = _useResizeObserver.entry.contentRect,
    textContainerRect = _useResizeObserver$en === void 0 ? null : _useResizeObserver$en;
  var _ref5 = textContainerRect || {},
    _ref5$width = _ref5.width,
    textContainerWidth = _ref5$width === void 0 ? 0 : _ref5$width,
    _ref5$height = _ref5.height,
    textContainerHeight = _ref5$height === void 0 ? 0 : _ref5$height;
  var _useState7 = React.useState(false),
    _useState8 = _slicedToArray(_useState7, 2),
    visualModalTransitioning = _useState8[0],
    setVisualModalTransitioning = _useState8[1];
  var _useState9 = React.useState(false),
    _useState10 = _slicedToArray(_useState9, 2),
    visualModalOpened = _useState10[0],
    setVisualModalOpened = _useState10[1];
  var visualModalClosed = !visualModalTransitioning && !visualModalOpened;
  var _ref6 = background || {},
    _ref6$text = _ref6.text,
    backgroundText = _ref6$text === void 0 ? null : _ref6$text;
  var _ref7 = backgroundText || {},
    _ref7$body = _ref7.body,
    backgroundTextBody = _ref7$body === void 0 ? null : _ref7$body,
    backgroundTextStyle = _ref7.textStyle;
  var finalBackgroundText = React.useMemo(function () {
    function distributeTextEqually(text) {
      var words = text !== null ? text.split(' ') : [];
      var numRows = 4;
      if (words.length < numRows / 2) {
        return Array(numRows).fill(text);
      }
      var halfNumWords = Math.ceil(words.length / 2);
      var firstHalf = words.slice(0, halfNumWords).join(' ');
      var secondHalf = words.slice(halfNumWords).join(' ');
      return [firstHalf, secondHalf, firstHalf, secondHalf];
    }
    var textArray = distributeTextEqually(backgroundTextBody);

    // @TODO: move container div here to avoid double map
    var textElements = (textArray || []).map(function (line) {
      return /*#__PURE__*/React.createElement("span", null, line);
    });
    return textElements;
  }, [backgroundTextBody]);

  // intro animation
  React.useEffect(function () {
    var id = null;
    if (backgroundAnimationStarted) {
      id = setTimeout(function () {
        setBackgroundAnimationStarted(false);
        setDidAnimate(true);
      }, 1600);
    }
    return function () {
      clearTimeout(id);
    };
  }, [backgroundAnimationStarted, animateBackground, setDidAnimate, setBackgroundAnimationStarted]);
  React.useEffect(function () {
    if (isView && !isStatic && current) {
      setBackgroundAnimationStarted(true);
    } else {
      setBackgroundAnimationStarted(false);
    }
  }, [isView, current, setBackgroundAnimationStarted]);

  // scroll events
  var onScrolledBottom = React.useCallback(function (_ref8) {
    var initial = _ref8.initial;
    if (initial) {
      trackScreenEvent('scroll', 'Screen');
    }
    setScrolledBottom(true);
  }, [trackScreenEvent]);
  var onScrolledNotBottom = React.useCallback(function () {
    setScrolledBottom(false);
  }, [setScrolledBottom]);

  // modal
  React.useEffect(function () {
    var id = null;
    if (visualModalTransitioning) {
      id = setTimeout(function () {
        setVisualModalTransitioning(false);
        setVisualModalOpened(true);
      }, 400);
    }
    if (!current) {
      setVisualModalOpened(false);
    }
    return function () {
      clearTimeout(id);
    };
  }, [visualModalTransitioning, setVisualModalTransitioning, current]);
  var onClickVisual = React.useCallback(function () {
    if (!visualModalOpened) {
      setVisualModalTransitioning(true);
    }
    if (muted && isVideo) {
      setMuted(false);
    }
  }, [setVisualModalOpened]);
  var onCloseModal = React.useCallback(function () {
    if (visualModalTransitioning) {
      setVisualModalTransitioning(false);
    }
    setVisualModalOpened(false);
  }, [setVisualModalOpened]);
  React.useEffect(function () {
    if (visualModalOpened) {
      disableInteraction();
    } else {
      enableInteraction();
    }
  }, [current, visualModalOpened]);
  React.useEffect(function () {
    var keyup = function keyup(e) {
      if (e.key === 'Escape') {
        if (visualModalOpened) {
          onCloseModal();
        }
      }
    };
    document.addEventListener('keyup', keyup);
    return function () {
      document.removeEventListener('keyup', keyup);
    };
  }, [visualModalOpened, onCloseModal]);

  // Modal video

  React.useEffect(function () {
    if (current && !backgroundAnimationStarted) {
      setPlaying(true);
    }
  }, [current, backgroundAnimationStarted]);
  React.useEffect(function () {
    if (!current) {
      return function () {};
    }
    if (visualModalOpened && isVideo) {
      setControls(true);
    } else {
      setControls(false);
    }
    return function () {
      if (visualModalOpened) {
        setControls(false);
      }
    };
  }, [current, setControls, visualModalOpened, isVideo]);
  var viewerContainer = useViewerContainer();
  var _useActivityDetector = useActivityDetector({
      element: viewerContainer,
      disabled: !isView,
      timeout: 2000
    }),
    activityDetected = _useActivityDetector.detected;
  var toggleControlsVisibility = React.useCallback(function () {
    if (activityDetected && isVideo && visualModalOpened) {
      showControls();
    } else {
      hideControls();
    }
  }, [activityDetected, showControls, isVideo, hideControls]);
  useDebounced$1(toggleControlsVisibility, activityDetected, 1000);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$3.container, _defineProperty(_defineProperty({}, className, className !== null), styles$3.isPlaceholder, isPlaceholder)]),
    "data-screen-ready": true
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$3.content
  }, /*#__PURE__*/React.createElement(Scroll$1, {
    width: width,
    height: height,
    disabled: backgroundAnimationStarted || scrollingDisabled,
    onScrolledBottom: onScrolledBottom,
    onScrolledNotBottom: onScrolledNotBottom,
    verticalAlign: "middle",
    withShadow: !visualModalOpened,
    withArrow: !visualModalOpened
  }, /*#__PURE__*/React.createElement(Layout$1, {
    className: styles$3.layout,
    width: width
    // height={height}
    ,
    style: !isPlaceholder ? {
      padding: spacing,
      paddingTop: (!isPreview ? viewerTopHeight : 0) + spacing / 2,
      paddingBottom: (current && !isPreview ? viewerBottomHeight : 0) + spacing / 2,
      minHeight: height // probably not the best
    } : null
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    key: "header",
    style: {
      paddingBottom: spacing
    },
    className: classNames([styles$3.headerContainer])
  }, /*#__PURE__*/React.createElement(Header, header)) : null, !isPlaceholder ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-top"
  }) : null, visualModalOpened ? /*#__PURE__*/React.createElement(Button$1, {
    className: styles$3.close,
    onClick: onCloseModal
  }, /*#__PURE__*/React.createElement(Close$1, {
    className: styles$3.closeIcon
  })) : null, hasTextCard || isPlaceholder || isEdit ? /*#__PURE__*/React.createElement(Container$1, {
    className: classNames([styles$3.textCard, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, styles$3.isPlaceholder, isPlaceholder), styles$3.visualBottom, layout === 'bottom'), styles$3.appear, backgroundAnimationStarted), styles$3.modalOpened, visualModalTransitioning || visualModalOpened), styles$3.hidden, !current && isView && !isPreview)])
  }, /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$3.visualContainer, _defineProperty({}, styles$3.modalOpened, visualModalTransitioning || visualModalOpened)])
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "visual",
    placeholder: /*#__PURE__*/React.createElement(Image$1$2, {
      className: styles$3.visualPlaceholder
    }),
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "JzSBzL",
      defaultMessage: [{
        "type": 0,
        "value": "Visual"
      }]
    }),
    emptyClassName: classNames([styles$3.empty, styles$3.emptyVisual]),
    isEmpty: !hasVisual
  }, hasVisual ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$3.visualWrapper, _defineProperty({}, styles$3.modalOpened, visualModalTransitioning || visualModalOpened)]),
    style: visualModalTransitioning || visualModalOpened ? {
      width: width,
      height: height
    } : {
      width: textContainerWidth,
      height: 'auto'
    }
  }, /*#__PURE__*/React.createElement(Button$1, {
    className: classNames([styles$3.visualButton, _defineProperty({}, styles$3.transitioning, visualModalTransitioning)]),
    onClick: onClickVisual,
    disabled: isPreview || backgroundAnimationStarted || visualModalOpened,
    focusable: current && !isPreview && !visualModalOpened,
    "aria-label": intl.formatMessage({
      id: "XHO5Ua",
      defaultMessage: [{
        "type": 0,
        "value": "Expand visual"
      }]
    }),
    "aria-pressed": visualModalOpened,
    style: {
      transform: visualModalTransitioning ? "scale(".concat(width / textContainerWidth, ")") : null
    }
  }, isVideo ? /*#__PURE__*/React.createElement(Visual$1, {
    media: image,
    mediaRef: mediaRef,
    width: visualModalTransitioning || visualModalOpened ? width : (width - 40) * 0.9 + 1 // ((width - margins) * card width + gapfix )
    ,
    height: visualModalTransitioning || visualModalOpened ? height : 250,
    resolution: resolution,
    objectFit: {
      fit: (visualModalTransitioning || visualModalOpened) && isVideoLandscape ? 'contain' : 'cover'
    },
    shouldLoad: mediaShouldLoad,
    muted: muted || !visualModalOpened,
    withoutVideo: isPreview,
    playing: videoPlaying
  }) : /*#__PURE__*/React.createElement(Visual$1, {
    media: image,
    width: visualModalOpened ? width : textContainerWidth,
    resolution: resolution,
    active: active,
    shouldLoad: mediaShouldLoad
  }), visualModalClosed ? /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$3.iconContainer, _defineProperty({}, styles$3.visualBottom, layout === 'bottom')])
  }, isVideo ? /*#__PURE__*/React.createElement(MuteIcon$1, {
    color: "#000",
    className: styles$3.icon
  }) : /*#__PURE__*/React.createElement(FullscreenIcon$1, {
    color: "#000",
    className: styles$3.icon
  })) : null)) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "sponsor",
    placeholder: /*#__PURE__*/React.createElement(TextPlaceholder$1, {
      className: styles$3.sponsorPlaceholder
    })
  }, hasSponsor ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: classNames([styles$3.sponsor, _defineProperty({}, styles$3.hasVisual, hasVisual)])
  }, sponsor)) : null)), /*#__PURE__*/React.createElement("div", {
    ref: textContainerRef,
    className: styles$3.text
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "category",
    placeholder: /*#__PURE__*/React.createElement(Title$3, {
      className: styles$3.categoryPlaceholder
    }),
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "I5+AHN",
      defaultMessage: [{
        "type": 0,
        "value": "Category"
      }]
    }),
    emptyClassName: styles$3.emptyCategory,
    isEmpty: !hasCategory
  }, hasCategory ? /*#__PURE__*/React.createElement("div", {
    className: styles$3.categoryContainer,
    style: {
      width: textContainerHeight
    }
  }, /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$3.category
  }, category))) : null), /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$3.textContent, _defineProperty({}, styles$3.isPlaceholder, isPlaceholder)])
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "title",
    placeholder: "title",
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "2c1WFV",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    }),
    emptyClassName: styles$3.emptyText,
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement("div", {
    className: styles$3.titleContainer
  }, /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$3.title
  }, title))) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "date",
    placeholder: /*#__PURE__*/React.createElement(TextPlaceholder$1, {
      className: styles$3.datePlaceholder
    })
  }, hasDate ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$3.date
  }, date)) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "location",
    placeholder: /*#__PURE__*/React.createElement(TextPlaceholder$1, {
      className: styles$3.locationPlaceholder
    })
  }, hasLocation ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$3.location
  }, location)) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "description",
    placeholder: /*#__PURE__*/React.createElement(TextPlaceholder$1, {
      className: styles$3.descriptionPlaceholder
    }),
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "EQdIAR",
      defaultMessage: [{
        "type": 0,
        "value": "Description"
      }]
    }),
    emptyClassName: styles$3.emptyText,
    isEmpty: !hasDescription
  }, hasDescription ? /*#__PURE__*/React.createElement(Text$1, Object.assign({
    className: styles$3.description
  }, description)) : null)))) : null, !isPlaceholder ? /*#__PURE__*/React.createElement(Spacer, {
    key: "spacer-cta-bottom"
  }) : null, !isPlaceholder && hasFooter ? /*#__PURE__*/React.createElement("div", {
    key: "footer",
    className: classNames([styles$3.footer, _defineProperty({}, styles$3.disabled, !scrolledBottom && !visualModalOpened)]),
    style: {
      paddingTop: spacing,
      paddingLeft: Math.max(0, viewerBottomSidesWidth - spacing),
      paddingRight: Math.max(0, viewerBottomSidesWidth - spacing)
    }
  }, /*#__PURE__*/React.createElement(Footer, footerProps)) : null))), !isPlaceholder ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying && !visualModalOpened,
    muted: muted || visualModalOpened,
    shouldLoad: mediaShouldLoad,
    mediaRef: mediaRef,
    withoutVideo: isPreview,
    className: styles$3.background
  }), backgroundText !== null && finalBackgroundText.length > 0 ? /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$3.backgroundTextContainer
  }, (finalBackgroundText || []).map(function (line, i) {
    return /*#__PURE__*/React.createElement("div", {
      key: "reco-background-text-".concat(i + 1),
      className: classNames([styles$3.backgroundText], _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, styles$3.hidden, !current && isView && !isPreview), styles$3.didAnimate, didAnimate), styles$3.animateFromBottom, backgroundAnimationStarted && i % 2 !== 0), styles$3.animateFromTop, backgroundAnimationStarted && i % 2 === 0)),
      style: _objectSpread$1({
        animationDelay: "".concat(i * 100, "ms")
      }, getStyleFromText$1(backgroundTextStyle))
    }, line);
  })) : null) : null);
};
UrbaniaRecommendation.propTypes = propTypes$3;
UrbaniaRecommendation.defaultProps = defaultProps$3;
var UrbaniaRecommendation$1 = UrbaniaRecommendation;

var definition$3 = [{
  id: 'urbania-recommendation',
  type: 'screen',
  namespaces: ['urbania', 'bayard'],
  group: {
    label: reactIntl.defineMessage({
      id: "oPjl8f",
      defaultMessage: [{
        "type": 0,
        "value": "Urbania"
      }]
    }),
    order: 10
  },
  title: reactIntl.defineMessage({
    id: "sUP5BO",
    defaultMessage: [{
      "type": 0,
      "value": "Urbania recommendation"
    }]
  }),
  component: UrbaniaRecommendation$1,
  layouts: ['top', 'bottom'],
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'sponsor',
    type: 'text-element',
    label: reactIntl.defineMessage({
      id: "WY14Zu",
      defaultMessage: [{
        "type": 0,
        "value": "Sponsor"
      }]
    })
  }, {
    name: 'visual',
    type: 'fields',
    isList: true,
    label: reactIntl.defineMessage({
      id: "HwqzVR",
      defaultMessage: [{
        "type": 0,
        "value": "Visual"
      }]
    }),
    fields: [{
      name: 'image',
      type: 'visual',
      label: reactIntl.defineMessage({
        id: "xT/onn",
        defaultMessage: [{
          "type": 0,
          "value": "Image"
        }]
      })
    }]
  }, {
    name: 'category',
    type: 'heading-element',
    label: reactIntl.defineMessage({
      id: "4grcMU",
      defaultMessage: [{
        "type": 0,
        "value": "Category"
      }]
    })
  }, {
    name: 'title',
    type: 'heading-element',
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'date',
    type: 'text-element',
    label: reactIntl.defineMessage({
      id: "yEG9zh",
      defaultMessage: [{
        "type": 0,
        "value": "Date"
      }]
    })
  }, {
    name: 'location',
    type: 'text-element',
    label: reactIntl.defineMessage({
      id: "zLxBdl",
      defaultMessage: [{
        "type": 0,
        "value": "Location"
      }]
    })
  }, {
    name: 'description',
    type: 'text-element',
    label: reactIntl.defineMessage({
      id: "Y7bs1v",
      defaultMessage: [{
        "type": 0,
        "value": "Description"
      }]
    })
  }, {
    name: 'background',
    type: 'background-recommendation',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
}];

var styles$2 = {"container":"micromag-screen-urbania-trivia-container","fullscreen":"micromag-screen-urbania-trivia-fullscreen","image":"micromag-screen-urbania-trivia-image","placeholder":"micromag-screen-urbania-trivia-placeholder","coinnerntent":"micromag-screen-urbania-trivia-coinnerntent","background":"micromag-screen-urbania-trivia-background","disabled":"micromag-screen-urbania-trivia-disabled","hidden":"micromag-screen-urbania-trivia-hidden","content":"micromag-screen-urbania-trivia-content","empty":"micromag-screen-urbania-trivia-empty","itemsContainer":"micromag-screen-urbania-trivia-itemsContainer","videoContainer":"micromag-screen-urbania-trivia-videoContainer","video":"micromag-screen-urbania-trivia-video","isCustomBackground":"micromag-screen-urbania-trivia-isCustomBackground","isAnimated":"micromag-screen-urbania-trivia-isAnimated","spin":"micromag-screen-urbania-trivia-spin","heading":"micromag-screen-urbania-trivia-heading","hideHeading":"micromag-screen-urbania-trivia-hideHeading","callToAction":"micromag-screen-urbania-trivia-callToAction","bottom":"micromag-screen-urbania-trivia-bottom","visible":"micromag-screen-urbania-trivia-visible","withGradient":"micromag-screen-urbania-trivia-withGradient","mediaControls":"micromag-screen-urbania-trivia-mediaControls","videoPlaceholder":"micromag-screen-urbania-trivia-videoPlaceholder","bottomContent":"micromag-screen-urbania-trivia-bottomContent","emptyContainer":"micromag-screen-urbania-trivia-emptyContainer"};

var AnimeLinesGrey = "data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201083.95%201920%22%3E%20%20%20%20%3Cg%20id%3D%22a%22%2F%3E%20%20%20%20%3Cg%20id%3D%22b%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22c%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M1083.95%2C0h-103.4l-438.55%2C959.95L1083.95%2C109.31V0Zm0%2C295L542.02%2C959.96l541.93-498.87v-166.08Zm0%2C274.99l-541.92%2C389.98%2C541.92-279.64v-110.34Zm0%2C190.53l-541.92%2C199.46%2C541.92-110.89v-88.57Zm0%2C158.17l-541.92%2C41.31%2C541.92%2C41.31v-82.61Zm0%2C152.21l-541.92-110.89%2C541.92%2C199.46v-88.58Zm0%2C168.77l-541.92-279.64%2C541.92%2C389.98v-110.34Zm0%2C219.25l-541.93-498.87%2C541.93%2C664.95v-166.08Zm0%2C351.77L542%2C960.05l438.55%2C959.95h103.4v-109.31ZM854.8%2C0h-138.91l-173.9%2C959.94L854.8%2C0Zm0%2C1920l-312.81-959.94%2C173.9%2C959.94h138.91ZM606.75%2C0h-129.56l64.78%2C959.94L606.75%2C0Zm0%2C1920l-64.78-959.94-64.78%2C959.94h129.56Zm-64.79-960.06L368.06%2C0H229.15l312.81%2C959.94Zm0%2C.12L229.15%2C1920h138.91l173.9-959.94Zm-.01-.11L103.4%2C0H0V109.31L541.94%2C959.95Zm0%2C.11L0%2C1810.69v109.31H103.4l438.55-959.95Zm-.01-.1L0%2C295.01v166.08l541.93%2C498.87Zm0%2C.09L0%2C1458.91v166.08L541.93%2C960.04Zm-.01-.07L0%2C570v110.34l541.92%2C279.63Zm0%2C.02L0%2C760.52v88.57l541.92%2C110.89Zm0%2C.02L0%2C918.69v82.61l541.92-41.31Zm0%2C.02L0%2C1070.9v88.57l541.92-199.46Zm0%2C.02L0%2C1239.66v110.34l541.92-389.97Z%22%20fill%3D%22hsla%280%2C0%25%2C100%25%2C.6%29%22%2F%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E";

var AnimeLines = "data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201083.95%201920%22%3E%20%20%20%20%3Cg%20id%3D%22a%22%2F%3E%20%20%20%20%3Cg%20id%3D%22b%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22c%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M1083.95%2C0h-103.4l-438.55%2C959.95L1083.95%2C109.31V0Zm0%2C295L542.02%2C959.96l541.93-498.87v-166.08Zm0%2C274.99l-541.92%2C389.98%2C541.92-279.64v-110.34Zm0%2C190.53l-541.92%2C199.46%2C541.92-110.89v-88.57Zm0%2C158.17l-541.92%2C41.31%2C541.92%2C41.31v-82.61Zm0%2C152.21l-541.92-110.89%2C541.92%2C199.46v-88.58Zm0%2C168.77l-541.92-279.64%2C541.92%2C389.98v-110.34Zm0%2C219.25l-541.93-498.87%2C541.93%2C664.95v-166.08Zm0%2C351.77L542%2C960.05l438.55%2C959.95h103.4v-109.31ZM854.8%2C0h-138.91l-173.9%2C959.94L854.8%2C0Zm0%2C1920l-312.81-959.94%2C173.9%2C959.94h138.91ZM606.75%2C0h-129.56l64.78%2C959.94L606.75%2C0Zm0%2C1920l-64.78-959.94-64.78%2C959.94h129.56Zm-64.79-960.06L368.06%2C0H229.15l312.81%2C959.94Zm0%2C.12L229.15%2C1920h138.91l173.9-959.94Zm-.01-.11L103.4%2C0H0V109.31L541.94%2C959.95Zm0%2C.11L0%2C1810.69v109.31H103.4l438.55-959.95Zm-.01-.1L0%2C295.01v166.08l541.93%2C498.87Zm0%2C.09L0%2C1458.91v166.08L541.93%2C960.04Zm-.01-.07L0%2C570v110.34l541.92%2C279.63Zm0%2C.02L0%2C760.52v88.57l541.92%2C110.89Zm0%2C.02L0%2C918.69v82.61l541.92-41.31Zm0%2C.02L0%2C1070.9v88.57l541.92-199.46Zm0%2C.02L0%2C1239.66v110.34l541.92-389.97Z%22%20fill%3D%22%2312bbd7%22%2F%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E";

var defaultBackground = {
  image: {
    type: 'image',
    url: AnimeLines,
    width: 1083,
    height: 1919
  },
  color: '#00cbff'
};
var placeholderBackground = {
  image: {
    type: 'image',
    url: AnimeLinesGrey,
    width: 1083,
    height: 1919
  },
  color: null
};
var propTypes$2 = {
  layout: PropTypes$1.oneOf(['middle', 'full']),
  title: PropTypes.headingElement,
  video: PropTypes.videoElement,
  gotoNextScreenOnEnd: PropTypes$1.bool,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  padding: PropTypes$1.number,
  mediaRef: PropTypes$1.func,
  className: PropTypes$1.string
};
var defaultProps$2 = {
  layout: 'full',
  title: null,
  video: null,
  gotoNextScreenOnEnd: false,
  background: null,
  current: true,
  active: true,
  spacing: 20,
  padding: 20,
  mediaRef: null,
  className: null
};
var UrbaniaTrivia = function UrbaniaTrivia(_ref) {
  var layout = _ref.layout,
    title = _ref.title,
    video = _ref.video,
    gotoNextScreenOnEnd = _ref.gotoNextScreenOnEnd,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    spacing = _ref.spacing,
    padding = _ref.padding,
    customMediaRef = _ref.mediaRef,
    className = _ref.className;
  var trackScreenMedia = useTrackScreenMedia('video');
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _useViewerContext = useViewerContext(),
    viewerBottomHeight = _useViewerContext.bottomHeight;
  var _useViewerNavigation = useViewerNavigation(),
    gotoNextScreen = _useViewerNavigation.gotoNextScreen;
  var hasTitle = isTextFilled$1(title);
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var shouldGotoNextScreenOnEnd = gotoNextScreenOnEnd && isView && current;

  // get resized video style props
  var _ref2 = video || {},
    _ref2$autoPlay = _ref2.autoPlay,
    autoPlay = _ref2$autoPlay === void 0 ? true : _ref2$autoPlay,
    _ref2$media = _ref2.media,
    videoMedia = _ref2$media === void 0 ? null : _ref2$media,
    _ref2$closedCaptions = _ref2.closedCaptions,
    closedCaptions = _ref2$closedCaptions === void 0 ? null : _ref2$closedCaptions,
    _ref2$withSeekBar = _ref2.withSeekBar,
    withSeekBar = _ref2$withSeekBar === void 0 ? false : _ref2$withSeekBar,
    _ref2$withControls = _ref2.withControls,
    withControls = _ref2$withControls === void 0 ? false : _ref2$withControls,
    _ref2$color = _ref2.color,
    color = _ref2$color === void 0 ? null : _ref2$color,
    _ref2$progressColor = _ref2.progressColor,
    progressColor = _ref2$progressColor === void 0 ? null : _ref2$progressColor;
  var _usePlaybackContext = usePlaybackContext(),
    playing = _usePlaybackContext.playing,
    muted = _usePlaybackContext.muted,
    setControls = _usePlaybackContext.setControls,
    setControlsTheme = _usePlaybackContext.setControlsTheme,
    setPlaying = _usePlaybackContext.setPlaying,
    showControls = _usePlaybackContext.showControls,
    hideControls = _usePlaybackContext.hideControls;
  var mediaRef = usePlaybackMediaRef(current);
  React.useEffect(function () {
    if (!current) {
      return function () {};
    }
    if (withControls || withSeekBar) {
      setControls(true);
      setControlsTheme({
        seekBarOnly: withSeekBar && !withControls
      });
    } else {
      setControls(false);
    }
    return function () {
      if (withControls || withSeekBar) {
        setControls(false);
      }
    };
  }, [current, withControls, setControls, withSeekBar, color, progressColor]);
  React.useEffect(function () {
    if (customMediaRef !== null) {
      customMediaRef(mediaRef.current);
    }
  }, [mediaRef.current]);

  // Get api state updates from callback
  var _useState = React.useState(null),
    _useState2 = _slicedToArray(_useState, 2),
    currentTime = _useState2[0],
    setCurrentTime = _useState2[1];
  var _useState3 = React.useState(null),
    _useState4 = _slicedToArray(_useState3, 2),
    duration = _useState4[0],
    setDuration = _useState4[1];
  React.useEffect(function () {
    if (current && autoPlay && !playing) {
      setPlaying(true);
    }
  }, [current, autoPlay]);
  var onTimeUpdate = React.useCallback(function (time) {
    setCurrentTime(time);
  }, [setDuration, duration]);
  var onProgressStep = React.useCallback(function (step) {
    trackScreenMedia(video, "progress_".concat(Math.round(step * 100, 10), "%"));
  }, [trackScreenMedia, video]);
  var onDurationChange = React.useCallback(function (dur) {
    setDuration(dur);
  }, [setDuration]);
  var onPlay = React.useCallback(function (_ref3) {
    var initial = _ref3.initial;
    trackScreenMedia(video, initial ? 'play' : 'resume');
  }, [trackScreenMedia, video]);
  var onPause = React.useCallback(function (_ref4) {
    var midway = _ref4.midway;
    trackScreenMedia(video, midway ? 'pause' : 'ended');
  }, [trackScreenMedia, video]);
  var onSeeked = React.useCallback(function (time) {
    if (time > 0) {
      trackScreenMedia(video, 'seek');
    }
  }, [trackScreenMedia, video]);
  var onEnded = React.useCallback(function () {
    if (current && shouldGotoNextScreenOnEnd) {
      gotoNextScreen();
    }
    if (current) {
      setPlaying(false);
    }
  }, [current, shouldGotoNextScreenOnEnd, gotoNextScreen, setPlaying]);
  var viewerContainer = useViewerContainer();
  var _useActivityDetector = useActivityDetector({
      element: viewerContainer,
      disabled: !current || !isView,
      timeout: 2000
    }),
    activityDetected = _useActivityDetector.detected;
  React.useEffect(function () {
    if (!current) {
      return;
    }
    if (activityDetected) {
      showControls();
    } else {
      hideControls();
    }
  }, [activityDetected, showControls, hideControls]);
  var fullscreen = layout === 'full';
  var _ref5 = background || {},
    _ref5$image = _ref5.image,
    backgroundImage = _ref5$image === void 0 ? null : _ref5$image,
    _ref5$video = _ref5.video,
    backgroundVideo = _ref5$video === void 0 ? null : _ref5$video;
  var isCustomBackground = background === null || backgroundImage === null && backgroundVideo === null;
  var isAnimatedBackground = !isStatic && !isPreview && isCustomBackground;
  var hasVideo = video !== null;
  var _useState5 = React.useState(hasVideo),
    _useState6 = _slicedToArray(_useState5, 2),
    ready = _useState6[0],
    setReady = _useState6[1];
  var finalVideo = React.useMemo(function () {
    return hasVideo ? _objectSpread$1(_objectSpread$1({}, video), {}, {
      autoPlay: !isPreview && !isStatic && !isCapture && autoPlay && current
    }) : null;
  }, [hasVideo, video, isPreview, isStatic, isCapture, autoPlay, current]);
  var _ref6 = videoMedia || {},
    _ref6$metadata = _ref6.metadata,
    videoMetadata = _ref6$metadata === void 0 ? null : _ref6$metadata,
    _ref6$url = _ref6.url,
    videoUrl = _ref6$url === void 0 ? null : _ref6$url,
    _ref6$thumbnail_url = _ref6.thumbnail_url,
    thumbnailUrl = _ref6$thumbnail_url === void 0 ? null : _ref6$thumbnail_url;
  var hasVideoUrl = videoUrl !== null;
  var _ref7 = videoMetadata || {},
    _ref7$width = _ref7.width,
    videoWidth = _ref7$width === void 0 ? 0 : _ref7$width,
    _ref7$height = _ref7.height,
    videoHeight = _ref7$height === void 0 ? 0 : _ref7$height;
  var _useDimensionObserver = useDimensionObserver(),
    titleRef = _useDimensionObserver.ref,
    _useDimensionObserver2 = _useDimensionObserver.height,
    titleHeight = _useDimensionObserver2 === void 0 ? 0 : _useDimensionObserver2;
  var videoMaxHeight = height - titleHeight - (padding ? padding * 2 : 40);
  var _getSizeWithinBounds = getSizeWithinBounds(videoWidth, videoHeight, width, videoMaxHeight, {
      cover: fullscreen
    }),
    resizedVideoWidth = _getSizeWithinBounds.width,
    resizedVideoHeight = _getSizeWithinBounds.height;
  var resizedVideoLeft = -(resizedVideoWidth - width) / 2;
  // const resizedVideoTop = -(resizedVideoHeight - videoMaxHeight) / 2;

  var verticalVideo = resizedVideoHeight > resizedVideoWidth;
  var finalBackground = React.useMemo(function () {
    if (isArray(background) && background.length > 0) {
      return background;
    }
    var _ref8 = background || {},
      _ref8$image = _ref8.image,
      bgImage = _ref8$image === void 0 ? null : _ref8$image,
      _ref8$video = _ref8.video,
      bgVideo = _ref8$video === void 0 ? null : _ref8$video,
      _ref8$color = _ref8.color,
      bgColor = _ref8$color === void 0 ? null : _ref8$color;
    if (bgImage !== null || bgVideo !== null) {
      return _objectSpread$1(_objectSpread$1({}, defaultBackground), background);
    }
    return _objectSpread$1(_objectSpread$1({}, defaultBackground), bgColor !== null ? {
      color: bgColor
    } : null);
  }, [background]);
  var placeholderProps = fullscreen ? {
    width: '100%',
    height: '100%'
  } : {
    width: '100%'
  };
  React.useEffect(function () {
    setReady(!hasVideoUrl);
  }, [videoUrl, hasVideoUrl, setReady]);
  var onVideoReady = React.useCallback(function () {
    setReady(true);
  }, [setReady]);
  var items = [/*#__PURE__*/React.createElement(Container$1, {
    className: styles$2.itemsContainer,
    style: {
      marginTop: -spacing / 2
    }
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "heading",
    className: styles$2.headingScreenElement,
    placeholder: /*#__PURE__*/React.createElement(Title$3, Object.assign({
      className: styles$2.placeholder
    }, placeholderProps)),
    empty: /*#__PURE__*/React.createElement("div", {
      className: styles$2.emptyContainer
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$2.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "oAtOlP",
      defaultMessage: [{
        "type": 0,
        "value": "Heading"
      }]
    }))),
    isEmpty: !hasTitle
  }, hasTitle ? /*#__PURE__*/React.createElement("div", {
    ref: titleRef
  }, /*#__PURE__*/React.createElement(Heading$1, Object.assign({
    className: styles$2.heading
    // body={body}
  }, title))) : null), /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "video",
    className: styles$2.videoScreenElement,
    placeholder: /*#__PURE__*/React.createElement(Video$1$1, Object.assign({
      className: styles$2.videoPlaceholder
    }, placeholderProps)),
    empty: /*#__PURE__*/React.createElement("div", {
      className: styles$2.emptyContainer
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$2.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "3ext9Q",
      defaultMessage: [{
        "type": 0,
        "value": "Video"
      }]
    }))),
    isEmpty: !hasVideoUrl
  }, hasVideoUrl ? /*#__PURE__*/React.createElement("div", {
    className: styles$2.videoContainer,
    style: {
      width: Math.min(width, resizedVideoWidth),
      height: resizedVideoHeight,
      left: resizedVideoLeft > 0 ? resizedVideoLeft : null,
      maxHeight: videoMaxHeight
    }
  }, isPreview || isCapture ? /*#__PURE__*/React.createElement(Image$1$1, {
    className: styles$2.image,
    media: {
      url: thumbnailUrl,
      metadata: {
        width: videoWidth,
        height: videoHeight
      }
    },
    width: Math.min(width, resizedVideoWidth),
    height: resizedVideoHeight,
    resolution: resolution
  }) : /*#__PURE__*/React.createElement(Video$1, Object.assign({}, finalVideo, {
    mediaRef: mediaRef,
    paused: !current || !playing,
    muted: muted,
    width: resizedVideoWidth,
    height: resizedVideoHeight,
    className: styles$2.video,
    onReady: onVideoReady,
    onPlay: onPlay,
    onPause: onPause,
    onTimeUpdate: onTimeUpdate,
    onProgressStep: onProgressStep,
    onDurationChange: onDurationChange,
    onSeeked: onSeeked,
    onEnded: onEnded,
    focusable: current && isView,
    shouldLoad: mediaShouldLoad
  })), current && !isPlaceholder ? /*#__PURE__*/React.createElement("div", {
    key: "bottom-content",
    className: styles$2.bottomContent,
    style: {
      transform: "translate(0, -".concat(viewerBottomHeight, "px)")
    }
  }, closedCaptions !== null && !isPreview && !isCapture && !isStatic ? /*#__PURE__*/React.createElement(ClosedCaptions$1, {
    className: styles$2.closedCaptions,
    media: closedCaptions,
    currentTime: currentTime
  }) : null) : null) : null))];
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$2.container, _defineProperty(_defineProperty({}, className, className !== null), styles$2.fullscreen, fullscreen)]),
    "data-screen-ready": isStatic || isCapture || ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$2.content
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$2.inner,
    style: verticalVideo ? {
      justifyContent: 'flex-start',
      marginTop: spacing * 2
    } : null
  }, items)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: finalBackground,
    className: classNames([styles$2.background, _defineProperty(_defineProperty(_defineProperty({}, className, className !== null), styles$2.isCustomBackground, isCustomBackground), styles$2.isAnimated, isAnimatedBackground)]),
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    shouldLoad: mediaShouldLoad,
    withoutVideo: isPreview
  }) : /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: placeholderBackground,
    className: styles$2.background,
    width: width,
    height: height,
    resolution: resolution,
    withoutVideo: isPreview
  }));
};
UrbaniaTrivia.propTypes = propTypes$2;
UrbaniaTrivia.defaultProps = defaultProps$2;
var UrbaniaTriviaScreen = UrbaniaTrivia;

var definition$2 = {
  id: 'urbania-trivia',
  type: 'screen',
  namespaces: ['urbania'],
  group: {
    label: reactIntl.defineMessage({
      id: "oPjl8f",
      defaultMessage: [{
        "type": 0,
        "value": "Urbania"
      }]
    }),
    order: 10
  },
  title: reactIntl.defineMessage({
    id: "zDdDqI",
    defaultMessage: [{
      "type": 0,
      "value": "Urbania trivia"
    }]
  }),
  component: UrbaniaTriviaScreen,
  fields: [{
    name: 'title',
    type: 'heading-element',
    label: reactIntl.defineMessage({
      id: "N25iDO",
      defaultMessage: [{
        "type": 0,
        "value": "Title"
      }]
    })
  }, {
    name: 'video',
    type: 'video-element',
    defaultValue: {
      autoPlay: true
    },
    label: reactIntl.defineMessage({
      id: "tvl2Zc",
      defaultMessage: [{
        "type": 0,
        "value": "Video"
      }]
    })
  }, {
    name: 'gotoNextScreenOnEnd',
    type: 'toggle',
    defaultValue: false,
    label: reactIntl.defineMessage({
      id: "n8zmLY",
      defaultMessage: [{
        "type": 0,
        "value": "Go to next screen on end"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }]
};

var styles$1 = {"unmuteAndPlayButton":"micromag-screen-video-unmuteAndPlayButton","container":"micromag-screen-video-container","fullscreen":"micromag-screen-video-fullscreen","image":"micromag-screen-video-image","video":"micromag-screen-video-video","placeholder":"micromag-screen-video-placeholder","inner":"micromag-screen-video-inner","empty":"micromag-screen-video-empty","emptyContainer":"micromag-screen-video-emptyContainer","background":"micromag-screen-video-background","disabled":"micromag-screen-video-disabled","hidden":"micromag-screen-video-hidden","content":"micromag-screen-video-content","header":"micromag-screen-video-header","bottom":"micromag-screen-video-bottom","videoContainer":"micromag-screen-video-videoContainer"};

var propTypes$1 = {
  layout: PropTypes$1.oneOf(['middle', 'full']),
  video: PropTypes.videoElement,
  gotoNextScreenOnEnd: PropTypes$1.bool,
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  spacing: PropTypes$1.number,
  mediaRef: PropTypes$1.func,
  className: PropTypes$1.string
};
var defaultProps$1 = {
  layout: 'middle',
  video: null,
  gotoNextScreenOnEnd: false,
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  spacing: 20,
  mediaRef: null,
  className: null
};
var VideoScreen = function VideoScreen(_ref) {
  var layout = _ref.layout,
    video = _ref.video,
    gotoNextScreenOnEnd = _ref.gotoNextScreenOnEnd,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    spacing = _ref.spacing,
    customMediaRef = _ref.mediaRef,
    className = _ref.className;
  var trackScreenMedia = useTrackScreenMedia('video');
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _useViewerNavigation = useViewerNavigation(),
    gotoNextScreen = _useViewerNavigation.gotoNextScreen;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var mediaShouldLoad = current || active;
  var shouldGotoNextScreenOnEnd = gotoNextScreenOnEnd && isView && current;
  var _ref2 = video || {},
    _ref2$autoPlay = _ref2.autoPlay,
    autoPlay = _ref2$autoPlay === void 0 ? true : _ref2$autoPlay,
    _ref2$loop = _ref2.loop,
    loop = _ref2$loop === void 0 ? false : _ref2$loop,
    _ref2$media = _ref2.media,
    videoMedia = _ref2$media === void 0 ? null : _ref2$media,
    _ref2$thumbnail = _ref2.thumbnail,
    thumbnail = _ref2$thumbnail === void 0 ? null : _ref2$thumbnail,
    _ref2$captions = _ref2.captions,
    captions = _ref2$captions === void 0 ? null : _ref2$captions,
    _ref2$closedCaptions = _ref2.closedCaptions,
    closedCaptions = _ref2$closedCaptions === void 0 ? null : _ref2$closedCaptions,
    _ref2$withSeekBar = _ref2.withSeekBar,
    withSeekBar = _ref2$withSeekBar === void 0 ? false : _ref2$withSeekBar,
    _ref2$withControls = _ref2.withControls,
    withControls = _ref2$withControls === void 0 ? false : _ref2$withControls,
    _ref2$color = _ref2.color,
    color = _ref2$color === void 0 ? null : _ref2$color,
    _ref2$progressColor = _ref2.progressColor,
    progressColor = _ref2$progressColor === void 0 ? null : _ref2$progressColor;
  var _usePlaybackContext = usePlaybackContext(),
    playing = _usePlaybackContext.playing,
    muted = _usePlaybackContext.muted,
    setControls = _usePlaybackContext.setControls,
    setControlsSuggestPlay = _usePlaybackContext.setControlsSuggestPlay,
    setControlsTheme = _usePlaybackContext.setControlsTheme,
    setPlaying = _usePlaybackContext.setPlaying,
    controlsVisible = _usePlaybackContext.controlsVisible,
    showControls = _usePlaybackContext.showControls,
    hideControls = _usePlaybackContext.hideControls;
  var mediaRef = usePlaybackMediaRef(current);
  var _useState = React.useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    hasPlayed = _useState2[0],
    setHasPlayed = _useState2[1];
  var backgroundPlaying = current && (isView || isEdit);
  var videoPlaying = current && (isView || isEdit) && playing;
  var shouldDisplayPoster = isPreview || isCapture;
  React.useEffect(function () {
    if (!current) {
      return function () {};
    }
    setControlsTheme({
      seekBarOnly: withSeekBar && !withControls,
      color: color,
      progressColor: progressColor
    });
    if (withControls || withSeekBar) {
      setControls(true);
    } else {
      setControls(false);
    }
    return function () {
      if (withControls || withSeekBar) {
        setControls(false);
      }
    };
  }, [current, withControls, setControls, withSeekBar, color, progressColor]);
  React.useEffect(function () {
    if (customMediaRef !== null) {
      customMediaRef(mediaRef.current);
    }
  }, [mediaRef.current]);
  React.useEffect(function () {
    if (current && autoPlay) {
      setPlaying(true);
    }
  }, [current, autoPlay]);
  var viewerContainer = useViewerContainer();
  var _useActivityDetector = useActivityDetector({
      element: viewerContainer,
      disabled: !isView,
      timeout: 2000
    }),
    activityDetected = _useActivityDetector.detected;
  var toggleControlsVisibility = React.useCallback(function () {
    if (activityDetected) {
      showControls();
    } else {
      hideControls();
    }
  }, [activityDetected, showControls, hideControls]);
  useDebounced$1(toggleControlsVisibility, activityDetected, 1000);
  var _useState3 = React.useState(null),
    _useState4 = _slicedToArray(_useState3, 2),
    currentTime = _useState4[0],
    setCurrentTime = _useState4[1];
  var _useState5 = React.useState(null),
    _useState6 = _slicedToArray(_useState5, 2),
    duration = _useState6[0],
    setDuration = _useState6[1];
  var onTimeUpdate = React.useCallback(function () {
    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
    if (time !== null && typeof time.currentTarget !== 'undefined') {
      var _ref3 = time.currentTarget || {},
        _ref3$currentTime = _ref3.currentTime,
        targetTime = _ref3$currentTime === void 0 ? 0 : _ref3$currentTime;
      setCurrentTime(targetTime);
    } else {
      setCurrentTime(0);
    }
  }, [duration, setCurrentTime]);
  var onProgressStep = React.useCallback(function (step) {
    trackScreenMedia(video, "progress_".concat(Math.round(step * 100, 10), "%"));
  }, [trackScreenMedia, video]);
  var onDurationChange = React.useCallback(function (dur) {
    setDuration(dur);
  }, [setDuration]);
  var onPlay = React.useCallback(function (_ref4) {
    var initial = _ref4.initial;
    if (!hasPlayed) {
      setHasPlayed(true);
    }
    trackScreenMedia(video, initial ? 'play' : 'resume');
  }, [trackScreenMedia, video]);
  var onPause = React.useCallback(function (_ref5) {
    var midway = _ref5.midway;
    trackScreenMedia(video, midway ? 'pause' : 'ended');
  }, [trackScreenMedia, video]);
  var onSeeked = React.useCallback(function (time) {
    if (time > 0) {
      trackScreenMedia(video, 'seek');
    }
  }, [trackScreenMedia, video]);
  var onEnded = React.useCallback(function () {
    if (current && !loop) {
      setPlaying(false);
    }
    if (current && shouldGotoNextScreenOnEnd) {
      gotoNextScreen();
    }
  }, [loop, current, shouldGotoNextScreenOnEnd, gotoNextScreen]);
  var fullscreen = layout === 'full';
  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview
  });
  var hasVideo = video !== null;
  var _useState7 = React.useState(hasVideo),
    _useState8 = _slicedToArray(_useState7, 2),
    ready = _useState8[0],
    setReady = _useState8[1];
  var finalVideo = React.useMemo(function () {
    return hasVideo ? _objectSpread$1(_objectSpread$1({}, video), {}, {
      autoPlay: !isPreview && !isStatic && !isCapture && autoPlay && current
    }) : null;
  }, [hasVideo, video, isPreview, isStatic, isCapture, autoPlay, current]);
  var _ref6 = videoMedia || {},
    _ref6$metadata = _ref6.metadata,
    videoMetadata = _ref6$metadata === void 0 ? null : _ref6$metadata,
    _ref6$url = _ref6.url,
    videoUrl = _ref6$url === void 0 ? null : _ref6$url;
  var finalThumbnail = useMediaThumbnail(videoMedia, thumbnail);
  var hasVideoUrl = videoUrl !== null;
  var _ref7 = videoMetadata || {},
    _ref7$width = _ref7.width,
    videoWidth = _ref7$width === void 0 ? 0 : _ref7$width,
    _ref7$height = _ref7.height,
    videoHeight = _ref7$height === void 0 ? 0 : _ref7$height;
  var _getSizeWithinBounds = getSizeWithinBounds(videoWidth, videoHeight, width, height, {
      cover: fullscreen
    }),
    resizedVideoWidth = _getSizeWithinBounds.width,
    resizedVideoHeight = _getSizeWithinBounds.height;
  var resizedVideoLeft = -(resizedVideoWidth - width) / 2;
  var resizedVideoTop = -(resizedVideoHeight - height) / 2;
  var placeholderProps = fullscreen ? {
    width: '100%',
    height: '100%'
  } : {
    width: '100%'
  };
  React.useEffect(function () {
    setReady(!hasVideoUrl);
  }, [videoUrl, hasVideoUrl, setReady]);
  var onVideoReady = React.useCallback(function () {
    setReady(true);
  }, [setReady]);

  // const onSuspended = useCallback(() => {
  //     if (playing && current) {
  //         setPlaying(false);
  //     }
  // }, [current, playing, setPlaying]);

  var onPlayError = React.useCallback(function () {
    if (isView && playing && current && hasVideoUrl && autoPlay) {
      setPlaying(false);
      setControlsSuggestPlay(true);
    }
  }, [isView, current, playing, hasVideoUrl, autoPlay, setPlaying, setControlsSuggestPlay]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles$1.container, _defineProperty(_defineProperty({}, className, className !== null), styles$1.fullscreen, fullscreen)]),
    "data-screen-ready": isStatic || isCapture || ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles$1.content
  }, /*#__PURE__*/React.createElement("div", {
    className: styles$1.inner
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    key: "header",
    className: styles$1.header,
    style: {
      paddingTop: spacing / 2,
      paddingLeft: spacing,
      paddingRight: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, Object.assign({
    fade: current && !controlsVisible
  }, header))) : null, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "video",
    placeholder: /*#__PURE__*/React.createElement(Video$1$1, Object.assign({
      className: styles$1.placeholder
    }, placeholderProps)),
    empty: /*#__PURE__*/React.createElement("div", {
      className: styles$1.emptyContainer
    }, /*#__PURE__*/React.createElement(Empty$1, {
      className: styles$1.empty
    }, /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "3ext9Q",
      defaultMessage: [{
        "type": 0,
        "value": "Video"
      }]
    }))),
    isEmpty: !hasVideoUrl
  }, hasVideoUrl ? /*#__PURE__*/React.createElement("div", {
    className: styles$1.videoContainer,
    style: {
      width: resizedVideoWidth,
      height: resizedVideoHeight,
      left: resizedVideoLeft,
      top: resizedVideoTop
    }
  }, shouldDisplayPoster ? /*#__PURE__*/React.createElement(Image$1$1, {
    className: styles$1.image,
    media: finalThumbnail,
    width: resizedVideoWidth,
    height: resizedVideoHeight,
    objectFit: {
      fit: 'cover'
    },
    resolution: resolution,
    shouldLoad: mediaShouldLoad
  }) : /*#__PURE__*/React.createElement(Video$1, Object.assign({}, finalVideo, {
    width: resizedVideoWidth,
    height: resizedVideoHeight,
    paused: !videoPlaying,
    muted: muted,
    mediaRef: mediaRef,
    className: styles$1.video,
    onReady: onVideoReady,
    onPlay: onPlay,
    onPause: onPause,
    onTimeUpdate: onTimeUpdate,
    onProgressStep: onProgressStep,
    onDurationChange: onDurationChange,
    onSeeked: onSeeked,
    onEnded: onEnded
    // onSuspended={onSuspended}
    ,
    onPlayError: onPlayError,
    disablePictureInPicture: true,
    focusable: current && isView,
    shouldLoad: mediaShouldLoad
  }))) : null), !isPlaceholder ? /*#__PURE__*/React.createElement("div", {
    key: "bottom-content",
    className: styles$1.bottom,
    style: {
      transform: current && !isPreview ? "translate3d(0, -".concat(viewerBottomHeight, "px, 0)") : null,
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingBottom: spacing / 2,
      paddingTop: 0
    }
  }, (closedCaptions !== null || captions !== null) && !isPreview && !isCapture && !isStatic ? /*#__PURE__*/React.createElement(ClosedCaptions$1, Object.assign({
    className: styles$1.closedCaptions,
    media: closedCaptions // BW Compat
  }, captions, {
    currentTime: currentTime
  })) : null, hasFooter ? /*#__PURE__*/React.createElement(Footer, footerProps) : null) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    withoutVideo: isPreview
  }) : null);
};
VideoScreen.propTypes = propTypes$1;
VideoScreen.defaultProps = defaultProps$1;
var VideoScreen$1 = VideoScreen;

var definition$1 = {
  id: 'video',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "+9akmg",
      defaultMessage: [{
        "type": 0,
        "value": "Audio and Video"
      }]
    }),
    order: 5
  },
  title: reactIntl.defineMessage({
    id: "UBXIYP",
    defaultMessage: [{
      "type": 0,
      "value": "Video"
    }]
  }),
  component: VideoScreen$1,
  layouts: ['middle', 'full'],
  // transforms,
  fields: [{
    name: 'layout',
    type: 'screen-layout',
    defaultValue: 'middle',
    label: reactIntl.defineMessage({
      id: "4iBXj2",
      defaultMessage: [{
        "type": 0,
        "value": "Layout"
      }]
    })
  }, {
    name: 'video',
    type: 'video-element',
    theme: {
      color: 'primary'
    },
    defaultValue: {
      autoPlay: true
    },
    label: reactIntl.defineMessage({
      id: "tvl2Zc",
      defaultMessage: [{
        "type": 0,
        "value": "Video"
      }]
    })
  }, {
    name: 'gotoNextScreenOnEnd',
    type: 'toggle',
    defaultValue: false,
    label: reactIntl.defineMessage({
      id: "n8zmLY",
      defaultMessage: [{
        "type": 0,
        "value": "Go to next screen on end"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

/**
 * Locale loader
 */
var packageCache = null;
var useThree = function useThree() {
  // transport
  var _useState = React.useState({
      "package": packageCache
    }),
    _useState2 = _slicedToArray(_useState, 2),
    loadedPackage = _useState2[0]["package"],
    setLoadedPackage = _useState2[1];
  React.useEffect(function () {
    var canceled = false;
    if (loadedPackage !== null) {
      return function () {
        canceled = true;
      };
    }
    import('three').then(function (_ref) {
      var Scene = _ref.Scene,
        PerspectiveCamera = _ref.PerspectiveCamera,
        SphereBufferGeometry = _ref.SphereBufferGeometry,
        VideoTexture = _ref.VideoTexture,
        MeshBasicMaterial = _ref.MeshBasicMaterial,
        Mesh = _ref.Mesh,
        WebGLRenderer = _ref.WebGLRenderer,
        MathUtils = _ref.MathUtils;
      packageCache = {
        Scene: Scene,
        PerspectiveCamera: PerspectiveCamera,
        SphereBufferGeometry: SphereBufferGeometry,
        VideoTexture: VideoTexture,
        MeshBasicMaterial: MeshBasicMaterial,
        Mesh: Mesh,
        WebGLRenderer: WebGLRenderer,
        MathUtils: MathUtils
      };
      if (!canceled) {
        setLoadedPackage({
          "package": packageCache
        });
      }
    });
    return function () {
      canceled = true;
    };
  }, [loadedPackage, setLoadedPackage]);
  return loadedPackage;
};

var styles = {"container":"micromag-screen-video-360-container","canvasButton":"micromag-screen-video-360-canvasButton","placeholder":"micromag-screen-video-360-placeholder","inner":"micromag-screen-video-360-inner","canvas":"micromag-screen-video-360-canvas","video":"micromag-screen-video-360-video","background":"micromag-screen-video-360-background","disabled":"micromag-screen-video-360-disabled","hidden":"micromag-screen-video-360-hidden","content":"micromag-screen-video-360-content","empty":"micromag-screen-video-360-empty","videoContainer":"micromag-screen-video-360-videoContainer","mediaControls":"micromag-screen-video-360-mediaControls","header":"micromag-screen-video-360-header","bottom":"micromag-screen-video-360-bottom","showVideo":"micromag-screen-video-360-showVideo"};

var propTypes = {
  layout: PropTypes$1.oneOf(['full']),
  video: PropTypes.videoElement,
  header: PropTypes.header,
  footer: PropTypes.footer,
  background: PropTypes.backgroundElement,
  current: PropTypes$1.bool,
  active: PropTypes$1.bool,
  type: PropTypes$1.string,
  spacing: PropTypes$1.number,
  mediaRef: PropTypes$1.func,
  className: PropTypes$1.string
};
var defaultProps = {
  layout: 'full',
  video: null,
  header: null,
  footer: null,
  background: null,
  current: true,
  active: true,
  type: null,
  spacing: 20,
  mediaRef: null,
  className: null
};
var Video360Screen = function Video360Screen(_ref) {
  _ref.layout;
    var video = _ref.video,
    header = _ref.header,
    footer = _ref.footer,
    background = _ref.background,
    current = _ref.current,
    active = _ref.active,
    type = _ref.type,
    spacing = _ref.spacing,
    customMediaRef = _ref.mediaRef,
    className = _ref.className;
  var THREE = useThree();
  var trackScreenEvent = useTrackScreenEvent(type);
  var trackScreenMedia = useTrackScreenMedia('video_360');
  var _useViewerInteraction = useViewerInteraction(),
    enableInteraction = _useViewerInteraction.enableInteraction,
    disableInteraction = _useViewerInteraction.disableInteraction;
  var _useViewerNavigation = useViewerNavigation(),
    gotoPreviousScreen = _useViewerNavigation.gotoPreviousScreen,
    gotoNextScreen = _useViewerNavigation.gotoNextScreen;
  var _useViewerContext = useViewerContext(),
    viewerTopHeight = _useViewerContext.topHeight,
    viewerBottomHeight = _useViewerContext.bottomHeight,
    viewerBottomSidesWidth = _useViewerContext.bottomSidesWidth;
  var _useScreenSize = useScreenSize(),
    width = _useScreenSize.width,
    height = _useScreenSize.height,
    landscape = _useScreenSize.landscape,
    resolution = _useScreenSize.resolution;
  var _useScreenRenderConte = useScreenRenderContext(),
    isView = _useScreenRenderConte.isView,
    isPreview = _useScreenRenderConte.isPreview,
    isPlaceholder = _useScreenRenderConte.isPlaceholder,
    isEdit = _useScreenRenderConte.isEdit,
    isStatic = _useScreenRenderConte.isStatic,
    isCapture = _useScreenRenderConte.isCapture;
  var _useViewerWebView = useViewerWebView(),
    openWebView = _useViewerWebView.open;
  var backgroundPlaying = current && (isView || isEdit);
  var mediaShouldLoad = current || active;
  var _ref2 = video || {},
    _ref2$media = _ref2.media,
    videoMedia = _ref2$media === void 0 ? null : _ref2$media,
    _ref2$closedCaptions = _ref2.closedCaptions,
    closedCaptions = _ref2$closedCaptions === void 0 ? null : _ref2$closedCaptions,
    _ref2$captions = _ref2.captions,
    captions = _ref2$captions === void 0 ? null : _ref2$captions,
    _ref2$withSeekBar = _ref2.withSeekBar,
    withSeekBar = _ref2$withSeekBar === void 0 ? false : _ref2$withSeekBar,
    _ref2$withControls = _ref2.withControls,
    withControls = _ref2$withControls === void 0 ? false : _ref2$withControls,
    _ref2$autoPlay = _ref2.autoPlay,
    autoPlay = _ref2$autoPlay === void 0 ? true : _ref2$autoPlay,
    _ref2$color = _ref2.color,
    color = _ref2$color === void 0 ? null : _ref2$color,
    _ref2$progressColor = _ref2.progressColor,
    progressColor = _ref2$progressColor === void 0 ? null : _ref2$progressColor;
  var videoContainerRef = React.useRef();
  var _usePlaybackContext = usePlaybackContext(),
    playing = _usePlaybackContext.playing,
    muted = _usePlaybackContext.muted,
    setControls = _usePlaybackContext.setControls,
    setControlsTheme = _usePlaybackContext.setControlsTheme,
    setControlsSuggestPlay = _usePlaybackContext.setControlsSuggestPlay,
    setMedia = _usePlaybackContext.setMedia,
    setPlaying = _usePlaybackContext.setPlaying,
    showControls = _usePlaybackContext.showControls,
    hideControls = _usePlaybackContext.hideControls;
  var mediaRef = React.useRef(null);
  React.useEffect(function () {
    if (!current) {
      return function () {};
    }
    if (withControls || withSeekBar) {
      setControls(true);
      setControlsTheme({
        seekBarOnly: withSeekBar && !withControls,
        color: color,
        progressColor: progressColor
      });
    } else {
      setControls(false);
    }
    return function () {
      if (withControls || withSeekBar) {
        setControls(false);
      }
    };
  }, [current, withControls, setControls, withSeekBar, color, progressColor]);
  React.useEffect(function () {
    if (!current) {
      return function () {};
    }
    setMedia(mediaRef.current);
    return function () {
      setMedia(null);
    };
  }, [current]);
  React.useEffect(function () {
    if (customMediaRef !== null) {
      customMediaRef(mediaRef.current);
    }
  }, [mediaRef.current]);
  React.useEffect(function () {
    if (current && autoPlay && !playing) {
      setPlaying(true);
    }
  }, [current, autoPlay]);
  var viewerContainer = useViewerContainer();
  var _useActivityDetector = useActivityDetector({
      element: viewerContainer,
      disabled: !isView,
      timeout: 2000
    }),
    activityDetected = _useActivityDetector.detected;
  var toggleControlsVisibility = React.useCallback(function () {
    if (activityDetected) {
      showControls();
    } else {
      hideControls();
    }
  }, [activityDetected, showControls, hideControls]);
  useDebounced$1(toggleControlsVisibility, activityDetected, 1000);
  var _useState = React.useState(null),
    _useState2 = _slicedToArray(_useState, 2),
    currentTime = _useState2[0],
    setCurrentTime = _useState2[1];
  var _useState3 = React.useState(null),
    _useState4 = _slicedToArray(_useState3, 2),
    duration = _useState4[0],
    setDuration = _useState4[1];
  var onTimeUpdate = React.useCallback(function (time) {
    setCurrentTime(time);
  }, [setDuration, duration]);
  var onProgressStep = React.useCallback(function (step) {
    trackScreenMedia(video, "progress_".concat(Math.round(step * 100, 10), "%"));
  }, [trackScreenMedia, video]);
  var onDurationChange = React.useCallback(function (dur) {
    setDuration(dur);
  }, [setDuration]);
  var onPlay = React.useCallback(function (_ref3) {
    var initial = _ref3.initial;
    trackScreenMedia(video, initial ? 'play' : 'resume');
  }, [trackScreenMedia, video]);
  var onPause = React.useCallback(function (_ref4) {
    var midway = _ref4.midway;
    trackScreenMedia(video, midway ? 'pause' : 'ended');
  }, [trackScreenMedia, video]);
  var onSeeked = React.useCallback(function (time) {
    if (time > 0) {
      trackScreenMedia(video, 'seek');
    }
  }, [trackScreenMedia, video]);
  var onEnded = React.useCallback(function () {
    if (current) {
      setPlaying(false);
    }
  }, [current, setPlaying]);

  // ------------------------------------

  var hasVideo = video !== null;
  var _useState5 = React.useState(!hasVideo),
    _useState6 = _slicedToArray(_useState5, 2),
    ready = _useState6[0],
    setReady = _useState6[1];

  // const transitionPlaying = current && ready;
  // const transitionDisabled = isStatic || isCapture || isPlaceholder || isPreview || isEdit;

  var hasHeader = isHeaderFilled$1(header);
  var hasFooter = isFooterFilled$1(footer);
  var footerProps = getFooterProps$1(footer, {
    isView: isView,
    current: current,
    openWebView: openWebView,
    isPreview: isPreview,
    enableInteraction: enableInteraction,
    disableInteraction: disableInteraction
  });
  var finalVideo = hasVideo ? _objectSpread$1(_objectSpread$1({}, video), {}, {
    autoPlay: !isPreview && !isStatic && !isCapture && autoPlay && current
  }) : null;
  var _ref5 = videoMedia || {},
    _ref5$metadata = _ref5.metadata,
    videoMetadata = _ref5$metadata === void 0 ? null : _ref5$metadata,
    _ref5$url = _ref5.url,
    videoUrl = _ref5$url === void 0 ? null : _ref5$url,
    _ref5$thumbnail_url = _ref5.thumbnail_url,
    thumbnailUrl = _ref5$thumbnail_url === void 0 ? null : _ref5$thumbnail_url;
  var hasVideoUrl = videoUrl !== null;
  var _ref6 = videoMetadata || {},
    _ref6$width = _ref6.width,
    videoWidth = _ref6$width === void 0 ? 0 : _ref6$width,
    _ref6$height = _ref6.height,
    videoHeight = _ref6$height === void 0 ? 0 : _ref6$height;
  var hasThumbnail = thumbnailUrl !== null;
  var _useState7 = React.useState(!hasThumbnail),
    _useState8 = _slicedToArray(_useState7, 2),
    posterReady = _useState8[0],
    setPosterReady = _useState8[1];
  var withVideoSphere = hasVideoUrl && (isView || isEdit) && !isCapture && !isStatic;
  var _getSizeWithinBounds = getSizeWithinBounds(videoWidth, videoHeight, width, height, {
      cover: true
    }),
    resizedVideoWidth = _getSizeWithinBounds.width,
    resizedVideoHeight = _getSizeWithinBounds.height;
  var resizedVideoLeft = -(resizedVideoWidth - width) / 2;
  var resizedVideoTop = -(resizedVideoHeight - height) / 2;
  React.useEffect(function () {
    setReady(!hasVideoUrl);
  }, [videoUrl, hasVideoUrl, setReady]);
  React.useEffect(function () {
    setPosterReady(!hasThumbnail);
  }, [thumbnailUrl, hasThumbnail, setPosterReady]);
  var onVideoReady = React.useCallback(function () {
    setReady(true);
  }, [setReady]);
  var onPosterLoaded = React.useCallback(function () {
    setPosterReady(true);
  }, [posterReady]);

  // 3D layer  --------------------------

  var canvasRef = React.useRef(null);
  var camera = React.useRef(null);
  var scene = React.useRef(null);
  var renderer = React.useRef(null);
  var lon = React.useRef(0);
  var lat = React.useRef(0);
  var phi = React.useRef(0);
  var theta = React.useRef(0);
  var distance = React.useRef(50);
  var pointerDown = React.useRef(false);
  var pointerDownX = React.useRef(0);
  var pointerDownY = React.useRef(0);
  var pointerLon = React.useRef(0);
  var pointerLat = React.useRef(0);

  // render 3D frame

  var render3D = React.useCallback(function () {
    if (THREE === null) {
      return;
    }
    var MathUtils = THREE.MathUtils;
    lat.current = Math.max(-85, Math.min(85, lat.current));
    phi.current = MathUtils.degToRad(90 - lat.current);
    theta.current = MathUtils.degToRad(lon.current);
    camera.current.position.x = distance.current * Math.sin(phi.current) * Math.cos(theta.current);
    camera.current.position.y = distance.current * Math.cos(phi.current);
    camera.current.position.z = distance.current * Math.sin(phi.current) * Math.sin(theta.current);
    camera.current.lookAt(0, 0, 0);
    renderer.current.render(scene.current, camera.current);
  }, []);

  // Init 3D layer

  React.useEffect(function () {
    if (THREE !== null && hasVideoUrl && withVideoSphere) {
      var Scene = THREE.Scene,
        PerspectiveCamera = THREE.PerspectiveCamera,
        SphereBufferGeometry = THREE.SphereBufferGeometry,
        VideoTexture = THREE.VideoTexture,
        MeshBasicMaterial = THREE.MeshBasicMaterial,
        Mesh = THREE.Mesh,
        WebGLRenderer = THREE.WebGLRenderer;
      var _canvasRef$current = canvasRef.current,
        canvasWidth = _canvasRef$current.offsetWidth,
        canvasHeight = _canvasRef$current.offsetHeight;
      camera.current = new PerspectiveCamera(75, canvasWidth / canvasHeight, 1, 1100);
      scene.current = new Scene();
      var geometry = new SphereBufferGeometry(500, 60, 40);
      geometry.scale(-1, 1, 1);
      var _ref7 = mediaRef || {},
        _ref7$current = _ref7.current,
        videoElement = _ref7$current === void 0 ? null : _ref7$current;
      var videoTexture = new VideoTexture(videoElement);
      var videoMaterial = new MeshBasicMaterial({
        map: videoTexture
      });
      var mesh = new Mesh(geometry, videoMaterial);
      scene.current.add(mesh);
      renderer.current = new WebGLRenderer({
        canvas: canvasRef.current
      });
      renderer.current.setPixelRatio(typeof window !== 'undefined' ? window.devicePixelRatio : 1);
      renderer.current.setSize(canvasWidth, canvasHeight);
      render3D();
    }
    return function () {
      if (withVideoSphere) {
        camera.current = null;
        scene.current = null;
        renderer.current = null;
      }
    };
  }, [hasVideoUrl, withVideoSphere, render3D]);
  useAnimationFrame$1(render3D, {
    disabled: !withVideoSphere
  });

  // Resize 3D layer

  React.useEffect(function () {
    if (camera.current !== null && renderer.current !== null) {
      camera.current.aspect = width / height;
      camera.current.updateProjectionMatrix();
      renderer.current.setSize(width, height);
    }
  }, [width, height]);

  // Pointer interaction
  var togglePlayTimeout = React.useRef(null);
  var onPointerDown = React.useCallback(function (e) {
    pointerDown.current = true;
    pointerDownX.current = e.clientX;
    pointerDownY.current = e.clientY;
    pointerLon.current = lon.current;
    pointerLat.current = lat.current;
    // if (togglePlayTimeout.current !== null) {
    //     clearTimeout(togglePlayTimeout.current);
    // }
    // togglePlayTimeout.current = setTimeout(() => {
    //     togglePlay();
    //     togglePlayTimeout.current = null;
    // }, 300);
  }, [
    /* togglePlay */
  ]);
  var pixelsMoved = React.useRef(0);
  var lastPointerClient = React.useRef(null);
  var pixelsMovedTracked = React.useRef(false);
  var onPointerMove = React.useCallback(function (e) {
    if (pointerDown.current) {
      var _ref8 = e || {},
        _ref8$clientX = _ref8.clientX,
        clientX = _ref8$clientX === void 0 ? null : _ref8$clientX,
        _ref8$clientY = _ref8.clientY,
        clientY = _ref8$clientY === void 0 ? null : _ref8$clientY;
      var downDeltaX = pointerDownX.current - clientX;
      var downDeltaY = pointerDownY.current - clientY;
      lon.current = downDeltaX * 0.2 + pointerLon.current;
      lat.current = downDeltaY * 0.2 + pointerLat.current;
      var _ref9 = lastPointerClient.current || {},
        _ref9$x = _ref9.x,
        lastX = _ref9$x === void 0 ? clientX : _ref9$x,
        _ref9$y = _ref9.y,
        lastY = _ref9$y === void 0 ? clientY : _ref9$y;
      var deltaX = Math.abs(lastX - clientX) || 0;
      var deltaY = Math.abs(lastY - clientY) || 0;
      pixelsMoved.current += deltaX + deltaY;
      if (!pixelsMovedTracked.current && pixelsMoved.current > Math.min(width, height)) {
        trackScreenEvent('drag_sphere', video.name);
        pixelsMovedTracked.current = true;
      }
      lastPointerClient.current = {
        x: clientX,
        y: clientY
      };
      if (Math.abs(downDeltaX) > 3 || Math.abs(downDeltaY) > 3) {
        if (togglePlayTimeout.current !== null) {
          clearTimeout(togglePlayTimeout.current);
          togglePlayTimeout.current = null;
        }
      }
    }
  }, [width, height, trackScreenEvent, video]);
  var onPointerUp = React.useCallback(function (e) {
    var videoContainer = videoContainerRef.current;
    if (pointerDown.current && videoContainer !== null) {
      var distX = Math.abs(pointerDownX.current - e.clientX);
      var distY = Math.abs(pointerDownY.current - e.clientY);
      var pixelsMovedTolerance = 3;
      var tapNextScreenWidthPercent = 0.5;
      var canTapToNavigate = !landscape && togglePlayTimeout.current !== null;
      var validNavigateTap = canTapToNavigate && distX < pixelsMovedTolerance && distY < pixelsMovedTolerance;
      if (validNavigateTap) {
        var _videoContainer$getBo = videoContainer.getBoundingClientRect(),
          _videoContainer$getBo2 = _videoContainer$getBo.left,
          containerX = _videoContainer$getBo2 === void 0 ? 0 : _videoContainer$getBo2,
          containerWidth = _videoContainer$getBo.width;
        var hasTappedLeft = e.clientX - containerX < containerWidth * (1 - tapNextScreenWidthPercent);
        if (hasTappedLeft) {
          if (gotoPreviousScreen !== null) {
            gotoPreviousScreen();
          }
        } else if (gotoNextScreen !== null) {
          gotoNextScreen();
        }
      }
      if (togglePlayTimeout.current !== null) {
        clearTimeout(togglePlayTimeout.current);
        togglePlayTimeout.current = null;
      }
    }
    pointerDown.current = false;
  }, [gotoPreviousScreen, gotoNextScreen, landscape]);
  var onPlayError = React.useCallback(function () {
    if (isView && playing && current && hasVideoUrl && autoPlay) {
      setPlaying(false);
      setControlsSuggestPlay(true);
    }
  }, [isView, current, playing, hasVideoUrl, autoPlay, setPlaying, setControlsSuggestPlay]);
  return /*#__PURE__*/React.createElement("div", {
    className: classNames([styles.container, _defineProperty(_defineProperty({}, className, className !== null), styles.showVideo, isPreview || isStatic || isCapture)]),
    "data-screen-ready": (isStatic || isCapture) && posterReady || ready
  }, /*#__PURE__*/React.createElement(Container$1, {
    width: width,
    height: height,
    className: styles.content
  }, withVideoSphere ? /*#__PURE__*/React.createElement("div", {
    ref: videoContainerRef,
    className: styles.videoContainer,
    style: {
      width: resizedVideoWidth,
      height: resizedVideoHeight,
      left: resizedVideoLeft,
      top: resizedVideoTop
    }
  }, /*#__PURE__*/React.createElement(Video$1, Object.assign({}, finalVideo, {
    mediaRef: mediaRef,
    className: styles.video,
    paused: !current || !playing,
    muted: muted,
    withoutCors: true,
    onReady: onVideoReady,
    onPlay: onPlay,
    onPause: onPause,
    onTimeUpdate: onTimeUpdate,
    onProgressStep: onProgressStep,
    onDurationChange: onDurationChange,
    onSeeked: onSeeked,
    onEnded: onEnded,
    onPosterLoaded: onPosterLoaded,
    onPlayError: onPlayError,
    setPlaying: setPlaying,
    focusable: current && isView,
    shouldLoad: mediaShouldLoad
  }))) : null, /*#__PURE__*/React.createElement("div", {
    className: styles.inner
  }, /*#__PURE__*/React.createElement(ScreenElement$1, {
    key: "video",
    placeholder: /*#__PURE__*/React.createElement(Video360$1, {
      className: styles.placeholder,
      width: "100%",
      height: "100%"
    }),
    emptyClassName: styles.empty,
    emptyLabel: /*#__PURE__*/React.createElement(reactIntl.FormattedMessage, {
      id: "oLtEu6",
      defaultMessage: [{
        "type": 0,
        "value": "Video 360"
      }]
    }),
    isEmpty: !withVideoSphere
  }, !isPlaceholder && hasHeader ? /*#__PURE__*/React.createElement("div", {
    key: "header",
    className: styles.header,
    style: {
      paddingTop: spacing / 2,
      paddingLeft: spacing,
      paddingRight: spacing,
      transform: !isPreview ? "translate(0, ".concat(viewerTopHeight, "px)") : null
    }
  }, /*#__PURE__*/React.createElement(Header, header)) : null, withVideoSphere ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("canvas", {
    ref: canvasRef,
    className: styles.canvas
  }), /*#__PURE__*/React.createElement("button", {
    className: styles.canvasButton,
    type: "button",
    "aria-label": "canvas-interaction",
    onPointerDown: onPointerDown,
    onPointerMove: onPointerMove,
    onPointerUp: onPointerUp,
    tabIndex: current && isView ? null : '-1'
  })) : /*#__PURE__*/React.createElement("div", {
    className: styles.videoContainer,
    style: {
      width: resizedVideoWidth,
      height: resizedVideoHeight,
      left: resizedVideoLeft,
      top: resizedVideoTop
    }
  }, /*#__PURE__*/React.createElement(Image$1$1, {
    className: styles.video,
    media: {
      url: thumbnailUrl,
      metadata: {
        width: videoWidth,
        height: videoHeight
      }
    },
    width: resizedVideoWidth,
    height: resizedVideoHeight,
    resolution: resolution
  }))), !isPlaceholder ? /*#__PURE__*/React.createElement("div", {
    key: "bottom-content",
    className: styles.bottom,
    style: {
      transform: current && !isPreview ? "translate(0, -".concat(viewerBottomHeight, "px)") : null,
      paddingLeft: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingRight: Math.max(spacing / 2, viewerBottomSidesWidth),
      paddingBottom: spacing / 2,
      paddingTop: 0
    }
  }, (closedCaptions !== null || captions !== null) && !isPreview && !isCapture && !isStatic ? /*#__PURE__*/React.createElement(ClosedCaptions$1, Object.assign({
    className: styles.closedCaptions,
    media: closedCaptions
  }, captions, {
    currentTime: currentTime
  })) : null, hasFooter ? /*#__PURE__*/React.createElement(Footer, Object.assign({}, footerProps, {
    className: styles.callToAction
  })) : null) : null)), !isPlaceholder ? /*#__PURE__*/React.createElement(BackgroundLayers$1, {
    background: background,
    width: width,
    height: height,
    resolution: resolution,
    playing: backgroundPlaying,
    muted: muted,
    shouldLoad: mediaShouldLoad,
    withoutVideo: isPreview,
    className: styles.background
  }) : null);
};
Video360Screen.propTypes = propTypes;
Video360Screen.defaultProps = defaultProps;
var Video360Screen$1 = Video360Screen;

// import * as transforms from './transforms/index';

var definition = {
  id: 'video-360',
  type: 'screen',
  group: {
    label: reactIntl.defineMessage({
      id: "+9akmg",
      defaultMessage: [{
        "type": 0,
        "value": "Audio and Video"
      }]
    }),
    order: 5
  },
  title: reactIntl.defineMessage({
    id: "GRVidW",
    defaultMessage: [{
      "type": 0,
      "value": "360 Video"
    }]
  }),
  component: Video360Screen$1,
  layouts: ['full'],
  // transforms,
  fields: [{
    name: 'video',
    type: 'video-element',
    theme: {
      color: 'primary'
    },
    defaultValue: {
      autoPlay: true
    },
    label: reactIntl.defineMessage({
      id: "tvl2Zc",
      defaultMessage: [{
        "type": 0,
        "value": "Video"
      }]
    })
  }, {
    name: 'background',
    type: 'background',
    label: reactIntl.defineMessage({
      id: "+MPZRu",
      defaultMessage: [{
        "type": 0,
        "value": "Background"
      }]
    })
  }, {
    name: 'header',
    type: 'header',
    label: reactIntl.defineMessage({
      id: "rhuDxI",
      defaultMessage: [{
        "type": 0,
        "value": "Header"
      }]
    }),
    theme: {
      badge: {
        label: {
          textStyle: 'badge'
        },
        boxStyle: 'badge'
      }
    }
  }, {
    name: 'footer',
    type: 'footer',
    label: reactIntl.defineMessage({
      id: "g4nybp",
      defaultMessage: [{
        "type": 0,
        "value": "Footer"
      }]
    }),
    theme: {
      callToAction: {
        label: {
          textStyle: 'cta'
        },
        boxStyle: 'cta'
      }
    }
  }]
};

var allScreens = /*#__PURE__*/Object.freeze({
    __proto__: null,
    article: definition$n,
    audio: definition$m,
    contribution: definition$l,
    conversation: definition$k,
    gallery: definition$j,
    galleryFeed: definition$i,
    image: definition$h,
    keypad: definition$g,
    map: definition$f,
    quiz: definition$e,
    quote: definition$d,
    ranking: definition$c,
    share: definition$b,
    slideshow: definition$a,
    survey: definition$9,
    text: definition$8,
    timeline: definition$7,
    title: definition$6,
    urbaniaArticle: definition$5,
    urbaniaArticleCard: definitionCard,
    urbaniaHoroscope: definition$4,
    urbaniaRecommendation: definition$3,
    urbaniaTrivia: definition$2,
    video: definition$1,
    video360: definition
});

function getDefaultExportFromCjs (x) {
	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
}

var fields$1 = process.env.NODE_ENV === 'production' ? require$$0 : null;

var fieldsPattern = /*@__PURE__*/getDefaultExportFromCjs(fields$1);

const manager = new ScreensManager$1(
    Object.keys(allScreens).reduce(
        (screens, key) => [
            ...screens,
            ...(isArray(allScreens[key]) ? allScreens[key] : [allScreens[key]]),
        ],
        [],
    ),
);
manager.setFieldsPattern(fieldsPattern);

function getScreenFields() {
    const mediasParser = new MediasParser({
        screensManager: manager,
        fieldsManager: manager$1,
    });

    const fontsParser = new FontsParser({
        screensManager: manager,
        fieldsManager: manager$1,
    });

    const mediasMap = manager.getDefinitions().reduce(
        (map, { id, fields }) => ({
            ...map,
            [id]: mediasParser.getFieldsPattern(fields).map((it) => it.toString()),
        }),
        {},
    );

    const fontsMap = manager.getDefinitions().reduce(
        (map, { id, fields }) => ({
            ...map,
            [id]: fontsParser.getFieldsPattern(fields).map((it) => it.toString()),
        }),
        {},
    );

    return {
        fonts: fontsMap,
        medias: mediasMap,
    };
}

let outDir;
commander.program.arguments('<out>').action((out) => {
    outDir = path.join(process.cwd(), out);
});

commander.program.parse(process.argv);

const fields = getScreenFields();
const { fonts: fontsMap, medias: mediasMap } = fields;

const fieldsJs = `module.exports = {
    fonts: {\n${Object.keys(fontsMap)
        .map(
            (key) =>
                `        "${key}": [\n${fontsMap[key]
                    .map((it) => `            ${it}`)
                    .join(',\n')}\n        ]`,
        )
        .join(',\n\n')}},
    medias: {\n${Object.keys(mediasMap)
        .map(
            (key) =>
                `        "${key}": [\n${mediasMap[key]
                    .map((it) => `            ${it}`)
                    .join(',\n')}\n        ]`,
        )
        .join(',\n\n')}}
};`;

fsExtra.writeFileSync(path.join(outDir, './fields.js'), fieldsJs);
fsExtra.writeJsonSync(path.join(outDir, './fields.json'), fields, {
    spaces: 4,
});
